 <h1 class="firstHeading" id="firstHeading">setJmp</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../../header/csetjmp" title="cpp/header/csetjmp">&lt;csetjmp&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">#Define setJmp (env) / * Xác định triển khai * / /</pre>
</td> <td class="t-dcl-nopad"> </td> <td class="t-dcl-nopad"> </td> </tr> </table> <p>Lưu bối cảnh thực thi hiện tại vào một biến<code>env</code>nó đến một đối tượng<code><a href="jmp_buf" title="cpp/utility/program/jmp buf">std::jmp_buf</a></code>. Biến này sau này có thể được sử dụng để khôi phục bối cảnh thực thi hiện tại bằng cách<code><a href="longjmp" title="cpp/utility/program/longjmp">std::longjmp</a></code>chức năng. Nghĩa là, khi một cuộc gọi đến<code><a href="longjmp" title="cpp/utility/program/longjmp">std::longjmp</a></code>chức năng được thực hiện, việc thực thi tiếp tục tại trang web cuộc gọi cụ thể được xây dựng<code><a href="jmp_buf" title="cpp/utility/program/jmp buf">std::jmp_buf</a></code>biến được truyền cho<code><a href="longjmp" title="cpp/utility/program/longjmp">std::longjmp</a></code>. Trong trường hợp đó<code>setjmp</code>Trả về giá trị được chuyển cho<code><a href="longjmp" title="cpp/utility/program/longjmp">std::longjmp</a></code>.</p>
<p>Sự cầu khẩn của<code>setjmp</code>phải chỉ xuất hiện trong một trong các bối cảnh sau:</p>
<ol>
<li>toàn bộ biểu thức kiểm soát của<a href="../../language/if" title="cpp/language/if"><code>if</code></a>Thì<a href="../../language/switch" title="cpp/language/switch"><code>switch</code></a>Thì<a href="../../language/while" title="cpp/language/while"><code>while</code></a>Thì<a href="../../language/do" title="cpp/language/do"><code>do-while</code></a>Thì<a href="../../language/for" title="cpp/language/for"><code>for</code></a>.<div class="cpp source-cpp"><pre data-language="cpp">Switch (setJmp (env)) {// ...</pre></div> </li>
<li>Một toán hạng của toán tử quan hệ hoặc bình đẳng với toán hạng khác là biểu thức hằng số nguyên, với biểu thức kết quả là toàn bộ biểu thức kiểm soát của<a href="../../language/if" title="cpp/language/if"><code>if</code></a>Thì<a href="../../language/switch" title="cpp/language/switch"><code>switch</code></a>Thì<a href="../../language/while" title="cpp/language/while"><code>while</code></a>Thì<a href="../../language/do" title="cpp/language/do"><code>do-while</code></a>Thì<a href="../../language/for" title="cpp/language/for"><code>for</code></a>.<div class="cpp source-cpp"><pre data-language="cpp">if (setJmp (env)&gt; 0) {// ...</pre></div> </li>
<li>Các hoạt động của một Unary! người vận hành với biểu thức kết quả là toàn bộ biểu thức kiểm soát của<a href="../../language/if" title="cpp/language/if"><code>if</code></a>Thì<a href="../../language/switch" title="cpp/language/switch"><code>switch</code></a>Thì<a href="../../language/while" title="cpp/language/while"><code>while</code></a>Thì<a href="../../language/do" title="cpp/language/do"><code>do-while</code></a>Thì<a href="../../language/for" title="cpp/language/for"><code>for</code></a>.<div class="cpp source-cpp"><pre data-language="cpp">while (! setJmp (env)) {// ...</pre></div> </li>
<li>toàn bộ biểu hiện của một<a href="../../language/statements#Expression_statements" title="cpp/language/statements">expression statement</a>(có thể đúc theo<span class="kw4">Vô hiệu</span>).<div class="cpp source-cpp"><pre data-language="cpp">setjmp (env);</pre></div> </li>
</ol> <p>Nếu như<code>setjmp</code>Xuất hiện trong bất kỳ bối cảnh nào khác, hành vi không được xác định.</p>
<table class="t-rev-begin"> <tr class="t-rev t-since-cxx20">
<td> <p>Ngoài ra, hành vi không được xác định nếu<code>setjmp</code>được gọi trong một<a href="../../language/coroutines" title="cpp/language/coroutines">coroutine</a>Ở một nơi có thể sử dụng toán tử Co_Await.</p>
</td> <td><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></td>
</tr> </table> <p>Khi trở lại phạm vi của<code>setjmp</code>:</p>
<ul>
<li>Tất cả các đối tượng có thể truy cập, cờ trạng thái dấu phẩy động và các thành phần khác của máy trừu tượng có các giá trị giống như chúng đã có khi<code><a href="longjmp" title="cpp/utility/program/longjmp">std::longjmp</a></code>đã được thực hiện,</li>
<li>ngoại trừ không<a href="../../language/cv" title="cpp/language/cv">volatile</a>các biến cục bộ trong hàm chứa lời cầu khẩn của<code>setjmp</code>, có giá trị không xác định nếu chúng đã bị thay đổi kể từ<code>setjmp</code>Mệnh viện.</li>
</ul> <h3 id="Parameters">) với giá trị ban đầu</h3> <table class="t-par-begin"> <tr class="t-par"> <td>Env</td> <td>-</td> <td>biến để lưu trạng thái thực thi của chương trình để</td>
</tr>
</table> <h3 id="Return_value">phải sao cho một đối tượng thuộc loại</h3> <p><code>​0​</code>Nếu macro được gọi bởi mã gốc và bối cảnh thực thi được lưu vào<code>env</code>.</p>
<p>Giá trị khác không nếu một bước nhảy không địa phương chỉ được thực hiện. Giá trị trả về giống như được chuyển cho<code><a href="longjmp" title="cpp/utility/program/longjmp">std::longjmp</a></code>.</p>
<h3 id="Notes">Ghi chú</h3> <p>Các yêu cầu trên bị cấm sử dụng giá trị trả lại của<code>setjmp</code>trong luồng dữ liệu (ví dụ: để khởi tạo hoặc gán một đối tượng với nó). Giá trị trả về chỉ có thể được sử dụng trong luồng điều khiển hoặc bị loại bỏ.</p>
<h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;mảng&gt;</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">#include &lt;Cmath&gt;</pre></div> </div> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="longjmp" title="cpp/utility/program/longjmp"> <span class="t-lines"><span>longjmp</span></span></a></div> </td> <td>Nhảy đến vị trí được chỉ định<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/program/setjmp" title="c/program/setjmp">C documentation</a></span>vì<code>setjmp</code> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/utility/program/setjmp">https://en.cppreference.com/w/cpp/utility/program/setjmp</a>
</p>
</div>
