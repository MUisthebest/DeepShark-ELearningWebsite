 <h1 class="firstHeading" id="firstHeading">STD :: Biến thể</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../header/variant" title="cpp/header/variant">&lt;variant&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">Mẫu &lt;class ... loại&gt;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx17">(C ++ 20)</span> </td> </tr> </table> <p>lớp HH_MM_SS;<code>std::variant</code>biến thể lớp;<a href="../language/union" title="cpp/language/union">union</a>. Một ví dụ của<code>std::variant</code>đại diện cho một loại an toàn<a href="variant/valueless_by_exception" title="cpp/utility/variant/valueless by exception"><code>valueless_by_exception</code></a>).</p>
<p>tại bất kỳ thời điểm nào, hoặc giữ giá trị của một trong các loại thay thế của nó hoặc trong trường hợp lỗi - không có giá trị (trạng thái này khó đạt được, xem<code>T</code>Như với các công đoàn, nếu một biến thể giữ giá trị của một loại đối tượng nào đó<code>T</code>, biểu diễn đối tượng của</p>
<p>được phân bổ trực tiếp trong biểu diễn đối tượng của chính biến thể. Biến thể không được phép phân bổ bộ nhớ bổ sung (động).<span class="kw4">Vô hiệu</span>Một biến thể không được phép giữ các tài liệu tham khảo, mảng hoặc loại<span class="sy4">::</span><span class="me2">khác nhau</span><span class="sy1">is_trivently_destructible_v</span><a href="http://en.cppreference.com/w/cpp/utility/variant/monostate"><span class="kw1097">Điều đó cho tất cả<span class="me2">Monostate</span></span></a><span class="sy1">&lt;</span>. Các biến thể trống cũng không được hình thành (STD</p>
<p>có thể được sử dụng thay thế).</p>
<p>Một biến thể được phép giữ cùng loại nhiều lần và giữ các phiên bản đủ điều kiện CV khác nhau của cùng một loại.<a href="../language/aggregate_initialization" title="cpp/language/aggregate initialization">aggregate initialization</a>Phù hợp với hành vi của các công đoàn trong<a href="variant/monostate" title="cpp/utility/variant/monostate"><code>std::monostate</code></a>, một biến thể được xây dựng mặc định giữ giá trị thay thế đầu tiên của nó, trừ khi sự thay thế đó không thể cấu trúc mặc định (trong trường hợp đó, biến thể cũng không thể cấu trúc mặc định). Lớp trợ giúp</p>
<h3 id="Template_parameters">là không xác định.</h3> <table class="t-par-begin"> <tr class="t-par"> <td>Loại</td> <td>-</td> <td>có thể được sử dụng để làm cho các biến thể như vậy được xây dựng mặc định.<a href="../named_req/destructible" title="cpp/named req/Destructible">Destructible</a>Các loại có thể được lưu trữ trong biến thể này. Tất cả các loại phải đáp ứng</td>
</tr>
</table> <h3 id="Member_functions">nếu không thì</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="variant/variant" title="cpp/utility/variant/variant"> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>các yêu cầu (đặc biệt, các loại mảng và các loại không phải đối tượng không được phép).<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/~variant" title="cpp/utility/variant/~variant"> <span class="t-lines"><span>một đối tượng ngoại lệ khác để gán với</span></span></a></div> </td> <td>xây dựng đối tượng biến thể<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/operator=" title="cpp/utility/variant/operator="> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>phá hủy biến thể, cùng với giá trị chứa của nó<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Observers">Quan sát viên</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/index" title="cpp/utility/variant/index"> <span class="t-lines"><span>Chỉ mục</span></span></a></div> </td> <td>gán một biến thể<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/valueless_by_exception" title="cpp/utility/variant/valueless by exception"> <span class="t-lines"><span>Trả về chỉ số dựa trên không của giải pháp thay thế được tổ chức bởi biến thể</span></span></a></div> </td> <td>Valueless_by_exception<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Modifiers">Sửa đổi</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/emplace" title="cpp/utility/variant/emplace"> <span class="t-lines"><span>Giảm sử dụng bộ nhớ bằng cách giải phóng bộ nhớ không sử dụng</span></span></a></div> </td> <td>kiểm tra xem biến thể ở trạng thái không hợp lệ<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/swap" title="cpp/utility/variant/swap"> <span class="t-lines"><span>Được xác định trong tiêu đề</span></span></a></div> </td> <td>xây dựng một giá trị trong biến thể, tại chỗ<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Visitation">hoán đổi với một biến thể khác</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/visit2" title="cpp/utility/variant/visit2"> <span class="t-lines"><span>thăm nom</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx26">(C ++ 26)</span></span></span></div> </td> <td>Thăm viếng<code>variant</code> <br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <h3 id="Non-member_functions">Các chức năng không phải thành viên</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="variant/visit" title="cpp/utility/variant/visit"> <span class="t-lines"><span>thăm nom</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>gọi các functor được cung cấp với các đối số được giữ bởi một hoặc nhiều biến thể<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/holds_alternative" title="cpp/utility/variant/holds alternative"> <span class="t-lines"><span>Holds_alternative</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>kiểm tra xem một biến thể hiện đang giữ một loại nhất định<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/get" title="cpp/utility/variant/get"> <span class="t-lines"><span>Điền vào thùng chứa với giá trị được chỉ định<span class="t-dsc-small">Thuật toán</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Một tham chiếu đến<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/get_if" title="cpp/utility/variant/get if"> <span class="t-lines"><span>get_if</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>thu được một con trỏ tới giá trị của biến thể nhọn để đưa ra chỉ mục hoặc loại (nếu duy nhất), trả về null khi lỗi<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/operator_cmp" title="cpp/utility/variant/operator cmp"> <span class="t-lines"><span>toán tử ==</span><span>toán tử! =</span><span>người vận hành*</span><span>toán tử &lt;=</span><span>toán tử&gt;</span><span>toán tử&gt; =</span><span>Nhà điều hành &lt;=&gt;</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx20">Phạm vi :: Construct_at</span></span></span></div> </td> <td>so sánh<code>variant</code>các đối tượng như các giá trị chứa của chúng<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/swap2" title="cpp/utility/variant/swap2"> <span class="t-lines"><span>chuyên về<span class="t-dsc-small">Thuật toán</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>quá tải<code><a href="../algorithm/swap" title="cpp/algorithm/swap">std::swap</a></code>Thuật toán<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> </table> <h3 id="Helper_classes">Lớp học trợ giúp</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="variant/monostate" title="cpp/utility/variant/monostate"> <span class="t-lines"><span>Monostate</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Loại trình giữ chỗ để sử dụng làm phương án đầu tiên trong một biến thể của các loại không thể chế tạo được<br/> <span class="t-mark">Các loại chính sách thực thi</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/bad_variant_access" title="cpp/utility/variant/bad variant access"> <span class="t-lines"><span>bad_variant_access</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Ngoại lệ được ném vào các quyền truy cập không hợp lệ vào giá trị của một biến thể<br/> <span class="t-mark">Các loại chính sách thực thi</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/variant_size" title="cpp/utility/variant/variant size"> <span class="t-lines"><span>biến thể_size</span><span>Biến thể_size_v</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>có được kích thước của danh sách các lựa chọn thay thế của biến thể tại thời điểm biên dịch<br/><span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> <span class="t-mark">(Mẫu biến)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/variant_alternative" title="cpp/utility/variant/variant alternative"> <span class="t-lines"><span>Biến thể_alternative</span><span>Biến thể_alternative_t</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>có được loại thay thế được chỉ định bởi chỉ số của nó, tại thời điểm biên dịch<br/><span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> <span class="t-mark">(Mẫu bí danh)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="variant/hash" title="cpp/utility/variant/hash"> <span class="t-lines"><span>STD :: Hash<span class="t-dsc-small">&lt;std :: biến thể&gt;</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Hỗ trợ băm cho<strong class="selflink"><code>std::variant</code></strong> <br/> <span class="t-mark">(Chuyên ngành mẫu lớp)</span> </td>
</tr> </table> <h3 id="Helper_objects">gọi cho functor được cung cấp với đối số được giữ bởi</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="variant/variant_npos" title="cpp/utility/variant/variant npos"> <span class="t-lines"><span>Biến thể_npos</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Chỉ mục của biến thể ở trạng thái không hợp lệ<br/> <span class="t-mark">Các đối tượng chính sách thực thi toàn cầu</span> </td>
</tr> </table> <h3 id="Notes">Ghi chú</h3> <table class="wikitable sortable ftm-begin ftm-has-value"> <tr> <th>
<a href="feature_test" title="cpp/utility/feature test">Feature-test</a>(Mẫu lớp)</th> <th>vĩ mô</th> <th><span title="Standard in which the feature is introduced">Giá trị</span></th> <th>STD</th>
</tr> <tr> <td rowspan="4"><a href="../feature_test#cpp_lib_variant" title="cpp/feature test"><code>__cpp_lib_variant</code></a></td> <td><span class="nu0">, khi toán hạng là tên của một đối tượng không bay hơi có thời lượng lưu trữ tự động, đây không phải là tham số hàm hoặc tham số mệnh đề bắt và phạm vi của họ không mở rộng qua khối thử trong cùng (nếu có khối thử).</span></td> <td><span class="t-mark">Dest_at</span></td> <td>
<a href="#top"><code>std::variant</code></a>Đối tượng trợ giúp</td>
</tr> <tr> <td><span class="nu0">202102L</span></td> <td>
<span class="t-mark">Dest_at</span><br/><span class="t-mark">(Dr)</span>
</td> <td>
<code><a href="variant/visit" title="cpp/utility/variant/visit">std::visit</a></code>cho các lớp học xuất phát từ<a href="#top"><code>std::variant</code></a> </td>
</tr> <tr> <td><span class="nu0">Chỉ giải thích*</span></td> <td>
<span class="t-mark">Phạm vi :: Construct_at</span><br/><span class="t-mark">(Dr)</span>
</td> <td>Đầy đủ<code>constexpr</code> <a href="#top"><code>std::variant</code></a> </td>
</tr> <tr> <td><span class="nu0">202306L</span></td> <td><span class="t-mark">(C ++ 26)</span></td> <td>Thành viên<a class="new" href="https://en.cppreference.com/mwiki/index.php?title=cpp/utility/visit&amp;action=edit&amp;redlink=1" title="cpp/utility/visit (page does not exist)"><code>visit</code></a> </td>
</tr>
</table> <h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">: một liên minh an toàn loại</pre></div> <p>#include &lt;Istream&gt;</p>
<div class="text source-text"><pre data-language="c">#include &lt;Cassert&gt;</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue2901" rel="nofollow">LWG 2901</a> </td> <td>C ++ 17</td> <td>chuyên môn hóa<code><a href="../memory/uses_allocator" title="cpp/memory/uses allocator">std::uses_allocator</a></code>#include &lt;Istream&gt;<br/> <code>std::variant</code>#include &lt;chuỗi&gt;</td> <td>#include &lt;Variant&gt;</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="in_place" title="cpp/utility/in place"> <span class="t-lines"><span>in_place</span><span>in_place_type</span><span>in_place_index</span><span>in_place_t</span><span>in_place_type_t</span><span>in_place_index_t</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Thẻ xây dựng tại chỗ<br/><span class="t-mark">(nhãn)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional" title="cpp/utility/optional"> <span class="t-lines"><span>không mở-cache</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>một trình bao bọc có thể hoặc không thể giữ một đối tượng<br/> <span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="any" title="cpp/utility/any"> <span class="t-lines"><span>bất kì</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>các đối tượng giữ các thể hiện của bất kỳ<a href="../named_req/copyconstructible" title="cpp/named req/CopyConstructible">CopyConstructible</a>kiểu<br/> <span class="t-mark">Các loại chính sách thực thi</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/utility/variant">https://en.cppreference.com/w/cpp/utility/variant</a>
</p>
</div>
