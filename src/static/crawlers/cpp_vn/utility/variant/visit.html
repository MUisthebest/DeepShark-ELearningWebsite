 <h1 class="firstHeading" id="firstHeading">STD :: Ghé thăm</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../../header/variant" title="cpp/header/variant">&lt;variant&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">Mẫu &lt;Lớp khách truy cập, lớp ... Biến thể&gt;</pre>
</td> <td>(1)</td> <td> <span class="t-mark-rev t-since-cxx17">(C ++ 20)</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">constexpr / * xem bên dưới * / truy cập (khách truy cập &amp;&amp; vis, biến thể &amp;&amp; ... vars);</pre>
</td> <td>(2)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> <tr class="t-dcl"> <td> <pre data-language="cpp">Mẫu &lt;Class R, Lớp khách truy cập, Lớp ... Biến thể&gt;</pre>
</td> <td>(3)</td> <td> <span class="t-mark t-mark-expos">.<span title="This definition is for illustration purposes only. An implementation does not need to define an entity in this manner. The name of this entity is unspecified.">    .</span>)</span> </td> </tr> <tr class="t-dcl"> <td> <pre data-language="cpp">LISTEXPR r Truy cập (Khách truy cập &amp;&amp; Vis, Variants &amp;&amp; ... Vars);</pre>
</td> <td>(4)</td> <td> <span class="t-mark t-mark-expos">.<span title="This definition is for illustration purposes only. An implementation does not need to define an entity in this manner. The name of this entity is unspecified.">    .</span>)</span> </td> </tr> <tr class="t-dcl"> <td> <pre data-language="cpp">Mẫu &lt;class ... ts&gt;</pre>
</td> <td>             Không có p);</td> <td> <span class="t-mark t-mark-expos">.<span title="This definition is for illustration purposes only. An implementation does not need to define an entity in this manner. The name of this entity is unspecified.">    .</span>)</span> </td> </tr> <tr class="t-dcl"> <td> <pre data-language="cpp">auto &amp;&amp; as-merart (std :: biến thể &lt;ts ...&gt; &amp; var);</pre>
</td> <td>Consexpr bool any_of (đầu vào đầu tiên, đầu vào cuối cùng, không được tính p);</td> <td> <span class="t-mark t-mark-expos">.<span title="This definition is for illustration purposes only. An implementation does not need to define an entity in this manner. The name of this entity is unspecified.">    .</span>)</span> </td> </tr> </table> <p>DeclType (Auto) Truy cập (BASIC_FORMAT_ARG ARG này, Khách truy cập &amp;&amp; Vis);<code>vis</code>(Một<a href="../../named_req/callable" title="cpp/named req/Callable">Callable</a>Mẫu &lt;class ... ts&gt;<code>vars</code>.</p>
<p>Cho quá tải<code>VariantBases</code>auto &amp;&amp; as-biến thể (const std :: biến thể &lt;ts ...&gt; &amp; var);<span class="br0">.</span><code><i>... (một gói</i></code><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1119">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>auto &amp;&amp; as-merart (std :: biến thể &lt;ts ...&gt; &amp;&amp; var);<span class="sy1">&lt;</span><span class="br0">.</span>Các mẫu chức năng chấp nhận một giá trị mà loại có thể<span class="br0">)</span><span class="br0">)</span>auto &amp;&amp; as-mtart (const std :: biến thể &lt;ts ...&gt; &amp;&amp; var);<code>sizeof...(Variants)</code>có thể được gọi với bất kỳ sự kết hợp của các loại từ các biến thể) đến các biến thể</p>
<div class="t-li1">
<span class="t-li">1)</span>Gọi<code>vis</code>Mẫu &lt;Class T&gt;<p><code><a href="../functional" title="cpp/utility/functional">INVOKE</a><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1119">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Visitor<span class="sy1">&lt;</span><span class="br0">.</span>vis<span class="br0">)</span>,<br/> <a href="http://en.cppreference.com/w/cpp/utility/variant/get"><span class="kw3216">Điều đó cho tất cả<span class="me2">Điền vào thùng chứa với giá trị được chỉ định</span></span></a><span class="sy1">is_trivently_destructible_v</span>indices<span class="sy1">&lt;</span><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1119">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>VariantBases<span class="sy1">&lt;</span><span class="br0">.</span>vars<span class="br0">)</span><span class="br0">)</span>...<span class="br0">)</span></code>và biểu thức đó là hợp lệ và có một<code>indices</code>khoảng cách<code>as-variant(vars).index()...</code>.</p>
</div> <div class="t-li1">
<span class="t-li">2)</span>Gọi<code>vis</code>Mẫu &lt;Class T&gt;<p><code><a href="../functional" title="cpp/utility/functional">INVOKE&lt;R&gt;</a><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1119">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Visitor<span class="sy1">&lt;</span><span class="br0">.</span>vis<span class="br0">)</span>,<br/> <a href="http://en.cppreference.com/w/cpp/utility/variant/get"><span class="kw3216">Điều đó cho tất cả<span class="me2">Điền vào thùng chứa với giá trị được chỉ định</span></span></a><span class="sy1">is_trivently_destructible_v</span>indices<span class="sy1">&lt;</span><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1119">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>VariantBases<span class="sy1">&lt;</span><span class="br0">.</span>vars<span class="br0">)</span><span class="br0">)</span>...<span class="br0">)</span></code>và biểu thức đó là hợp lệ và có một<code>indices</code>khoảng cách<code>as-variant(vars).index()...</code>.</p>
</div> <p>như DeclType<code>VariantBases</code>as-biến thể<a href="../functional" title="cpp/utility/functional"><code>INVOKE</code></a><span class="t-rev-inl t-since-cxx20"><span>hoặc<a href="../functional" title="cpp/utility/functional"><code>INVOKE&lt;R&gt;</code></a></span><span><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></span></span>Biến thể<a href="../functional" title="cpp/utility/functional"><code>INVOKE</code></a><span class="t-rev-inl t-since-cxx20"><span>hoặc<a href="../functional" title="cpp/utility/functional"><code>INVOKE&lt;R&gt;</code></a></span><span><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></span></span>vars<code>indices</code>, chương trình là xấu.</p>
<div class="t-li1">
<span class="t-li">wased_time (timezoneptrorrorname &amp;&amp;, std :: chrono :: local_time &lt;fending&gt;,</span>Chỉ dành cho giải trình<code><i>... (một gói</i></code>các loại):<a href="../../language/template_argument_deduction" title="cpp/language/template argument deduction">deduced</a>vì<code><a href="http://en.cppreference.com/w/cpp/utility/variant"><span class="kw1088">Điều đó cho tất cả<span class="me2">khác nhau</span></span></a><span class="sy1">is_trivently_destructible_v</span>Ts...<span class="sy1">&lt;</span></code>Những quá tải này chỉ tham gia vào độ phân giải quá tải nếu mọi loại trong<code><a href="http://en.cppreference.com/w/cpp/utility/variant"><span class="kw1088">Điều đó cho tất cả<span class="me2">khác nhau</span></span></a><span class="sy1">is_trivently_destructible_v</span>Ts...<span class="sy1">&lt;</span></code>là một loại hợp lệ. Nếu biểu thức được biểu thị bằng<code><a href="http://en.cppreference.com/w/cpp/utility/variant"><span class="kw1088">Điều đó cho tất cả<span class="me2">khác nhau</span></span></a><span class="sy1">is_trivently_destructible_v</span>Ts...<span class="sy1">&lt;</span></code>không hợp lệ, hoặc kết quả của<code><a href="../variant" title="cpp/utility/variant">std::variant</a></code>có các loại hoặc loại giá trị khác nhau cho các loại khác nhau</div> <div class="t-li2">
<span class="t-li">, hành vi là không xác định.</span>Mẫu &lt;Class execPolicy,<code>var</code>.</div> <div class="t-li2">
<span class="t-li">    trả về std :: find_if_not (đầu tiên, cuối cùng, p) == cuối cùng;</span>Mẫu &lt;Class execPolicy,<code>std::move(var)</code>.</div> <h3 id="Parameters">) với giá trị ban đầu</h3> <table class="t-par-begin"> <tr class="t-par"> <td>/ * Xem bên dưới */ visit_format_arg (khách truy cập &amp;&amp; vis, std :: basic_format_arg &lt;ngữ cảnh&gt; arg);</td> <td>-</td> <td>Một<a href="../../named_req/callable" title="cpp/named req/Callable">Callable</a>as-biến thể</td>
</tr> <tr class="t-par"> <td>Các mẫu chức năng chấp nhận một giá trị mà loại có thể</td> <td>-</td> <td>(tức là một trong hai</td>
</tr>
</table> <h3 id="Return_value">phải sao cho một đối tượng thuộc loại</h3> <div class="t-li1">
<span class="t-li">1)</span>hoặc một loại có nguồn gốc từ<a href="../functional" title="cpp/utility/functional"><code>INVOKE</code></a>) và trả lại<a href="../../language/decltype" title="cpp/language/decltype"><code>decltype</code></a>Giá trị với cùng một trình độ đủ điều kiện và danh mục giá trị.</div> <div class="t-li1">
<span class="t-li">2)</span>chấp nhận mọi sự thay thế có thể từ mọi biến thể<code>R</code>Chuyển đổi tiêu chuẩn được áp dụng để chuyển đổi biểu thức thành prvalue.<code>void</code>vars<a href="../functional" title="cpp/utility/functional"><code>INVOKE&lt;R&gt;</code></a>hoạt động.</div> <div class="t-li1">
<span class="t-li">wased_time (timezoneptrorrorname &amp;&amp;, std :: chrono :: local_time &lt;fending&gt;,</span>MỘT<code><a href="../variant" title="cpp/utility/variant">std::variant</a></code>Danh sách các biến thể để chuyển cho khách truy cập<code>var</code>.</div> <h3 id="Exceptions">Ngoại lệ</h3> <p>Ném<code><a href="bad_variant_access" title="cpp/utility/variant/bad variant access">std::bad_variant_access</a></code>nếu như<code>as-variant(vars_i).valueless_by_exception()</code>khoảng cách<code>true</code>Kết quả của<code>vars_i</code>TRONG<code>vars</code>.</p>
<h3 id="Complexity">Không hợp lệ bất kỳ trình lặp lại nào (bao gồm bất kỳ trình lặp cuối nào) hoặc sửa đổi bất kỳ yếu tố nào của các phạm vi liên quan, hành vi không được xác định.</h3> <p>hoạt động. Loại trả lại là loại thu được từ việc áp dụng</p>
<p>đến kết quả.</p>
<h3 id="Notes">Ghi chú</h3> <p>          lớp proj1 = std :: nhận dạng, lớp proj2 = std :: nhận dạng&gt;<code>n</code>{<code><span class="br0">.</span><span class="nu0">, nếu như</span> <span class="sy2">*</span> ... <span class="sy2">*</span> <a href="http://en.cppreference.com/w/cpp/utility/variant/variant_size"><span class="kw1094">Điều đó cho tất cả<span class="me2">Biến thể_size_v</span></span></a><span class="sy1">is_trivently_destructible_v</span><a href="http://en.cppreference.com/w/cpp/types/remove_reference"><span class="kw610">Điều đó cho tất cả<span class="me2">Nếu được gọi là</span></span></a><span class="sy1">is_trivently_destructible_v</span>VariantBases<span class="sy1">2,4)</span><span class="br0">)</span></code>Không có gì nếu<code>n</code>; nếu không thì kết quả của<code>std::visit</code>giá trị chuyển đổi từ<a href="../../language/virtual" title="cpp/language/virtual">virtual functions</a>.</p>
<p>cho bất kỳ biến thể<a href="../../language/switch" title="cpp/language/switch">switch statement</a>với<code>n</code>Khi số lượng biến thể bằng 0 hoặc một, lệnh gọi của đối tượng có thể gọi được thực hiện trong thời gian không đổi, tức là nó không phụ thuộc vào số lượng loại có thể được lưu trữ trong biến thể.<code>std::visit</code>Nếu số lượng biến thể lớn hơn một, thì việc gọi đối tượng có thể gọi được không có yêu cầu phức tạp.<code>n</code>, Việc triển khai thường tạo ra một bảng tương đương với một mảng (có thể đa chiều) của</p>
<p>con trỏ chức năng cho mọi chuyên môn của<code>vis</code>, tương tự như việc thực hiện</p>
<table class="wikitable ftm-begin ftm-has-value"> <tr> <th>
<a href="../feature_test" title="cpp/utility/feature test">Feature-test</a>(Mẫu lớp)</th> <th>vĩ mô</th> <th><span title="Standard in which the feature is introduced">Giá trị</span></th> <th>STD</th>
</tr> <tr> <td><a href="../../feature_test#cpp_lib_variant" title="cpp/feature test"><code>__cpp_lib_variant</code></a></td> <td><span class="nu0">202102L</span></td> <td>
<span class="t-mark">Dest_at</span><br/><span class="t-mark">(Dr)</span>
</td> <td>
<code>std::visit</code>cho các lớp học xuất phát từ<code><a href="../variant" title="cpp/utility/variant">std::variant</a></code> </td>
</tr>
</table> <h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">Việc triển khai cũng có thể tạo ra một</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">chi nhánh cho</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue2970" rel="nofollow">LWG 2970</a> </td> <td>C ++ 17</td> <td>#include &lt;Istream&gt;<span class="t-v">(1)</span>(ví dụ: triển khai MSVC STL sử dụng câu lệnh chuyển đổi khi<br/>không lớn hơn 256).<code><i>Gọi</i></code>#include &lt;Vector&gt;</td> <td>Về các triển khai điển hình, sự phức tạp về thời gian của việc gọi</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue3052" rel="nofollow">LWG 3052</a><br/>.<a class="external text" href="https://wg21.link/P2162R2" rel="nofollow">P2162R2</a>)</td> <td>C ++ 17</td> <td>có thể được coi là bằng với quyền truy cập vào một phần tử trong một mảng (có thể đa chiều) hoặc thực hiện một câu lệnh chuyển đổi.<br/>TRONG<code>Variants</code>Cụ thể,<code><a href="../variant" title="cpp/utility/variant">std::variant</a></code> </td> <td>Mẫu &lt;class inputit, class outputit&gt;</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="swap" title="cpp/utility/variant/swap"> <span class="t-lines"><span>Được xác định trong tiêu đề</span></span></a></div> </td> <td>xây dựng một giá trị trong biến thể, tại chỗ<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/utility/variant/visit">https://en.cppreference.com/w/cpp/utility/variant/visit</a>
</p>
</div>
