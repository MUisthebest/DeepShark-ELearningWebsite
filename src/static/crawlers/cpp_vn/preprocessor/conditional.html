 <h1 class="firstHeading" id="firstHeading">#ifdef ABCD</h1> <p>Bộ tiền xử lý hỗ trợ biên dịch có điều kiện của các phần của tệp nguồn. Hành vi này được kiểm soát bởi<code>#if</code>Thì<code>#else</code>Thì<code>#elif</code>Thì<code>#ifdef</code>Thì<code>#ifndef</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>Thì<code>#elifndef</code></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>, Và<code>#endif</code>chỉ thị.</p>
<h3 id="Syntax">Cú pháp</h3> <table class="t-sdsc-begin"> <tr class="t-sdsc"> <td> <code>#if</code> <span class="t-spar">  constexpr bool is_lteq (partial_ordering cmp) noexcept {return cmp &lt;= 0; }</span> </td> <td class="t-sdsc-nopad"> </td> <td> </td>
</tr> <tr class="t-sdsc"> <td> <code>#ifdef</code> <span class="t-spar">định danh</span> </td> <td class="t-sdsc-nopad"> </td> <td> </td>
</tr> <tr class="t-sdsc"> <td> <code>#ifndef</code> <span class="t-spar">định danh</span> </td> <td class="t-sdsc-nopad"> </td> <td> </td>
</tr> <tr class="t-sdsc"> <td> <code>#elif</code> <span class="t-spar">  constexpr bool is_lteq (partial_ordering cmp) noexcept {return cmp &lt;= 0; }</span> </td> <td class="t-sdsc-nopad"> </td> <td> </td>
</tr> <tr class="t-sdsc"> <td> <code>#elifdef</code> <span class="t-spar">định danh</span> </td> <td class="t-sdsc-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span> </td>
</tr> <tr class="t-sdsc"> <td> <code>#elifndef</code> <span class="t-spar">định danh</span> </td> <td class="t-sdsc-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span> </td>
</tr> <tr class="t-sdsc"> <td> <code>#else</code> </td> <td class="t-sdsc-nopad"> </td> <td> </td>
</tr> <tr class="t-sdsc"> <td> <code>#endif</code> </td> <td class="t-sdsc-nopad"> </td> <td> </td>
</tr>
</table> <h3 id="Explanation">Lưu ý: Đồng bộ hóa giữa các luồng tập trung vào việc ngăn chặn các chủng tộc dữ liệu (bằng cách thiết lập các mối quan hệ xảy ra trước khi) và xác định các tác dụng phụ nào có thể nhìn thấy được trong các điều kiện nào.</h3> <p>Khối tiền xử lý có điều kiện bắt đầu bằng<code>#if</code>Thì<code>#ifdef</code>hoặc<code>#ifndef</code>chỉ thị, sau đó tùy chọn bao gồm bất kỳ số lượng<code>#elif</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>, hoặc<code>#elifndef</code></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>chỉ thị, sau đó tùy chọn bao gồm nhiều nhất một<code>#else</code>chỉ thị và bị chấm dứt với<code>#endif</code>chỉ thị. Bất kỳ khối tiền xử lý có điều kiện bên trong được xử lý riêng.</p>
<p>Mỗi<code>#if</code>Thì<code>#ifdef</code>Thì<code>#ifndef</code>Thì<code>#elif</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>Thì<code>#elifndef</code></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>, Và<code>#else</code>Chỉ thị kiểm soát khối mã cho đến khi đầu tiên<code>#elif</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>Thì<code>#elifndef</code></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>Thì<code>#else</code>Thì<code>#endif</code>Chỉ thị không thuộc về bất kỳ khối tiền xử lý có điều kiện bên trong.</p>
<p><code>#if</code>Thì<code>#ifdef</code>Và<code>#ifndef</code>Chỉ thị kiểm tra điều kiện được chỉ định (xem bên dưới) và nếu nó đánh giá là TRUE, hãy biên dịch khối mã được kiểm soát. Trong trường hợp đó tiếp theo<code>#else</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>Thì<code>#elifndef</code>Thì</span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>Và<code>#elif</code>Chỉ thị bị bỏ qua. Mặt khác, nếu điều kiện được chỉ định đánh giá sai, khối mã được kiểm soát sẽ bị bỏ qua và<code>#else</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>Thì<code>#elifndef</code>Thì</span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>hoặc<code>#elif</code>Chỉ thị (nếu có) được xử lý. Nếu chỉ thị tiếp theo là<code>#else</code>, khối mã được kiểm soát bởi<code>#else</code>Chỉ thị được biên soạn vô điều kiện. Nếu không,<code>#elif</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>, hoặc<code>#elifndef</code></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>hành vi chỉ thị như thể nó là<code>#if</code>Chỉ thị: Kiểm tra điều kiện, biên dịch hoặc bỏ qua khối mã được kiểm soát dựa trên kết quả và trong trường hợp sau<code>#elif</code><span class="t-rev-inl t-since-cxx23"><span>Thì<code>#elifdef</code>Thì<code>#elifndef</code>Thì</span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>Và<code>#else</code>chỉ thị. Khối tiền xử lý có điều kiện bị chấm dứt bởi<code>#endif</code>chỉ thị.</p>
<h3 id="Condition_evaluation">Đánh giá điều kiện</h3> <h4 id=".23if.2C_.23elif"> <span class="co2">#if, #elif</span>
</h4> <p>Các<span class="t-spar">  constexpr bool is_lteq (partial_ordering cmp) noexcept {return cmp &lt;= 0; }</span>có thể chứa:</p>
<ul>
<li>người vận hành chưa được thực hiện<code>defined</code> <span class="t-spar">định danh</span>hoặc<code>defined (</code><span class="t-spar">định danh</span><code>)</code>. Kết quả là<code>1</code>về lỗi.<span class="t-spar">định danh</span> <a href="replace" title="cpp/preprocessor/replace">defined as a macro name</a>, nếu không thì kết quả là<code>​0​</code>.<span class="t-rev-inl t-since-cxx17"><span><code>__has_­include</code> <span class="t-rev-inl t-since-cxx20"><span>Và<code>__has_cpp_attribute</code></span><span><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></span></span>được đối xử như thể chúng là tên của các macro được xác định trong bối cảnh này.</span><span><span class="t-mark-rev t-since-cxx17">(C ++ 20)</span></span></span> </li>
<li> <span class="t-mark-rev t-since-cxx17">(C ++ 20)</span> <a href="include" title="cpp/preprocessor/include"><code>__has_include</code></a>Biểu thức, phát hiện liệu một tiêu đề hoặc tệp nguồn tồn tại.</li>
<li> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> <a href="../feature_test#Attributes" title="cpp/feature test"><code>__has_cpp_attribute</code></a>Biểu thức, phát hiện xem một mã thông báo thuộc tính nhất định có được hỗ trợ hay không và phiên bản được hỗ trợ của nó.</li>
</ul> <p>Sau khi mở rộng và đánh giá vĩ mô của<code>defined</code><span class="t-rev-inl t-since-cxx17"><span>Thì<code>__has_include</code></span><span><span class="t-mark-rev t-since-cxx17">(C ++ 20)</span></span></span><span class="t-rev-inl t-since-cxx20"><span>, Và<code>__has_cpp_attribute</code></span><span><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></span></span>biểu thức, bất kỳ định danh nào không phải là<a href="../language/bool_literal" title="cpp/language/bool literal">boolean literal</a>được thay thế bằng số<code>​0​</code>(Điều này bao gồm các định danh là từ khóa từ vựng, nhưng không phải là các mã thông báo thay thế như<code>and</code>).</p>
<p>Sau đó biểu thức được đánh giá là một<a href="../language/constant_expression#Integral_constant_expression" title="cpp/language/constant expression">integral constant expression</a>.</p>
<p>Consexpr ForwardIT Remove_if (ForwardIt First, ForwardIt Last,<span class="t-spar">  constexpr bool is_lteq (partial_ordering cmp) noexcept {return cmp &lt;= 0; }</span>Đánh giá với giá trị khác nhau, khối mã được kiểm soát được bao gồm và bỏ qua khác.</p>
<p>Lưu ý: Cho đến khi giải quyết<a class="external text" href="https://cplusplus.github.io/CWG/issues/1955.html" rel="nofollow">CWG issue 1955</a>Thì<code>#if <i>Cond1</i></code>...<code>#elif <i>Cond2</i></code>khác với<code>#if <i>Cond1</i></code>...<code>#else</code>    toán tử &lt;&lt; (std :: basic_ostream &lt;biểu đồ, đặc điểm&gt; &amp; os, const std :: chrono :: tháng &amp; m);<code>#if <i>Cond2</i></code>Bởi vì nếu<code><i>Cond1</i></code>là sự thật, thứ hai<code>#if</code>được bỏ qua và<code><i>Cond2</i></code>không cần phải được hình thành tốt, trong khi<code>#elif</code>                                   OUTPUTITIT D_FIRST, PRECEPREDATICATE P);<code><i>Cond2</i></code>phải là một biểu thức hợp lệ. Kể từ CWG 1955,<code>#elif</code>Điều đó dẫn đến khối mã bị bỏ qua cũng bị bỏ qua.</p>
<h4 id="Combined_directives">Chỉ thị kết hợp</h4> <p>Kiểm tra xem số nhận dạng có phải không<a href="replace" title="cpp/preprocessor/replace">defined as a macro name</a>.</p>
<p><code>#ifdef</code> <span class="t-spar">định danh</span>về cơ bản là tương đương với<code>#if defined</code> <span class="t-spar">định danh</span>.</p>
<p><code>#ifndef</code> <span class="t-spar">định danh</span>về cơ bản là tương đương với<code>#if !defined</code> <span class="t-spar">định danh</span>.</p>
<table class="t-rev-begin"> <tr class="t-rev t-since-cxx23">
<td> <p><code>#elifdef</code> <span class="t-spar">định danh</span>về cơ bản là tương đương với<code>#elif defined</code> <span class="t-spar">định danh</span>.</p>
<p><code>#elifndef</code> <span class="t-spar">định danh</span>về cơ bản là tương đương với<code>#elif !defined</code> <span class="t-spar">định danh</span>.</p>
</td> <td><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></td>
</tr> </table> <h3 id="Notes">Ghi chú</h3> <p>            Externt* to_end,<code>#elifdef</code>Và<code>#elifndef</code>Chỉ thị mục tiêu C ++ 23, việc triển khai được khuyến khích đưa chúng vào các chế độ ngôn ngữ cũ như các phần mở rộng phù hợp.</p>
<h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#Define ABCD 2</pre></div> <p>#include &lt;Istream&gt;</p>
<div class="text source-text"><pre data-language="c">#include &lt;Istream&gt;</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/1955.html" rel="nofollow">CWG 1955</a> </td> <td>C ++ 98</td> <td>là một con trỏ tới các liên kết<span class="co2">{</span>int main ()</td> <td>là một con trỏ tới các liên kết<span class="co2">{</span> </td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/preprocessor/conditional" title="c/preprocessor/conditional">C documentation</a></span>vì<span class=""><span>#ifdef ABCD</span></span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/preprocessor/conditional">https://en.cppreference.com/w/cpp/preprocessor/conditional</a>
</p>
</div>
