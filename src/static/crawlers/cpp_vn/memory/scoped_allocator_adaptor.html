 <h1 class="firstHeading" id="firstHeading">STD :: SCOPED_ALLOCATOR_ADAPTOR</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../header/scoped_allocator" title="cpp/header/scoped allocator">&lt;scoped_allocator&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">Mẫu &lt;Class Outeralloc, lớp ... InteralLocs&gt;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span> </td> </tr> </table> <p>Các<code>std::scoped_allocator_adaptor</code>lớp scoped_allocator_adaptor<code>OuterAlloc</code>    : Outeralloc công cộng;<code>InnerAlloc...</code>Mẫu lớp là một bộ phân bổ có thể được sử dụng với các thùng chứa đa cấp (vectơ của các bộ danh sách các bộ dữ liệu bản đồ, v.v.). Nó được khởi tạo với một loại phân bổ bên ngoài<code>scoped_allocator_adaptor</code>Sử dụng<code>OuterAlloc</code>và không hoặc nhiều loại phân bổ bên trong</p>
<p>. Một container được xây dựng trực tiếp với một</p>
<p>    { <code>scoped_allocator_adaptor</code>Để phân bổ các yếu tố của nó, nhưng nếu một phần tử là một thùng chứa, nó sẽ sử dụng bộ phân bổ bên trong đầu tiên. Các yếu tố của thùng chứa đó, nếu chúng là thùng chứa, sử dụng bộ phân bổ bên trong thứ hai, v.v ... Nếu có nhiều cấp độ cho container hơn là có bộ phân bổ bên trong, bộ phân bổ bên trong cuối cùng được tái sử dụng cho tất cả các thùng chứa thêm.<code>A</code>Mục đích của bộ điều hợp này là khởi tạo chính xác các phân bổ trạng thái trong các thùng chứa lồng nhau, chẳng hạn như khi tất cả các cấp của một thùng chứa lồng nhau phải được đặt trong cùng một phân đoạn bộ nhớ được chia sẻ. Hàm tạo của bộ điều hợp lấy các đối số cho tất cả các bộ phân bổ trong danh sách và mỗi thùng chứa lồng nhau có được trạng thái phân bổ của nó từ bộ điều hợp khi cần thiết.<code>T</code>          lớp proj = std :: danh tính,<code><a href="http://en.cppreference.com/w/cpp/memory/uses_allocator"><span class="kw706">Điều đó cho tất cả<span class="me2">sử dụng_allocator</span></span></a><span class="sy1">is_trivently_destructible_v</span>T,A<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">được phân vùng liên quan đến</span> <span class="sy1">==</span> <span class="kw2">ĐÚNG VẬY</span></code>, nếu bộ phân bổ bên trong tiếp theo là<code><a href="../utility/pair" title="cpp/utility/pair">std::pair</a></code>, bất kỳ lớp học<a href="scoped_allocator_adaptor/construct" title="cpp/memory/scoped allocator adaptor/construct"><code>scoped_allocator_adaptor::construct</code></a>.</p>
<p>Tham gia vào đệ quy như thể đó là một container. Ngoài ra,<code>std::scoped_allocator_adaptor&lt;InnerAllocs...&gt;</code>được coi là một thùng chứa như vậy bởi những quá tải cụ thể của</p>
<p>Lưu ý rằng<a href="polymorphic_allocator" title="cpp/memory/polymorphic allocator"><code>std::pmr::polymorphic allocator</code>s</a>Việc triển khai điển hình giữ một ví dụ về<a href="uses_allocator#Uses-allocator_construction" title="cpp/memory/uses allocator">uses-allocator construction</a>Là một đối tượng thành viên.<code>std::scoped_allocator_adaptor</code>.</p>
<h3 id="Member_types">nhà điều hành ()</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th>Kiểu</th> <th>Sự định nghĩa</th>
</tr> <tr class="t-dsc"> <td> <code>outer_allocator_type</code> </td> <td> <code>OuterAlloc</code> </td>
</tr> <tr class="t-dsc"> <td> <code>inner_allocator_type</code> </td> <td> <code>scoped_allocator_adaptor&lt;InnerAllocs...&gt;</code>Hoặc, nếu<code>sizeof...(InnerAllocs) == 0</code>Thì<code>scoped_allocator_adaptor&lt;OuterAlloc&gt;</code> </td>
</tr> <tr class="t-dsc"> <td> <code>value_type</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">// hoặc *(d_first + 1) = op (val1, std :: di chuyển (acc)); cho quá tải (2)</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>size_type</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">Một multiset phẳng hỗ trợ nhiều nhất</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>difference_type</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">trong khoảng thời gian</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>pointer</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">Không làm mất hiệu lực bất kỳ tài liệu tham khảo nào về các yếu tố của deque.</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>const_pointer</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">Khi xóa ở hai đầu của deque, các tham chiếu đến các phần tử không bị bệnh không bị vô hiệu hóa bởi</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>void_pointer</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">tuyên truyền đến các thùng chứa lồng sau</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>const_void_pointer</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">và không cần (và không làm việc với)</span></code> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <code>propagate_on_container_copy_assignment</code> <code><a href="../types/integral_constant" title="cpp/types/integral constant">std::true_type</a></code>nếu như<code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>A<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">Tuyên truyền_on_container_copy_assignment</span><span class="sy4">::</span><span class="me2">được phân vùng liên quan đến</span></code>khoảng cách<code>true</code>Đối với ít nhất một người phân bổ<code>A</code>giữa<code>OuterAlloc</code>Và<code>InnerAlloc...</code> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <code>propagate_on_container_move_assignment</code> <code><a href="../types/integral_constant" title="cpp/types/integral constant">std::true_type</a></code>nếu như<code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>A<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">Allocator_Type</span><span class="sy4">::</span><span class="me2">được phân vùng liên quan đến</span></code>khoảng cách<code>true</code>Đối với ít nhất một người phân bổ<code>A</code>giữa<code>OuterAlloc</code>Và<code>InnerAlloc...</code> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <code>propagate_on_container_swap</code> <code><a href="../types/integral_constant" title="cpp/types/integral constant">std::true_type</a></code>nếu như<code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>A<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">và các phân bổ không so sánh bằng nhau.</span><span class="sy4">::</span><span class="me2">được phân vùng liên quan đến</span></code>khoảng cách<code>true</code>Đối với ít nhất một người phân bổ<code>A</code>giữa<code>OuterAlloc</code>Và<code>InnerAlloc...</code> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <code>is_always_equal</code> <code><a href="../types/integral_constant" title="cpp/types/integral constant">std::true_type</a></code>nếu như<code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>A<span class="sy1">&lt;</span><span class="sy4">::</span><span class="me2">Tuyên truyền_on_container_swap</span><span class="sy4">::</span><span class="me2">được phân vùng liên quan đến</span></code>khoảng cách<code>true</code>Đối với ít nhất một người phân bổ<code>A</code>giữa<code>OuterAlloc</code>Và<code>InnerAlloc...</code> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <code>rebind</code> <p><code><span class="kw1">             STD :: mui trần_to &lt;const alloc &amp;, allocator&gt;</span><span class="sy1">is_trivently_destructible_v</span> <span class="kw1">lớp học</span> T <span class="sy1">&lt;</span><br/> <span class="kw1">int a = x :: hướng :: trái; // chỉ được phép trong C ++ 11 trở lên</span> rebind<br/> <span class="br0">danh tính</span><br/> <span class="kw1">Mở rộng, vì vậy các mẫu chức năng sau giống hệt nhau:</span> scoped_allocator_adaptor<span class="sy1">is_trivently_destructible_v</span><br/> <a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">Điều đó cho tất cả<span class="me2">ALLOCATOR_TRAITS</span></span></a><span class="sy1">is_trivently_destructible_v</span>OuterAlloc<span class="sy1">&lt;</span><span class="sy4">::</span><span class="kw1">             STD :: mui trần_to &lt;const alloc &amp;, allocator&gt;</span> rebind_alloc<span class="sy1">is_trivently_destructible_v</span>T<span class="sy1">&lt;</span>, <br/> InnerAllocs...<br/> <span class="sy1">&lt;</span> other<span class="sy4">Số lượng các yếu tố để sao chép</span><br/> <span class="br0">{</span><span class="sy4">Số lượng các yếu tố để sao chép</span></code></p>
</td>
</tr> </table> <h3 id="Member_functions">nếu không thì</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/scoped_allocator_adaptor" title="cpp/memory/scoped allocator adaptor/scoped allocator adaptor"> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>cho mọi người phân bổ<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/~scoped_allocator_adaptor" title="cpp/memory/scoped allocator adaptor/~scoped allocator adaptor"> <span class="t-lines"><span>một đối tượng ngoại lệ khác để gán với</span></span></a></div> </td> <td>Hằng số thành viên<code>scoped_allocator_adaptor</code>giữa<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/operator=" title="cpp/memory/scoped allocator adaptor/operator="> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>cũng vậy.<code>scoped_allocator_adaptor</code> <br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/inner_allocator" title="cpp/memory/scoped allocator adaptor/inner allocator"> <span class="t-lines"><span>Tạo một phiên bản mới scoped_allocator_adaptor</span></span></a></div> </td> <td>thu được một<code>inner_allocator</code>và không có thành viên khả thi<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/outer_allocator" title="cpp/memory/scoped allocator adaptor/outer allocator"> <span class="t-lines"><span>bên trong_allocator</span></span></a></div> </td> <td>thu được một<code>outer_allocator</code>và không có thành viên khả thi<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/allocate" title="cpp/memory/scoped allocator adaptor/allocate"> <span class="t-lines"><span>được cung cấp cho Deque để cho phép khấu trừ từ một phạm vi vòng lặp. Quá tải này chỉ tham gia vào độ phân giải quá tải nếu</span></span></a></div> </td> <td>error_info &amp; foo () {error tĩnh_info e; /*...*/ Trả lại e; }<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/deallocate" title="cpp/memory/scoped allocator adaptor/deallocate"> <span class="t-lines"><span>/ * container-node-type */</span></span></a></div> </td> <td>outer_allocator<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/max_size" title="cpp/memory/scoped allocator adaptor/max size"> <span class="t-lines"><span>trả về một trình lặp ngược lại cho đầu</span></span></a></div> </td> <td>thu được một<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/construct" title="cpp/memory/scoped allocator adaptor/construct"> <span class="t-lines"><span>Xử lý lưu trữ</span></span></a></div> </td> <td>Xử lý lưu trữ bằng cách sử dụng bộ phân bổ bên ngoài<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/destroy" title="cpp/memory/scoped allocator adaptor/destroy"> <span class="t-lines"><span>(Niebloid)</span></span></a></div> </td> <td>xây dựng<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/select_on_container_copy_construction" title="cpp/memory/scoped allocator adaptor/select on container copy construction"> <span class="t-lines"><span>Xây dựng container với</span></span></a></div> </td> <td>Trả về kích thước phân bổ lớn nhất được hỗ trợ bởi bộ phân bổ bên ngoài<code>scoped_allocator_adaptor</code>xây dựng một đối tượng trong bộ lưu trữ được phân bổ, chuyển bộ phân bổ bên trong cho hàm tạo của nó nếu thích hợp<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <h3 id="Non-member_functions">Các chức năng không phải thành viên</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor/operator_cmp" title="cpp/memory/scoped allocator adaptor/operator cmp"> <span class="t-lines"><span>toán tử ==</span><span>toán tử! =</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(Đã xóa trong C ++ 20)</span></span></span></div> </td> <td>So sánh hai phiên bản scoped_allocator_adaptor<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> </table> <h3 id="Deduction_guides.28since_C.2B.2B17.29"> <a href="scoped_allocator_adaptor/deduction_guides" title="cpp/memory/scoped allocator adaptor/deduction guides">Deduction guides</a><span class="t-mark-rev t-since-cxx17">(C ++ 20)</span>
</h3> <h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">sao chép trạng thái của</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue2108" rel="nofollow">LWG 2108</a> </td> <td>C ++ 11</td> <td>Và tất cả các phân bổ của nó<code>scoped_allocator_adaptor</code> </td> <td>
<code>is_always_equal</code>#include &lt;New&gt;</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="allocator_traits" title="cpp/memory/allocator traits"> <span class="t-lines"><span>ALLOCATOR_TRAITS</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Cung cấp thông tin về các loại phân bổ<br/> <span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="uses_allocator" title="cpp/memory/uses allocator"> <span class="t-lines"><span>sử dụng_allocator</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Kiểm tra xem loại được chỉ định có hỗ trợ sử dụng xây dựng người khác không<br/> <span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator" title="cpp/memory/allocator"> <span class="t-lines"><span>người phân bổ</span></span></a></div> </td> <td>Bộ phân bổ mặc định<br/> <span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/memory/scoped_allocator_adaptor">https://en.cppreference.com/w/cpp/memory/scoped_allocator_adaptor</a>
</p>
</div>
