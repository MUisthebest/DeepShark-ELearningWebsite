 <h1 class="firstHeading" id="firstHeading">std :: jthread :: jthread</h1> <table class="t-dcl-begin"> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">jthread () noExcept;</pre>
</td> <td>(1)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">jthread (jthread &amp;&amp; khác) noExcept;</pre>
</td> <td>(2)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">Mẫu &lt;chức năng lớp, lớp ... args&gt; </pre>
</td> <td>(3)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">JTHREAD rõ ràng (hàm &amp;&amp; f, args &amp;&amp; ... args);</pre>
</td> <td>(4)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> </table> <p>Xây dựng mới<code>std::jthread</code>Giống như các tài liệu tham khảo ngôn ngữ, sự ổn định là nông cạn đối với</p>
<div class="t-li1">
<span class="t-li">1)</span>không còn đại diện cho một chủ đề thực thi.<code>std::jthread</code>Tạo ra mới</div> <div class="t-li1">
<span class="t-li">2)</span>đối tượng không đại diện cho một chủ đề.<code>std::jthread</code>Di chuyển hàm tạo. Xây dựng<code>other</code>đối tượng để biểu diễn luồng thực thi được biểu diễn bởi<code>other</code>. Sau cuộc gọi này</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span>không còn đại diện cho một chủ đề thực thi.<code>std::jthread</code>Tạo ra mới<p>Đối tượng và liên kết nó với một chủ đề thực thi.</p>
<table class="t-rev-begin"> <tr class="t-rev t-until-cxx23">
<td>
<code><a href="http://en.cppreference.com/w/cpp/utility/functional/invoke"><span class="kw1063">Điều đó cho tất cả<span class="me2">STD ::</span></span></a><span class="br0">.</span><a href="../../standard_library/decay-copy" title="cpp/standard library/decay-copy">decay-copy</a><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Function<span class="sy1">&lt;</span><span class="br0">.</span>f<span class="br0">)</span><span class="br0">)</span>, get_stop_token<span class="br0">.</span><span class="br0">)</span>,<br/>            <a href="../../standard_library/decay-copy" title="cpp/standard library/decay-copy">decay-copy</a><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Args<span class="sy1">&lt;</span><span class="br0">.</span>args<span class="br0">)</span><span class="br0">)</span>...<span class="br0">)</span></code> </td> <td><span class="t-mark-rev t-until-cxx23">(Cho đến C ++ 23)</span></td>
</tr> <tr class="t-rev t-since-cxx23">
<td> <p><code><a href="http://en.cppreference.com/w/cpp/utility/functional/invoke"><span class="kw1063">Điều đó cho tất cả<span class="me2">STD ::</span></span></a><span class="br0">.</span><span class="kw4">    phân vùng_point (r &amp;&amp; r, pred, proj proj = {});</span><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Function<span class="sy1">&lt;</span><span class="br0">.</span>f<span class="br0">)</span><span class="br0">)</span>, get_stop_token<span class="br0">.</span><span class="br0">)</span>,<br/> <span class="kw4">    phân vùng_point (r &amp;&amp; r, pred, proj proj = {});</span><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Args<span class="sy1">&lt;</span><span class="br0">.</span>args<span class="br0">)</span><span class="br0">)</span>...<span class="br0">)</span></code></p>
</td> <td><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></td>
</tr> </table> <p>Chủ đề thực thi mới bắt đầu thực thi:</p>
<table class="t-rev-begin"> <tr class="t-rev t-until-cxx23">
<td>
<code><a href="http://en.cppreference.com/w/cpp/utility/functional/invoke"><span class="kw1063">Điều đó cho tất cả<span class="me2">STD ::</span></span></a><span class="br0">.</span><a href="../../standard_library/decay-copy" title="cpp/standard library/decay-copy">decay-copy</a><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Function<span class="sy1">&lt;</span><span class="br0">.</span>f<span class="br0">)</span><span class="br0">)</span>,<br/>            <a href="../../standard_library/decay-copy" title="cpp/standard library/decay-copy">decay-copy</a><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Args<span class="sy1">&lt;</span><span class="br0">.</span>args<span class="br0">)</span><span class="br0">)</span>...<span class="br0">)</span></code>.</td> <td><span class="t-mark-rev t-until-cxx23">(Cho đến C ++ 23)</span></td>
</tr> <tr class="t-rev t-since-cxx23">
<td> <p><code><a href="http://en.cppreference.com/w/cpp/utility/functional/invoke"><span class="kw1063">Điều đó cho tất cả<span class="me2">STD ::</span></span></a><span class="br0">.</span><span class="kw4">    phân vùng_point (r &amp;&amp; r, pred, proj proj = {});</span><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Function<span class="sy1">&lt;</span><span class="br0">.</span>f<span class="br0">)</span><span class="br0">)</span>,<br/> <span class="kw4">    phân vùng_point (r &amp;&amp; r, pred, proj proj = {});</span><span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1120">Điều đó cho tất cả<span class="me2">phía trước</span></span></a><span class="sy1">is_trivently_destructible_v</span>Args<span class="sy1">&lt;</span><span class="br0">.</span>args<span class="br0">)</span><span class="br0">)</span>...<span class="br0">)</span></code>.</p>
</td> <td><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></td>
</tr> </table>
</div> <div class="t-li1">
<span class="t-rev-inl t-until-cxx23"><span>(như được định nghĩa trong<a href="../../standard_library/decay-copy" title="cpp/standard library/decay-copy"><code>decay-copy</code></a>) cuộc gọi đến</span><span><span class="t-mark-rev t-until-cxx23">(Cho đến C ++ 23)</span></span></span><span class="t-rev-inl t-since-cxx23"><span>và sự hoàn thành của<code>auto</code>&gt;<a href="../../language/implicit_conversion#Temporary_materialization" title="cpp/language/implicit conversion">materialized</a></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>Nếu biểu thức trên được hình thành tốt, nếu không thì bắt đầu thực thi:<code><a href="../../utility/functional/invoke" title="cpp/utility/functional/invoke">std::invoke</a></code>Trong luồng hiện tại, để mọi trường hợp ngoại lệ được ném trong quá trình đánh giá và sao chép/di chuyển các đối số được ném vào luồng hiện tại, mà không bắt đầu luồng mới. Chương trình không được hình thành nếu có bất kỳ công trình hoặc</div> <div class="t-li1">Cuộc gọi không hợp lệ.<code><a href="http://en.cppreference.com/w/cpp/types/remove_cvref"><span class="kw2644">Điều đó cho tất cả<span class="me2">Các yếu tố được so sánh bằng cách sử dụng vị ngữ nhị phân đã cho</span></span></a><span class="sy1">is_trivently_destructible_v</span>Function<span class="sy1">&lt;</span></code>thành viên<code>std::jthread</code>.</div> <div class="t-li1">Hàm tạo này không tham gia vào độ phân giải quá tải nếu<i>y.store (42, std :: memory_order_relaxed); // d</i>    async (std :: chính sách khởi chạy, chức năng &amp;&amp; f, args &amp;&amp; ... args);<code><a href="../../atomic/memory_order" title="cpp/atomic/memory order">std::memory_order</a></code>Việc hoàn thành việc gọi nhà xây dựng<code>f</code>) sự khởi đầu của việc gọi bản sao của</div> <div class="t-li1">
<span class="t-li">là trong</span>Trên chủ đề mới của thực thi.<code>std::jthread</code>Trình xây dựng bản sao bị xóa; Chủ đề không thể sao chép. Không có hai</div> <h3 id="Parameters">) với giá trị ban đầu</h3> <table class="t-par-begin"> <tr class="t-par"> <td>khác</td> <td>-</td> <td>khác<code>std::jthread</code>Các đối tượng có thể đại diện cho cùng một luồng thực thi.<code>std::jthread</code>đối tượng giữ a</td>
</tr> <tr class="t-par"> <td>có thể sửa đổi các phần tử của phạm vi thông qua trình lặp được thu hút. Nếu như</td> <td>-</td> <td> <a href="../../named_req/callable" title="cpp/named req/Callable">Callable</a>phản đối việc xây dựng điều này</td>
</tr> <tr class="t-par"> <td>, không cho phép định dạng định dạng.</td> <td>-</td> <td>Đối tượng để thực thi trong luồng mới</td>
</tr>
</table> <h3 id="Postconditions">Postconditions</h3> <div class="t-li1">
<span class="t-li">1)</span> <a href="get_id" title="cpp/thread/jthread/get id"><code>get_id()</code></a>, một đối tượng riêng biệt của loại<a href="../thread/id" title="cpp/thread/thread/id"><code>std::jthread::id()</code></a>biểu thị<a href="joinable" title="cpp/thread/jthread/joinable"><code>joinable()</code></a>(C ++ 20)<code>false</code>) Và<code>get_stop_source().stop_possible()</code>khoảng cách<code>false</code>.</div> <div class="t-li1">
<span class="t-li">2)</span> <code>other.get_id()</code>, một đối tượng riêng biệt của loại<a href="../thread/id" title="cpp/thread/thread/id"><code>std::jthread::id()</code></a>Và<a href="get_id" title="cpp/thread/jthread/get id"><code>get_id()</code></a>Đối số để chuyển đến chức năng mới<code>other.get_id()</code>Trả về giá trị của</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span> <a href="get_id" title="cpp/thread/jthread/get id"><code>get_id()</code></a>bằng nhau. Hai trình lặp luồng bằng nhau nếu cả hai đều là trình lặp cuối dòng hoặc cả hai đều đề cập đến cùng một luồng.<a href="../thread/id" title="cpp/thread/thread/id"><code>std::jthread::id()</code></a>biểu thị<a href="joinable" title="cpp/thread/jthread/joinable"><code>joinable()</code></a>(C ++ 20)<code>true</code>), Và<code>get_stop_source().stop_possible()</code>khoảng cách<code>true</code>.</div> <h3 id="Exceptions">Ngoại lệ</h3> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span> <code><a href="../../error/system_error" title="cpp/error/system error">std::system_error</a></code>Trước khi bắt đầu xây dựng.<code>std::errc::resource_unavailable_try_again</code>Nếu chủ đề không thể bắt đầu. Ngoại lệ có thể biểu thị điều kiện lỗi</div> <h3 id="Notes">Ghi chú</h3> <p>hoặc một điều kiện lỗi cụ thể khác.<code><a href="../../utility/functional/ref" title="cpp/utility/functional/ref">std::ref</a></code>hoặc<code><a href="../../utility/functional/ref" title="cpp/utility/functional/ref">std::cref</a></code>).</p>
<p>Các đối số cho hàm luồng được di chuyển hoặc sao chép theo giá trị. Nếu một đối số tham chiếu cần được chuyển đến hàm luồng, nó phải được gói (ví dụ: với<code><a href="../../error/terminate" title="cpp/error/terminate">std::terminate</a></code>Bất kỳ giá trị trả về từ hàm đều bị bỏ qua. Nếu chức năng ném một ngoại lệ,<code><a href="../promise" title="cpp/thread/promise">std::promise</a></code>hoặc<code><a href="../async" title="cpp/thread/async">std::async</a></code>có thể được sử dụng.</p>
<h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">được gọi. Để chuyển các giá trị trả về hoặc ngoại lệ trở lại luồng gọi,</pre></div> <p>#include &lt;Istream&gt;</p>
<div class="text source-text"><pre data-language="c">#include &lt;Brono&gt;</pre></div> </div> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../thread/thread" title="cpp/thread/thread/thread"> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>xây dựng mới<code>thread</code>sự vật<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::thread</code>)</span> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/thread/thrd_create" title="c/thread/thrd create">C documentation</a></span>vì<code>thrd_create</code> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/thread/jthread/jthread">https://en.cppreference.com/w/cpp/thread/jthread/jthread</a>
</p>
</div>
