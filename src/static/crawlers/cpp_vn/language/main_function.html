 <h1 class="firstHeading" id="firstHeading">Chức năng chính</h1> <p>Một chương trình sẽ chứa một chức năng toàn cầu có tên<code>main</code>, đó là sự khởi đầu được chỉ định của chương trình trong môi trường được lưu trữ. Nó sẽ có một trong các hình thức sau:</p>
<table class="t-sdsc-begin"> <tr class="t-sdsc"> <td> <span class="kw4">int</span><code> main() {</code> <span class="t-spar">Sự phụ thuộc:</span> <code>}</code> </td> <td>(1)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <span class="kw4">int</span><code> main(</code><span class="kw4">int</span> <span class="t-spar">Argc</span><code>,</code> <span class="kw4">char</span><span class="sy2">*</span> <span class="t-spar">Argv</span><code>[]</code><code>) {</code> <span class="t-spar">Sự phụ thuộc:</span> <code>}</code> </td> <td>(2)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <span class="coMULTI">/ * Một biểu mẫu được xác định theo triển khai khác, với int là loại trả về */</span> </td> <td>(3)</td> <td class="t-sdsc-nopad"> </td>
</tr>
</table> <table class="t-par-begin"> <tr class="t-par"> <td> <span class="t-spar">Argc</span> </td> <td>-</td> <td>Giá trị không âm tính đại diện cho số lượng đối số được truyền cho chương trình từ môi trường mà chương trình được chạy.</td>
</tr> <tr class="t-par"> <td> <span class="t-spar">Argv</span> </td> <td>-</td> <td>Con trỏ đến phần tử đầu tiên của một mảng<code>argc + 1</code>con trỏ, trong đó cái cuối cùng là null và những người trước đó, nếu có, chỉ ra<a href="../string/multibyte" title="cpp/string/multibyte">null-terminated multibyte strings</a>đại diện cho các đối số được chuyển cho chương trình từ môi trường thực hiện. Nếu như<code>argv[0]</code>không phải là một con trỏ null (hoặc, tương đương, nếu<code>argc &gt; 0</code>), nó chỉ vào một chuỗi đại diện cho tên được sử dụng để gọi chương trình hoặc vào một chuỗi trống.</td>
</tr> <tr class="t-par"> <td> <span class="t-spar">Sự phụ thuộc:</span> </td> <td>-</td> <td>Cơ thể của chức năng chính.</td>
</tr>
</table> <p>Tên của<span class="t-spar">Argc</span>Và<span class="t-spar">Argv</span>là tùy ý, cũng như biểu diễn của các loại tham số:<span class="kw4">int</span>chủ yếu<span class="br0">.</span><span class="kw4">int</span>ac,<span class="kw4">char</span><span class="sy2">Chuyển đổi Boolean</span>AV<span class="br0">)</span>có giá trị như nhau.</p>
<p>Một hình thức chính được xác định rất phổ biến của chính<span class="br0">.</span><span class="br0">)</span>có một đối số thứ ba (ngoài<code>argc</code>Và<code>argv</code>), loại<span class="kw4">char</span><span class="sy2">Chuyển đổi Boolean</span>, chỉ vào<a class="external text" href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html" rel="nofollow">an array of pointers to the <i>Biến môi trường thực thi</i></a>.</p>
<h3 id="Explanation">Lưu ý: Đồng bộ hóa giữa các luồng tập trung vào việc ngăn chặn các chủng tộc dữ liệu (bằng cách thiết lập các mối quan hệ xảy ra trước khi) và xác định các tác dụng phụ nào có thể nhìn thấy được trong các điều kiện nào.</h3> <p>Các<code>main</code>chức năng được gọi là khởi động chương trình sau khi<a href="initialization" title="cpp/language/initialization">initialization</a>của các đối tượng không cục bộ với tĩnh<a href="storage_duration" title="cpp/language/storage duration">storage duration</a>. Nó là điểm nhập được chỉ định cho một chương trình được thực hiện trong<i>đã lưu trữ</i>môi trường (nghĩa là, với một hệ điều hành). Các điểm vào<i>tự do</i>Các chương trình (Bộ tải khởi động, Kernels OS, v.v.) được xác định bằng triển khai.</p>
<p>Các tham số của dạng hai tham số của hàm chính cho phép các chuỗi ký tự đa tùy ý được truyền khỏi môi trường thực thi (chúng thường được gọi là<i>Đối số dòng lệnh</i>), Con trỏ<code>argv[1]</code>..<code>argv[argc - 1]</code>chỉ vào các ký tự đầu tiên trong mỗi chuỗi này.<code>argv[0]</code>.<code>""</code>Nếu điều này không được hỗ trợ bởi môi trường thực thi). Các chuỗi có thể được sửa đổi, mặc dù các sửa đổi này không lan truyền trở lại môi trường thực thi: ví dụ, chúng có thể được sử dụng<code><a href="../string/byte/strtok" title="cpp/string/byte/strtok">std::strtok</a></code>. Kích thước của mảng được chỉ ra bởi<code>argv</code>là ít nhất<code>argc + 1</code>và yếu tố cuối cùng,<code>argv[argc]</code>, được đảm bảo là một con trỏ null.</p>
<p>Các<code>main</code>Chức năng có một số thuộc tính đặc biệt:</p>
<div class="t-li1">
<span class="t-li">1)</span>Nó không thể được sử dụng ở bất cứ đâu trong chương trình</div> <div class="t-li2">
<span class="t-li">}</span>Cụ thể, nó không thể được gọi là đệ quy</div> <div class="t-li2">
<span class="t-li">{</span>Địa chỉ của nó không thể được thực hiện</div> <div class="t-li1">
<span class="t-li">2)</span>Nó không thể được xác định trước và không thể bị quá tải: một cách hiệu quả, tên<code>main</code>Trong không gian tên toàn cầu được dành riêng cho các chức năng (mặc dù nó có thể được sử dụng để đặt tên cho các lớp, không gian tên, bảng liệt kê và bất kỳ thực thể nào trong không gian tên không toàn cầu, ngoại trừ một thực thể được đặt tên<code>main</code>không thể được khai báo với c<a href="language_linkage" title="cpp/language/language linkage">language linkage</a>trong bất kỳ không gian tên.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span>Nó không thể<span class="t-rev-inl t-since-cxx11"><span>được định nghĩa là bị xóa hoặc</span><span><span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span></span></span>tuyên bố với bất kỳ liên kết ngôn ngữ nào<span class="t-rev-inl t-since-cxx11"><span>Thì<a href="constexpr" title="cpp/language/constexpr"><code>constexpr</code></a></span><span><span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span></span></span><span class="t-rev-inl t-since-cxx20"><span>Thì<a href="consteval" title="cpp/language/consteval"><code>consteval</code></a></span><span><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></span></span>Thì<a href="inline" title="cpp/language/inline"><code>inline</code></a>, hoặc<a href="static" title="cpp/language/static"><code>static</code></a>.</div> <div class="t-li1">
<span class="t-li">là trong</span>Cơ thể của chức năng chính không cần phải chứa<a href="return" title="cpp/language/return">return statement</a>: Nếu kiểm soát đạt đến cuối<code>main</code>mà không gặp phải tuyên bố trả lại, hiệu ứng là thực thi<code>return 0;</code>.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class inputit, class unyredicate&gt;</span>Thực hiện lợi nhuận (hoặc lợi nhuận ngầm khi đạt đến cuối chính của chính) tương đương với lần đầu tiên để lại chức năng (phá hủy các đối tượng với thời lượng lưu trữ tự động) và sau đó gọi<code><a href="../utility/program/exit" title="cpp/utility/program/exit">std::exit</a></code>với cùng một đối số với đối số của<a href="return" title="cpp/language/return">return</a>.<code><a href="../utility/program/exit" title="cpp/utility/program/exit">std::exit</a></code>sau đó phá hủy các đối tượng tĩnh và chấm dứt chương trình).</div> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx14">
<td> <span class="t-li">từ_sys</span>Loại trả về của hàm chính không thể được suy ra (<span class="kw4">    phân vùng_point (r &amp;&amp; r, pred, proj proj = {});</span>chủ yếu<span class="br0">.</span><span class="br0">)</span> <span class="br0">danh tính</span>...<span class="br0">{</span>không được phép).</td> <td><span class="t-mark-rev t-since-cxx14">(kể từ C ++ 14)</span></td>
</tr> </table> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx20">
<td> <span class="t-li">6)</span>Chức năng chính không thể là một<a href="coroutines" title="cpp/language/coroutines">coroutine</a>.</td> <td><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></td>
</tr> </table> <h3 id="Notes">Ghi chú</h3> <p>Nếu hàm chính được xác định với<a href="function-try-block" title="cpp/language/function-try-block">function-try-block</a>, các trường hợp ngoại lệ được ném bởi các chất hủy diệt của các đối tượng tĩnh (bị phá hủy bởi sự ngụ ý<code><a href="../utility/program/exit" title="cpp/utility/program/exit">std::exit</a></code>) không bị bắt bởi nó.</p>
<p>Cách thức mà các đối số được đưa ra tại dòng lệnh hệ điều hành được chuyển đổi thành các mảng ký tự multibyte được tham chiếu bởi<code>argv</code>Có thể liên quan đến việc xử lý được xác định thực hiện:</p>
<ul>
<li> <a class="external text" href="https://docs.microsoft.com/en-us/cpp/cpp/main-function-command-line-args" rel="nofollow">Parsing C++ Command-Line Arguments</a>MSDN</li>
<li> <a class="external text" href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_01" rel="nofollow">Shell Introduction</a>Posix</li>
</ul> <h3 id="Example">Ví dụ</h3> <div class="t-example">
<p>Trình bày cách thông báo cho một chương trình về nơi tìm đầu vào của nó và nơi viết kết quả của nó.<br/>Một lời cầu khẩn có thể:<code>./convert table_in.dat table_out.dat</code></p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;CstDlib&gt;</pre></div> <p>#include &lt;Istream&gt;</p>
<div class="text source-text"><pre data-language="c">#include &lt;iomanip&gt;</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/1003.html" rel="nofollow">CWG 1003</a> </td> <td>C ++ 98</td> <td>#include &lt;Istream&gt;<code>main</code> </td> <td>int main (int argc, char *argv [])</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/1886.html" rel="nofollow">CWG 1886</a> </td> <td>C ++ 98</td> <td>{</td> <td>bị cấm</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/2479.html" rel="nofollow">CWG 2479</a> </td> <td>C ++ 20</td> <td>    std :: cout &lt;&lt; "argc ==" &lt;&lt; argc &lt;&lt; '\ n';</td> <td>bị cấm</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/language/main_function" title="c/language/main function">C documentation</a></span>vì<span class=""><span><code>main</code>chức năng</span></span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/language/main_function">https://en.cppreference.com/w/cpp/language/main_function</a>
</p>
</div>
