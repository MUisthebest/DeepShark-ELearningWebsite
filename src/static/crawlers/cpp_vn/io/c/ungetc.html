 <h1 class="firstHeading" id="firstHeading">STD :: UNGETC</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../../header/cstdio" title="cpp/header/cstdio">&lt;cstdio&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">int ungetc (int ch, std :: file *stream);</pre>
</td> <td class="t-dcl-nopad"> </td> <td class="t-dcl-nopad"> </td> </tr> </table> <p>Nếu như<code>ch</code>không bằng<code><a href="../c" title="cpp/io/c">EOF</a></code>, đẩy nhân vật<code>ch</code>(diễn giải lại như<code>unsigned char</code>) vào bộ đệm đầu vào được liên kết với luồng<code>stream</code>theo cách như vậy so với hoạt động đọc tiếp theo từ<code>stream</code>sẽ lấy lại nhân vật đó. Thiết bị bên ngoài được liên kết với luồng không được sửa đổi.</p>
<p>Stream Tái định vị hoạt động<code><a href="fseek" title="cpp/io/c/fseek">std::fseek</a></code>Thì<code><a href="fsetpos" title="cpp/io/c/fsetpos">std::fsetpos</a></code>, Và<code><a href="rewind" title="cpp/io/c/rewind">std::rewind</a></code>loại bỏ những ảnh hưởng của<code>ungetc</code>.</p>
<p>Nếu như<code>ungetc</code>được gọi là hơn một lần mà không cần đọc hoặc định vị lại, nó có thể thất bại (nói cách khác, bộ đệm đẩy có kích thước 1 được đảm bảo, nhưng bất kỳ bộ đệm lớn hơn nào cũng được xác định bằng thực hiện). Nếu nhiều thành công<code>ungetc</code>đã được thực hiện, đọc các hoạt động lấy lại các ký tự được đẩy theo thứ tự ngược lại<code>ungetc</code></p>
<p>Nếu như<code>ch</code>Mẫu &lt;class inputit1, class inputit2&gt;<code><a href="../c" title="cpp/io/c">EOF</a></code>, hoạt động thất bại và luồng không bị ảnh hưởng.</p>
<p>Một cuộc gọi thành công đến<code>ungetc</code>Xóa kết thúc cờ trạng thái tệp<code><a href="feof" title="cpp/io/c/feof">std::feof</a></code>.</p>
<p>Một cuộc gọi thành công đến<code>ungetc</code>Trên một luồng nhị phân sẽ giảm, chỉ báo vị trí luồng một (hành vi không xác định nếu chỉ báo vị trí luồng bằng không).</p>
<p>Một cuộc gọi thành công đến<code>ungetc</code>Trên luồng văn bản sửa đổi chỉ báo vị trí luồng theo cách không xác định nhưng đảm bảo rằng sau khi tất cả các ký tự được đẩy lại được truy xuất với thao tác đọc, chỉ báo vị trí luồng bằng với giá trị của nó trước<code>ungetc</code>.</p>
<h3 id="Parameters">) với giá trị ban đầu</h3> <table class="t-par-begin"> <tr class="t-par"> <td>ch</td> <td>-</td> <td>ký tự được đẩy vào bộ đệm luồng đầu vào</td>
</tr> <tr class="t-par"> <td>không đáp ứng</td> <td>-</td> <td>luồng tệp để đặt ký tự trở lại</td>
</tr>
</table> <h3 id="Return_value">phải sao cho một đối tượng thuộc loại</h3> <p>Về thành công<code>ch</code>bất kể</p>
<p>Về thất bại<code><a href="../c" title="cpp/io/c">EOF</a></code>được trả lại và luồng đã cho vẫn không thay đổi.</p>
<h3 id="Notes">Ghi chú</h3> <p>Kích thước của bộ đệm phản hồi thay đổi trong thực tế từ 4K (Linux, MacOS) đến ít nhất là 4 (Solaris) hoặc tối thiểu được đảm bảo 1 (HPUX, AIX).</p>
<p>Kích thước rõ ràng của bộ đệm phản hồi có thể lớn hơn nếu ký tự được đẩy ngược tương đương với ký tự hiện có tại vị trí đó trong chuỗi ký tự bên ngoài (việc thực hiện có thể chỉ đơn giản là giảm chỉ báo vị trí tệp đọc và tránh duy trì bộ đệm phản hồi).</p>
<h3 id="Example">Ví dụ</h3> <div class="t-example">
<p>Thể hiện việc sử dụng<code>std::ungetc</code>Trong mục đích ban đầu của nó: thực hiện<code><a href="fscanf" title="cpp/io/c/fscanf">std::scanf</a></code></p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;Cctype&gt;</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">#include &lt;Cstdio&gt;</pre></div> </div> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="fgetc" title="cpp/io/c/fgetc"> <span class="t-lines"><span>FGETC</span><span>getc</span></span></a></div> </td> <td>Nhận một ký tự từ luồng tệp<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/io/ungetc" title="c/io/ungetc">C documentation</a></span>vì<code>ungetc</code> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/io/c/ungetc">https://en.cppreference.com/w/cpp/io/c/ungetc</a>
</p>
</div>
