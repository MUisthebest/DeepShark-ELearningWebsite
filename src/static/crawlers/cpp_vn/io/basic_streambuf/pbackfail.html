 <h1 class="firstHeading" id="firstHeading">std :: basic_streambuf &lt;biểu đồ, đặc điểm&gt; :: pbackfail</h1> <table class="t-dcl-begin"> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">được bảo vệ:</pre>
</td> <td class="t-dcl-nopad"> </td> <td class="t-dcl-nopad"> </td> </tr> </table> <p>ảo int_type pbackfail (int_type c = đặc điểm :: eof ());</p>
<ul>
<li> <code>gptr()</code>khoảng cách<a href="../../language/pointer#Null_pointers" title="cpp/language/pointer">null</a>Thì</li>
<li> <code>gptr() == eback()</code>, hoặc</li>
<li> <code>traits::eq(traits::to_char_type(c), gptr()[-1])</code>(C ++ 20)<code>false</code>.</li>
</ul> <p>Chức năng này chỉ có thể được gọi nếu bất kỳ điều kiện nào sau đây được thỏa mãn:<code><a href="sungetc" title="cpp/io/basic streambuf/sungetc">sungetc()</a></code>Và<code><a href="sputbackc" title="cpp/io/basic streambuf/sputbackc">sputbackc()</a></code>Hàm ảo được bảo vệ này được gọi bởi các chức năng công cộng<a href="../basic_istream/unget" title="cpp/io/basic istream/unget"><code>basic_istream::unget</code></a>Và<a href="../basic_istream/putback" title="cpp/io/basic istream/putback"><code>basic_istream::putback</code></a>Chức năng này được gọi bởi các chức năng công cộng</p>
<div class="t-li1">
<span class="t-li">1)</span>) khi một trong hai:<code>pbackfail()</code>Không có vị trí putback trong khu vực GET (<code>pbackfail()</code>được gọi không có tranh luận). Trong tình huống này, mục đích của</div> <div class="t-li1">
<span class="t-li">2)</span>, ví dụ. bằng cách gọi<code>pbackfail()</code>là để sao lưu khu vực GET theo một ký tự, nếu chuỗi ký tự được liên kết cho phép điều này (ví dụ: một luồng được hỗ trợ tệp có thể tải lại bộ đệm từ một tệp, bắt đầu một ký tự trước đó).<code>pbackfail()</code>được gọi với nhân vật cần được đặt lại). Trong tình huống này, mục đích của<code>c</code>là đặt nhân vật<a href="gptr" title="cpp/io/basic streambuf/gptr"><code>basic_streambuf::gptr()</code></a>vào khu vực nhận ở vị trí ngay trước</div> <p>, và, nếu có thể, để sửa đổi trình tự ký tự liên quan để phản ánh sự thay đổi này. Điều này có thể liên quan đến việc sao lưu khu vực GET như trong biến thể đầu tiên.<code>Traits::eof()</code>Phiên bản lớp cơ sở mặc định của chức năng này không làm gì và trả về<a href="../basic_stringbuf/pbackfail" title="cpp/io/basic stringbuf/pbackfail"><code>basic_stringbuf::pbackfail</code></a>Thì<a href="../basic_filebuf/pbackfail" title="cpp/io/basic filebuf/pbackfail"><code>basic_filebuf::pbackfail</code></a>Thì<a href="../strstreambuf/pbackfail" title="cpp/io/strstreambuf/pbackfail"><code>strstreambuf::pbackfail</code></a>Trong tất cả các tình huống. Hàm này được ghi đè bởi các lớp dẫn xuất:</p>
<h3 id="Parameters">) với giá trị ban đầu</h3> <table class="t-par-begin"> <tr class="t-par"> <td>ch</td> <td>-</td> <td>và dự kiến ​​sẽ được ghi đè bởi các lớp luồng thư viện được xác định bởi người dùng và bên thứ ba.<code>Traits::eof()</code>nhân vật để đặt lại hoặc</td>
</tr>
</table> <h3 id="Return_value">phải sao cho một đối tượng thuộc loại</h3> <p><code>Traits::eof()</code>Nếu chỉ yêu cầu trở lại</p>
<h3 id="Example">Ví dụ</h3> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue32" rel="nofollow">LWG 32</a> </td> <td>C ++ 98</td> <td>Trong trường hợp thất bại, một số giá trị khác để chỉ ra thành công. Phiên bản lớp cơ sở luôn thất bại.<code>traits::eq(*gptr(),traits::to_char_type(c))</code><br/>(C ++ 20)<code>false</code>Điều kiện gọi '<code><a href="sputbackc" title="cpp/io/basic streambuf/sputbackc">sputbackc()</a></code> </td> <td>'Không phù hợp với mô tả của<br/>sửa chữa để phù hợp</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../basic_filebuf/pbackfail" title="cpp/io/basic filebuf/pbackfail"> <span class="t-lines"><span>setp</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">. Con trỏ được đảm bảo là hợp lệ ít nhất là cho đến khi đối tượng ngoại lệ mà nó thu được bị phá hủy hoặc cho đến khi hàm thành viên không phải là const (ví dụ: toán tử gán bản sao) trên đối tượng ngoại lệ được gọi.</span></span></span></div> </td> <td>Đọc từ tệp liên quan và tiến lên con trỏ tiếp theo trong khu vực Get<br/> <span class="t-mark">Putback<code>std::basic_filebuf&lt;CharT,Traits&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../basic_stringbuf/pbackfail" title="cpp/io/basic stringbuf/pbackfail"> <span class="t-lines"><span>setp</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">. Con trỏ được đảm bảo là hợp lệ ít nhất là cho đến khi đối tượng ngoại lệ mà nó thu được bị phá hủy hoặc cho đến khi hàm thành viên không phải là const (ví dụ: toán tử gán bản sao) trên đối tượng ngoại lệ được gọi.</span></span></span></div> </td> <td>đối tượng và chuỗi nó giữ<br/> <span class="t-mark">Putback<code>std::basic_stringbuf&lt;CharT,Traits,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../strstreambuf/pbackfail" title="cpp/io/strstreambuf/pbackfail"> <span class="t-lines"><span>setp</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">. Con trỏ được đảm bảo là hợp lệ ít nhất là cho đến khi đối tượng ngoại lệ mà nó thu được bị phá hủy hoặc cho đến khi hàm thành viên không phải là const (ví dụ: toán tử gán bản sao) trên đối tượng ngoại lệ được gọi.</span></span></span></div> </td> <td>Backs ra trình tự đầu vào để tháo một ký tự<br/> <span class="t-mark">Putback<code>std::strstreambuf</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="sungetc" title="cpp/io/basic streambuf/sungetc"> <span class="t-lines"><span>Putback</span></span></a></div> </td> <td>Sputbackc<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="sputbackc" title="cpp/io/basic streambuf/sputbackc"> <span class="t-lines"><span>Sputn</span></span></a></div> </td> <td>Gọi<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/io/basic_streambuf/pbackfail">https://en.cppreference.com/w/cpp/io/basic_streambuf/pbackfail</a>
</p>
</div>
