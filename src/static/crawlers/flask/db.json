{"index":"<h1>Welcome to Flask</h1> <img alt=\"_images/flask-horizontal.png\" class=\"align-center\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmoAAADICAMAAABvRz2BAAAC7lBMVEVHcEwqISMqISMqISM5qb4qISMqISMqISMqISMqISMqISMqISMqISMqISMqLzNPs8VxxNAqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMcb3YqISMqISMqISMqISMieYQqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISMqISNJsMMqISOS1NlRtcZZuchivcuIztZrwc5cs790xdBCqLqj299+ydOh2t6d2Nye2d0vlaWa19uJztZRtMY5qb86qb85qb8cb3cdcXktkJ8ukqI5qb+h2t4fdH2S09mKz9cdcXkec3wecXofc3yo//8b/74qISMbbXT///85qb46qb87qb9BrMA8qr98yNKk29+q3uA9qr9JsMOh2t5LscNRtMV0xNCm3N9Os8U/q8B2xdBswc5ArMBqwM1ivMlbuchYuMdCrcFXt8aJzteO0NhGr8Jvw8+IztaFzNWM0Nea1tyAytSEzNV6x9JDrcGi2t6W1Ntmv8xErsGDy9Sd2NyY1tuT09mQ0tmR0tmU09k+qr9+ydOS09mLz9es3+GGzNWN0NiV1deZ1tuV1NqX1duKz9dNssSc19ye2Nyb19wYa3Go3eB/ytRkvMpov8yn3N9duchauMhTtcZ3xtGAy9Rgu8lIsMNHr8JFrsJxw88+q795x9Gf2NxUtcar3+B7yNKCy9R4x9Gt3+FyxNBfu8leushQtMVVtsaHzdYSaG+P0dhlvcthu8mHztZpwM1uwc6P0tgVaXCf2d0ZbHNmvswleYFuws6By9RWtsYdcHf2+vood37d7O3q9fbO4OGOt7r7/f0yfIJKjJEykJ1toqbl7/Asipg5gYZgmZ1VsL39/v7x9vc5qsDQ5+l5qq1UkpeFsbQkc3pBhotrucInhZJJqrqox8m609XF2tu54udkvsxjtsFPrbyxzc8QZm2XvL+fwsVDrsJcs7+j2OBEr8OU0tsAGgZHcEzGGsaYAAAA+nRSTlMAwSCT/vSPtxPmdEaxgAMZGV1Miv2pF8fjhgYw7po58OrOagwYU/neECQpQqOtZHrTG+/Y7+/v7+/vB+/+4e/Ed5YQXBH+u91r3sJMKZCzZy0Zr42bey3///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ABI/45AAAGQFJREFUeNrs3XtMU1keB/ACqRSE7vIs9BUeaYEiYIPZ3ZkNC8T52+h/LX+hySSaQNDNapARiBJ3HScMDtGZzE5lxEmHP4hGRCShPpitVYw8FA0E0SiKiTC+s2b/Xd70ce7tOeee03vPzPn+C17F38f7O8+qUgVEu31rZXnZns49Ck7nnrLyyq3btSoedrOjorzzwokTlxjIhc7yih28Yozms4qyRWYn2MiCtrKKz3jVWMzWshOozC7Im0u7yrbyujGXTytPo1R5l0LSWfkprx1jzXPbLiZz+vQ23kTZklZO3kCkUs6tsdQ9t1Gk0Ek723gPZSeVdC2EWSWTnEpeQWbmnoflXZPdKS2HP/J5KCsDtbKdjKeMD9fYSAXr0g7vrOBVZCE7WHqpHQanjO9RMfFSO8xkPvfPDf5aY2GhoxypqApNOV/wUH62n/+c+dy4cWg7r6TyVzpuBFWNVs5TDV/vYGD5lkrl/x3h/JMv4yo/5bQRRCblvJKKz5ZIYQiT7yXlSBmfFyg+R75XWn7AyZY/8lIqn9oPis0h+Gzhi7hsUDvEdk6ePMmpKT+nQqrGZDg1FqiFKeK/mAinpvwcI2XpW1nDqSk/X1Os/5HIhVNTfo5HRMIp2uHUWKB2SoH5CjWcmvJz5Ss2ckw8nBqL1I6xkq/9wqkxQA2xpsrMcU6NAWp4pVVaODXlp51Usb8MifhXieYA325ngNqXMuU/RPMXTk3x+QJcuity5QBWrnBqys/+A+ynvb2dU2OOWjuj4dQYoBa2il+wEE5N+TlIrfptkQynpvwMtMmQ74iHU2OA2neKyH7kHAwIp6b8NCDWVKFRALWStJAkse8j1xT6YxkwqR38TUQB1GIdIYlhn5rGGPpjbcR7VBNUJa8vRvyr9DIAEWVS2/AboBZHjhpiTTHzDeX8jVNTPLXGb2ROA5FwagxQa6CcpsbGo7i/tKlJ/KtrGeDUGKHWRC0XOw7uvHS8iXpwqOXaknNSTEWxUYgxc2p41CBreRQnja0Hfh2rqprsHjhKOcjUCnKK8qwOrCRzalhppVb9i62Nh54MVy3k8eyL6xfpBpHaxgS1AzucGiY1QrW+HZTG1oHO0UdVS3l8//mL67dx8zNMkKgZElIdDk4t4tQQawqX1p72xc65kuEpz8iL65Ie2BgmKNQsWQ4HpyYDNcSaQqSjuvXb5c65Rs3lGnnR1EgxCNSSrA5OTRZqGJRE09rTtNY5V6nNep2uWy+aOugFnlqh2sGpyUKtmli1WxfT09zm1zlXMv7A61yy1kot0NTyNzs4NXmoNROsd/W56iMBnXM1MwvUnAs99Db6IyEDTa3EwanJRa2aVJrdjR9Hx6tAeehxLlv7uZpOmmGpaTI4NdapnXPvD+2cq5lYokbTGiy1YgenJhe1cyQK3ePuAXfOlTxdprZkrYdK/gpJLZZTk42aW3qZe90dH4PmnEF5tkINZK2ZSCCp2Y2cmnzUpBbZXTMg3DlX8n6V2qK1jmYKgaSW7ODUFEbtHGR6a3r/J9Y5V/JyjdqStXPkA0mthFOTj1oNfnl73X2tQnPOwMy5nH7WXnf0Eg8ktU2cmozUsKtb0xe+c65k3ukLsNbjBjzPLSWQ1KI4Nfmo7casbZ8bpnOu5MkdP2rL1qSlJjhw1PSlnJqM1Gowsru+OcycMzCTI34ddNlaDdnAUcsXWcA1ZsduMsXAxMapRYpaX3cDbOesWj2wFkBt0VqvHNTShdY6jKZku15iURRMLVcTXWCzFRTYNbkyUutDfqH1HYfvnH5HO0St7ZYaOGrRAqc6Ym0E6kmXmlafn15gMG+0FMej3JnX2yyJabrSOKPaalWrjXGluqKUYrNGFmrdSBXtHnIjdc6A/fYAa7de90rD1bca6dRic1UyU8uPNhQmW5JAySnJNKXFRmWXZhjVy4eHY6GZWEybgYfz4mJLDFolUlsrav3QUcTOGbjfHmytj1ykUMuKVslILd8cv0mXoUY4gp4A9+cxx4gdLbDq4u2RpgZfzqE25M4ZvAlKy1q3FGopKtmo6Tea8pDvOUBRK0wIe9g4LsUeUWr10OWsP48Lrarq3junRGvd4vkEn1qqWS5q+iQdzmILBDVbERTgjBwtWWr5iZmArAwuh7ohM9SIL81/ZyrAmrubUCRQy8uViZoZc0E5LDV9PPSpgiI7UWoxoN8jtRCJWn197Xl8aVVzXqeAtXoykUAtViUPtXjcSw7hqNkTEB5WaiBIbSOwacevfHUItphDbeP41O46nQLW+mSnZpKFmj4Ge7ciDDUD2pZInJkYNQ3wdy5abdK10NUceoJPbfS5D8vaEGwkUNsgBzWtyUGJmhn1SHteASlqwH89eWstuha6mrUN+K+1sfs+4ffaLwQigVqmHNQSHZSo2fKQn6fLJUMtGTQVsa5/cx18OW/+ik1teNblFLZWKz0SqCXKQC3ZSolafjbGAzOJUAO3T7+/3Tr4ctZV489BZ7xOQWv/rf+9UdNIOmEiRg2rL6sNJKiZwm3EDCLUs+USNrUJj1PY2uv63xm1TAclaoV4n3tTRIAasH1m+Y8DUajV7R7DlDY+IfhWW36v1UkMU9QKjJSo6XV4T7SaJVNLB40RUy3+33IGpaA3P2JBe/zygVMsBKx98geGqJkclKhZcB8ZI5maKfxjkagN1k6iQ5u8N+Xx+ihbY4lagZoWNZFbrmqj0Si8p5+hkUjNkhp+aotEra6l+sOzt2iLt09HPF5nuCxaG5QSlqhJG6mJULOBDadmxySZbdF2u82clKKzohxih6UGbJ/GoNnGGcSavvE9hHf2aP7hHY/LCZEFa7VnJOTP7FDLz6NFLQf87YX+54u1hhikdWw4asCbaDlB33QTsaa107OPYRfTXs64PD4nXHCstayHIWqi156txriMgKgRqBWBGmdx6H4CYPKg00qhBmyfm1Q41Pxq2jI4DbdBNfl+1rs+RHN5Yay1YIchasKTguwUi8GerglIDDy1XMBqnRrUGdNDrcVpJFCzg97TpenBj7qKXNVXMJsGT57d9xuiud6NzDipWmOHmuAFQV0y6CJNCjw10E+XA96RD/nOVIMEaqD2qS4MedQr5Kpe3f8o7BBt4rnfEM3ruf9sdGzEBWFt8CZm2KFmA4/LUzPBN7YQqJnh+2IM9LwAghqwfZaEPuqqeAlfreSqX2rFF3KH384414doPq9r9sOY6NaUn7Xpwat4YYdaElhavMBTEahZhI+KhbzWQrwXY1Ozg46SJAD+4fyIXtZ+sQ469mHWuw7N5XHOvF3eOb3ngZkbTLf8iBUJ1EoiSw281CF4aA6BWhL8cR/9ZliU4amlgdbpQDeDrqGXtb9N+Fxa4BDN83xiPszpyBBrNyNNTQd1pX2DhhA14BHZPA0BasUI52VNsO/2sNRAb2mrRSWF2t61XDsj0EHvhgzR/Carj6dccNZa9mJEAjXI0w/pZKhps2GWoEhRswieNidFDdg+wXfQrmHU9Syogw7PLQzR1jT5PN7Z95OwhzukW6NOLfxlFzhq+XGgfpOvotNA46F3SzMxqRXBn7Xswqhrf8Oj0CHaA7/lWt/6EC3MrSmgtVcKpJatJUOtAPHMubRpQZrgsfCsoGCO1UDtM0vgYylwqHXtDdp1H13cUfcbot15OD8OuF/ggrZ2DTXUqUURmhaYRW6vSaRWCLijIvS61KcHJReLWjToHS00me2/hpF9h4J21N95/YZoI0+B+wlL/ycLrLWuwN+wK0z6qVMrIkTNgticEagZUlEGgZARpaYtQplM93dhpL9ubR90fC5gR93rnbondNDo2TvY/dCRBWtooU7NRIgaaEs8TUWEGugjvTKiaVIDtc/NGqLUuv5+ae3QY8AQzfXgpfBm/LwPfu99+tVllNB/q2USopboQBi8o1HTg/77LF0BPWoFgK+phQ/09l/GSf8vj0MOPfoWhmhzYvf3hqdcTvj32l7YP8pS/kSbWjwhaqC7koVkqAEXUx0ZOemUqGkT0P6e+kPLBpN/nF469OjymwuMPL2L/nlEYtb6EUKdWhIhaoCtaXU0IWo5AkdsixIthnzy1IrFrrIDcrYfK/vqnvoN0Xxez9S9UYgP+obPQg/dexY+1KklE6KWgLhkh0LNIHy71JoRFZNTiPEhrMLUCrLErrID8tNZvOx7c8vlN0T7AHNeEqGDLr7X3lxWDjWIT8aCowb4Lp2KEDV9uPvGxs3ILzhBaqD2aRX95DVsapenl60trqLNwdxFfjQ3c8eJ9l67vA82tKlZbYSoRaFdIUaiFrrdJPiCM6dLpZaDPHf6aR9ulqx53z2fuAt1Knd+xudxOmlZo03NaCdDTatDXEdBohYNfcH0/+3d209bRx4HcAMhNgZcGQwGGwiXhRgwt432pcpTpYaQporUi7SmaaNVkJHIKlIIm7xU2jz0sX8AD0falcpqSRQpb23QeTyyKq25GGxDjCDlti1QbbhEyvP6cD22Z+bMnDNje5T5PkZJsHM+mTkz85sZV4nV3mGGGqj7LGhhRE21phY94kFbDmFvMzBijTW1Gh87apXUqIF+N6KCoKzCY5Sax6qzlZ0utQc//vdwCRNaQAkYiGrtB6ywptbroUStibBgjoxaXwnhclupQWqA7tOlN0gf+8F4fl/AhXbWooVIrb35KS+ouSmVRoKmWZvpUYPU+CI60nqbEWoddSQ75E1TG536C9ae48XwOTTFQLv2YBQjrKlZOaFGfkhDk5eYWqcDNI7WfcUYGzWcsX/PkUGTQ8u7y8Rjgzc/sqV2uQAjPQypddOk1kJ8ZXhNAym1hm5DWzRMUBudeKS3RU8DLaAkoSV70zB5H/qAKbWsbmNhTs3iKyO1VtJBRs1lbwSN0RtYUhsbnUVD29RCW98hKMZNszamF56pUe1Ak+0aeR9qI6MGnlLp1ZuqmxozkYm/QwcGK7Nrm5quU1rfWTn59U2JvrUpQU07NqihVyFlwx/TVjkYUhsbhu3TU6GdkVKk2M55ifi8HKBv7U8cU+uhTc3SV9lINg4tpUFNr/rFHLWpf8yBoc1ouk4ltqdt/FZjRqyN/gcZnqmVU6eW/KY9TSRnlbo9NKgVdyI/0wvwo5vCzMgj0GZQTXWRCm0acZM7vjXk5+CFGmgK9yIDaknUDeXWEmxurTSoAY6ESaE2ZS4v0/cRLOlAM9SFHlk7/agvAOGGGtM10AwnXmd5VVMjBjgrFWp/7kItqnz8wlyG/7maehqpFpq8tQ2q+ZheN2RtDPExeKEGquzoYkbtWHd1g7O2qxe9El/cQYUa8r3TLLUX45oudG4+uq8LTe1io4qhdm0CGm6oWQn3/ZmndtKf9iXBlV1pI32lJ6SGqlj7eMJsRn4/h3beoklyAlEuuRuWjFib4p9aFeFSPi1qJ3NuXrubrAclpIaqw6VA7aejUejcQULbdSaQdbkr21LIgLXfpoYh4YYaYH610ZY1amrz5gSeJQg7NpKUGvC4qxNqw6YT/NfC4OqBZn+7JEcP9ArA5xWq1rihBqDj8maTmsVSbSWoaCemBv/3pEBtOPjtYULbdUYPMG5t2ZANWZvgnJqdcDcWA2qW6l78D4GiBh7atlUwpDY88urMTRLaPN71QPOKRK9d44YaqKDsYpapAe+DKiem1uitApeKFDKkNjwVl86gYV/YchAwZG3iJSDcUOsELXcjxgW1LKiBJpL9xNS6wTdjJIcY4O8z8pJKJlRrSWgbJDcD7c0otKxxQw106nIb/GWtuowFNdBxDlZSaupJI51tBKdO4FEb0YtqbX9mg/AKqsjWfsiItcyfzw014KOD1Urb7KBmA0ytpbQiLYhdJaXYs3tQapePFqF6wMv3wHWu8RFKeRlfmx0kzeqakRpwgDVuqAEPKK0DqvA1g/unMszvhpi5BxwoCDmrEEbNdfzy7wAXYpa0s6Q2/jdDFzjubOFcQiVphxAga9xQA5/hUpb5nFuae2EzV+DCoTqCDcDVjWapnX61QvB/B9CWUGrURoIGLwudn9lHYAspUkiRZ9a1S1lJa8dd+vhZ/sgNtR6st5sWJ/xQhDJMPYhlfF+NSWpNZ5Qg19BXGqU2jpMhY9aOqtsg2CQ5vDUTiB0upS6bqtZSfzY/1ErBfop8KTP6qNM3yjBNFDiYUdOeolaO+7o2TjFGraln6SoAbZISXYtMzx6fq7snBaDWgkF+qPVBSiyaWk8bCkcr+l5syLDgMsHhD4Um39W0i/MeK+bmGEJNQWQef7tiENv0zmJUklMndaVEyhGUKftfpJ+vjmh/Mj/UHFBHV4qc3kKbr6JAb5URPFfmJliFKHWZmuxIfbUsBG9lyDhSPkg1Tx8tDBrN3M7G+kxAkWVFkdQo+6mX3C6lVB6lWeOHGvKSY1ddjf7FtJB5tTKCMu567AJNELX08SXkda2IKbXgm7+uDprIUmR7Y3E9tpWIJra2YhupbeS2EoBa44haJ0nRPwG1SvwiNC/2dY5Aat14/3vSD/GgTC345H+zg6azML06PZ3RF68sw61xRK2F0YXagNXVNrCfviZzlR0Zu1U84D4/7fJ2A5qGUAl+99vuIKOkNmuqtfHTH8sRNeDJyxSogZa8XH7AmlcnaMIOdqoX3t3t7eApkdRzPIao51n8YIENtQM5ALPGE7UGFxNq4ONJi63NKSeS9rV2Ad+s/BYz1MDXz6a9ANKnNj4ZX15iIW0n46Lkc2s8UfO4mVCDjjdcNe6u+toeu72n0u+G7WapMEfNchFW/XGeySEG2F5F92g7W9peB9QcnVnjiRrwFHYK1BAHfOsf2+ExSa3Frfu6xoLa0HhcWqTasEXWojKwQly1NpkMV9R8l5lQc1iN/53QKThcapYO8NkNTee99ySTjMf3o4fT9KjFoMukSWtB3qjB7rIwSc3ENArZQQrgDXhO8E/3M6Y2GYwr8rr5oejJhEdkM4SoKboafPqUL2q+K7gGGi/WEJRGVhmUhrgYCp8abGR99rr2+CmbBOMhObAcMTW7tru4oa5Z7S4iz8lKWpvkjBqwuB9EoKgd0AIiDpMvMUYNcYQQATXI69qZY1bUnk7GQ+oFZ7tGV0V/OYgF9md2IvNbesfQq9Y4o4Y1t9ZW5QWOVxEF362GulDUgckE1CxeyBl/thRqj+lHtXZ0s7aBparZw/VNdRwghcKyglGXe5U3ar4CXQDWTsgbGGpvgd2AtHoPJWqwobX/eHX+Mbsk+9BQICQriY0IyZzudOQg6eykpgjvClHpZ96oAReHUl7UW6FvYMhtLD2k7ZqrFnnYIxE12PnizaypHbVrx/WNsfkI1nh0YXZvbSssE+98ly7xRs1SiJrIvdKtqcBJvyQAvWOqu45IWo3OxRZk1GxNiNe1ZyxzYk29xDGwtbj9C5LbXGR7LbapyAZOWAiEL/2BN2oWmx/6+O2pC5LlRJvzvAUETZpf78JtMmqWBvDNEEdn/D1jbE06vzJUDieW5/ciS2k1GyvTS5Gdg8VYNCDLBja8H4dDahaLEziVW1fbh54b0dsH6unuxYRm7dT9VoTUYK9r6pW037HNu7imjQpJSUyBmURseXFtY17NxtriciwxE1YLIg2cTcQ5NUt1ecasWXF9u159kP6W4xanVf/emeKuUoeFOjWLHzqfwpja23fxtDf7kKQkYZ1kXz4qujWDjIiaC3srNnkKyGYRTrA1F2hRuLqAG90dBRil2WndqL0A9dJW7O7BuqPRYqvDX5o//gO9sPV8A3yekCRpTQqwDx41X7M9Mw2UqNn99UVqKtXUlqspxflz7c56d02xSzu/kbnAqP3ArZgfqLrUXtVUkrEG72p01zvbcb+VB/BPVqiDHJhWyxPmeRsP5Qu1vI2vvaGi1YnToRHGYevobG3uqSyq9ydTf7G8ucJb7cjNl2RP7UlGHyqovZd5mIW8iwtqIlmh9vAhc2uC2ntH7RtgHjLvQwW1/M832Qnrdk1QE9RO8/aVJKgJalmyFhLUBLXs9KEs2zVBTVDLkjVBjQNq97OWhwytCWqCWkrYjQ0ENUEtrWFjZU1Qy//cy2ru32c0DhXUBLUMbGzaNUFNUMugluxDQ4La+07teTZyn0m7Jqjlf2gJ+h47z1lYE9TyP99nP/fu0bcmqL0/1O4S5N5z6tYENQ6o3c1FqLdrgpqgBs5z2tYENUENZo1yHyqo5X/u3slNKFsT1AS1LFkT1AQ1VChaE9TyP/05pEaxXRv4UDzKfM+1r3MXiu3aDfEk8z6f3v46l/mVkrUvxJPM+1zPqbQ7dyhZuyWeZN7n5tXcWqPTrl26KZ5k3sdh8mXttsm8vk3BWuiGQzxJDnrQ27kNFWui/+QhH/Tzb21AzKqJZi071r4UT5GLfNTPu7WBj8RT5COfXODc2ifiGXIzjftVrvP6tQlrn4snyE0+vMaztc/E8idPr2t5YO0rg9ZuiBc1YS0r1j4T0rh7X7vAo7Xw56L35HAc2s+ftQEx9uSzE73ez5e1gS9F58lpHB9cv3aVA2tHp8tcunFLrEZxnZvXP73WfyFneX3h10BYL5sDN764JaqGeMv/ASpssWx8AuPkAAAAAElFTkSuQmCC\"> <p>Welcome to Flask’s documentation. Flask is a lightweight WSGI web application framework. It is designed to make getting started quick and easy, with the ability to scale up to complex applications.</p> <p>Get started with <a class=\"reference internal\" href=\"installation/index\"><span class=\"doc\">Installation</span></a> and then get an overview with the <a class=\"reference internal\" href=\"quickstart/index\"><span class=\"doc\">Quickstart</span></a>. There is also a more detailed <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/\"><span class=\"doc\">Tutorial</span></a> that shows how to create a small but complete application with Flask. Common patterns are described in the <a class=\"reference internal\" href=\"patterns/index\"><span class=\"doc\">Patterns for Flask</span></a> section. The rest of the docs describe each component of Flask in detail, with a full reference in the <a class=\"reference internal\" href=\"api/index\"><span class=\"doc\">API</span></a> section.</p> <p>Flask depends on the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com\">Werkzeug</a> WSGI toolkit, the <a class=\"reference external\" href=\"https://jinja.palletsprojects.com\">Jinja</a> template engine, and the <a class=\"reference external\" href=\"https://click.palletsprojects.com\">Click</a> CLI toolkit. Be sure to check their documentation as well as Flask’s when looking for information.</p> <section id=\"user-s-guide\"> <h2>User’s Guide</h2> <p>Flask provides configuration and conventions, with sensible defaults, to get started. This section of the documentation explains the different parts of the Flask framework and how they can be used, customized, and extended. Beyond Flask itself, look for community-maintained extensions to add even more functionality.</p>  <ul> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"installation/index\">Installation</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"installation/index#python-version\">Python Version</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"installation/index#dependencies\">Dependencies</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"installation/index#virtual-environments\">Virtual environments</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"installation/index#install-flask\">Install Flask</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"quickstart/index\">Quickstart</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#a-minimal-application\">A Minimal Application</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#debug-mode\">Debug Mode</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#html-escaping\">HTML Escaping</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#routing\">Routing</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#static-files\">Static Files</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#rendering-templates\">Rendering Templates</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#accessing-request-data\">Accessing Request Data</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#redirects-and-errors\">Redirects and Errors</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#about-responses\">About Responses</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#sessions\">Sessions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#message-flashing\">Message Flashing</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#logging\">Logging</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#hooking-in-wsgi-middleware\">Hooking in WSGI Middleware</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#using-flask-extensions\">Using Flask Extensions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"quickstart/index#deploying-to-a-web-server\">Deploying to a Web Server</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/\">Tutorial</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/layout/\">Project Layout</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/factory/\">Application Setup</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/database/\">Define and Access the Database</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/views/\">Blueprints and Views</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/templates/\">Templates</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/static/\">Static Files</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/blog/\">Blog Blueprint</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/install/\">Make the Project Installable</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/tests/\">Test Coverage</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/deploy/\">Deploy to Production</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/next/\">Keep Developing!</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"templating/index\">Templates</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templating/index#jinja-setup\">Jinja Setup</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templating/index#standard-context\">Standard Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templating/index#controlling-autoescaping\">Controlling Autoescaping</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templating/index#registering-filters\">Registering Filters</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templating/index#context-processors\">Context Processors</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templating/index#streaming\">Streaming</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"testing/index\">Testing Flask Applications</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#identifying-tests\">Identifying Tests</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#fixtures\">Fixtures</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#sending-requests-with-the-test-client\">Sending Requests with the Test Client</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#following-redirects\">Following Redirects</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#accessing-and-modifying-the-session\">Accessing and Modifying the Session</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#running-commands-with-the-cli-runner\">Running Commands with the CLI Runner</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"testing/index#tests-that-depend-on-an-active-context\">Tests that depend on an Active Context</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"errorhandling/index\">Handling Application Errors</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#error-logging-tools\">Error Logging Tools</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#error-handlers\">Error Handlers</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#custom-error-pages\">Custom Error Pages</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#blueprint-error-handlers\">Blueprint Error Handlers</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#returning-api-errors-as-json\">Returning API Errors as JSON</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#logging\">Logging</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"errorhandling/index#debugging\">Debugging</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"debugging/index\">Debugging Application Errors</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"debugging/index#in-production\">In Production</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"debugging/index#the-built-in-debugger\">The Built-In Debugger</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"debugging/index#external-debuggers\">External Debuggers</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"logging/index\">Logging</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"logging/index#basic-configuration\">Basic Configuration</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"logging/index#email-errors-to-admins\">Email Errors to Admins</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"logging/index#injecting-request-information\">Injecting Request Information</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"logging/index#other-libraries\">Other Libraries</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"config/index\">Configuration Handling</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#configuration-basics\">Configuration Basics</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#debug-mode\">Debug Mode</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#builtin-configuration-values\">Builtin Configuration Values</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#configuring-from-python-files\">Configuring from Python Files</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#configuring-from-data-files\">Configuring from Data Files</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#configuring-from-environment-variables\">Configuring from Environment Variables</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#configuration-best-practices\">Configuration Best Practices</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#development-production\">Development / Production</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"config/index#instance-folders\">Instance Folders</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"signals/index\">Signals</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"signals/index#core-signals\">Core Signals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"signals/index#subscribing-to-signals\">Subscribing to Signals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"signals/index#creating-signals\">Creating Signals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"signals/index#sending-signals\">Sending Signals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"signals/index#signals-and-flask-s-request-context\">Signals and Flask’s Request Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"signals/index#decorator-based-signal-subscriptions\">Decorator Based Signal Subscriptions</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"views/index\">Class-based Views</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"views/index#basic-reusable-view\">Basic Reusable View</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"views/index#url-variables\">URL Variables</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"views/index#view-lifetime-and-self\">View Lifetime and <code>self</code></a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"views/index#view-decorators\">View Decorators</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"views/index#method-hints\">Method Hints</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"views/index#method-dispatching-and-apis\">Method Dispatching and APIs</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"lifecycle/index\">Application Structure and Lifecycle</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"lifecycle/index#application-setup\">Application Setup</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"lifecycle/index#serving-the-application\">Serving the Application</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"lifecycle/index#how-a-request-is-handled\">How a Request is Handled</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"appcontext/index\">The Application Context</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appcontext/index#purpose-of-the-context\">Purpose of the Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appcontext/index#lifetime-of-the-context\">Lifetime of the Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appcontext/index#manually-push-a-context\">Manually Push a Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appcontext/index#storing-data\">Storing Data</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appcontext/index#events-and-signals\">Events and Signals</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"reqcontext/index\">The Request Context</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"reqcontext/index#purpose-of-the-context\">Purpose of the Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"reqcontext/index#lifetime-of-the-context\">Lifetime of the Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"reqcontext/index#manually-push-a-context\">Manually Push a Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"reqcontext/index#how-the-context-works\">How the Context Works</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"reqcontext/index#callbacks-and-errors\">Callbacks and Errors</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"reqcontext/index#notes-on-proxies\">Notes On Proxies</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"blueprints/index\">Modular Applications with Blueprints</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#why-blueprints\">Why Blueprints?</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#the-concept-of-blueprints\">The Concept of Blueprints</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#my-first-blueprint\">My First Blueprint</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#registering-blueprints\">Registering Blueprints</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#nesting-blueprints\">Nesting Blueprints</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#blueprint-resources\">Blueprint Resources</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#building-urls\">Building URLs</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"blueprints/index#blueprint-error-handlers\">Blueprint Error Handlers</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"extensions/index\">Extensions</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"extensions/index#finding-extensions\">Finding Extensions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"extensions/index#using-extensions\">Using Extensions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"extensions/index#building-extensions\">Building Extensions</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"cli/index\">Command Line Interface</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#application-discovery\">Application Discovery</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#run-the-development-server\">Run the Development Server</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#open-a-shell\">Open a Shell</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#environment-variables-from-dotenv\">Environment Variables From dotenv</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#environment-variables-from-virtualenv\">Environment Variables From virtualenv</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#custom-commands\">Custom Commands</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#plugins\">Plugins</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#custom-scripts\">Custom Scripts</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cli/index#pycharm-integration\">PyCharm Integration</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"server/index\">Development Server</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"server/index#command-line\">Command Line</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"server/index#in-code\">In Code</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"shell/index\">Working with the Shell</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"shell/index#command-line-interface\">Command Line Interface</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"shell/index#creating-a-request-context\">Creating a Request Context</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"shell/index#firing-before-after-request\">Firing Before/After Request</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"shell/index#further-improving-the-shell-experience\">Further Improving the Shell Experience</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"patterns/index\">Patterns for Flask</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/packages/index\">Large Applications as Packages</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/appfactories/index\">Application Factories</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/appdispatch/index\">Application Dispatching</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/urlprocessors/index\">Using URL Processors</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/sqlite3/index\">Using SQLite 3 with Flask</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/sqlalchemy/index\">SQLAlchemy in Flask</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/fileuploads/index\">Uploading Files</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/caching/index\">Caching</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/viewdecorators/index\">View Decorators</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/wtforms/index\">Form Validation with WTForms</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/templateinheritance/index\">Template Inheritance</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/flashing/index\">Message Flashing</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/javascript/index\">JavaScript, <code>fetch</code>, and JSON</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/lazyloading/index\">Lazily Loading Views</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/mongoengine/index\">MongoDB with MongoEngine</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/favicon/index\">Adding a favicon</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/streaming/index\">Streaming Contents</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/deferredcallbacks/index\">Deferred Request Callbacks</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/methodoverrides/index\">Adding HTTP Method Overrides</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/requestchecksum/index\">Request Content Checksums</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/celery/index\">Background Tasks with Celery</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/subclassing/index\">Subclassing Flask</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"patterns/singlepageapplications/index\">Single-Page Applications</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"web-security/index\">Security Considerations</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"web-security/index#resource-use\">Resource Use</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"web-security/index#cross-site-scripting-xss\">Cross-Site Scripting (XSS)</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"web-security/index#cross-site-request-forgery-csrf\">Cross-Site Request Forgery (CSRF)</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"web-security/index#json-security\">JSON Security</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"web-security/index#security-headers\">Security Headers</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"web-security/index#copy-paste-to-terminal\">Copy/Paste to Terminal</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"deploying/index\">Deploying to Production</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"deploying/index#self-hosted-options\">Self-Hosted Options</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"deploying/index#hosting-platforms\">Hosting Platforms</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"async-await/index\">Using <code>async</code> and <code>await</code></a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"async-await/index#performance\">Performance</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"async-await/index#background-tasks\">Background tasks</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"async-await/index#when-to-use-quart-instead\">When to use Quart instead</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"async-await/index#extensions\">Extensions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"async-await/index#other-event-loops\">Other event loops</a></li> </ul> </li> </ul>  </section> <section id=\"api-reference\"> <h2>API Reference</h2> <p>If you are looking for information on a specific function, class or method, this part of the documentation is for you.</p>  <ul> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"api/index\">API</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#application-object\">Application Object</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#blueprint-objects\">Blueprint Objects</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#incoming-request-data\">Incoming Request Data</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#response-objects\">Response Objects</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#sessions\">Sessions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#session-interface\">Session Interface</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#test-client\">Test Client</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#test-cli-runner\">Test CLI Runner</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#application-globals\">Application Globals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#useful-functions-and-classes\">Useful Functions and Classes</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#message-flashing\">Message Flashing</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#module-flask.json\">JSON Support</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#template-rendering\">Template Rendering</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#configuration\">Configuration</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#stream-helpers\">Stream Helpers</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#useful-internals\">Useful Internals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#signals\">Signals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#class-based-views\">Class-Based Views</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#url-route-registrations\">URL Route Registrations</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#view-function-options\">View Function Options</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"api/index#command-line-interface\">Command Line Interface</a></li> </ul> </li> </ul>  </section> <section id=\"additional-notes\"> <h2>Additional Notes</h2>  <ul> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"design/index\">Design Decisions in Flask</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#the-explicit-application-object\">The Explicit Application Object</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#the-routing-system\">The Routing System</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#one-template-engine\">One Template Engine</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#what-does-micro-mean\">What does “micro” mean?</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#thread-locals\">Thread Locals</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#async-await-and-asgi-support\">Async/await and ASGI support</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"design/index#what-flask-is-what-flask-is-not\">What Flask is, What Flask is Not</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/\">Flask Extension Development</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#naming\">Naming</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#the-extension-class-and-initialization\">The Extension Class and Initialization</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#adding-behavior\">Adding Behavior</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#configuration-techniques\">Configuration Techniques</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#data-during-a-request\">Data During a Request</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#views-and-models\">Views and Models</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/#recommended-extension-guidelines\">Recommended Extension Guidelines</a></li> </ul> </li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/contributing/\">Contributing</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/license/\">BSD-3-Clause License</a></li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"changes/index\">Changes</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-3-1-1\">Version 3.1.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-3-1-0\">Version 3.1.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-3-0-3\">Version 3.0.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-3-0-2\">Version 3.0.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-3-0-1\">Version 3.0.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-3-0-0\">Version 3.0.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-3-3\">Version 2.3.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-3-2\">Version 2.3.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-3-1\">Version 2.3.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-3-0\">Version 2.3.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-2-5\">Version 2.2.5</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-2-4\">Version 2.2.4</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-2-3\">Version 2.2.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-2-2\">Version 2.2.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-2-1\">Version 2.2.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-2-0\">Version 2.2.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-1-3\">Version 2.1.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-1-2\">Version 2.1.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-1-1\">Version 2.1.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-1-0\">Version 2.1.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-0-3\">Version 2.0.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-0-2\">Version 2.0.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-0-1\">Version 2.0.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-2-0-0\">Version 2.0.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-1-4\">Version 1.1.4</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-1-3\">Version 1.1.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-1-2\">Version 1.1.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-1-1\">Version 1.1.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-1-0\">Version 1.1.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-0-4\">Version 1.0.4</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-0-3\">Version 1.0.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-0-2\">Version 1.0.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-0-1\">Version 1.0.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-1-0\">Version 1.0</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-12-5\">Version 0.12.5</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-12-4\">Version 0.12.4</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-12-3\">Version 0.12.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-12-2\">Version 0.12.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-12-1\">Version 0.12.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-12\">Version 0.12</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-11-1\">Version 0.11.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-11\">Version 0.11</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-10-1\">Version 0.10.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-10\">Version 0.10</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-9\">Version 0.9</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-8-1\">Version 0.8.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-8\">Version 0.8</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-7-2\">Version 0.7.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-7-1\">Version 0.7.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-7\">Version 0.7</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-6-1\">Version 0.6.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-6\">Version 0.6</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-5-2\">Version 0.5.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-5-1\">Version 0.5.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-5\">Version 0.5</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-4\">Version 0.4</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-3-1\">Version 0.3.1</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-3\">Version 0.3</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-2\">Version 0.2</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"changes/index#version-0-1\">Version 0.1</a></li> </ul> </li> </ul>  </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/index.html\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/index.html</a>\n  </p>\n</div>\n","installation/index":"<h1>Installation</h1> <section id=\"python-version\"> <h2>Python Version</h2> <p>We recommend using the latest version of Python. Flask supports Python 3.9 and newer.</p> </section> <section id=\"dependencies\"> <h2>Dependencies</h2> <p>These distributions will be installed automatically when installing Flask.</p> <ul class=\"simple\"> <li>\n<a class=\"reference external\" href=\"https://palletsprojects.com/p/werkzeug/\">Werkzeug</a> implements WSGI, the standard Python interface between applications and servers.</li> <li>\n<a class=\"reference external\" href=\"https://palletsprojects.com/p/jinja/\">Jinja</a> is a template language that renders the pages your application serves.</li> <li>\n<a class=\"reference external\" href=\"https://palletsprojects.com/p/markupsafe/\">MarkupSafe</a> comes with Jinja. It escapes untrusted input when rendering templates to avoid injection attacks.</li> <li>\n<a class=\"reference external\" href=\"https://palletsprojects.com/p/itsdangerous/\">ItsDangerous</a> securely signs data to ensure its integrity. This is used to protect Flask’s session cookie.</li> <li>\n<a class=\"reference external\" href=\"https://palletsprojects.com/p/click/\">Click</a> is a framework for writing command line applications. It provides the <code>flask</code> command and allows adding custom management commands.</li> <li>\n<a class=\"reference external\" href=\"https://blinker.readthedocs.io/\">Blinker</a> provides support for <a class=\"reference internal\" href=\"../signals/index\"><span class=\"doc\">Signals</span></a>.</li> </ul> <section id=\"optional-dependencies\"> <h3>Optional dependencies</h3> <p>These distributions will not be installed automatically. Flask will detect and use them if you install them.</p> <ul class=\"simple\"> <li>\n<a class=\"reference external\" href=\"https://github.com/theskumar/python-dotenv#readme\">python-dotenv</a> enables support for <a class=\"reference internal\" href=\"../cli/index#dotenv\"><span class=\"std std-ref\">Environment Variables From dotenv</span></a> when running <code>flask</code> commands.</li> <li>\n<a class=\"reference external\" href=\"https://pythonhosted.org/watchdog/\">Watchdog</a> provides a faster, more efficient reloader for the development server.</li> </ul> </section> <section id=\"greenlet\"> <h3>greenlet</h3> <p>You may choose to use gevent or eventlet with your application. In this case, greenlet&gt;=1.0 is required. When using PyPy, PyPy&gt;=7.3.7 is required.</p> <p>These are not minimum supported versions, they only indicate the first versions that added necessary features. You should use the latest versions of each.</p> </section> </section> <section id=\"virtual-environments\"> <h2>Virtual environments</h2> <p>Use a virtual environment to manage the dependencies for your project, both in development and in production.</p> <p>What problem does a virtual environment solve? The more Python projects you have, the more likely it is that you need to work with different versions of Python libraries, or even Python itself. Newer versions of libraries for one project can break compatibility in another project.</p> <p>Virtual environments are independent groups of Python libraries, one for each project. Packages installed for one project will not affect other projects or the operating system’s packages.</p> <p>Python comes bundled with the <a class=\"reference external\" href=\"https://docs.python.org/3/library/venv.html#module-venv\" title=\"(in Python v3.13)\"><code>venv</code></a> module to create virtual environments.</p> <section id=\"create-an-environment\"> <h3 id=\"install-create-env\">Create an environment</h3> <p>Create a project folder and a <code>.venv</code> folder within:</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-0-bWFjT1MvTGludXg=\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-bWFjT1MvTGludXg=\" name=\"bWFjT1MvTGludXg=\" role=\"tab\" tabindex=\"0\">macOS/Linux</button><button aria-controls=\"panel-0-V2luZG93cw==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-V2luZG93cw==\" name=\"V2luZG93cw==\" role=\"tab\" tabindex=\"-1\">Windows</button>\n</div>\n<div aria-labelledby=\"tab-0-bWFjT1MvTGludXg=\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-0-bWFjT1MvTGludXg=\" name=\"bWFjT1MvTGludXg=\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ mkdir myproject\n$ cd myproject\n$ python3 -m venv .venv\n</pre> </div>\n<div aria-labelledby=\"tab-0-V2luZG93cw==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-V2luZG93cw==\" name=\"V2luZG93cw==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; mkdir myproject\n&gt; cd myproject\n&gt; py -3 -m venv .venv\n</pre> </div>\n</div> </section> <section id=\"activate-the-environment\"> <h3 id=\"install-activate-env\">Activate the environment</h3> <p>Before you work on your project, activate the corresponding environment:</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-1-bWFjT1MvTGludXg=\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-bWFjT1MvTGludXg=\" name=\"bWFjT1MvTGludXg=\" role=\"tab\" tabindex=\"0\">macOS/Linux</button><button aria-controls=\"panel-1-V2luZG93cw==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-V2luZG93cw==\" name=\"V2luZG93cw==\" role=\"tab\" tabindex=\"-1\">Windows</button>\n</div>\n<div aria-labelledby=\"tab-1-bWFjT1MvTGludXg=\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-1-bWFjT1MvTGludXg=\" name=\"bWFjT1MvTGludXg=\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ . .venv/bin/activate\n</pre> </div>\n<div aria-labelledby=\"tab-1-V2luZG93cw==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-V2luZG93cw==\" name=\"V2luZG93cw==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; .venv\\Scripts\\activate\n</pre> </div>\n</div> <p>Your shell prompt will change to show the name of the activated environment.</p> </section> </section> <section id=\"install-flask\"> <h2>Install Flask</h2> <p>Within the activated environment, use the following command to install Flask:</p> <pre data-language=\"sh\">$ pip install Flask\n</pre> <p>Flask is now installed. Check out the <a class=\"reference internal\" href=\"../quickstart/index\"><span class=\"doc\">Quickstart</span></a> or go to the <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/\"><span class=\"doc\">Documentation Overview</span></a>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/installation/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/installation/</a>\n  </p>\n</div>\n","templating/index":"<h1>Templates</h1> <p>Flask leverages Jinja2 as its template engine. You are obviously free to use a different template engine, but you still have to install Jinja2 to run Flask itself. This requirement is necessary to enable rich extensions. An extension can depend on Jinja2 being present.</p> <p>This section only gives a very quick introduction into how Jinja2 is integrated into Flask. If you want information on the template engine’s syntax itself, head over to the official <a class=\"reference external\" href=\"https://jinja.palletsprojects.com/templates/\">Jinja2 Template Documentation</a> for more information.</p> <section id=\"jinja-setup\"> <h2>Jinja Setup</h2> <p>Unless customized, Jinja2 is configured by Flask as follows:</p> <ul class=\"simple\"> <li>autoescaping is enabled for all templates ending in <code>.html</code>, <code>.htm</code>, <code>.xml</code>, <code>.xhtml</code>, as well as <code>.svg</code> when using <code>render_template()</code>.</li> <li>autoescaping is enabled for all strings when using <code>render_template_string()</code>.</li> <li>a template has the ability to opt in/out autoescaping with the <code>{% autoescape %}</code> tag.</li> <li>Flask inserts a couple of global functions and helpers into the Jinja2 context, additionally to the values that are present by default.</li> </ul> </section> <section id=\"standard-context\"> <h2>Standard Context</h2> <p>The following global variables are available within Jinja2 templates by default:</p> <dl class=\"py data\"> <dt class=\"sig sig-object py\"> <span class=\"sig-name descname\">config</span>\n</dt> <dd>\n<p>The current configuration object (<a class=\"reference internal\" href=\"../api/index#flask.Flask.config\" title=\"flask.Flask.config\"><code>flask.Flask.config</code></a>)</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.10: </span>This is now always available, even in imported templates.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\"> <span class=\"sig-name descname\">request</span>\n</dt> <dd>\n<p>The current request object (<a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>flask.request</code></a>). This variable is unavailable if the template was rendered without an active request context.</p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\"> <span class=\"sig-name descname\">session</span>\n</dt> <dd>\n<p>The current session object (<a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>flask.session</code></a>). This variable is unavailable if the template was rendered without an active request context.</p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\"> <span class=\"sig-name descname\">g</span>\n</dt> <dd>\n<p>The request-bound object for global variables (<a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>flask.g</code></a>). This variable is unavailable if the template was rendered without an active request context.</p> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\"> <span class=\"sig-name descname\">url_for</span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span>\n</dt> <dd>\n<p>The <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>flask.url_for()</code></a> function.</p> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\"> <span class=\"sig-name descname\">get_flashed_messages</span><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span>\n</dt> <dd>\n<p>The <a class=\"reference internal\" href=\"../api/index#flask.get_flashed_messages\" title=\"flask.get_flashed_messages\"><code>flask.get_flashed_messages()</code></a> function.</p> </dd>\n</dl> <div class=\"admonition-the-jinja-context-behavior admonition\"> <p class=\"admonition-title\">The Jinja Context Behavior</p> <p>These variables are added to the context of variables, they are not global variables. The difference is that by default these will not show up in the context of imported templates. This is partially caused by performance considerations, partially to keep things explicit.</p> <p>What does this mean for you? If you have a macro you want to import, that needs to access the request object you have two possibilities:</p> <ol class=\"arabic simple\"> <li>you explicitly pass the request to the macro as parameter, or the attribute of the request object you are interested in.</li> <li>you import the macro “with context”.</li> </ol> <p>Importing with context looks like this:</p> <pre data-language=\"jinja\">{% from '_helpers.html' import my_macro with context %}\n</pre> </div> </section> <section id=\"controlling-autoescaping\"> <h2>Controlling Autoescaping</h2> <p>Autoescaping is the concept of automatically escaping special characters for you. Special characters in the sense of HTML (or XML, and thus XHTML) are <code>&amp;</code>, <code>&gt;</code>, <code>&lt;</code>, <code>\"</code> as well as <code>'</code>. Because these characters carry specific meanings in documents on their own you have to replace them by so called “entities” if you want to use them for text. Not doing so would not only cause user frustration by the inability to use these characters in text, but can also lead to security problems. (see <a class=\"reference internal\" href=\"../web-security/index#security-xss\"><span class=\"std std-ref\">Cross-Site Scripting (XSS)</span></a>)</p> <p>Sometimes however you will need to disable autoescaping in templates. This can be the case if you want to explicitly inject HTML into pages, for example if they come from a system that generates secure HTML like a markdown to HTML converter.</p> <p>There are three ways to accomplish that:</p> <ul class=\"simple\"> <li>In the Python code, wrap the HTML string in a <code>Markup</code> object before passing it to the template. This is in general the recommended way.</li> <li>Inside the template, use the <code>|safe</code> filter to explicitly mark a string as safe HTML (<code>{{ myvariable|safe }}</code>)</li> <li>Temporarily disable the autoescape system altogether.</li> </ul> <p>To disable the autoescape system in templates, you can use the <code>{%\nautoescape %}</code> block:</p> <pre data-language=\"html+jinja\">{% autoescape false %}\n    &lt;p&gt;autoescaping is disabled here\n    &lt;p&gt;{{ will_not_be_escaped }}\n{% endautoescape %}\n</pre> <p>Whenever you do this, please be very cautious about the variables you are using in this block.</p> </section> <section id=\"registering-filters\"> <h2 id=\"id1\">Registering Filters</h2> <p>If you want to register your own filters in Jinja2 you have two ways to do that. You can either put them by hand into the <a class=\"reference internal\" href=\"../api/index#flask.Flask.jinja_env\" title=\"flask.Flask.jinja_env\"><code>jinja_env</code></a> of the application or use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.template_filter\" title=\"flask.Flask.template_filter\"><code>template_filter()</code></a> decorator.</p> <p>The two following examples work the same and both reverse an object:</p> <pre data-language=\"python\">@app.template_filter('reverse')\ndef reverse_filter(s):\n    return s[::-1]\n\ndef reverse_filter(s):\n    return s[::-1]\napp.jinja_env.filters['reverse'] = reverse_filter\n</pre> <p>In case of the decorator the argument is optional if you want to use the function name as name of the filter. Once registered, you can use the filter in your templates in the same way as Jinja2’s builtin filters, for example if you have a Python list in context called <code>mylist</code>:</p> <pre data-language=\"python\">{% for x in mylist | reverse %}\n{% endfor %}\n</pre> </section> <section id=\"context-processors\"> <h2>Context Processors</h2> <p>To inject new variables automatically into the context of a template, context processors exist in Flask. Context processors run before the template is rendered and have the ability to inject new values into the template context. A context processor is a function that returns a dictionary. The keys and values of this dictionary are then merged with the template context, for all templates in the app:</p> <pre data-language=\"python\">@app.context_processor\ndef inject_user():\n    return dict(user=g.user)\n</pre> <p>The context processor above makes a variable called <code>user</code> available in the template with the value of <code>g.user</code>. This example is not very interesting because <code>g</code> is available in templates anyways, but it gives an idea how this works.</p> <p>Variables are not limited to values; a context processor can also make functions available to templates (since Python allows passing around functions):</p> <pre data-language=\"python\">@app.context_processor\ndef utility_processor():\n    def format_price(amount, currency=\"€\"):\n        return f\"{amount:.2f}{currency}\"\n    return dict(format_price=format_price)\n</pre> <p>The context processor above makes the <code>format_price</code> function available to all templates:</p> <pre data-language=\"python\">{{ format_price(0.33) }}\n</pre> <p>You could also build <code>format_price</code> as a template filter (see <a class=\"reference internal\" href=\"#registering-filters\"><span class=\"std std-ref\">Registering Filters</span></a>), but this demonstrates how to pass functions in a context processor.</p> </section> <section id=\"streaming\"> <h2>Streaming</h2> <p>It can be useful to not render the whole template as one complete string, instead render it as a stream, yielding smaller incremental strings. This can be used for streaming HTML in chunks to speed up initial page load, or to save memory when rendering a very large template.</p> <p>The Jinja2 template engine supports rendering a template piece by piece, returning an iterator of strings. Flask provides the <a class=\"reference internal\" href=\"../api/index#flask.stream_template\" title=\"flask.stream_template\"><code>stream_template()</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.stream_template_string\" title=\"flask.stream_template_string\"><code>stream_template_string()</code></a> functions to make this easier to use.</p> <pre data-language=\"python\">from flask import stream_template\n\n@app.get(\"/timeline\")\ndef timeline():\n    return stream_template(\"timeline.html\")\n</pre> <p>These functions automatically apply the <a class=\"reference internal\" href=\"../api/index#flask.stream_with_context\" title=\"flask.stream_with_context\"><code>stream_with_context()</code></a> wrapper if a request is active, so that it remains available in the template.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/templating/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/templating/</a>\n  </p>\n</div>\n","patterns/index":"<h1>Patterns for Flask</h1> <p>Certain features and interactions are common enough that you will find them in most web applications. For example, many applications use a relational database and user authentication. They will open a database connection at the beginning of the request and get the information for the logged in user. At the end of the request, the database connection is closed.</p> <p>These types of patterns may be a bit outside the scope of Flask itself, but Flask makes it easy to implement them. Some common patterns are collected in the following pages.</p>  <ul> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"packages/index\">Large Applications as Packages</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"packages/index#simple-packages\">Simple Packages</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"packages/index#working-with-blueprints\">Working with Blueprints</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"appfactories/index\">Application Factories</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appfactories/index#basic-factories\">Basic Factories</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appfactories/index#factories-extensions\">Factories &amp; Extensions</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appfactories/index#using-applications\">Using Applications</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appfactories/index#factory-improvements\">Factory Improvements</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"appdispatch/index\">Application Dispatching</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appdispatch/index#working-with-this-document\">Working with this Document</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appdispatch/index#combining-applications\">Combining Applications</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appdispatch/index#dispatch-by-subdomain\">Dispatch by Subdomain</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"appdispatch/index#dispatch-by-path\">Dispatch by Path</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"urlprocessors/index\">Using URL Processors</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"urlprocessors/index#internationalized-application-urls\">Internationalized Application URLs</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"urlprocessors/index#internationalized-blueprint-urls\">Internationalized Blueprint URLs</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"sqlite3/index\">Using SQLite 3 with Flask</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlite3/index#connect-on-demand\">Connect on Demand</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlite3/index#easy-querying\">Easy Querying</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlite3/index#initial-schemas\">Initial Schemas</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"sqlalchemy/index\">SQLAlchemy in Flask</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlalchemy/index#flask-sqlalchemy-extension\">Flask-SQLAlchemy Extension</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlalchemy/index#declarative\">Declarative</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlalchemy/index#manual-object-relational-mapping\">Manual Object Relational Mapping</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"sqlalchemy/index#sql-abstraction-layer\">SQL Abstraction Layer</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"fileuploads/index\">Uploading Files</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"fileuploads/index#a-gentle-introduction\">A Gentle Introduction</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"fileuploads/index#improving-uploads\">Improving Uploads</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"fileuploads/index#upload-progress-bars\">Upload Progress Bars</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"fileuploads/index#an-easier-solution\">An Easier Solution</a></li> </ul> </li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"caching/index\">Caching</a></li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"viewdecorators/index\">View Decorators</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"viewdecorators/index#login-required-decorator\">Login Required Decorator</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"viewdecorators/index#caching-decorator\">Caching Decorator</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"viewdecorators/index#templating-decorator\">Templating Decorator</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"viewdecorators/index#endpoint-decorator\">Endpoint Decorator</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"wtforms/index\">Form Validation with WTForms</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"wtforms/index#the-forms\">The Forms</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"wtforms/index#in-the-view\">In the View</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"wtforms/index#forms-in-templates\">Forms in Templates</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"templateinheritance/index\">Template Inheritance</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templateinheritance/index#base-template\">Base Template</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"templateinheritance/index#child-template\">Child Template</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"flashing/index\">Message Flashing</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"flashing/index#simple-flashing\">Simple Flashing</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"flashing/index#flashing-with-categories\">Flashing With Categories</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"flashing/index#filtering-flash-messages\">Filtering Flash Messages</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"javascript/index\">JavaScript, <code>fetch</code>, and JSON</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#rendering-templates\">Rendering Templates</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#generating-urls\">Generating URLs</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#making-a-request-with-fetch\">Making a Request with <code>fetch</code></a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#following-redirects\">Following Redirects</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#replacing-content\">Replacing Content</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#return-json-from-views\">Return JSON from Views</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"javascript/index#receiving-json-in-views\">Receiving JSON in Views</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"lazyloading/index\">Lazily Loading Views</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"lazyloading/index#converting-to-centralized-url-map\">Converting to Centralized URL Map</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"lazyloading/index#loading-late\">Loading Late</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"mongoengine/index\">MongoDB with MongoEngine</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"mongoengine/index#configuration\">Configuration</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"mongoengine/index#mapping-documents\">Mapping Documents</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"mongoengine/index#creating-data\">Creating Data</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"mongoengine/index#queries\">Queries</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"mongoengine/index#documentation\">Documentation</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"favicon/index\">Adding a favicon</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"favicon/index#see-also\">See also</a></li> </ul> </li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"streaming/index\">Streaming Contents</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"streaming/index#basic-usage\">Basic Usage</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"streaming/index#streaming-from-templates\">Streaming from Templates</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"streaming/index#streaming-with-context\">Streaming with Context</a></li> </ul> </li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"deferredcallbacks/index\">Deferred Request Callbacks</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"methodoverrides/index\">Adding HTTP Method Overrides</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"requestchecksum/index\">Request Content Checksums</a></li> <li class=\"toctree-l1\">\n<a class=\"reference internal\" href=\"celery/index\">Background Tasks with Celery</a><ul> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#install\">Install</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#integrate-celery-with-flask\">Integrate Celery with Flask</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#application-factory\">Application Factory</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#defining-tasks\">Defining Tasks</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#calling-tasks\">Calling Tasks</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#getting-results\">Getting Results</a></li> <li class=\"toctree-l2\"><a class=\"reference internal\" href=\"celery/index#passing-data-to-tasks\">Passing Data to Tasks</a></li> </ul> </li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"subclassing/index\">Subclassing Flask</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"singlepageapplications/index\">Single-Page Applications</a></li> </ul><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/</a>\n  </p>\n</div>\n","debugging/index":"<h1>Debugging Application Errors</h1> <section id=\"in-production\"> <h2>In Production</h2> <p><strong>Do not run the development server, or enable the built-in debugger, in a production environment.</strong> The debugger allows executing arbitrary Python code from the browser. It’s protected by a pin, but that should not be relied on for security.</p> <p>Use an error logging tool, such as Sentry, as described in <a class=\"reference internal\" href=\"../errorhandling/index#error-logging-tools\"><span class=\"std std-ref\">Error Logging Tools</span></a>, or enable logging and notifications as described in <a class=\"reference internal\" href=\"../logging/index\"><span class=\"doc\">Logging</span></a>.</p> <p>If you have access to the server, you could add some code to start an external debugger if <code>request.remote_addr</code> matches your IP. Some IDE debuggers also have a remote mode so breakpoints on the server can be interacted with locally. Only enable a debugger temporarily.</p> </section> <section id=\"the-built-in-debugger\"> <h2>The Built-In Debugger</h2> <p>The built-in Werkzeug development server provides a debugger which shows an interactive traceback in the browser when an unhandled error occurs during a request. This debugger should only be used during development.</p> <img alt=\"screenshot of debugger in action\" class=\"screenshot align-center\" src=\"https://flask.palletsprojects.com/en/stable/_images/debugger.png\"> <div class=\"admonition warning\"> <p class=\"admonition-title\">Warning</p> <p>The debugger allows executing arbitrary Python code from the browser. It is protected by a pin, but still represents a major security risk. Do not run the development server or debugger in a production environment.</p> </div> <p>The debugger is enabled by default when the development server is run in debug mode.</p> <pre data-language=\"text\">$ flask --app hello run --debug\n</pre> <p>When running from Python code, passing <code>debug=True</code> enables debug mode, which is mostly equivalent.</p> <pre data-language=\"python\">app.run(debug=True)\n</pre> <p><a class=\"reference internal\" href=\"../server/index\"><span class=\"doc\">Development Server</span></a> and <a class=\"reference internal\" href=\"../cli/index\"><span class=\"doc\">Command Line Interface</span></a> have more information about running the debugger and debug mode. More information about the debugger can be found in the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/debug/\">Werkzeug documentation</a>.</p> </section> <section id=\"external-debuggers\"> <h2>External Debuggers</h2> <p>External debuggers, such as those provided by IDEs, can offer a more powerful debugging experience than the built-in debugger. They can also be used to step through code during a request before an error is raised, or if no error is raised. Some even have a remote mode so you can debug code running on another machine.</p> <p>When using an external debugger, the app should still be in debug mode, otherwise Flask turns unhandled errors into generic 500 error pages. However, the built-in debugger and reloader should be disabled so they don’t interfere with the external debugger.</p> <pre data-language=\"text\">$ flask --app hello run --debug --no-debugger --no-reload\n</pre> <p>When running from Python:</p> <pre data-language=\"python\">app.run(debug=True, use_debugger=False, use_reloader=False)\n</pre> <p>Disabling these isn’t required, an external debugger will continue to work with the following caveats.</p> <ul> <li>If the built-in debugger is not disabled, it will catch unhandled exceptions before the external debugger can.</li> <li>If the reloader is not disabled, it could cause an unexpected reload if code changes during a breakpoint.</li> <li>\n<p>The development server will still catch unhandled exceptions if the built-in debugger is disabled, otherwise it would crash on any error. If you want that (and usually you don’t) pass <code>passthrough_errors=True</code> to <code>app.run</code>.</p> <pre data-language=\"python\">app.run(\n    debug=True, passthrough_errors=True,\n    use_debugger=False, use_reloader=False\n)\n</pre> </li> </ul> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/debugging/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/debugging/</a>\n  </p>\n</div>\n","extensions/index":"<h1>Extensions</h1> <p>Extensions are extra packages that add functionality to a Flask application. For example, an extension might add support for sending email or connecting to a database. Some extensions add entire new frameworks to help build certain types of applications, like a REST API.</p> <section id=\"finding-extensions\"> <h2>Finding Extensions</h2> <p>Flask extensions are usually named “Flask-Foo” or “Foo-Flask”. You can search PyPI for packages tagged with <a class=\"reference external\" href=\"https://pypi.org/search/?c=Framework+%3A%3A+Flask\">Framework :: Flask</a>.</p> </section> <section id=\"using-extensions\"> <h2>Using Extensions</h2> <p>Consult each extension’s documentation for installation, configuration, and usage instructions. Generally, extensions pull their own configuration from <a class=\"reference internal\" href=\"../api/index#flask.Flask.config\" title=\"flask.Flask.config\"><code>app.config</code></a> and are passed an application instance during initialization. For example, an extension called “Flask-Foo” might be used like this:</p> <pre data-language=\"python\">from flask_foo import Foo\n\nfoo = Foo()\n\napp = Flask(__name__)\napp.config.update(\n    FOO_BAR='baz',\n    FOO_SPAM='eggs',\n)\n\nfoo.init_app(app)\n</pre> </section> <section id=\"building-extensions\"> <h2>Building Extensions</h2> <p>While <a class=\"reference external\" href=\"https://pypi.org/search/?c=Framework+%3A%3A+Flask\">PyPI</a> contains many Flask extensions, you may not find an extension that fits your need. If this is the case, you can create your own, and publish it for others to use as well. Read <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/\"><span class=\"doc\">Flask Extension Development</span></a> to develop your own Flask extension.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/extensions/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/extensions/</a>\n  </p>\n</div>\n","server/index":"<h1>Development Server</h1> <p>Flask provides a <code>run</code> command to run the application with a development server. In debug mode, this server provides an interactive debugger and will reload when code is changed.</p> <div class=\"admonition warning\"> <p class=\"admonition-title\">Warning</p> <p>Do not use the development server when deploying to production. It is intended for use only during local development. It is not designed to be particularly efficient, stable, or secure.</p> <p>See <a class=\"reference internal\" href=\"../deploying/index\"><span class=\"doc\">Deploying to Production</span></a> for deployment options.</p> </div> <section id=\"command-line\"> <h2>Command Line</h2> <p>The <code>flask run</code> CLI command is the recommended way to run the development server. Use the <code>--app</code> option to point to your application, and the <code>--debug</code> option to enable debug mode.</p> <pre data-language=\"text\">$ flask --app hello run --debug\n</pre> <p>This enables debug mode, including the interactive debugger and reloader, and then starts the server on <a class=\"reference external\" href=\"http://localhost:5000/\">http://localhost:5000/</a>. Use <code>flask run --help</code> to see the available options, and <a class=\"reference internal\" href=\"../cli/index\"><span class=\"doc\">Command Line Interface</span></a> for detailed instructions about configuring and using the CLI.</p> <section id=\"address-already-in-use\"> <h3 id=\"id1\">Address already in use</h3> <p>If another program is already using port 5000, you’ll see an <code>OSError</code> when the server tries to start. It may have one of the following messages:</p> <ul class=\"simple\"> <li><code>OSError: [Errno 98] Address already in use</code></li> <li><code>OSError: [WinError 10013] An attempt was made to access a socket\nin a way forbidden by its access permissions</code></li> </ul> <p>Either identify and stop the other program, or use <code>flask run --port 5001</code> to pick a different port.</p> <p>You can use <code>netstat</code> or <code>lsof</code> to identify what process id is using a port, then use other operating system tools stop that process. The following example shows that process id 6847 is using port 5000.</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-0-0-0\" aria-selected=\"true\" class=\"sphinx-tabs-tab\" id=\"tab-0-0-0\" name=\"0-0\" role=\"tab\" tabindex=\"0\"><code>netstat</code> (Linux)</button><button aria-controls=\"panel-0-0-1\" aria-selected=\"false\" class=\"sphinx-tabs-tab\" id=\"tab-0-0-1\" name=\"0-1\" role=\"tab\" tabindex=\"-1\"><code>lsof</code> (macOS / Linux)</button><button aria-controls=\"panel-0-0-2\" aria-selected=\"false\" class=\"sphinx-tabs-tab\" id=\"tab-0-0-2\" name=\"0-2\" role=\"tab\" tabindex=\"-1\"><code>netstat</code> (Windows)</button>\n</div>\n<div aria-labelledby=\"tab-0-0-0\" class=\"sphinx-tabs-panel\" id=\"panel-0-0-0\" name=\"0-0\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ netstat -nlp | grep 5000\ntcp 0 0 127.0.0.1:5000 0.0.0.0:* LISTEN 6847/python\n</pre> </div>\n<div aria-labelledby=\"tab-0-0-1\" class=\"sphinx-tabs-panel\" hidden=\"true\" id=\"panel-0-0-1\" name=\"0-1\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ lsof -P -i :5000\nPython 6847 IPv4 TCP localhost:5000 (LISTEN)\n</pre> </div>\n<div aria-labelledby=\"tab-0-0-2\" class=\"sphinx-tabs-panel\" hidden=\"true\" id=\"panel-0-0-2\" name=\"0-2\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; netstat -ano | findstr 5000\nTCP 127.0.0.1:5000 0.0.0.0:0 LISTENING 6847\n</pre> </div>\n</div> <p>macOS Monterey and later automatically starts a service that uses port 5000. You can choose to disable this service instead of using a different port by searching for “AirPlay Receiver” in System Preferences and toggling it off.</p> </section> <section id=\"deferred-errors-on-reload\"> <h3>Deferred Errors on Reload</h3> <p>When using the <code>flask run</code> command with the reloader, the server will continue to run even if you introduce syntax errors or other initialization errors into the code. Accessing the site will show the interactive debugger for the error, rather than crashing the server.</p> <p>If a syntax error is already present when calling <code>flask run</code>, it will fail immediately and show the traceback rather than waiting until the site is accessed. This is intended to make errors more visible initially while still allowing the server to handle errors on reload.</p> </section> </section> <section id=\"in-code\"> <h2>In Code</h2> <p>The development server can also be started from Python with the <a class=\"reference internal\" href=\"../api/index#flask.Flask.run\" title=\"flask.Flask.run\"><code>Flask.run()</code></a> method. This method takes arguments similar to the CLI options to control the server. The main difference from the CLI command is that the server will crash if there are errors when reloading. <code>debug=True</code> can be passed to enable debug mode.</p> <p>Place the call in a main block, otherwise it will interfere when trying to import and run the application with a production server later.</p> <pre data-language=\"python\">if __name__ == \"__main__\":\n    app.run(debug=True)\n</pre> <pre data-language=\"text\">$ python hello.py\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/server/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/server/</a>\n  </p>\n</div>\n","shell/index":"<h1>Working with the Shell</h1> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.3.</span></p> </div> </details><p>One of the reasons everybody loves Python is the interactive shell. It basically allows you to execute Python commands in real time and immediately get results back. Flask itself does not come with an interactive shell, because it does not require any specific setup upfront, just import your application and start playing around.</p> <p>There are however some handy helpers to make playing around in the shell a more pleasant experience. The main issue with interactive console sessions is that you’re not triggering a request like a browser does which means that <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> and others are not available. But the code you want to test might depend on them, so what can you do?</p> <p>This is where some helper functions come in handy. Keep in mind however that these functions are not only there for interactive shell usage, but also for unit testing and other situations that require a faked request context.</p> <p>Generally it’s recommended that you read <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">The Request Context</span></a> first.</p> <section id=\"command-line-interface\"> <h2>Command Line Interface</h2> <p>Starting with Flask 0.11 the recommended way to work with the shell is the <code>flask shell</code> command which does a lot of this automatically for you. For instance the shell is automatically initialized with a loaded application context.</p> <p>For more information see <a class=\"reference internal\" href=\"../cli/index\"><span class=\"doc\">Command Line Interface</span></a>.</p> </section> <section id=\"creating-a-request-context\"> <h2>Creating a Request Context</h2> <p>The easiest way to create a proper request context from the shell is by using the <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context</code></a> method which creates us a <a class=\"reference internal\" href=\"../api/index#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\"><code>RequestContext</code></a>:</p> <pre data-language=\"python\">&gt;&gt;&gt; ctx = app.test_request_context()\n</pre> <p>Normally you would use the <code>with</code> statement to make this request object active, but in the shell it’s easier to use the <code>push()</code> and <a class=\"reference internal\" href=\"../api/index#flask.ctx.RequestContext.pop\" title=\"flask.ctx.RequestContext.pop\"><code>pop()</code></a> methods by hand:</p> <pre data-language=\"python\">&gt;&gt;&gt; ctx.push()\n</pre> <p>From that point onwards you can work with the request object until you call <code>pop</code>:</p> <pre data-language=\"python\">&gt;&gt;&gt; ctx.pop()\n</pre> </section> <section id=\"firing-before-after-request\"> <h2>Firing Before/After Request</h2> <p>By just creating a request context, you still don’t have run the code that is normally run before a request. This might result in your database being unavailable if you are connecting to the database in a before-request callback or the current user not being stored on the <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> object etc.</p> <p>This however can easily be done yourself. Just call <a class=\"reference internal\" href=\"../api/index#flask.Flask.preprocess_request\" title=\"flask.Flask.preprocess_request\"><code>preprocess_request()</code></a>:</p> <pre data-language=\"python\">&gt;&gt;&gt; ctx = app.test_request_context()\n&gt;&gt;&gt; ctx.push()\n&gt;&gt;&gt; app.preprocess_request()\n</pre> <p>Keep in mind that the <a class=\"reference internal\" href=\"../api/index#flask.Flask.preprocess_request\" title=\"flask.Flask.preprocess_request\"><code>preprocess_request()</code></a> function might return a response object, in that case just ignore it.</p> <p>To shutdown a request, you need to trick a bit before the after request functions (triggered by <a class=\"reference internal\" href=\"../api/index#flask.Flask.process_response\" title=\"flask.Flask.process_response\"><code>process_response()</code></a>) operate on a response object:</p> <pre data-language=\"python\">&gt;&gt;&gt; app.process_response(app.response_class())\n&lt;Response 0 bytes [200 OK]&gt;\n&gt;&gt;&gt; ctx.pop()\n</pre> <p>The functions registered as <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> are automatically called when the context is popped. So this is the perfect place to automatically tear down resources that were needed by the request context (such as database connections).</p> </section> <section id=\"further-improving-the-shell-experience\"> <h2>Further Improving the Shell Experience</h2> <p>If you like the idea of experimenting in a shell, create yourself a module with stuff you want to star import into your interactive session. There you could also define some more helper methods for common things such as initializing the database, dropping tables etc.</p> <p>Just put them into a module (like <code>shelltools</code>) and import from there:</p> <pre data-language=\"python\">&gt;&gt;&gt; from shelltools import *\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/shell/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/shell/</a>\n  </p>\n</div>\n","patterns/packages/index":"<h1>Large Applications as Packages</h1> <p>Imagine a simple flask application structure that looks like this:</p> <pre data-language=\"python\">/yourapplication\n    yourapplication.py\n    /static\n        style.css\n    /templates\n        layout.html\n        index.html\n        login.html\n        ...\n</pre> <p>While this is fine for small applications, for larger applications it’s a good idea to use a package instead of a module. The <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/\"><span class=\"doc\">Tutorial</span></a> is structured to use the package pattern, see the <a class=\"reference external\" href=\"https://github.com/pallets/flask/tree/main/examples/tutorial\">example code</a>.</p> <section id=\"simple-packages\"> <h2>Simple Packages</h2> <p>To convert that into a larger one, just create a new folder <code>yourapplication</code> inside the existing one and move everything below it. Then rename <code>yourapplication.py</code> to <code>__init__.py</code>. (Make sure to delete all <code>.pyc</code> files first, otherwise things would most likely break)</p> <p>You should then end up with something like that:</p> <pre data-language=\"python\">/yourapplication\n    /yourapplication\n        __init__.py\n        /static\n            style.css\n        /templates\n            layout.html\n            index.html\n            login.html\n            ...\n</pre> <p>But how do you run your application now? The naive <code>python\nyourapplication/__init__.py</code> will not work. Let’s just say that Python does not want modules in packages to be the startup file. But that is not a big problem, just add a new file called <code>pyproject.toml</code> next to the inner <code>yourapplication</code> folder with the following contents:</p> <pre data-language=\"toml\">[project]\nname = \"yourapplication\"\ndependencies = [\n    \"flask\",\n]\n\n[build-system]\nrequires = [\"flit_core&lt;4\"]\nbuild-backend = \"flit_core.buildapi\"\n</pre> <p>Install your application so it is importable:</p> <pre data-language=\"text\">$ pip install -e .\n</pre> <p>To use the <code>flask</code> command and run your application you need to set the <code>--app</code> option that tells Flask where to find the application instance:</p> <pre data-language=\"text\">$ flask --app yourapplication run\n</pre> <p>What did we gain from this? Now we can restructure the application a bit into multiple modules. The only thing you have to remember is the following quick checklist:</p> <ol class=\"arabic simple\"> <li>the <code>Flask</code> application object creation has to be in the <code>__init__.py</code> file. That way each module can import it safely and the <code>__name__</code> variable will resolve to the correct package.</li> <li>all the view functions (the ones with a <a class=\"reference internal\" href=\"../../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator on top) have to be imported in the <code>__init__.py</code> file. Not the object itself, but the module it is in. Import the view module <strong>after the application object is created</strong>.</li> </ol> <p>Here’s an example <code>__init__.py</code>:</p> <pre data-language=\"python\">from flask import Flask\napp = Flask(__name__)\n\nimport yourapplication.views\n</pre> <p>And this is what <code>views.py</code> would look like:</p> <pre data-language=\"python\">from yourapplication import app\n\n@app.route('/')\ndef index():\n    return 'Hello World!'\n</pre> <p>You should then end up with something like that:</p> <pre data-language=\"python\">/yourapplication\n    pyproject.toml\n    /yourapplication\n        __init__.py\n        views.py\n        /static\n            style.css\n        /templates\n            layout.html\n            index.html\n            login.html\n            ...\n</pre> <div class=\"admonition-circular-imports admonition\"> <p class=\"admonition-title\">Circular Imports</p> <p>Every Python programmer hates them, and yet we just added some: circular imports (That’s when two modules depend on each other. In this case <code>views.py</code> depends on <code>__init__.py</code>). Be advised that this is a bad idea in general but here it is actually fine. The reason for this is that we are not actually using the views in <code>__init__.py</code> and just ensuring the module is imported and we are doing that at the bottom of the file.</p> </div> </section> <section id=\"working-with-blueprints\"> <h2>Working with Blueprints</h2> <p>If you have larger applications it’s recommended to divide them into smaller groups where each group is implemented with the help of a blueprint. For a gentle introduction into this topic refer to the <a class=\"reference internal\" href=\"../../blueprints/index\"><span class=\"doc\">Modular Applications with Blueprints</span></a> chapter of the documentation.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/packages/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/packages/</a>\n  </p>\n</div>\n","patterns/appfactories/index":"<h1>Application Factories</h1> <p>If you are already using packages and blueprints for your application (<a class=\"reference internal\" href=\"../../blueprints/index\"><span class=\"doc\">Modular Applications with Blueprints</span></a>) there are a couple of really nice ways to further improve the experience. A common pattern is creating the application object when the blueprint is imported. But if you move the creation of this object into a function, you can then create multiple instances of this app later.</p> <p>So why would you want to do this?</p> <ol class=\"arabic simple\"> <li>Testing. You can have instances of the application with different settings to test every case.</li> <li>Multiple instances. Imagine you want to run different versions of the same application. Of course you could have multiple instances with different configs set up in your webserver, but if you use factories, you can have multiple instances of the same application running in the same application process which can be handy.</li> </ol> <p>So how would you then actually implement that?</p> <section id=\"basic-factories\"> <h2>Basic Factories</h2> <p>The idea is to set up the application in a function. Like this:</p> <pre data-language=\"python\">def create_app(config_filename):\n    app = Flask(__name__)\n    app.config.from_pyfile(config_filename)\n\n    from yourapplication.model import db\n    db.init_app(app)\n\n    from yourapplication.views.admin import admin\n    from yourapplication.views.frontend import frontend\n    app.register_blueprint(admin)\n    app.register_blueprint(frontend)\n\n    return app\n</pre> <p>The downside is that you cannot use the application object in the blueprints at import time. You can however use it from within a request. How do you get access to the application with the config? Use <a class=\"reference internal\" href=\"../../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>:</p> <pre data-language=\"python\">from flask import current_app, Blueprint, render_template\nadmin = Blueprint('admin', __name__, url_prefix='/admin')\n\n@admin.route('/')\ndef index():\n    return render_template(current_app.config['INDEX_TEMPLATE'])\n</pre> <p>Here we look up the name of a template in the config.</p> </section> <section id=\"factories-extensions\"> <h2>Factories &amp; Extensions</h2> <p>It’s preferable to create your extensions and app factories so that the extension object does not initially get bound to the application.</p> <p>Using <a class=\"reference external\" href=\"https://flask-sqlalchemy.palletsprojects.com/\">Flask-SQLAlchemy</a>, as an example, you should not do something along those lines:</p> <pre data-language=\"python\">def create_app(config_filename):\n    app = Flask(__name__)\n    app.config.from_pyfile(config_filename)\n\n    db = SQLAlchemy(app)\n</pre> <p>But, rather, in model.py (or equivalent):</p> <pre data-language=\"python\">db = SQLAlchemy()\n</pre> <p>and in your application.py (or equivalent):</p> <pre data-language=\"python\">def create_app(config_filename):\n    app = Flask(__name__)\n    app.config.from_pyfile(config_filename)\n\n    from yourapplication.model import db\n    db.init_app(app)\n</pre> <p>Using this design pattern, no application-specific state is stored on the extension object, so one extension object can be used for multiple apps. For more information about the design of extensions refer to <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/extensiondev/\"><span class=\"doc\">Flask Extension Development</span></a>.</p> </section> <section id=\"using-applications\"> <h2>Using Applications</h2> <p>To run such an application, you can use the <strong class=\"command\">flask</strong> command:</p> <pre data-language=\"text\">$ flask --app hello run\n</pre> <p>Flask will automatically detect the factory if it is named <code>create_app</code> or <code>make_app</code> in <code>hello</code>. You can also pass arguments to the factory like this:</p> <pre data-language=\"text\">$ flask --app hello:create_app(local_auth=True) run\n</pre> <p>Then the <code>create_app</code> factory in <code>myapp</code> is called with the keyword argument <code>local_auth=True</code>. See <a class=\"reference internal\" href=\"../../cli/index\"><span class=\"doc\">Command Line Interface</span></a> for more detail.</p> </section> <section id=\"factory-improvements\"> <h2>Factory Improvements</h2> <p>The factory function above is not very clever, but you can improve it. The following changes are straightforward to implement:</p> <ol class=\"arabic simple\"> <li>Make it possible to pass in configuration values for unit tests so that you don’t have to create config files on the filesystem.</li> <li>Call a function from a blueprint when the application is setting up so that you have a place to modify attributes of the application (like hooking in before/after request handlers etc.)</li> <li>Add in WSGI middlewares when the application is being created if necessary.</li> </ol> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/appfactories/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/appfactories/</a>\n  </p>\n</div>\n","testing/index":"<h1>Testing Flask Applications</h1> <p>Flask provides utilities for testing an application. This documentation goes over techniques for working with different parts of the application in tests.</p> <p>We will use the <a class=\"reference external\" href=\"https://docs.pytest.org/\">pytest</a> framework to set up and run our tests.</p> <pre data-language=\"text\">$ pip install pytest\n</pre> <p>The <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/\"><span class=\"doc\">tutorial</span></a> goes over how to write tests for 100% coverage of the sample Flaskr blog application. See <a class=\"reference internal\" href=\"https://flask.palletsprojects.com/en/stable/tutorial/tests/\"><span class=\"doc\">the tutorial on tests</span></a> for a detailed explanation of specific tests for an application.</p> <section id=\"identifying-tests\"> <h2>Identifying Tests</h2> <p>Tests are typically located in the <code>tests</code> folder. Tests are functions that start with <code>test_</code>, in Python modules that start with <code>test_</code>. Tests can also be further grouped in classes that start with <code>Test</code>.</p> <p>It can be difficult to know what to test. Generally, try to test the code that you write, not the code of libraries that you use, since they are already tested. Try to extract complex behaviors as separate functions to test individually.</p> </section> <section id=\"fixtures\"> <h2>Fixtures</h2> <p>Pytest <em>fixtures</em> allow writing pieces of code that are reusable across tests. A simple fixture returns a value, but a fixture can also do setup, yield a value, then do teardown. Fixtures for the application, test client, and CLI runner are shown below, they can be placed in <code>tests/conftest.py</code>.</p> <p>If you’re using an <a class=\"reference internal\" href=\"../patterns/appfactories/index\"><span class=\"doc\">application factory</span></a>, define an <code>app</code> fixture to create and configure an app instance. You can add code before and after the <code>yield</code> to set up and tear down other resources, such as creating and clearing a database.</p> <p>If you’re not using a factory, you already have an app object you can import and configure directly. You can still use an <code>app</code> fixture to set up and tear down resources.</p> <pre data-language=\"python\">import pytest\nfrom my_project import create_app\n\n@pytest.fixture()\ndef app():\n    app = create_app()\n    app.config.update({\n        \"TESTING\": True,\n    })\n\n    # other setup can go here\n\n    yield app\n\n    # clean up / reset resources here\n\n\n@pytest.fixture()\ndef client(app):\n    return app.test_client()\n\n\n@pytest.fixture()\ndef runner(app):\n    return app.test_cli_runner()\n</pre> </section> <section id=\"sending-requests-with-the-test-client\"> <h2>Sending Requests with the Test Client</h2> <p>The test client makes requests to the application without running a live server. Flask’s client extends <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/\" title=\"(in Werkzeug v3.1.x)\"><span class=\"xref std std-doc\">Werkzeug’s client</span></a>, see those docs for additional information.</p> <p>The <code>client</code> has methods that match the common HTTP request methods, such as <code>client.get()</code> and <code>client.post()</code>. They take many arguments for building the request; you can find the full documentation in <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.EnvironBuilder\" title=\"(in Werkzeug v3.1.x)\"><code>EnvironBuilder</code></a>. Typically you’ll use <code>path</code>, <code>query_string</code>, <code>headers</code>, and <code>data</code> or <code>json</code>.</p> <p>To make a request, call the method the request should use with the path to the route to test. A <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.TestResponse\" title=\"(in Werkzeug v3.1.x)\"><code>TestResponse</code></a> is returned to examine the response data. It has all the usual properties of a response object. You’ll usually look at <code>response.data</code>, which is the bytes returned by the view. If you want to use text, Werkzeug 2.1 provides <code>response.text</code>, or use <code>response.get_data(as_text=True)</code>.</p> <pre data-language=\"python\">def test_request_example(client):\n    response = client.get(\"/posts\")\n    assert b\"&lt;h2&gt;Hello, World!&lt;/h2&gt;\" in response.data\n</pre> <p>Pass a dict <code>query_string={\"key\": \"value\", ...}</code> to set arguments in the query string (after the <code>?</code> in the URL). Pass a dict <code>headers={}</code> to set request headers.</p> <p>To send a request body in a POST or PUT request, pass a value to <code>data</code>. If raw bytes are passed, that exact body is used. Usually, you’ll pass a dict to set form data.</p> <section id=\"form-data\"> <h3>Form Data</h3> <p>To send form data, pass a dict to <code>data</code>. The <code>Content-Type</code> header will be set to <code>multipart/form-data</code> or <code>application/x-www-form-urlencoded</code> automatically.</p> <p>If a value is a file object opened for reading bytes (<code>\"rb\"</code> mode), it will be treated as an uploaded file. To change the detected filename and content type, pass a <code>(file, filename, content_type)</code> tuple. File objects will be closed after making the request, so they do not need to use the usual <code>with open() as f:</code> pattern.</p> <p>It can be useful to store files in a <code>tests/resources</code> folder, then use <code>pathlib.Path</code> to get files relative to the current test file.</p> <pre data-language=\"python\">from pathlib import Path\n\n# get the resources folder in the tests folder\nresources = Path(__file__).parent / \"resources\"\n\ndef test_edit_user(client):\n    response = client.post(\"/user/2/edit\", data={\n        \"name\": \"Flask\",\n        \"theme\": \"dark\",\n        \"picture\": (resources / \"picture.png\").open(\"rb\"),\n    })\n    assert response.status_code == 200\n</pre> </section> <section id=\"json-data\"> <h3>JSON Data</h3> <p>To send JSON data, pass an object to <code>json</code>. The <code>Content-Type</code> header will be set to <code>application/json</code> automatically.</p> <p>Similarly, if the response contains JSON data, the <code>response.json</code> attribute will contain the deserialized object.</p> <pre data-language=\"python\">def test_json_data(client):\n    response = client.post(\"/graphql\", json={\n        \"query\": \"\"\"\n            query User($id: String!) {\n                user(id: $id) {\n                    name\n                    theme\n                    picture_url\n                }\n            }\n        \"\"\",\n        variables={\"id\": 2},\n    })\n    assert response.json[\"data\"][\"user\"][\"name\"] == \"Flask\"\n</pre> </section> </section> <section id=\"following-redirects\"> <h2>Following Redirects</h2> <p>By default, the client does not make additional requests if the response is a redirect. By passing <code>follow_redirects=True</code> to a request method, the client will continue to make requests until a non-redirect response is returned.</p> <p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.TestResponse.history\" title=\"(in Werkzeug v3.1.x)\"><code>TestResponse.history</code></a> is a tuple of the responses that led up to the final response. Each response has a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.TestResponse.request\" title=\"(in Werkzeug v3.1.x)\"><code>request</code></a> attribute which records the request that produced that response.</p> <pre data-language=\"python\">def test_logout_redirect(client):\n    response = client.get(\"/logout\", follow_redirects=True)\n    # Check that there was one redirect response.\n    assert len(response.history) == 1\n    # Check that the second request was to the index page.\n    assert response.request.path == \"/index\"\n</pre> </section> <section id=\"accessing-and-modifying-the-session\"> <h2>Accessing and Modifying the Session</h2> <p>To access Flask’s context variables, mainly <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a>, use the client in a <code>with</code> statement. The app and request context will remain active <em>after</em> making a request, until the <code>with</code> block ends.</p> <pre data-language=\"python\">from flask import session\n\ndef test_access_session(client):\n    with client:\n        client.post(\"/auth/login\", data={\"username\": \"flask\"})\n        # session is still accessible\n        assert session[\"user_id\"] == 1\n\n    # session is no longer accessible\n</pre> <p>If you want to access or set a value in the session <em>before</em> making a request, use the client’s <a class=\"reference internal\" href=\"../api/index#flask.testing.FlaskClient.session_transaction\" title=\"flask.testing.FlaskClient.session_transaction\"><code>session_transaction()</code></a> method in a <code>with</code> statement. It returns a session object, and will save the session once the block ends.</p> <pre data-language=\"python\">from flask import session\n\ndef test_modify_session(client):\n    with client.session_transaction() as session:\n        # set a user id without going through the login route\n        session[\"user_id\"] = 1\n\n    # session is saved now\n\n    response = client.get(\"/users/me\")\n    assert response.json[\"username\"] == \"flask\"\n</pre> </section> <section id=\"running-commands-with-the-cli-runner\"> <h2 id=\"testing-cli\">Running Commands with the CLI Runner</h2> <p>Flask provides <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_cli_runner\" title=\"flask.Flask.test_cli_runner\"><code>test_cli_runner()</code></a> to create a <a class=\"reference internal\" href=\"../api/index#flask.testing.FlaskCliRunner\" title=\"flask.testing.FlaskCliRunner\"><code>FlaskCliRunner</code></a>, which runs CLI commands in isolation and captures the output in a <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.testing.Result\" title=\"(in Click v8.1.x)\"><code>Result</code></a> object. Flask’s runner extends <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/testing/\" title=\"(in Click v8.1.x)\"><span class=\"xref std std-doc\">Click’s runner</span></a>, see those docs for additional information.</p> <p>Use the runner’s <a class=\"reference internal\" href=\"../api/index#flask.testing.FlaskCliRunner.invoke\" title=\"flask.testing.FlaskCliRunner.invoke\"><code>invoke()</code></a> method to call commands in the same way they would be called with the <code>flask</code> command from the command line.</p> <pre data-language=\"python\">import click\n\n@app.cli.command(\"hello\")\n@click.option(\"--name\", default=\"World\")\ndef hello_command(name):\n    click.echo(f\"Hello, {name}!\")\n\ndef test_hello_command(runner):\n    result = runner.invoke(args=\"hello\")\n    assert \"World\" in result.output\n\n    result = runner.invoke(args=[\"hello\", \"--name\", \"Flask\"])\n    assert \"Flask\" in result.output\n</pre> </section> <section id=\"tests-that-depend-on-an-active-context\"> <h2>Tests that depend on an Active Context</h2> <p>You may have functions that are called from views or commands, that expect an active <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">application context</span></a> or <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">request context</span></a> because they access <code>request</code>, <code>session</code>, or <code>current_app</code>. Rather than testing them by making a request or invoking the command, you can create and activate a context directly.</p> <p>Use <code>with app.app_context()</code> to push an application context. For example, database extensions usually require an active app context to make queries.</p> <pre data-language=\"python\">def test_db_post_model(app):\n    with app.app_context():\n        post = db.session.query(Post).get(1)\n</pre> <p>Use <code>with app.test_request_context()</code> to push a request context. It takes the same arguments as the test client’s request methods.</p> <pre data-language=\"python\">def test_validate_user_edit(app):\n    with app.test_request_context(\n        \"/user/2/edit\", method=\"POST\", data={\"name\": \"\"}\n    ):\n        # call a function that accesses `request`\n        messages = validate_edit_user()\n\n    assert messages[\"name\"][0] == \"Name cannot be empty.\"\n</pre> <p>Creating a test request context doesn’t run any of the Flask dispatching code, so <code>before_request</code> functions are not called. If you need to call these, usually it’s better to make a full request instead. However, it’s possible to call them manually.</p> <pre data-language=\"python\">def test_auth_token(app):\n    with app.test_request_context(\"/user/2/edit\", headers={\"X-Auth-Token\": \"1\"}):\n        app.preprocess_request()\n        assert g.user.name == \"Flask\"\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/testing/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/testing/</a>\n  </p>\n</div>\n","logging/index":"<h1>Logging</h1> <p>Flask uses standard Python <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#module-logging\" title=\"(in Python v3.13)\"><code>logging</code></a>. Messages about your Flask application are logged with <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>app.logger</code></a>, which takes the same name as <a class=\"reference internal\" href=\"../api/index#flask.Flask.name\" title=\"flask.Flask.name\"><code>app.name</code></a>. This logger can also be used to log your own messages.</p> <pre data-language=\"python\">@app.route('/login', methods=['POST'])\ndef login():\n    user = get_user(request.form['username'])\n\n    if user.check_password(request.form['password']):\n        login_user(user)\n        app.logger.info('%s logged in successfully', user.username)\n        return redirect(url_for('index'))\n    else:\n        app.logger.info('%s failed to log in', user.username)\n        abort(401)\n</pre> <p>If you don’t configure logging, Python’s default log level is usually ‘warning’. Nothing below the configured level will be visible.</p> <section id=\"basic-configuration\"> <h2>Basic Configuration</h2> <p>When you want to configure logging for your project, you should do it as soon as possible when the program starts. If <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>app.logger</code></a> is accessed before logging is configured, it will add a default handler. If possible, configure logging before creating the application object.</p> <p>This example uses <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.config.html#logging.config.dictConfig\" title=\"(in Python v3.13)\"><code>dictConfig()</code></a> to create a logging configuration similar to Flask’s default, except for all logs:</p> <pre data-language=\"python\">from logging.config import dictConfig\n\ndictConfig({\n    'version': 1,\n    'formatters': {'default': {\n        'format': '[%(asctime)s] %(levelname)s in %(module)s: %(message)s',\n    }},\n    'handlers': {'wsgi': {\n        'class': 'logging.StreamHandler',\n        'stream': 'ext://flask.logging.wsgi_errors_stream',\n        'formatter': 'default'\n    }},\n    'root': {\n        'level': 'INFO',\n        'handlers': ['wsgi']\n    }\n})\n\napp = Flask(__name__)\n</pre> <section id=\"default-configuration\"> <h3>Default Configuration</h3> <p>If you do not configure logging yourself, Flask will add a <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.handlers.html#logging.StreamHandler\" title=\"(in Python v3.13)\"><code>StreamHandler</code></a> to <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>app.logger</code></a> automatically. During requests, it will write to the stream specified by the WSGI server in <code>environ['wsgi.errors']</code> (which is usually <a class=\"reference external\" href=\"https://docs.python.org/3/library/sys.html#sys.stderr\" title=\"(in Python v3.13)\"><code>sys.stderr</code></a>). Outside a request, it will log to <a class=\"reference external\" href=\"https://docs.python.org/3/library/sys.html#sys.stderr\" title=\"(in Python v3.13)\"><code>sys.stderr</code></a>.</p> </section> <section id=\"removing-the-default-handler\"> <h3>Removing the Default Handler</h3> <p>If you configured logging after accessing <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>app.logger</code></a>, and need to remove the default handler, you can import and remove it:</p> <pre data-language=\"python\">from flask.logging import default_handler\n\napp.logger.removeHandler(default_handler)\n</pre> </section> </section> <section id=\"email-errors-to-admins\"> <h2>Email Errors to Admins</h2> <p>When running the application on a remote server for production, you probably won’t be looking at the log messages very often. The WSGI server will probably send log messages to a file, and you’ll only check that file if a user tells you something went wrong.</p> <p>To be proactive about discovering and fixing bugs, you can configure a <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.handlers.html#logging.handlers.SMTPHandler\" title=\"(in Python v3.13)\"><code>logging.handlers.SMTPHandler</code></a> to send an email when errors and higher are logged.</p> <pre data-language=\"python\">import logging\nfrom logging.handlers import SMTPHandler\n\nmail_handler = SMTPHandler(\n    mailhost='127.0.0.1',\n    fromaddr='server-error@example.com',\n    toaddrs=['admin@example.com'],\n    subject='Application Error'\n)\nmail_handler.setLevel(logging.ERROR)\nmail_handler.setFormatter(logging.Formatter(\n    '[%(asctime)s] %(levelname)s in %(module)s: %(message)s'\n))\n\nif not app.debug:\n    app.logger.addHandler(mail_handler)\n</pre> <p>This requires that you have an SMTP server set up on the same server. See the Python docs for more information about configuring the handler.</p> </section> <section id=\"injecting-request-information\"> <h2>Injecting Request Information</h2> <p>Seeing more information about the request, such as the IP address, may help debugging some errors. You can subclass <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#logging.Formatter\" title=\"(in Python v3.13)\"><code>logging.Formatter</code></a> to inject your own fields that can be used in messages. You can change the formatter for Flask’s default handler, the mail handler defined above, or any other handler.</p> <pre data-language=\"python\">from flask import has_request_context, request\nfrom flask.logging import default_handler\n\nclass RequestFormatter(logging.Formatter):\n    def format(self, record):\n        if has_request_context():\n            record.url = request.url\n            record.remote_addr = request.remote_addr\n        else:\n            record.url = None\n            record.remote_addr = None\n\n        return super().format(record)\n\nformatter = RequestFormatter(\n    '[%(asctime)s] %(remote_addr)s requested %(url)s\\n'\n    '%(levelname)s in %(module)s: %(message)s'\n)\ndefault_handler.setFormatter(formatter)\nmail_handler.setFormatter(formatter)\n</pre> </section> <section id=\"other-libraries\"> <h2>Other Libraries</h2> <p>Other libraries may use logging extensively, and you want to see relevant messages from those logs too. The simplest way to do this is to add handlers to the root logger instead of only the app logger.</p> <pre data-language=\"python\">from flask.logging import default_handler\n\nroot = logging.getLogger()\nroot.addHandler(default_handler)\nroot.addHandler(mail_handler)\n</pre> <p>Depending on your project, it may be more useful to configure each logger you care about separately, instead of configuring only the root logger.</p> <pre data-language=\"python\">for logger in (\n    logging.getLogger(app.name),\n    logging.getLogger('sqlalchemy'),\n    logging.getLogger('other_package'),\n):\n    logger.addHandler(default_handler)\n    logger.addHandler(mail_handler)\n</pre> <section id=\"werkzeug\"> <h3>Werkzeug</h3> <p>Werkzeug logs basic request/response information to the <code>'werkzeug'</code> logger. If the root logger has no handlers configured, Werkzeug adds a <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.handlers.html#logging.StreamHandler\" title=\"(in Python v3.13)\"><code>StreamHandler</code></a> to its logger.</p> </section> <section id=\"flask-extensions\"> <h3>Flask Extensions</h3> <p>Depending on the situation, an extension may choose to log to <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>app.logger</code></a> or its own named logger. Consult each extension’s documentation for details.</p> </section> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/logging/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/logging/</a>\n  </p>\n</div>\n","signals/index":"<h1>Signals</h1> <p>Signals are a lightweight way to notify subscribers of certain events during the lifecycle of the application and each request. When an event occurs, it emits the signal, which calls each subscriber.</p> <p>Signals are implemented by the <a class=\"reference external\" href=\"https://pypi.org/project/blinker/\">Blinker</a> library. See its documentation for detailed information. Flask provides some built-in signals. Extensions may provide their own.</p> <p>Many signals mirror Flask’s decorator-based callbacks with similar names. For example, the <a class=\"reference internal\" href=\"../api/index#flask.request_started\" title=\"flask.request_started\"><code>request_started</code></a> signal is similar to the <a class=\"reference internal\" href=\"../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> decorator. The advantage of signals over handlers is that they can be subscribed to temporarily, and can’t directly affect the application. This is useful for testing, metrics, auditing, and more. For example, if you want to know what templates were rendered at what parts of what requests, there is a signal that will notify you of that information.</p> <section id=\"core-signals\"> <h2>Core Signals</h2> <p>See <a class=\"reference internal\" href=\"../api/index#core-signals-list\"><span class=\"std std-ref\">Signals</span></a> for a list of all built-in signals. The <a class=\"reference internal\" href=\"../lifecycle/index\"><span class=\"doc\">Application Structure and Lifecycle</span></a> page also describes the order that signals and decorators execute.</p> </section> <section id=\"subscribing-to-signals\"> <h2>Subscribing to Signals</h2> <p>To subscribe to a signal, you can use the <code>connect()</code> method of a signal. The first argument is the function that should be called when the signal is emitted, the optional second argument specifies a sender. To unsubscribe from a signal, you can use the <code>disconnect()</code> method.</p> <p>For all core Flask signals, the sender is the application that issued the signal. When you subscribe to a signal, be sure to also provide a sender unless you really want to listen for signals from all applications. This is especially true if you are developing an extension.</p> <p>For example, here is a helper context manager that can be used in a unit test to determine which templates were rendered and what variables were passed to the template:</p> <pre data-language=\"python\">from flask import template_rendered\nfrom contextlib import contextmanager\n\n@contextmanager\ndef captured_templates(app):\n    recorded = []\n    def record(sender, template, context, **extra):\n        recorded.append((template, context))\n    template_rendered.connect(record, app)\n    try:\n        yield recorded\n    finally:\n        template_rendered.disconnect(record, app)\n</pre> <p>This can now easily be paired with a test client:</p> <pre data-language=\"python\">with captured_templates(app) as templates:\n    rv = app.test_client().get('/')\n    assert rv.status_code == 200\n    assert len(templates) == 1\n    template, context = templates[0]\n    assert template.name == 'index.html'\n    assert len(context['items']) == 10\n</pre> <p>Make sure to subscribe with an extra <code>**extra</code> argument so that your calls don’t fail if Flask introduces new arguments to the signals.</p> <p>All the template rendering in the code issued by the application <code>app</code> in the body of the <code>with</code> block will now be recorded in the <code>templates</code> variable. Whenever a template is rendered, the template object as well as context are appended to it.</p> <p>Additionally there is a convenient helper method (<code>connected_to()</code>) that allows you to temporarily subscribe a function to a signal with a context manager on its own. Because the return value of the context manager cannot be specified that way, you have to pass the list in as an argument:</p> <pre data-language=\"python\">from flask import template_rendered\n\ndef captured_templates(app, recorded, **extra):\n    def record(sender, template, context):\n        recorded.append((template, context))\n    return template_rendered.connected_to(record, app)\n</pre> <p>The example above would then look like this:</p> <pre data-language=\"python\">templates = []\nwith captured_templates(app, templates, **extra):\n    ...\n    template, context = templates[0]\n</pre> </section> <section id=\"creating-signals\"> <h2>Creating Signals</h2> <p>If you want to use signals in your own application, you can use the blinker library directly. The most common use case are named signals in a custom <a class=\"reference external\" href=\"https://blinker.readthedocs.io/en/stable/#blinker.Namespace\" title=\"(in Blinker v1.9)\"><code>Namespace</code></a>. This is what is recommended most of the time:</p> <pre data-language=\"python\">from blinker import Namespace\nmy_signals = Namespace()\n</pre> <p>Now you can create new signals like this:</p> <pre data-language=\"python\">model_saved = my_signals.signal('model-saved')\n</pre> <p>The name for the signal here makes it unique and also simplifies debugging. You can access the name of the signal with the <code>name</code> attribute.</p> </section> <section id=\"sending-signals\"> <h2 id=\"signals-sending\">Sending Signals</h2> <p>If you want to emit a signal, you can do so by calling the <code>send()</code> method. It accepts a sender as first argument and optionally some keyword arguments that are forwarded to the signal subscribers:</p> <pre data-language=\"python\">class Model(object):\n    ...\n\n    def save(self):\n        model_saved.send(self)\n</pre> <p>Try to always pick a good sender. If you have a class that is emitting a signal, pass <code>self</code> as sender. If you are emitting a signal from a random function, you can pass <code>current_app._get_current_object()</code> as sender.</p> <div class=\"admonition-passing-proxies-as-senders admonition\"> <p class=\"admonition-title\">Passing Proxies as Senders</p> <p>Never pass <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> as sender to a signal. Use <code>current_app._get_current_object()</code> instead. The reason for this is that <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is a proxy and not the real application object.</p> </div> </section> <section id=\"signals-and-flask-s-request-context\"> <h2>Signals and Flask’s Request Context</h2> <p>Signals fully support <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">The Request Context</span></a> when receiving signals. Context-local variables are consistently available between <a class=\"reference internal\" href=\"../api/index#flask.request_started\" title=\"flask.request_started\"><code>request_started</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.request_finished\" title=\"flask.request_finished\"><code>request_finished</code></a>, so you can rely on <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>flask.g</code></a> and others as needed. Note the limitations described in <a class=\"reference internal\" href=\"#signals-sending\"><span class=\"std std-ref\">Sending Signals</span></a> and the <a class=\"reference internal\" href=\"../api/index#flask.request_tearing_down\" title=\"flask.request_tearing_down\"><code>request_tearing_down</code></a> signal.</p> </section> <section id=\"decorator-based-signal-subscriptions\"> <h2>Decorator Based Signal Subscriptions</h2> <p>You can also easily subscribe to signals by using the <code>connect_via()</code> decorator:</p> <pre data-language=\"python\">from flask import template_rendered\n\n@template_rendered.connect_via(app)\ndef when_template_rendered(sender, template, context, **extra):\n    print(f'Template {template.name} is rendered with {context}')\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/signals/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/signals/</a>\n  </p>\n</div>\n","lifecycle/index":"<h1>Application Structure and Lifecycle</h1> <p>Flask makes it pretty easy to write a web application. But there are quite a few different parts to an application and to each request it handles. Knowing what happens during application setup, serving, and handling requests will help you know what’s possible in Flask and how to structure your application.</p> <section id=\"application-setup\"> <h2>Application Setup</h2> <p>The first step in creating a Flask application is creating the application object. Each Flask application is an instance of the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> class, which collects all configuration, extensions, and views.</p> <pre data-language=\"python\">from flask import Flask\n\napp = Flask(__name__)\napp.config.from_mapping(\n    SECRET_KEY=\"dev\",\n)\napp.config.from_prefixed_env()\n\n@app.route(\"/\")\ndef index():\n    return \"Hello, World!\"\n</pre> <p>This is known as the “application setup phase”, it’s the code you write that’s outside any view functions or other handlers. It can be split up between different modules and sub-packages, but all code that you want to be part of your application must be imported in order for it to be registered.</p> <p>All application setup must be completed before you start serving your application and handling requests. This is because WSGI servers divide work between multiple workers, or can be distributed across multiple machines. If the configuration changed in one worker, there’s no way for Flask to ensure consistency between other workers.</p> <p>Flask tries to help developers catch some of these setup ordering issues by showing an error if setup-related methods are called after requests are handled. In that case you’ll see this error:</p>  <p>The setup method ‘route’ can no longer be called on the application. It has already handled its first request, any changes will not be applied consistently. Make sure all imports, decorators, functions, etc. needed to set up the application are done before running it.</p>  <p>However, it is not possible for Flask to detect all cases of out-of-order setup. In general, don’t do anything to modify the <code>Flask</code> app object and <code>Blueprint</code> objects from within view functions that run during requests. This includes:</p> <ul class=\"simple\"> <li>Adding routes, view functions, and other request handlers with <code>@app.route</code>, <code>@app.errorhandler</code>, <code>@app.before_request</code>, etc.</li> <li>Registering blueprints.</li> <li>Loading configuration with <code>app.config</code>.</li> <li>Setting up the Jinja template environment with <code>app.jinja_env</code>.</li> <li>Setting a session interface, instead of the default itsdangerous cookie.</li> <li>Setting a JSON provider with <code>app.json</code>, instead of the default provider.</li> <li>Creating and initializing Flask extensions.</li> </ul> </section> <section id=\"serving-the-application\"> <h2>Serving the Application</h2> <p>Flask is a WSGI application framework. The other half of WSGI is the WSGI server. During development, Flask, through Werkzeug, provides a development WSGI server with the <code>flask run</code> CLI command. When you are done with development, use a production server to serve your application, see <a class=\"reference internal\" href=\"../deploying/index\"><span class=\"doc\">Deploying to Production</span></a>.</p> <p>Regardless of what server you’re using, it will follow the <a class=\"pep reference external\" href=\"https://peps.python.org/pep-3333/\" id=\"index-0\"><strong>PEP 3333</strong></a> WSGI spec. The WSGI server will be told how to access your Flask application object, which is the WSGI application. Then it will start listening for HTTP requests, translate the request data into a WSGI environ, and call the WSGI application with that data. The WSGI application will return data that is translated into an HTTP response.</p> <ol class=\"arabic simple\"> <li>Browser or other client makes HTTP request.</li> <li>WSGI server receives request.</li> <li>WSGI server converts HTTP data to WSGI <code>environ</code> dict.</li> <li>WSGI server calls WSGI application with the <code>environ</code>.</li> <li>Flask, the WSGI application, does all its internal processing to route the request to a view function, handle errors, etc.</li> <li>Flask translates View function return into WSGI response data, passes it to WSGI server.</li> <li>WSGI server creates and send an HTTP response.</li> <li>Client receives the HTTP response.</li> </ol> <section id=\"middleware\"> <h3>Middleware</h3> <p>The WSGI application above is a callable that behaves in a certain way. Middleware is a WSGI application that wraps another WSGI application. It’s a similar concept to Python decorators. The outermost middleware will be called by the server. It can modify the data passed to it, then call the WSGI application (or further middleware) that it wraps, and so on. And it can take the return value of that call and modify it further.</p> <p>From the WSGI server’s perspective, there is one WSGI application, the one it calls directly. Typically, Flask is the “real” application at the end of the chain of middleware. But even Flask can call further WSGI applications, although that’s an advanced, uncommon use case.</p> <p>A common middleware you’ll see used with Flask is Werkzeug’s <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/middleware/proxy_fix/#werkzeug.middleware.proxy_fix.ProxyFix\" title=\"(in Werkzeug v3.1.x)\"><code>ProxyFix</code></a>, which modifies the request to look like it came directly from a client even if it passed through HTTP proxies on the way. There are other middleware that can handle serving static files, authentication, etc.</p> </section> </section> <section id=\"how-a-request-is-handled\"> <h2>How a Request is Handled</h2> <p>For us, the interesting part of the steps above is when Flask gets called by the WSGI server (or middleware). At that point, it will do quite a lot to handle the request and generate the response. At the most basic, it will match the URL to a view function, call the view function, and pass the return value back to the server. But there are many more parts that you can use to customize its behavior.</p> <ol class=\"arabic simple\"> <li>WSGI server calls the Flask object, which calls <a class=\"reference internal\" href=\"../api/index#flask.Flask.wsgi_app\" title=\"flask.Flask.wsgi_app\"><code>Flask.wsgi_app()</code></a>.</li> <li>A <a class=\"reference internal\" href=\"../api/index#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\"><code>RequestContext</code></a> object is created. This converts the WSGI <code>environ</code> dict into a <a class=\"reference internal\" href=\"../api/index#flask.Request\" title=\"flask.Request\"><code>Request</code></a> object. It also creates an <code>AppContext</code> object.</li> <li>The <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">app context</span></a> is pushed, which makes <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> available.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.appcontext_pushed\" title=\"flask.appcontext_pushed\"><code>appcontext_pushed</code></a> signal is sent.</li> <li>The <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">request context</span></a> is pushed, which makes <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> available.</li> <li>The session is opened, loading any existing session data using the app’s <a class=\"reference internal\" href=\"../api/index#flask.Flask.session_interface\" title=\"flask.Flask.session_interface\"><code>session_interface</code></a>, an instance of <a class=\"reference internal\" href=\"../api/index#flask.sessions.SessionInterface\" title=\"flask.sessions.SessionInterface\"><code>SessionInterface</code></a>.</li> <li>The URL is matched against the URL rules registered with the <a class=\"reference internal\" href=\"../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator during application setup. If there is no match, the error - usually a 404, 405, or redirect - is stored to be handled later.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.request_started\" title=\"flask.request_started\"><code>request_started</code></a> signal is sent.</li> <li>Any <a class=\"reference internal\" href=\"../api/index#flask.Flask.url_value_preprocessor\" title=\"flask.Flask.url_value_preprocessor\"><code>url_value_preprocessor()</code></a> decorated functions are called.</li> <li>Any <a class=\"reference internal\" href=\"../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> decorated functions are called. If any of these function returns a value it is treated as the response immediately.</li> <li>If the URL didn’t match a route a few steps ago, that error is raised now.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorated view function associated with the matched URL is called and returns a value to be used as the response.</li> <li>If any step so far raised an exception, and there is an <a class=\"reference internal\" href=\"../api/index#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> decorated function that matches the exception class or HTTP error code, it is called to handle the error and return a response.</li> <li>Whatever returned a response value - a before request function, the view, or an error handler, that value is converted to a <a class=\"reference internal\" href=\"../api/index#flask.Response\" title=\"flask.Response\"><code>Response</code></a> object.</li> <li>Any <a class=\"reference internal\" href=\"../api/index#flask.after_this_request\" title=\"flask.after_this_request\"><code>after_this_request()</code></a> decorated functions are called, then cleared.</li> <li>Any <a class=\"reference internal\" href=\"../api/index#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>after_request()</code></a> decorated functions are called, which can modify the response object.</li> <li>The session is saved, persisting any modified session data using the app’s <a class=\"reference internal\" href=\"../api/index#flask.Flask.session_interface\" title=\"flask.Flask.session_interface\"><code>session_interface</code></a>.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.request_finished\" title=\"flask.request_finished\"><code>request_finished</code></a> signal is sent.</li> <li>If any step so far raised an exception, and it was not handled by an error handler function, it is handled now. HTTP exceptions are treated as responses with their corresponding status code, other exceptions are converted to a generic 500 response. The <a class=\"reference internal\" href=\"../api/index#flask.got_request_exception\" title=\"flask.got_request_exception\"><code>got_request_exception</code></a> signal is sent.</li> <li>The response object’s status, headers, and body are returned to the WSGI server.</li> <li>Any <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> decorated functions are called.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.request_tearing_down\" title=\"flask.request_tearing_down\"><code>request_tearing_down</code></a> signal is sent.</li> <li>The request context is popped, <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> are no longer available.</li> <li>Any <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_appcontext\" title=\"flask.Flask.teardown_appcontext\"><code>teardown_appcontext()</code></a> decorated functions are called.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.appcontext_tearing_down\" title=\"flask.appcontext_tearing_down\"><code>appcontext_tearing_down</code></a> signal is sent.</li> <li>The app context is popped, <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> are no longer available.</li> <li>The <a class=\"reference internal\" href=\"../api/index#flask.appcontext_popped\" title=\"flask.appcontext_popped\"><code>appcontext_popped</code></a> signal is sent.</li> </ol> <p>There are even more decorators and customization points than this, but that aren’t part of every request lifecycle. They’re more specific to certain things you might use during a request, such as templates, building URLs, or handling JSON data. See the rest of this documentation, as well as the <a class=\"reference internal\" href=\"../api/index\"><span class=\"doc\">API</span></a> to explore further.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/lifecycle/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/lifecycle/</a>\n  </p>\n</div>\n","appcontext/index":"<h1>The Application Context</h1> <p>The application context keeps track of the application-level data during a request, CLI command, or other activity. Rather than passing the application around to each function, the <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> proxies are accessed instead.</p> <p>This is similar to <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">The Request Context</span></a>, which keeps track of request-level data during a request. A corresponding application context is pushed when a request context is pushed.</p> <section id=\"purpose-of-the-context\"> <h2>Purpose of the Context</h2> <p>The <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> application object has attributes, such as <a class=\"reference internal\" href=\"../api/index#flask.Flask.config\" title=\"flask.Flask.config\"><code>config</code></a>, that are useful to access within views and <a class=\"reference internal\" href=\"../cli/index\"><span class=\"doc\">CLI commands</span></a>. However, importing the <code>app</code> instance within the modules in your project is prone to circular import issues. When using the <a class=\"reference internal\" href=\"../patterns/appfactories/index\"><span class=\"doc\">app factory pattern</span></a> or writing reusable <a class=\"reference internal\" href=\"../blueprints/index\"><span class=\"doc\">blueprints</span></a> or <a class=\"reference internal\" href=\"../extensions/index\"><span class=\"doc\">extensions</span></a> there won’t be an <code>app</code> instance to import at all.</p> <p>Flask solves this issue with the <em>application context</em>. Rather than referring to an <code>app</code> directly, you use the <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> proxy, which points to the application handling the current activity.</p> <p>Flask automatically <em>pushes</em> an application context when handling a request. View functions, error handlers, and other functions that run during a request will have access to <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>.</p> <p>Flask will also automatically push an app context when running CLI commands registered with <a class=\"reference internal\" href=\"../api/index#flask.Flask.cli\" title=\"flask.Flask.cli\"><code>Flask.cli</code></a> using <code>@app.cli.command()</code>.</p> </section> <section id=\"lifetime-of-the-context\"> <h2>Lifetime of the Context</h2> <p>The application context is created and destroyed as necessary. When a Flask application begins handling a request, it pushes an application context and a <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">request context</span></a>. When the request ends it pops the request context then the application context. Typically, an application context will have the same lifetime as a request.</p> <p>See <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">The Request Context</span></a> for more information about how the contexts work and the full life cycle of a request.</p> </section> <section id=\"manually-push-a-context\"> <h2>Manually Push a Context</h2> <p>If you try to access <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>, or anything that uses it, outside an application context, you’ll get this error message:</p> <pre data-language=\"pytb\">RuntimeError: Working outside of application context.\n\nThis typically means that you attempted to use functionality that\nneeded to interface with the current application object in some way.\nTo solve this, set up an application context with app.app_context().\n</pre> <p>If you see that error while configuring your application, such as when initializing an extension, you can push a context manually since you have direct access to the <code>app</code>. Use <a class=\"reference internal\" href=\"../api/index#flask.Flask.app_context\" title=\"flask.Flask.app_context\"><code>app_context()</code></a> in a <code>with</code> block, and everything that runs in the block will have access to <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>.</p> <pre data-language=\"python\">def create_app():\n    app = Flask(__name__)\n\n    with app.app_context():\n        init_db()\n\n    return app\n</pre> <p>If you see that error somewhere else in your code not related to configuring the application, it most likely indicates that you should move that code into a view function or CLI command.</p> </section> <section id=\"storing-data\"> <h2>Storing Data</h2> <p>The application context is a good place to store common data during a request or CLI command. Flask provides the <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g object</code></a> for this purpose. It is a simple namespace object that has the same lifetime as an application context.</p> <div class=\"admonition note\"> <p class=\"admonition-title\">Note</p> <p>The <code>g</code> name stands for “global”, but that is referring to the data being global <em>within a context</em>. The data on <code>g</code> is lost after the context ends, and it is not an appropriate place to store data between requests. Use the <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> or a database to store data across requests.</p> </div> <p>A common use for <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> is to manage resources during a request.</p> <ol class=\"arabic simple\"> <li>\n<code>get_X()</code> creates resource <code>X</code> if it does not exist, caching it as <code>g.X</code>.</li> <li>\n<code>teardown_X()</code> closes or otherwise deallocates the resource if it exists. It is registered as a <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_appcontext\" title=\"flask.Flask.teardown_appcontext\"><code>teardown_appcontext()</code></a> handler.</li> </ol> <p>For example, you can manage a database connection using this pattern:</p> <pre data-language=\"python\">from flask import g\n\ndef get_db():\n    if 'db' not in g:\n        g.db = connect_to_database()\n\n    return g.db\n\n@app.teardown_appcontext\ndef teardown_db(exception):\n    db = g.pop('db', None)\n\n    if db is not None:\n        db.close()\n</pre> <p>During a request, every call to <code>get_db()</code> will return the same connection, and it will be closed automatically at the end of the request.</p> <p>You can use <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/local/#werkzeug.local.LocalProxy\" title=\"(in Werkzeug v3.1.x)\"><code>LocalProxy</code></a> to make a new context local from <code>get_db()</code>:</p> <pre data-language=\"python\">from werkzeug.local import LocalProxy\ndb = LocalProxy(get_db)\n</pre> <p>Accessing <code>db</code> will call <code>get_db</code> internally, in the same way that <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> works.</p> </section> <section id=\"events-and-signals\"> <h2>Events and Signals</h2> <p>The application will call functions registered with <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_appcontext\" title=\"flask.Flask.teardown_appcontext\"><code>teardown_appcontext()</code></a> when the application context is popped.</p> <p>The following signals are sent: <a class=\"reference internal\" href=\"../api/index#flask.appcontext_pushed\" title=\"flask.appcontext_pushed\"><code>appcontext_pushed</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.appcontext_tearing_down\" title=\"flask.appcontext_tearing_down\"><code>appcontext_tearing_down</code></a>, and <a class=\"reference internal\" href=\"../api/index#flask.appcontext_popped\" title=\"flask.appcontext_popped\"><code>appcontext_popped</code></a>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/appcontext/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/appcontext/</a>\n  </p>\n</div>\n","reqcontext/index":"<h1>The Request Context</h1> <p>The request context keeps track of the request-level data during a request. Rather than passing the request object to each function that runs during a request, the <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> proxies are accessed instead.</p> <p>This is similar to <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">The Application Context</span></a>, which keeps track of the application-level data independent of a request. A corresponding application context is pushed when a request context is pushed.</p> <section id=\"purpose-of-the-context\"> <h2>Purpose of the Context</h2> <p>When the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> application handles a request, it creates a <a class=\"reference internal\" href=\"../api/index#flask.Request\" title=\"flask.Request\"><code>Request</code></a> object based on the environment it received from the WSGI server. Because a <em>worker</em> (thread, process, or coroutine depending on the server) handles only one request at a time, the request data can be considered global to that worker during that request. Flask uses the term <em>context local</em> for this.</p> <p>Flask automatically <em>pushes</em> a request context when handling a request. View functions, error handlers, and other functions that run during a request will have access to the <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> proxy, which points to the request object for the current request.</p> </section> <section id=\"lifetime-of-the-context\"> <h2>Lifetime of the Context</h2> <p>When a Flask application begins handling a request, it pushes a request context, which also pushes an <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">app context</span></a>. When the request ends it pops the request context then the application context.</p> <p>The context is unique to each thread (or other worker type). <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> cannot be passed to another thread, the other thread has a different context space and will not know about the request the parent thread was pointing to.</p> <p>Context locals are implemented using Python’s <a class=\"reference external\" href=\"https://docs.python.org/3/library/contextvars.html#module-contextvars\" title=\"(in Python v3.13)\"><code>contextvars</code></a> and Werkzeug’s <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/local/#werkzeug.local.LocalProxy\" title=\"(in Werkzeug v3.1.x)\"><code>LocalProxy</code></a>. Python manages the lifetime of context vars automatically, and local proxy wraps that low-level interface to make the data easier to work with.</p> </section> <section id=\"manually-push-a-context\"> <h2>Manually Push a Context</h2> <p>If you try to access <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a>, or anything that uses it, outside a request context, you’ll get this error message:</p> <pre data-language=\"pytb\">RuntimeError: Working outside of request context.\n\nThis typically means that you attempted to use functionality that\nneeded an active HTTP request. Consult the documentation on testing\nfor information about how to avoid this problem.\n</pre> <p>This should typically only happen when testing code that expects an active request. One option is to use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_client\" title=\"flask.Flask.test_client\"><code>test client</code></a> to simulate a full request. Or you can use <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> in a <code>with</code> block, and everything that runs in the block will have access to <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a>, populated with your test data.</p> <pre data-language=\"python\">def generate_report(year):\n    format = request.args.get(\"format\")\n    ...\n\nwith app.test_request_context(\n    \"/make_report/2017\", query_string={\"format\": \"short\"}\n):\n    generate_report()\n</pre> <p>If you see that error somewhere else in your code not related to testing, it most likely indicates that you should move that code into a view function.</p> <p>For information on how to use the request context from the interactive Python shell, see <a class=\"reference internal\" href=\"../shell/index\"><span class=\"doc\">Working with the Shell</span></a>.</p> </section> <section id=\"how-the-context-works\"> <h2>How the Context Works</h2> <p>The <a class=\"reference internal\" href=\"../api/index#flask.Flask.wsgi_app\" title=\"flask.Flask.wsgi_app\"><code>Flask.wsgi_app()</code></a> method is called to handle each request. It manages the contexts during the request. Internally, the request and application contexts work like stacks. When contexts are pushed, the proxies that depend on them are available and point at information from the top item.</p> <p>When the request starts, a <a class=\"reference internal\" href=\"../api/index#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\"><code>RequestContext</code></a> is created and pushed, which creates and pushes an <a class=\"reference internal\" href=\"../api/index#flask.ctx.AppContext\" title=\"flask.ctx.AppContext\"><code>AppContext</code></a> first if a context for that application is not already the top context. While these contexts are pushed, the <a class=\"reference internal\" href=\"../api/index#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a>, and <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> proxies are available to the original thread handling the request.</p> <p>Other contexts may be pushed to change the proxies during a request. While this is not a common pattern, it can be used in advanced applications to, for example, do internal redirects or chain different applications together.</p> <p>After the request is dispatched and a response is generated and sent, the request context is popped, which then pops the application context. Immediately before they are popped, the <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_appcontext\" title=\"flask.Flask.teardown_appcontext\"><code>teardown_appcontext()</code></a> functions are executed. These execute even if an unhandled exception occurred during dispatch.</p> </section> <section id=\"callbacks-and-errors\"> <h2 id=\"id1\">Callbacks and Errors</h2> <p>Flask dispatches a request in multiple stages which can affect the request, response, and how errors are handled. The contexts are active during all of these stages.</p> <p>A <a class=\"reference internal\" href=\"../api/index#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> can add handlers for these events that are specific to the blueprint. The handlers for a blueprint will run if the blueprint owns the route that matches the request.</p> <ol class=\"arabic simple\"> <li>Before each request, <a class=\"reference internal\" href=\"../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> functions are called. If one of these functions return a value, the other functions are skipped. The return value is treated as the response and the view function is not called.</li> <li>If the <a class=\"reference internal\" href=\"../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> functions did not return a response, the view function for the matched route is called and returns a response.</li> <li>The return value of the view is converted into an actual response object and passed to the <a class=\"reference internal\" href=\"../api/index#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>after_request()</code></a> functions. Each function returns a modified or new response object.</li> <li>After the response is returned, the contexts are popped, which calls the <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_appcontext\" title=\"flask.Flask.teardown_appcontext\"><code>teardown_appcontext()</code></a> functions. These functions are called even if an unhandled exception was raised at any point above.</li> </ol> <p>If an exception is raised before the teardown functions, Flask tries to match it with an <a class=\"reference internal\" href=\"../api/index#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> function to handle the exception and return a response. If no error handler is found, or the handler itself raises an exception, Flask returns a generic <code>500 Internal Server Error</code> response. The teardown functions are still called, and are passed the exception object.</p> <p>If debug mode is enabled, unhandled exceptions are not converted to a <code>500</code> response and instead are propagated to the WSGI server. This allows the development server to present the interactive debugger with the traceback.</p> <section id=\"teardown-callbacks\"> <h3>Teardown Callbacks</h3> <p>The teardown callbacks are independent of the request dispatch, and are instead called by the contexts when they are popped. The functions are called even if there is an unhandled exception during dispatch, and for manually pushed contexts. This means there is no guarantee that any other parts of the request dispatch have run first. Be sure to write these functions in a way that does not depend on other callbacks and will not fail.</p> <p>During testing, it can be useful to defer popping the contexts after the request ends, so that their data can be accessed in the test function. Use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_client\" title=\"flask.Flask.test_client\"><code>test_client()</code></a> as a <code>with</code> block to preserve the contexts until the <code>with</code> block exits.</p> <pre data-language=\"python\">from flask import Flask, request\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    print('during view')\n    return 'Hello, World!'\n\n@app.teardown_request\ndef show_teardown(exception):\n    print('after with block')\n\nwith app.test_request_context():\n    print('during with block')\n\n# teardown functions are called after the context with block exits\n\nwith app.test_client() as client:\n    client.get('/')\n    # the contexts are not popped even though the request ended\n    print(request.path)\n\n# the contexts are popped and teardown functions are called after\n# the client with block exits\n</pre> </section> <section id=\"signals\"> <h3>Signals</h3> <p>The following signals are sent:</p> <ol class=\"arabic simple\"> <li>\n<a class=\"reference internal\" href=\"../api/index#flask.request_started\" title=\"flask.request_started\"><code>request_started</code></a> is sent before the <a class=\"reference internal\" href=\"../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> functions are called.</li> <li>\n<a class=\"reference internal\" href=\"../api/index#flask.request_finished\" title=\"flask.request_finished\"><code>request_finished</code></a> is sent after the <a class=\"reference internal\" href=\"../api/index#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>after_request()</code></a> functions are called.</li> <li>\n<a class=\"reference internal\" href=\"../api/index#flask.got_request_exception\" title=\"flask.got_request_exception\"><code>got_request_exception</code></a> is sent when an exception begins to be handled, but before an <a class=\"reference internal\" href=\"../api/index#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> is looked up or called.</li> <li>\n<a class=\"reference internal\" href=\"../api/index#flask.request_tearing_down\" title=\"flask.request_tearing_down\"><code>request_tearing_down</code></a> is sent after the <a class=\"reference internal\" href=\"../api/index#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> functions are called.</li> </ol> </section> </section> <section id=\"notes-on-proxies\"> <h2 id=\"id2\">Notes On Proxies</h2> <p>Some of the objects provided by Flask are proxies to other objects. The proxies are accessed in the same way for each worker thread, but point to the unique object bound to each worker behind the scenes as described on this page.</p> <p>Most of the time you don’t have to care about that, but there are some exceptions where it is good to know that this object is actually a proxy:</p> <ul class=\"simple\"> <li>The proxy objects cannot fake their type as the actual object types. If you want to perform instance checks, you have to do that on the object being proxied.</li> <li>The reference to the proxied object is needed in some situations, such as sending <a class=\"reference internal\" href=\"../signals/index\"><span class=\"doc\">Signals</span></a> or passing data to a background thread.</li> </ul> <p>If you need to access the underlying object that is proxied, use the <code>_get_current_object()</code> method:</p> <pre data-language=\"python\">app = current_app._get_current_object()\nmy_signal.send(app)\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/reqcontext/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/reqcontext/</a>\n  </p>\n</div>\n","errorhandling/index":"<h1>Handling Application Errors</h1> <p>Applications fail, servers fail. Sooner or later you will see an exception in production. Even if your code is 100% correct, you will still see exceptions from time to time. Why? Because everything else involved will fail. Here are some situations where perfectly fine code can lead to server errors:</p> <ul class=\"simple\"> <li>the client terminated the request early and the application was still reading from the incoming data</li> <li>the database server was overloaded and could not handle the query</li> <li>a filesystem is full</li> <li>a harddrive crashed</li> <li>a backend server overloaded</li> <li>a programming error in a library you are using</li> <li>network connection of the server to another system failed</li> </ul> <p>And that’s just a small sample of issues you could be facing. So how do we deal with that sort of problem? By default if your application runs in production mode, and an exception is raised Flask will display a very simple page for you and log the exception to the <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>logger</code></a>.</p> <p>But there is more you can do, and we will cover some better setups to deal with errors including custom exceptions and 3rd party tools.</p> <section id=\"error-logging-tools\"> <h2 id=\"id1\">Error Logging Tools</h2> <p>Sending error mails, even if just for critical ones, can become overwhelming if enough users are hitting the error and log files are typically never looked at. This is why we recommend using <a class=\"reference external\" href=\"https://sentry.io/\">Sentry</a> for dealing with application errors. It’s available as a source-available project <a class=\"reference external\" href=\"https://github.com/getsentry/sentry\">on GitHub</a> and is also available as a <a class=\"reference external\" href=\"https://sentry.io/signup/\">hosted version</a> which you can try for free. Sentry aggregates duplicate errors, captures the full stack trace and local variables for debugging, and sends you mails based on new errors or frequency thresholds.</p> <p>To use Sentry you need to install the <code>sentry-sdk</code> client with extra <code>flask</code> dependencies.</p> <pre data-language=\"text\">$ pip install sentry-sdk[flask]\n</pre> <p>And then add this to your Flask app:</p> <pre data-language=\"python\">import sentry_sdk\nfrom sentry_sdk.integrations.flask import FlaskIntegration\n\nsentry_sdk.init('YOUR_DSN_HERE', integrations=[FlaskIntegration()])\n</pre> <p>The <code>YOUR_DSN_HERE</code> value needs to be replaced with the DSN value you get from your Sentry installation.</p> <p>After installation, failures leading to an Internal Server Error are automatically reported to Sentry and from there you can receive error notifications.</p> <p>See also:</p> <ul class=\"simple\"> <li>Sentry also supports catching errors from a worker queue (RQ, Celery, etc.) in a similar fashion. See the <a class=\"reference external\" href=\"https://docs.sentry.io/platforms/python/\">Python SDK docs</a> for more information.</li> <li><a class=\"reference external\" href=\"https://docs.sentry.io/platforms/python/guides/flask/\">Flask-specific documentation</a></li> </ul> </section> <section id=\"error-handlers\"> <h2>Error Handlers</h2> <p>When an error occurs in Flask, an appropriate <a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\">HTTP status code</a> will be returned. 400-499 indicate errors with the client’s request data, or about the data requested. 500-599 indicate errors with the server or application itself.</p> <p>You might want to show custom error pages to the user when an error occurs. This can be done by registering error handlers.</p> <p>An error handler is a function that returns a response when a type of error is raised, similar to how a view is a function that returns a response when a request URL is matched. It is passed the instance of the error being handled, which is most likely a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a>.</p> <p>The status code of the response will not be set to the handler’s code. Make sure to provide the appropriate HTTP status code when returning a response from a handler.</p> <section id=\"registering\"> <h3>Registering</h3> <p>Register handlers by decorating a function with <a class=\"reference internal\" href=\"../api/index#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a>. Or use <a class=\"reference internal\" href=\"../api/index#flask.Flask.register_error_handler\" title=\"flask.Flask.register_error_handler\"><code>register_error_handler()</code></a> to register the function later. Remember to set the error code when returning the response.</p> <pre data-language=\"python\">@app.errorhandler(werkzeug.exceptions.BadRequest)\ndef handle_bad_request(e):\n    return 'bad request!', 400\n\n# or, without the decorator\napp.register_error_handler(400, handle_bad_request)\n</pre> <p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.exceptions.HTTPException</code></a> subclasses like <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.BadRequest\" title=\"(in Werkzeug v3.1.x)\"><code>BadRequest</code></a> and their HTTP codes are interchangeable when registering handlers. (<code>BadRequest.code == 400</code>)</p> <p>Non-standard HTTP codes cannot be registered by code because they are not known by Werkzeug. Instead, define a subclass of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> with the appropriate code and register and raise that exception class.</p> <pre data-language=\"python\">class InsufficientStorage(werkzeug.exceptions.HTTPException):\n    code = 507\n    description = 'Not enough storage space.'\n\napp.register_error_handler(InsufficientStorage, handle_507)\n\nraise InsufficientStorage()\n</pre> <p>Handlers can be registered for any exception class, not just <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> subclasses or HTTP status codes. Handlers can be registered for a specific class, or for all subclasses of a parent class.</p> </section> <section id=\"handling\"> <h3>Handling</h3> <p>When building a Flask application you <em>will</em> run into exceptions. If some part of your code breaks while handling a request (and you have no error handlers registered), a “500 Internal Server Error” (<a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.InternalServerError\" title=\"(in Werkzeug v3.1.x)\"><code>InternalServerError</code></a>) will be returned by default. Similarly, “404 Not Found” (<a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.NotFound\" title=\"(in Werkzeug v3.1.x)\"><code>NotFound</code></a>) error will occur if a request is sent to an unregistered route. If a route receives an unallowed request method, a “405 Method Not Allowed” (<a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.MethodNotAllowed\" title=\"(in Werkzeug v3.1.x)\"><code>MethodNotAllowed</code></a>) will be raised. These are all subclasses of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> and are provided by default in Flask.</p> <p>Flask gives you the ability to raise any HTTP exception registered by Werkzeug. However, the default HTTP exceptions return simple exception pages. You might want to show custom error pages to the user when an error occurs. This can be done by registering error handlers.</p> <p>When Flask catches an exception while handling a request, it is first looked up by code. If no handler is registered for the code, Flask looks up the error by its class hierarchy; the most specific handler is chosen. If no handler is registered, <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> subclasses show a generic message about their code, while other exceptions are converted to a generic “500 Internal Server Error”.</p> <p>For example, if an instance of <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ConnectionRefusedError\" title=\"(in Python v3.13)\"><code>ConnectionRefusedError</code></a> is raised, and a handler is registered for <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ConnectionError\" title=\"(in Python v3.13)\"><code>ConnectionError</code></a> and <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ConnectionRefusedError\" title=\"(in Python v3.13)\"><code>ConnectionRefusedError</code></a>, the more specific <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ConnectionRefusedError\" title=\"(in Python v3.13)\"><code>ConnectionRefusedError</code></a> handler is called with the exception instance to generate the response.</p> <p>Handlers registered on the blueprint take precedence over those registered globally on the application, assuming a blueprint is handling the request that raises the exception. However, the blueprint cannot handle 404 routing errors because the 404 occurs at the routing level before the blueprint can be determined.</p> </section> <section id=\"generic-exception-handlers\"> <h3>Generic Exception Handlers</h3> <p>It is possible to register error handlers for very generic base classes such as <code>HTTPException</code> or even <code>Exception</code>. However, be aware that these will catch more than you might expect.</p> <p>For example, an error handler for <code>HTTPException</code> might be useful for turning the default HTML errors pages into JSON. However, this handler will trigger for things you don’t cause directly, such as 404 and 405 errors during routing. Be sure to craft your handler carefully so you don’t lose information about the HTTP error.</p> <pre data-language=\"python\">from flask import json\nfrom werkzeug.exceptions import HTTPException\n\n@app.errorhandler(HTTPException)\ndef handle_exception(e):\n    \"\"\"Return JSON instead of HTML for HTTP errors.\"\"\"\n    # start with the correct headers and status code from the error\n    response = e.get_response()\n    # replace the body with JSON\n    response.data = json.dumps({\n        \"code\": e.code,\n        \"name\": e.name,\n        \"description\": e.description,\n    })\n    response.content_type = \"application/json\"\n    return response\n</pre> <p>An error handler for <code>Exception</code> might seem useful for changing how all errors, even unhandled ones, are presented to the user. However, this is similar to doing <code>except Exception:</code> in Python, it will capture <em>all</em> otherwise unhandled errors, including all HTTP status codes.</p> <p>In most cases it will be safer to register handlers for more specific exceptions. Since <code>HTTPException</code> instances are valid WSGI responses, you could also pass them through directly.</p> <pre data-language=\"python\">from werkzeug.exceptions import HTTPException\n\n@app.errorhandler(Exception)\ndef handle_exception(e):\n    # pass through HTTP errors\n    if isinstance(e, HTTPException):\n        return e\n\n    # now you're handling non-HTTP exceptions only\n    return render_template(\"500_generic.html\", e=e), 500\n</pre> <p>Error handlers still respect the exception class hierarchy. If you register handlers for both <code>HTTPException</code> and <code>Exception</code>, the <code>Exception</code> handler will not handle <code>HTTPException</code> subclasses because the <code>HTTPException</code> handler is more specific.</p> </section> <section id=\"unhandled-exceptions\"> <h3>Unhandled Exceptions</h3> <p>When there is no error handler registered for an exception, a 500 Internal Server Error will be returned instead. See <a class=\"reference internal\" href=\"../api/index#flask.Flask.handle_exception\" title=\"flask.Flask.handle_exception\"><code>flask.Flask.handle_exception()</code></a> for information about this behavior.</p> <p>If there is an error handler registered for <code>InternalServerError</code>, this will be invoked. As of Flask 1.1.0, this error handler will always be passed an instance of <code>InternalServerError</code>, not the original unhandled error.</p> <p>The original error is available as <code>e.original_exception</code>.</p> <p>An error handler for “500 Internal Server Error” will be passed uncaught exceptions in addition to explicit 500 errors. In debug mode, a handler for “500 Internal Server Error” will not be used. Instead, the interactive debugger will be shown.</p> </section> </section> <section id=\"custom-error-pages\"> <h2>Custom Error Pages</h2> <p>Sometimes when building a Flask application, you might want to raise a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> to signal to the user that something is wrong with the request. Fortunately, Flask comes with a handy <a class=\"reference internal\" href=\"../api/index#flask.abort\" title=\"flask.abort\"><code>abort()</code></a> function that aborts a request with a HTTP error from werkzeug as desired. It will also provide a plain black and white error page for you with a basic description, but nothing fancy.</p> <p>Depending on the error code it is less or more likely for the user to actually see such an error.</p> <p>Consider the code below, we might have a user profile route, and if the user fails to pass a username we can raise a “400 Bad Request”. If the user passes a username and we can’t find it, we raise a “404 Not Found”.</p> <pre data-language=\"python\">from flask import abort, render_template, request\n\n# a username needs to be supplied in the query args\n# a successful request would be like /profile?username=jack\n@app.route(\"/profile\")\ndef user_profile():\n    username = request.arg.get(\"username\")\n    # if a username isn't supplied in the request, return a 400 bad request\n    if username is None:\n        abort(400)\n\n    user = get_user(username=username)\n    # if a user can't be found by their username, return 404 not found\n    if user is None:\n        abort(404)\n\n    return render_template(\"profile.html\", user=user)\n</pre> <p>Here is another example implementation for a “404 Page Not Found” exception:</p> <pre data-language=\"python\">from flask import render_template\n\n@app.errorhandler(404)\ndef page_not_found(e):\n    # note that we set the 404 status explicitly\n    return render_template('404.html'), 404\n</pre> <p>When using <a class=\"reference internal\" href=\"../patterns/appfactories/index\"><span class=\"doc\">Application Factories</span></a>:</p> <pre data-language=\"python\">from flask import Flask, render_template\n\ndef page_not_found(e):\n  return render_template('404.html'), 404\n\ndef create_app(config_filename):\n    app = Flask(__name__)\n    app.register_error_handler(404, page_not_found)\n    return app\n</pre> <p>An example template might be this:</p> <pre data-language=\"html+jinja\">{% extends \"layout.html\" %}\n{% block title %}Page Not Found{% endblock %}\n{% block body %}\n  &lt;h1&gt;Page Not Found&lt;/h1&gt;\n  &lt;p&gt;What you were looking for is just not there.\n  &lt;p&gt;&lt;a href=\"{{ url_for('index') }}\"&gt;go somewhere nice&lt;/a&gt;\n{% endblock %}\n</pre> <section id=\"further-examples\"> <h3>Further Examples</h3> <p>The above examples wouldn’t actually be an improvement on the default exception pages. We can create a custom 500.html template like this:</p> <pre data-language=\"html+jinja\">{% extends \"layout.html\" %}\n{% block title %}Internal Server Error{% endblock %}\n{% block body %}\n  &lt;h1&gt;Internal Server Error&lt;/h1&gt;\n  &lt;p&gt;Oops... we seem to have made a mistake, sorry!&lt;/p&gt;\n  &lt;p&gt;&lt;a href=\"{{ url_for('index') }}\"&gt;Go somewhere nice instead&lt;/a&gt;\n{% endblock %}\n</pre> <p>It can be implemented by rendering the template on “500 Internal Server Error”:</p> <pre data-language=\"python\">from flask import render_template\n\n@app.errorhandler(500)\ndef internal_server_error(e):\n    # note that we set the 500 status explicitly\n    return render_template('500.html'), 500\n</pre> <p>When using <a class=\"reference internal\" href=\"../patterns/appfactories/index\"><span class=\"doc\">Application Factories</span></a>:</p> <pre data-language=\"python\">from flask import Flask, render_template\n\ndef internal_server_error(e):\n  return render_template('500.html'), 500\n\ndef create_app():\n    app = Flask(__name__)\n    app.register_error_handler(500, internal_server_error)\n    return app\n</pre> <p>When using <a class=\"reference internal\" href=\"../blueprints/index\"><span class=\"doc\">Modular Applications with Blueprints</span></a>:</p> <pre data-language=\"python\">from flask import Blueprint\n\nblog = Blueprint('blog', __name__)\n\n# as a decorator\n@blog.errorhandler(500)\ndef internal_server_error(e):\n    return render_template('500.html'), 500\n\n# or with register_error_handler\nblog.register_error_handler(500, internal_server_error)\n</pre> </section> </section> <section id=\"blueprint-error-handlers\"> <h2>Blueprint Error Handlers</h2> <p>In <a class=\"reference internal\" href=\"../blueprints/index\"><span class=\"doc\">Modular Applications with Blueprints</span></a>, most error handlers will work as expected. However, there is a caveat concerning handlers for 404 and 405 exceptions. These error handlers are only invoked from an appropriate <code>raise</code> statement or a call to <code>abort</code> in another of the blueprint’s view functions; they are not invoked by, e.g., an invalid URL access.</p> <p>This is because the blueprint does not “own” a certain URL space, so the application instance has no way of knowing which blueprint error handler it should run if given an invalid URL. If you would like to execute different handling strategies for these errors based on URL prefixes, they may be defined at the application level using the <code>request</code> proxy object.</p> <pre data-language=\"python\">from flask import jsonify, render_template\n\n# at the application level\n# not the blueprint level\n@app.errorhandler(404)\ndef page_not_found(e):\n    # if a request is in our blog URL space\n    if request.path.startswith('/blog/'):\n        # we return a custom blog 404 page\n        return render_template(\"blog/404.html\"), 404\n    else:\n        # otherwise we return our generic site-wide 404 page\n        return render_template(\"404.html\"), 404\n\n@app.errorhandler(405)\ndef method_not_allowed(e):\n    # if a request has the wrong method to our API\n    if request.path.startswith('/api/'):\n        # we return a json saying so\n        return jsonify(message=\"Method Not Allowed\"), 405\n    else:\n        # otherwise we return a generic site-wide 405 page\n        return render_template(\"405.html\"), 405\n</pre> </section> <section id=\"returning-api-errors-as-json\"> <h2>Returning API Errors as JSON</h2> <p>When building APIs in Flask, some developers realise that the built-in exceptions are not expressive enough for APIs and that the content type of <em class=\"mimetype\">text/html</em> they are emitting is not very useful for API consumers.</p> <p>Using the same techniques as above and <a class=\"reference internal\" href=\"../api/index#flask.json.jsonify\" title=\"flask.json.jsonify\"><code>jsonify()</code></a> we can return JSON responses to API errors. <a class=\"reference internal\" href=\"../api/index#flask.abort\" title=\"flask.abort\"><code>abort()</code></a> is called with a <code>description</code> parameter. The error handler will use that as the JSON error message, and set the status code to 404.</p> <pre data-language=\"python\">from flask import abort, jsonify\n\n@app.errorhandler(404)\ndef resource_not_found(e):\n    return jsonify(error=str(e)), 404\n\n@app.route(\"/cheese\")\ndef get_one_cheese():\n    resource = get_resource()\n\n    if resource is None:\n        abort(404, description=\"Resource not found\")\n\n    return jsonify(resource)\n</pre> <p>We can also create custom exception classes. For instance, we can introduce a new custom exception for an API that can take a proper human readable message, a status code for the error and some optional payload to give more context for the error.</p> <p>This is a simple example:</p> <pre data-language=\"python\">from flask import jsonify, request\n\nclass InvalidAPIUsage(Exception):\n    status_code = 400\n\n    def __init__(self, message, status_code=None, payload=None):\n        super().__init__()\n        self.message = message\n        if status_code is not None:\n            self.status_code = status_code\n        self.payload = payload\n\n    def to_dict(self):\n        rv = dict(self.payload or ())\n        rv['message'] = self.message\n        return rv\n\n@app.errorhandler(InvalidAPIUsage)\ndef invalid_api_usage(e):\n    return jsonify(e.to_dict()), e.status_code\n\n# an API app route for getting user information\n# a correct request might be /api/user?user_id=420\n@app.route(\"/api/user\")\ndef user_api(user_id):\n    user_id = request.arg.get(\"user_id\")\n    if not user_id:\n        raise InvalidAPIUsage(\"No user id provided!\")\n\n    user = get_user(user_id=user_id)\n    if not user:\n        raise InvalidAPIUsage(\"No such user!\", status_code=404)\n\n    return jsonify(user.to_dict())\n</pre> <p>A view can now raise that exception with an error message. Additionally some extra payload can be provided as a dictionary through the <code>payload</code> parameter.</p> </section> <section id=\"logging\"> <h2>Logging</h2> <p>See <a class=\"reference internal\" href=\"../logging/index\"><span class=\"doc\">Logging</span></a> for information about how to log exceptions, such as by emailing them to admins.</p> </section> <section id=\"debugging\"> <h2>Debugging</h2> <p>See <a class=\"reference internal\" href=\"../debugging/index\"><span class=\"doc\">Debugging Application Errors</span></a> for information about how to debug errors in development and production.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/errorhandling/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/errorhandling/</a>\n  </p>\n</div>\n","views/index":"<h1>Class-based Views</h1> <p>This page introduces using the <a class=\"reference internal\" href=\"../api/index#flask.views.View\" title=\"flask.views.View\"><code>View</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.views.MethodView\" title=\"flask.views.MethodView\"><code>MethodView</code></a> classes to write class-based views.</p> <p>A class-based view is a class that acts as a view function. Because it is a class, different instances of the class can be created with different arguments, to change the behavior of the view. This is also known as generic, reusable, or pluggable views.</p> <p>An example of where this is useful is defining a class that creates an API based on the database model it is initialized with.</p> <p>For more complex API behavior and customization, look into the various API extensions for Flask.</p> <section id=\"basic-reusable-view\"> <h2>Basic Reusable View</h2> <p>Let’s walk through an example converting a view function to a view class. We start with a view function that queries a list of users then renders a template to show the list.</p> <pre data-language=\"python\">@app.route(\"/users/\")\ndef user_list():\n    users = User.query.all()\n    return render_template(\"users.html\", users=users)\n</pre> <p>This works for the user model, but let’s say you also had more models that needed list pages. You’d need to write another view function for each model, even though the only thing that would change is the model and template name.</p> <p>Instead, you can write a <a class=\"reference internal\" href=\"../api/index#flask.views.View\" title=\"flask.views.View\"><code>View</code></a> subclass that will query a model and render a template. As the first step, we’ll convert the view to a class without any customization.</p> <pre data-language=\"python\">from flask.views import View\n\nclass UserList(View):\n    def dispatch_request(self):\n        users = User.query.all()\n        return render_template(\"users.html\", objects=users)\n\napp.add_url_rule(\"/users/\", view_func=UserList.as_view(\"user_list\"))\n</pre> <p>The <a class=\"reference internal\" href=\"../api/index#flask.views.View.dispatch_request\" title=\"flask.views.View.dispatch_request\"><code>View.dispatch_request()</code></a> method is the equivalent of the view function. Calling <a class=\"reference internal\" href=\"../api/index#flask.views.View.as_view\" title=\"flask.views.View.as_view\"><code>View.as_view()</code></a> method will create a view function that can be registered on the app with its <a class=\"reference internal\" href=\"../api/index#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a> method. The first argument to <code>as_view</code> is the name to use to refer to the view with <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a>.</p> <div class=\"admonition note\"> <p class=\"admonition-title\">Note</p> <p>You can’t decorate the class with <code>@app.route()</code> the way you’d do with a basic view function.</p> </div> <p>Next, we need to be able to register the same view class for different models and templates, to make it more useful than the original function. The class will take two arguments, the model and template, and store them on <code>self</code>. Then <code>dispatch_request</code> can reference these instead of hard-coded values.</p> <pre data-language=\"python\">class ListView(View):\n    def __init__(self, model, template):\n        self.model = model\n        self.template = template\n\n    def dispatch_request(self):\n        items = self.model.query.all()\n        return render_template(self.template, items=items)\n</pre> <p>Remember, we create the view function with <code>View.as_view()</code> instead of creating the class directly. Any extra arguments passed to <code>as_view</code> are then passed when creating the class. Now we can register the same view to handle multiple models.</p> <pre data-language=\"python\">app.add_url_rule(\n    \"/users/\",\n    view_func=ListView.as_view(\"user_list\", User, \"users.html\"),\n)\napp.add_url_rule(\n    \"/stories/\",\n    view_func=ListView.as_view(\"story_list\", Story, \"stories.html\"),\n)\n</pre> </section> <section id=\"url-variables\"> <h2>URL Variables</h2> <p>Any variables captured by the URL are passed as keyword arguments to the <code>dispatch_request</code> method, as they would be for a regular view function.</p> <pre data-language=\"python\">class DetailView(View):\n    def __init__(self, model):\n        self.model = model\n        self.template = f\"{model.__name__.lower()}/detail.html\"\n\n    def dispatch_request(self, id)\n        item = self.model.query.get_or_404(id)\n        return render_template(self.template, item=item)\n\napp.add_url_rule(\n    \"/users/&lt;int:id&gt;\",\n    view_func=DetailView.as_view(\"user_detail\", User)\n)\n</pre> </section> <section id=\"view-lifetime-and-self\"> <h2>View Lifetime and <code>self</code>\n</h2> <p>By default, a new instance of the view class is created every time a request is handled. This means that it is safe to write other data to <code>self</code> during the request, since the next request will not see it, unlike other forms of global state.</p> <p>However, if your view class needs to do a lot of complex initialization, doing it for every request is unnecessary and can be inefficient. To avoid this, set <a class=\"reference internal\" href=\"../api/index#flask.views.View.init_every_request\" title=\"flask.views.View.init_every_request\"><code>View.init_every_request</code></a> to <code>False</code>, which will only create one instance of the class and use it for every request. In this case, writing to <code>self</code> is not safe. If you need to store data during the request, use <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> instead.</p> <p>In the <code>ListView</code> example, nothing writes to <code>self</code> during the request, so it is more efficient to create a single instance.</p> <pre data-language=\"python\">class ListView(View):\n    init_every_request = False\n\n    def __init__(self, model, template):\n        self.model = model\n        self.template = template\n\n    def dispatch_request(self):\n        items = self.model.query.all()\n        return render_template(self.template, items=items)\n</pre> <p>Different instances will still be created each for each <code>as_view</code> call, but not for each request to those views.</p> </section> <section id=\"view-decorators\"> <h2>View Decorators</h2> <p>The view class itself is not the view function. View decorators need to be applied to the view function returned by <code>as_view</code>, not the class itself. Set <a class=\"reference internal\" href=\"../api/index#flask.views.View.decorators\" title=\"flask.views.View.decorators\"><code>View.decorators</code></a> to a list of decorators to apply.</p> <pre data-language=\"python\">class UserList(View):\n    decorators = [cache(minutes=2), login_required]\n\napp.add_url_rule('/users/', view_func=UserList.as_view())\n</pre> <p>If you didn’t set <code>decorators</code>, you could apply them manually instead. This is equivalent to:</p> <pre data-language=\"python\">view = UserList.as_view(\"users_list\")\nview = cache(minutes=2)(view)\nview = login_required(view)\napp.add_url_rule('/users/', view_func=view)\n</pre> <p>Keep in mind that order matters. If you’re used to <code>@decorator</code> style, this is equivalent to:</p> <pre data-language=\"python\">@app.route(\"/users/\")\n@login_required\n@cache(minutes=2)\ndef user_list():\n    ...\n</pre> </section> <section id=\"method-hints\"> <h2>Method Hints</h2> <p>A common pattern is to register a view with <code>methods=[\"GET\", \"POST\"]</code>, then check <code>request.method == \"POST\"</code> to decide what to do. Setting <a class=\"reference internal\" href=\"../api/index#flask.views.View.methods\" title=\"flask.views.View.methods\"><code>View.methods</code></a> is equivalent to passing the list of methods to <code>add_url_rule</code> or <code>route</code>.</p> <pre data-language=\"python\">class MyView(View):\n    methods = [\"GET\", \"POST\"]\n\n    def dispatch_request(self):\n        if request.method == \"POST\":\n            ...\n        ...\n\napp.add_url_rule('/my-view', view_func=MyView.as_view('my-view'))\n</pre> <p>This is equivalent to the following, except further subclasses can inherit or change the methods.</p> <pre data-language=\"python\">app.add_url_rule(\n    \"/my-view\",\n    view_func=MyView.as_view(\"my-view\"),\n    methods=[\"GET\", \"POST\"],\n)\n</pre> </section> <section id=\"method-dispatching-and-apis\"> <h2>Method Dispatching and APIs</h2> <p>For APIs it can be helpful to use a different function for each HTTP method. <a class=\"reference internal\" href=\"../api/index#flask.views.MethodView\" title=\"flask.views.MethodView\"><code>MethodView</code></a> extends the basic <a class=\"reference internal\" href=\"../api/index#flask.views.View\" title=\"flask.views.View\"><code>View</code></a> to dispatch to different methods of the class based on the request method. Each HTTP method maps to a method of the class with the same (lowercase) name.</p> <p><a class=\"reference internal\" href=\"../api/index#flask.views.MethodView\" title=\"flask.views.MethodView\"><code>MethodView</code></a> automatically sets <a class=\"reference internal\" href=\"../api/index#flask.views.View.methods\" title=\"flask.views.View.methods\"><code>View.methods</code></a> based on the methods defined by the class. It even knows how to handle subclasses that override or define other methods.</p> <p>We can make a generic <code>ItemAPI</code> class that provides get (detail), patch (edit), and delete methods for a given model. A <code>GroupAPI</code> can provide get (list) and post (create) methods.</p> <pre data-language=\"python\">from flask.views import MethodView\n\nclass ItemAPI(MethodView):\n    init_every_request = False\n\n    def __init__(self, model):\n        self.model = model\n        self.validator = generate_validator(model)\n\n    def _get_item(self, id):\n        return self.model.query.get_or_404(id)\n\n    def get(self, id):\n        item = self._get_item(id)\n        return jsonify(item.to_json())\n\n    def patch(self, id):\n        item = self._get_item(id)\n        errors = self.validator.validate(item, request.json)\n\n        if errors:\n            return jsonify(errors), 400\n\n        item.update_from_json(request.json)\n        db.session.commit()\n        return jsonify(item.to_json())\n\n    def delete(self, id):\n        item = self._get_item(id)\n        db.session.delete(item)\n        db.session.commit()\n        return \"\", 204\n\nclass GroupAPI(MethodView):\n    init_every_request = False\n\n    def __init__(self, model):\n        self.model = model\n        self.validator = generate_validator(model, create=True)\n\n    def get(self):\n        items = self.model.query.all()\n        return jsonify([item.to_json() for item in items])\n\n    def post(self):\n        errors = self.validator.validate(request.json)\n\n        if errors:\n            return jsonify(errors), 400\n\n        db.session.add(self.model.from_json(request.json))\n        db.session.commit()\n        return jsonify(item.to_json())\n\ndef register_api(app, model, name):\n    item = ItemAPI.as_view(f\"{name}-item\", model)\n    group = GroupAPI.as_view(f\"{name}-group\", model)\n    app.add_url_rule(f\"/{name}/&lt;int:id&gt;\", view_func=item)\n    app.add_url_rule(f\"/{name}/\", view_func=group)\n\nregister_api(app, User, \"users\")\nregister_api(app, Story, \"stories\")\n</pre> <p>This produces the following views, a standard REST API!</p> <table class=\"docutils align-default\">  <tr>\n<td><p>URL</p></td> <td><p>Method</p></td> <td><p>Description</p></td> </tr> <tr>\n<td><p><code>/users/</code></p></td> <td><p><code>GET</code></p></td> <td><p>List all users</p></td> </tr> <tr>\n<td><p><code>/users/</code></p></td> <td><p><code>POST</code></p></td> <td><p>Create a new user</p></td> </tr> <tr>\n<td><p><code>/users/&lt;id&gt;</code></p></td> <td><p><code>GET</code></p></td> <td><p>Show a single user</p></td> </tr> <tr>\n<td><p><code>/users/&lt;id&gt;</code></p></td> <td><p><code>PATCH</code></p></td> <td><p>Update a user</p></td> </tr> <tr>\n<td><p><code>/users/&lt;id&gt;</code></p></td> <td><p><code>DELETE</code></p></td> <td><p>Delete a user</p></td> </tr> <tr>\n<td><p><code>/stories/</code></p></td> <td><p><code>GET</code></p></td> <td><p>List all stories</p></td> </tr> <tr>\n<td><p><code>/stories/</code></p></td> <td><p><code>POST</code></p></td> <td><p>Create a new story</p></td> </tr> <tr>\n<td><p><code>/stories/&lt;id&gt;</code></p></td> <td><p><code>GET</code></p></td> <td><p>Show a single story</p></td> </tr> <tr>\n<td><p><code>/stories/&lt;id&gt;</code></p></td> <td><p><code>PATCH</code></p></td> <td><p>Update a story</p></td> </tr> <tr>\n<td><p><code>/stories/&lt;id&gt;</code></p></td> <td><p><code>DELETE</code></p></td> <td><p>Delete a story</p></td> </tr>  </table> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/views/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/views/</a>\n  </p>\n</div>\n","blueprints/index":"<h1>Modular Applications with Blueprints</h1> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><p>Flask uses a concept of <em>blueprints</em> for making application components and supporting common patterns within an application or across applications. Blueprints can greatly simplify how large applications work and provide a central means for Flask extensions to register operations on applications. A <a class=\"reference internal\" href=\"../api/index#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> object works similarly to a <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> application object, but it is not actually an application. Rather it is a <em>blueprint</em> of how to construct or extend an application.</p> <section id=\"why-blueprints\"> <h2>Why Blueprints?</h2> <p>Blueprints in Flask are intended for these cases:</p> <ul class=\"simple\"> <li>Factor an application into a set of blueprints. This is ideal for larger applications; a project could instantiate an application object, initialize several extensions, and register a collection of blueprints.</li> <li>Register a blueprint on an application at a URL prefix and/or subdomain. Parameters in the URL prefix/subdomain become common view arguments (with defaults) across all view functions in the blueprint.</li> <li>Register a blueprint multiple times on an application with different URL rules.</li> <li>Provide template filters, static files, templates, and other utilities through blueprints. A blueprint does not have to implement applications or view functions.</li> <li>Register a blueprint on an application for any of these cases when initializing a Flask extension.</li> </ul> <p>A blueprint in Flask is not a pluggable app because it is not actually an application – it’s a set of operations which can be registered on an application, even multiple times. Why not have multiple application objects? You can do that (see <a class=\"reference internal\" href=\"../patterns/appdispatch/index\"><span class=\"doc\">Application Dispatching</span></a>), but your applications will have separate configs and will be managed at the WSGI layer.</p> <p>Blueprints instead provide separation at the Flask level, share application config, and can change an application object as necessary with being registered. The downside is that you cannot unregister a blueprint once an application was created without having to destroy the whole application object.</p> </section> <section id=\"the-concept-of-blueprints\"> <h2>The Concept of Blueprints</h2> <p>The basic concept of blueprints is that they record operations to execute when registered on an application. Flask associates view functions with blueprints when dispatching requests and generating URLs from one endpoint to another.</p> </section> <section id=\"my-first-blueprint\"> <h2>My First Blueprint</h2> <p>This is what a very basic blueprint looks like. In this case we want to implement a blueprint that does simple rendering of static templates:</p> <pre data-language=\"python\">from flask import Blueprint, render_template, abort\nfrom jinja2 import TemplateNotFound\n\nsimple_page = Blueprint('simple_page', __name__,\n                        template_folder='templates')\n\n@simple_page.route('/', defaults={'page': 'index'})\n@simple_page.route('/&lt;page&gt;')\ndef show(page):\n    try:\n        return render_template(f'pages/{page}.html')\n    except TemplateNotFound:\n        abort(404)\n</pre> <p>When you bind a function with the help of the <code>@simple_page.route</code> decorator, the blueprint will record the intention of registering the function <code>show</code> on the application when it’s later registered. Additionally it will prefix the endpoint of the function with the name of the blueprint which was given to the <a class=\"reference internal\" href=\"../api/index#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> constructor (in this case also <code>simple_page</code>). The blueprint’s name does not modify the URL, only the endpoint.</p> </section> <section id=\"registering-blueprints\"> <h2>Registering Blueprints</h2> <p>So how do you register that blueprint? Like this:</p> <pre data-language=\"python\">from flask import Flask\nfrom yourapplication.simple_page import simple_page\n\napp = Flask(__name__)\napp.register_blueprint(simple_page)\n</pre> <p>If you check the rules registered on the application, you will find these:</p> <pre data-language=\"python\">&gt;&gt;&gt; app.url_map\nMap([&lt;Rule '/static/&lt;filename&gt;' (HEAD, OPTIONS, GET) -&gt; static&gt;,\n &lt;Rule '/&lt;page&gt;' (HEAD, OPTIONS, GET) -&gt; simple_page.show&gt;,\n &lt;Rule '/' (HEAD, OPTIONS, GET) -&gt; simple_page.show&gt;])\n</pre> <p>The first one is obviously from the application itself for the static files. The other two are for the <code>show</code> function of the <code>simple_page</code> blueprint. As you can see, they are also prefixed with the name of the blueprint and separated by a dot (<code>.</code>).</p> <p>Blueprints however can also be mounted at different locations:</p> <pre data-language=\"python\">app.register_blueprint(simple_page, url_prefix='/pages')\n</pre> <p>And sure enough, these are the generated rules:</p> <pre data-language=\"python\">&gt;&gt;&gt; app.url_map\nMap([&lt;Rule '/static/&lt;filename&gt;' (HEAD, OPTIONS, GET) -&gt; static&gt;,\n &lt;Rule '/pages/&lt;page&gt;' (HEAD, OPTIONS, GET) -&gt; simple_page.show&gt;,\n &lt;Rule '/pages/' (HEAD, OPTIONS, GET) -&gt; simple_page.show&gt;])\n</pre> <p>On top of that you can register blueprints multiple times though not every blueprint might respond properly to that. In fact it depends on how the blueprint is implemented if it can be mounted more than once.</p> </section> <section id=\"nesting-blueprints\"> <h2>Nesting Blueprints</h2> <p>It is possible to register a blueprint on another blueprint.</p> <pre data-language=\"python\">parent = Blueprint('parent', __name__, url_prefix='/parent')\nchild = Blueprint('child', __name__, url_prefix='/child')\nparent.register_blueprint(child)\napp.register_blueprint(parent)\n</pre> <p>The child blueprint will gain the parent’s name as a prefix to its name, and child URLs will be prefixed with the parent’s URL prefix.</p> <pre data-language=\"python\">url_for('parent.child.create')\n/parent/child/create\n</pre> <p>In addition a child blueprint’s will gain their parent’s subdomain, with their subdomain as prefix if present i.e.</p> <pre data-language=\"python\">parent = Blueprint('parent', __name__, subdomain='parent')\nchild = Blueprint('child', __name__, subdomain='child')\nparent.register_blueprint(child)\napp.register_blueprint(parent)\n\nurl_for('parent.child.create', _external=True)\n\"child.parent.domain.tld\"\n</pre> <p>Blueprint-specific before request functions, etc. registered with the parent will trigger for the child. If a child does not have an error handler that can handle a given exception, the parent’s will be tried.</p> </section> <section id=\"blueprint-resources\"> <h2>Blueprint Resources</h2> <p>Blueprints can provide resources as well. Sometimes you might want to introduce a blueprint only for the resources it provides.</p> <section id=\"blueprint-resource-folder\"> <h3>Blueprint Resource Folder</h3> <p>Like for regular applications, blueprints are considered to be contained in a folder. While multiple blueprints can originate from the same folder, it does not have to be the case and it’s usually not recommended.</p> <p>The folder is inferred from the second argument to <a class=\"reference internal\" href=\"../api/index#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> which is usually <code>__name__</code>. This argument specifies what logical Python module or package corresponds to the blueprint. If it points to an actual Python package that package (which is a folder on the filesystem) is the resource folder. If it’s a module, the package the module is contained in will be the resource folder. You can access the <a class=\"reference internal\" href=\"../api/index#flask.Blueprint.root_path\" title=\"flask.Blueprint.root_path\"><code>Blueprint.root_path</code></a> property to see what the resource folder is:</p> <pre data-language=\"python\">&gt;&gt;&gt; simple_page.root_path\n'/Users/username/TestProject/yourapplication'\n</pre> <p>To quickly open sources from this folder you can use the <a class=\"reference internal\" href=\"../api/index#flask.Blueprint.open_resource\" title=\"flask.Blueprint.open_resource\"><code>open_resource()</code></a> function:</p> <pre data-language=\"python\">with simple_page.open_resource('static/style.css') as f:\n    code = f.read()\n</pre> </section> <section id=\"static-files\"> <h3>Static Files</h3> <p>A blueprint can expose a folder with static files by providing the path to the folder on the filesystem with the <code>static_folder</code> argument. It is either an absolute path or relative to the blueprint’s location:</p> <pre data-language=\"python\">admin = Blueprint('admin', __name__, static_folder='static')\n</pre> <p>By default the rightmost part of the path is where it is exposed on the web. This can be changed with the <code>static_url_path</code> argument. Because the folder is called <code>static</code> here it will be available at the <code>url_prefix</code> of the blueprint + <code>/static</code>. If the blueprint has the prefix <code>/admin</code>, the static URL will be <code>/admin/static</code>.</p> <p>The endpoint is named <code>blueprint_name.static</code>. You can generate URLs to it with <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> like you would with the static folder of the application:</p> <pre data-language=\"python\">url_for('admin.static', filename='style.css')\n</pre> <p>However, if the blueprint does not have a <code>url_prefix</code>, it is not possible to access the blueprint’s static folder. This is because the URL would be <code>/static</code> in this case, and the application’s <code>/static</code> route takes precedence. Unlike template folders, blueprint static folders are not searched if the file does not exist in the application static folder.</p> </section> <section id=\"templates\"> <h3>Templates</h3> <p>If you want the blueprint to expose templates you can do that by providing the <code>template_folder</code> parameter to the <a class=\"reference internal\" href=\"../api/index#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> constructor:</p> <pre data-language=\"python\">admin = Blueprint('admin', __name__, template_folder='templates')\n</pre> <p>For static files, the path can be absolute or relative to the blueprint resource folder.</p> <p>The template folder is added to the search path of templates but with a lower priority than the actual application’s template folder. That way you can easily override templates that a blueprint provides in the actual application. This also means that if you don’t want a blueprint template to be accidentally overridden, make sure that no other blueprint or actual application template has the same relative path. When multiple blueprints provide the same relative template path the first blueprint registered takes precedence over the others.</p> <p>So if you have a blueprint in the folder <code>yourapplication/admin</code> and you want to render the template <code>'admin/index.html'</code> and you have provided <code>templates</code> as a <code>template_folder</code> you will have to create a file like this: <code>yourapplication/admin/templates/admin/index.html</code>. The reason for the extra <code>admin</code> folder is to avoid getting our template overridden by a template named <code>index.html</code> in the actual application template folder.</p> <p>To further reiterate this: if you have a blueprint named <code>admin</code> and you want to render a template called <code>index.html</code> which is specific to this blueprint, the best idea is to lay out your templates like this:</p> <pre data-language=\"python\">yourpackage/\n    blueprints/\n        admin/\n            templates/\n                admin/\n                    index.html\n            __init__.py\n</pre> <p>And then when you want to render the template, use <code>admin/index.html</code> as the name to look up the template by. If you encounter problems loading the correct templates enable the <code>EXPLAIN_TEMPLATE_LOADING</code> config variable which will instruct Flask to print out the steps it goes through to locate templates on every <code>render_template</code> call.</p> </section> </section> <section id=\"building-urls\"> <h2>Building URLs</h2> <p>If you want to link from one page to another you can use the <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> function just like you normally would do just that you prefix the URL endpoint with the name of the blueprint and a dot (<code>.</code>):</p> <pre data-language=\"python\">url_for('admin.index')\n</pre> <p>Additionally if you are in a view function of a blueprint or a rendered template and you want to link to another endpoint of the same blueprint, you can use relative redirects by prefixing the endpoint with a dot only:</p> <pre data-language=\"python\">url_for('.index')\n</pre> <p>This will link to <code>admin.index</code> for instance in case the current request was dispatched to any other admin blueprint endpoint.</p> </section> <section id=\"blueprint-error-handlers\"> <h2>Blueprint Error Handlers</h2> <p>Blueprints support the <code>errorhandler</code> decorator just like the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> application object, so it is easy to make Blueprint-specific custom error pages.</p> <p>Here is an example for a “404 Page Not Found” exception:</p> <pre data-language=\"python\">@simple_page.errorhandler(404)\ndef page_not_found(e):\n    return render_template('pages/404.html')\n</pre> <p>Most errorhandlers will simply work as expected; however, there is a caveat concerning handlers for 404 and 405 exceptions. These errorhandlers are only invoked from an appropriate <code>raise</code> statement or a call to <code>abort</code> in another of the blueprint’s view functions; they are not invoked by, e.g., an invalid URL access. This is because the blueprint does not “own” a certain URL space, so the application instance has no way of knowing which blueprint error handler it should run if given an invalid URL. If you would like to execute different handling strategies for these errors based on URL prefixes, they may be defined at the application level using the <code>request</code> proxy object:</p> <pre data-language=\"python\">@app.errorhandler(404)\n@app.errorhandler(405)\ndef _handle_api_error(ex):\n    if request.path.startswith('/api/'):\n        return jsonify(error=str(ex)), ex.code\n    else:\n        return ex\n</pre> <p>See <a class=\"reference internal\" href=\"../errorhandling/index\"><span class=\"doc\">Handling Application Errors</span></a>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/blueprints/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/blueprints/</a>\n  </p>\n</div>\n","cli/index":"<h1>Command Line Interface</h1> <p>Installing Flask installs the <code>flask</code> script, a <a class=\"reference external\" href=\"https://click.palletsprojects.com/\">Click</a> command line interface, in your virtualenv. Executed from the terminal, this script gives access to built-in, extension, and application-defined commands. The <code>--help</code> option will give more information about any commands and options.</p> <section id=\"application-discovery\"> <h2>Application Discovery</h2> <p>The <code>flask</code> command is installed by Flask, not your application; it must be told where to find your application in order to use it. The <code>--app</code> option is used to specify how to load the application.</p> <p>While <code>--app</code> supports a variety of options for specifying your application, most use cases should be simple. Here are the typical values:</p> <dl class=\"simple\"> <dt>(nothing)</dt>\n<dd>\n<p>The name “app” or “wsgi” is imported (as a “.py” file, or package), automatically detecting an app (<code>app</code> or <code>application</code>) or factory (<code>create_app</code> or <code>make_app</code>).</p> </dd> <dt>\n<code>--app hello</code> </dt>\n<dd>\n<p>The given name is imported, automatically detecting an app (<code>app</code> or <code>application</code>) or factory (<code>create_app</code> or <code>make_app</code>).</p> </dd> </dl>  <p><code>--app</code> has three parts: an optional path that sets the current working directory, a Python file or dotted import path, and an optional variable name of the instance or factory. If the name is a factory, it can optionally be followed by arguments in parentheses. The following values demonstrate these parts:</p> <dl class=\"simple\"> <dt>\n<code>--app src/hello</code> </dt>\n<dd>\n<p>Sets the current working directory to <code>src</code> then imports <code>hello</code>.</p> </dd> <dt>\n<code>--app hello.web</code> </dt>\n<dd>\n<p>Imports the path <code>hello.web</code>.</p> </dd> <dt>\n<code>--app hello:app2</code> </dt>\n<dd>\n<p>Uses the <code>app2</code> Flask instance in <code>hello</code>.</p> </dd> <dt>\n<code>--app 'hello:create_app(\"dev\")'</code> </dt>\n<dd>\n<p>The <code>create_app</code> factory in <code>hello</code> is called with the string <code>'dev'</code> as the argument.</p> </dd> </dl> <p>If <code>--app</code> is not set, the command will try to import “app” or “wsgi” (as a “.py” file, or package) and try to detect an application instance or factory.</p> <p>Within the given import, the command looks for an application instance named <code>app</code> or <code>application</code>, then any application instance. If no instance is found, the command looks for a factory function named <code>create_app</code> or <code>make_app</code> that returns an instance.</p> <p>If parentheses follow the factory name, their contents are parsed as Python literals and passed as arguments and keyword arguments to the function. This means that strings must still be in quotes.</p> </section> <section id=\"run-the-development-server\"> <h2>Run the Development Server</h2> <p>The <a class=\"reference internal\" href=\"../api/index#flask.cli.run_command\" title=\"flask.cli.run_command\"><code>run</code></a> command will start the development server. It replaces the <a class=\"reference internal\" href=\"../api/index#flask.Flask.run\" title=\"flask.Flask.run\"><code>Flask.run()</code></a> method in most cases.</p> <pre data-language=\"python\">$ flask --app hello run\n * Serving Flask app \"hello\"\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n</pre> <div class=\"admonition warning\"> <p class=\"admonition-title\">Warning</p> <p>Do not use this command to run your application in production. Only use the development server during development. The development server is provided for convenience, but is not designed to be particularly secure, stable, or efficient. See <a class=\"reference internal\" href=\"../deploying/index\"><span class=\"doc\">Deploying to Production</span></a> for how to run in production.</p> </div> <p>If another program is already using port 5000, you’ll see <code>OSError: [Errno 98]</code> or <code>OSError: [WinError 10013]</code> when the server tries to start. See <a class=\"reference internal\" href=\"../server/index#address-already-in-use\"><span class=\"std std-ref\">Address already in use</span></a> for how to handle that.</p> <section id=\"debug-mode\"> <h3>Debug Mode</h3> <p>In debug mode, the <code>flask run</code> command will enable the interactive debugger and the reloader by default, and make errors easier to see and debug. To enable debug mode, use the <code>--debug</code> option.</p> <pre data-language=\"console\">$ flask --app hello run --debug\n * Serving Flask app \"hello\"\n * Debug mode: on\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n * Restarting with inotify reloader\n * Debugger is active!\n * Debugger PIN: 223-456-919\n</pre> <p>The <code>--debug</code> option can also be passed to the top level <code>flask</code> command to enable debug mode for any command. The following two <code>run</code> calls are equivalent.</p> <pre data-language=\"console\">$ flask --app hello --debug run\n$ flask --app hello run --debug\n</pre> </section> <section id=\"watch-and-ignore-files-with-the-reloader\"> <h3>Watch and Ignore Files with the Reloader</h3> <p>When using debug mode, the reloader will trigger whenever your Python code or imported modules change. The reloader can watch additional files with the <code>--extra-files</code> option. Multiple paths are separated with <code>:</code>, or <code>;</code> on Windows.</p> <pre data-language=\"text\">$ flask run --extra-files file1:dirA/file2:dirB/\n * Running on http://127.0.0.1:8000/\n * Detected change in '/path/to/file1', reloading\n</pre> <p>The reloader can also ignore files using <a class=\"reference external\" href=\"https://docs.python.org/3/library/fnmatch.html#module-fnmatch\" title=\"(in Python v3.13)\"><code>fnmatch</code></a> patterns with the <code>--exclude-patterns</code> option. Multiple patterns are separated with <code>:</code>, or <code>;</code> on Windows.</p> </section> </section> <section id=\"open-a-shell\"> <h2>Open a Shell</h2> <p>To explore the data in your application, you can start an interactive Python shell with the <a class=\"reference internal\" href=\"../api/index#flask.cli.shell_command\" title=\"flask.cli.shell_command\"><code>shell</code></a> command. An application context will be active, and the app instance will be imported.</p> <pre data-language=\"python\">$ flask shell\nPython 3.10.0 (default, Oct 27 2021, 06:59:51) [GCC 11.1.0] on linux\nApp: example [production]\nInstance: /home/david/Projects/pallets/flask/instance\n&gt;&gt;&gt;\n</pre> <p>Use <a class=\"reference internal\" href=\"../api/index#flask.Flask.shell_context_processor\" title=\"flask.Flask.shell_context_processor\"><code>shell_context_processor()</code></a> to add other automatic imports.</p> </section> <section id=\"environment-variables-from-dotenv\"> <h2 id=\"dotenv\">Environment Variables From dotenv</h2> <p>The <code>flask</code> command supports setting any option for any command with environment variables. The variables are named like <code>FLASK_OPTION</code> or <code>FLASK_COMMAND_OPTION</code>, for example <code>FLASK_APP</code> or <code>FLASK_RUN_PORT</code>.</p> <p>Rather than passing options every time you run a command, or environment variables every time you open a new terminal, you can use Flask’s dotenv support to set environment variables automatically.</p> <p>If <a class=\"reference external\" href=\"https://github.com/theskumar/python-dotenv#readme\">python-dotenv</a> is installed, running the <code>flask</code> command will set environment variables defined in the files <code>.env</code> and <code>.flaskenv</code>. You can also specify an extra file to load with the <code>--env-file</code> option. Dotenv files can be used to avoid having to set <code>--app</code> or <code>FLASK_APP</code> manually, and to set configuration using environment variables similar to how some deployment services work.</p> <p>Variables set on the command line are used over those set in <code>.env</code>, which are used over those set in <code>.flaskenv</code>. <code>.flaskenv</code> should be used for public variables, such as <code>FLASK_APP</code>, while <code>.env</code> should not be committed to your repository so that it can set private variables.</p> <p>Directories are scanned upwards from the directory you call <code>flask</code> from to locate the files.</p> <p>The files are only loaded by the <code>flask</code> command or calling <a class=\"reference internal\" href=\"../api/index#flask.Flask.run\" title=\"flask.Flask.run\"><code>run()</code></a>. If you would like to load these files when running in production, you should call <a class=\"reference internal\" href=\"../api/index#flask.cli.load_dotenv\" title=\"flask.cli.load_dotenv\"><code>load_dotenv()</code></a> manually.</p> <section id=\"setting-command-options\"> <h3>Setting Command Options</h3> <p>Click is configured to load default values for command options from environment variables. The variables use the pattern <code>FLASK_COMMAND_OPTION</code>. For example, to set the port for the run command, instead of <code>flask run --port 8000</code>:</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-0-QmFzaA==\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-QmFzaA==\" name=\"QmFzaA==\" role=\"tab\" tabindex=\"0\">Bash</button><button aria-controls=\"panel-0-RmlzaA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-RmlzaA==\" name=\"RmlzaA==\" role=\"tab\" tabindex=\"-1\">Fish</button><button aria-controls=\"panel-0-Q01E\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-Q01E\" name=\"Q01E\" role=\"tab\" tabindex=\"-1\">CMD</button><button aria-controls=\"panel-0-UG93ZXJzaGVsbA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tab\" tabindex=\"-1\">Powershell</button>\n</div>\n<div aria-labelledby=\"tab-0-QmFzaA==\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-0-QmFzaA==\" name=\"QmFzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ export FLASK_RUN_PORT=8000\n$ flask run\n * Running on http://127.0.0.1:8000/\n</pre> </div>\n<div aria-labelledby=\"tab-0-RmlzaA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-RmlzaA==\" name=\"RmlzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ set -x FLASK_RUN_PORT 8000\n$ flask run\n * Running on http://127.0.0.1:8000/\n</pre> </div>\n<div aria-labelledby=\"tab-0-Q01E\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-Q01E\" name=\"Q01E\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; set FLASK_RUN_PORT=8000\n&gt; flask run\n * Running on http://127.0.0.1:8000/\n</pre> </div>\n<div aria-labelledby=\"tab-0-UG93ZXJzaGVsbA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; $env:FLASK_RUN_PORT = 8000\n&gt; flask run\n * Running on http://127.0.0.1:8000/\n</pre> </div>\n</div> <p>These can be added to the <code>.flaskenv</code> file just like <code>FLASK_APP</code> to control default command options.</p> </section> <section id=\"disable-dotenv\"> <h3>Disable dotenv</h3> <p>The <code>flask</code> command will show a message if it detects dotenv files but python-dotenv is not installed.</p> <pre data-language=\"bash\">$ flask run\n * Tip: There are .env files present. Do \"pip install python-dotenv\" to use them.\n</pre> <p>You can tell Flask not to load dotenv files even when python-dotenv is installed by setting the <code>FLASK_SKIP_DOTENV</code> environment variable. This can be useful if you want to load them manually, or if you’re using a project runner that loads them already. Keep in mind that the environment variables must be set before the app loads or it won’t configure as expected.</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-1-QmFzaA==\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-QmFzaA==\" name=\"QmFzaA==\" role=\"tab\" tabindex=\"0\">Bash</button><button aria-controls=\"panel-1-RmlzaA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-RmlzaA==\" name=\"RmlzaA==\" role=\"tab\" tabindex=\"-1\">Fish</button><button aria-controls=\"panel-1-Q01E\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-Q01E\" name=\"Q01E\" role=\"tab\" tabindex=\"-1\">CMD</button><button aria-controls=\"panel-1-UG93ZXJzaGVsbA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tab\" tabindex=\"-1\">Powershell</button>\n</div>\n<div aria-labelledby=\"tab-1-QmFzaA==\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-1-QmFzaA==\" name=\"QmFzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ export FLASK_SKIP_DOTENV=1\n$ flask run\n</pre> </div>\n<div aria-labelledby=\"tab-1-RmlzaA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-RmlzaA==\" name=\"RmlzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ set -x FLASK_SKIP_DOTENV 1\n$ flask run\n</pre> </div>\n<div aria-labelledby=\"tab-1-Q01E\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-Q01E\" name=\"Q01E\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; set FLASK_SKIP_DOTENV=1\n&gt; flask run\n</pre> </div>\n<div aria-labelledby=\"tab-1-UG93ZXJzaGVsbA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; $env:FLASK_SKIP_DOTENV = 1\n&gt; flask run\n</pre> </div>\n</div> </section> </section> <section id=\"environment-variables-from-virtualenv\"> <h2>Environment Variables From virtualenv</h2> <p>If you do not want to install dotenv support, you can still set environment variables by adding them to the end of the virtualenv’s <code>activate</code> script. Activating the virtualenv will set the variables.</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-2-QmFzaA==\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-2-QmFzaA==\" name=\"QmFzaA==\" role=\"tab\" tabindex=\"0\">Bash</button><button aria-controls=\"panel-2-RmlzaA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-2-RmlzaA==\" name=\"RmlzaA==\" role=\"tab\" tabindex=\"-1\">Fish</button><button aria-controls=\"panel-2-Q01E\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-2-Q01E\" name=\"Q01E\" role=\"tab\" tabindex=\"-1\">CMD</button><button aria-controls=\"panel-2-UG93ZXJzaGVsbA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-2-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tab\" tabindex=\"-1\">Powershell</button>\n</div>\n<div aria-labelledby=\"tab-2-QmFzaA==\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-2-QmFzaA==\" name=\"QmFzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<p>Unix Bash, <code>.venv/bin/activate</code>:</p> <pre data-language=\"python\">$ export FLASK_APP=hello\n</pre> </div>\n<div aria-labelledby=\"tab-2-RmlzaA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-2-RmlzaA==\" name=\"RmlzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<p>Fish, <code>.venv/bin/activate.fish</code>:</p> <pre data-language=\"python\">$ set -x FLASK_APP hello\n</pre> </div>\n<div aria-labelledby=\"tab-2-Q01E\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-2-Q01E\" name=\"Q01E\" role=\"tabpanel\" tabindex=\"0\">\n<p>Windows CMD, <code>.venv\\Scripts\\activate.bat</code>:</p> <pre data-language=\"python\">&gt; set FLASK_APP=hello\n</pre> </div>\n<div aria-labelledby=\"tab-2-UG93ZXJzaGVsbA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-2-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tabpanel\" tabindex=\"0\">\n<p>Windows Powershell, <code>.venv\\Scripts\\activate.ps1</code>:</p> <pre data-language=\"python\">&gt; $env:FLASK_APP = \"hello\"\n</pre> </div>\n</div> <p>It is preferred to use dotenv support over this, since <code>.flaskenv</code> can be committed to the repository so that it works automatically wherever the project is checked out.</p> </section> <section id=\"custom-commands\"> <h2>Custom Commands</h2> <p>The <code>flask</code> command is implemented using <a class=\"reference external\" href=\"https://click.palletsprojects.com/\">Click</a>. See that project’s documentation for full information about writing commands.</p> <p>This example adds the command <code>create-user</code> that takes the argument <code>name</code>.</p> <pre data-language=\"python\">import click\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.cli.command(\"create-user\")\n@click.argument(\"name\")\ndef create_user(name):\n    ...\n</pre> <pre data-language=\"python\">$ flask create-user admin\n</pre> <p>This example adds the same command, but as <code>user create</code>, a command in a group. This is useful if you want to organize multiple related commands.</p> <pre data-language=\"python\">import click\nfrom flask import Flask\nfrom flask.cli import AppGroup\n\napp = Flask(__name__)\nuser_cli = AppGroup('user')\n\n@user_cli.command('create')\n@click.argument('name')\ndef create_user(name):\n    ...\n\napp.cli.add_command(user_cli)\n</pre> <pre data-language=\"python\">$ flask user create demo\n</pre> <p>See <a class=\"reference internal\" href=\"../testing/index#testing-cli\"><span class=\"std std-ref\">Running Commands with the CLI Runner</span></a> for an overview of how to test your custom commands.</p> <section id=\"registering-commands-with-blueprints\"> <h3>Registering Commands with Blueprints</h3> <p>If your application uses blueprints, you can optionally register CLI commands directly onto them. When your blueprint is registered onto your application, the associated commands will be available to the <code>flask</code> command. By default, those commands will be nested in a group matching the name of the blueprint.</p> <pre data-language=\"python\">from flask import Blueprint\n\nbp = Blueprint('students', __name__)\n\n@bp.cli.command('create')\n@click.argument('name')\ndef create(name):\n    ...\n\napp.register_blueprint(bp)\n</pre> <pre data-language=\"text\">$ flask students create alice\n</pre> <p>You can alter the group name by specifying the <code>cli_group</code> parameter when creating the <a class=\"reference internal\" href=\"../api/index#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> object, or later with <a class=\"reference internal\" href=\"../api/index#flask.Flask.register_blueprint\" title=\"flask.Flask.register_blueprint\"><code>app.register_blueprint(bp, cli_group='...')</code></a>. The following are equivalent:</p> <pre data-language=\"python\">bp = Blueprint('students', __name__, cli_group='other')\n# or\napp.register_blueprint(bp, cli_group='other')\n</pre> <pre data-language=\"text\">$ flask other create alice\n</pre> <p>Specifying <code>cli_group=None</code> will remove the nesting and merge the commands directly to the application’s level:</p> <pre data-language=\"python\">bp = Blueprint('students', __name__, cli_group=None)\n# or\napp.register_blueprint(bp, cli_group=None)\n</pre> <pre data-language=\"text\">$ flask create alice\n</pre> </section> <section id=\"application-context\"> <h3>Application Context</h3> <p>Commands added using the Flask app’s <a class=\"reference internal\" href=\"../api/index#flask.Flask.cli\" title=\"flask.Flask.cli\"><code>cli</code></a> or <a class=\"reference internal\" href=\"../api/index#flask.cli.FlaskGroup\" title=\"flask.cli.FlaskGroup\"><code>FlaskGroup</code></a> <a class=\"reference internal\" href=\"../api/index#flask.cli.AppGroup.command\" title=\"flask.cli.AppGroup.command\"><code>command()</code></a> decorator will be executed with an application context pushed, so your custom commands and parameters have access to the app and its configuration. The <a class=\"reference internal\" href=\"../api/index#flask.cli.with_appcontext\" title=\"flask.cli.with_appcontext\"><code>with_appcontext()</code></a> decorator can be used to get the same behavior, but is not needed in most cases.</p> <pre data-language=\"python\">import click\nfrom flask.cli import with_appcontext\n\n@click.command()\n@with_appcontext\ndef do_work():\n    ...\n\napp.cli.add_command(do_work)\n</pre> </section> </section> <section id=\"plugins\"> <h2>Plugins</h2> <p>Flask will automatically load commands specified in the <code>flask.commands</code> <a class=\"reference external\" href=\"https://packaging.python.org/tutorials/packaging-projects/#entry-points\">entry point</a>. This is useful for extensions that want to add commands when they are installed. Entry points are specified in <code>pyproject.toml</code>:</p> <pre data-language=\"toml\">[project.entry-points.\"flask.commands\"]\nmy-command = \"my_extension.commands:cli\"\n</pre> <p>Inside <code>my_extension/commands.py</code> you can then export a Click object:</p> <pre data-language=\"python\">import click\n\n@click.command()\ndef cli():\n    ...\n</pre> <p>Once that package is installed in the same virtualenv as your Flask project, you can run <code>flask my-command</code> to invoke the command.</p> </section> <section id=\"custom-scripts\"> <h2 id=\"id1\">Custom Scripts</h2> <p>When you are using the app factory pattern, it may be more convenient to define your own Click script. Instead of using <code>--app</code> and letting Flask load your application, you can create your own Click object and export it as a <a class=\"reference external\" href=\"https://packaging.python.org/tutorials/packaging-projects/#console-scripts\">console script</a> entry point.</p> <p>Create an instance of <a class=\"reference internal\" href=\"../api/index#flask.cli.FlaskGroup\" title=\"flask.cli.FlaskGroup\"><code>FlaskGroup</code></a> and pass it the factory:</p> <pre data-language=\"python\">import click\nfrom flask import Flask\nfrom flask.cli import FlaskGroup\n\ndef create_app():\n    app = Flask('wiki')\n    # other setup\n    return app\n\n@click.group(cls=FlaskGroup, create_app=create_app)\ndef cli():\n    \"\"\"Management script for the Wiki application.\"\"\"\n</pre> <p>Define the entry point in <code>pyproject.toml</code>:</p> <pre data-language=\"toml\">[project.scripts]\nwiki = \"wiki:cli\"\n</pre> <p>Install the application in the virtualenv in editable mode and the custom script is available. Note that you don’t need to set <code>--app</code>.</p> <pre data-language=\"python\">$ pip install -e .\n$ wiki run\n</pre> <div class=\"admonition-errors-in-custom-scripts admonition\"> <p class=\"admonition-title\">Errors in Custom Scripts</p> <p>When using a custom script, if you introduce an error in your module-level code, the reloader will fail because it can no longer load the entry point.</p> <p>The <code>flask</code> command, being separate from your code, does not have this issue and is recommended in most cases.</p> </div> </section> <section id=\"pycharm-integration\"> <h2>PyCharm Integration</h2> <p>PyCharm Professional provides a special Flask run configuration to run the development server. For the Community Edition, and for other commands besides <code>run</code>, you need to create a custom run configuration. These instructions should be similar for any other IDE you use.</p> <p>In PyCharm, with your project open, click on <em>Run</em> from the menu bar and go to <em>Edit Configurations</em>. You’ll see a screen similar to this:</p> <img alt=\"Screenshot of PyCharm run configuration.\" class=\"screenshot align-center\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABJ8AAANXCAMAAACsTw4UAAADAFBMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADjzNZnZ2fy8vL////e4OLExMQmdb/R0dHy7bprIRxMistPi8oLCg1ltOywsLFubm5RjMhAg8nz78uURAu/xshNnuYtEFLw8vLy8dwHAwW7vsBvwfQzbq2l6/W47PMZEAvo8vKCNA3o/f/uxHj4//8sLy/z66nu2LTwyX5sIQv///o5idQZLk+F0PJ+UC/u7u/z8u6GOhVWECHc8fMLESH//fA+kt4jHmceZrecUxv/9tm3qMP05s/ssWH//uh7LRNHfLZODzyV3/Oe4/P/+satZCQVPoK3uLqqnJ3Ky8zC5PT//Nk0ED5CJhbPgjRcNBwzdbcOImrq5+fb3d5WqtTS+v+Fhrx1fnubyui7cy8YIS3a7PMST5/H7vUULnk2WolZr+j03cXz8ub05ZzX19gWVqUOEDyYmMBouO3z7uH/zxuNj5FDRkjU6fLnolFqJT6C2v1/vuW73e8qecpSp++pqqy2+f9YXF2z1OxmoNI8mszwumrgtXh6td7YlEhRHCL504RgtvlaesYPFltfjsAtEBL03pirwt3lw5j4+vvz6L//969j0Pt9RDQ0PDTmyq3ava/owBR4lXbq0Ji7iU6nmr2ws0j59/Ku3vLc9FbK2ewy3I7Vpm4ygtF6oYpDtGHJraSz9P6nstLGrbs0hsVHj9OEt5l853Gy4qT/3FbM5clWhq2J1byFZD6Ie5m4xf3JAAAAU3RSTlMAAwUKBA0SAQIGDAcQCAkLFzoaICgkFi0UG0BTNSNLPUgwKjNEJh0iHlhPb19bE2MrMRUYNx8cTi9eWlY4ZkdhanV5bYVyfoiBjJcPO0FFgJLtSAYvkLQAACAASURBVHja7J1LbxpZGoZ7cuuZhOn2BWOw7JDYJvEK+R4WVv5AkpGSDIhNBJuWRvbGq5pFS638DPAsUwskVrPwjlqMWkKM+ieMIpZpWUjN0lYUac53LlXn1AUDdmIXfh8pcmJOAZXjeni/r06Vv/sOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMSF7wEAkw+kBACAquAlAMDkeApTAQC4hp7C/z4A4BpKaqi39WcAwORzzSQFKwEARjbV1coJswMAGKipq5ETZgQAMJSkvrGdMBEAgBEc9a30NNRb/BMAYDIZU1JXbqdh9u0OACAOXFRVX91QQ7sJDgLgBrtraEd9RT2dr6bgbtwCAEwKgz01lKG+oZ1CxRS9c38BAMSNoWw1UFJfw1Dn2imgJpgIgBtorYCkvoGhzrGTz03wEgA32lM+R51jqEvV00A5DTDTAwDApDHAUgMVdYmCGqSnoJyipPRXAMCkEaWqoKK+lqCi7RSQU9BM3o78AACYNAKm8jsqWlGXI6hIPWl28slJN5Paj9sAgMnDJyqfozxFhRjqMgQ1WE9BOblqitbSjwCAOBMtKldSQUV9DUFF6cmwU0BOfjN5O3YfADAJhNtKOSqgqFBDXVRQg/Tks1Oomwwn3QUATBKGqwY5SjfUJQpqFDtJOfnNhEkE4EaYSreUp6ihDXWR9BShJ8NOrpyi1PRCJwEAiBvGMRwlKV1RhqHOiVCX4SfVeXLtFJSTqaaBOroHAIghprBMSUUpShjK14Ua20+h6cmzk6snzU5cTgEniR3KAwAmC9NXrqs8RSlDGUWeL0KNKaio9GSGJ24nIScZmzQ3GV5KKzYBAPHFPZL9nlKOkkFKKco0VEBQF/VTpJ40O0k5eW5yzaQpKSWYAgDEF3kca7LSLKU7SipKN9RAQV1WevIaT9xOquOkyUmpSVrJ2L0tAEB8CchKaEp3lGcorigy1APXUJeRoIbQk+g7Uc9JlxO5iYtJaEnfrxlOxs8uAOD6EjhixYHsUxb3FNeUT1HUi/pBGOpcQV3AT0JPtww9GR1xklM+Ld2kqUk6ybfTTwAA8SJEXJqouKRExZfXDHVfGsqs8QxBjeynUD15raegnYzgpNzErSR3bY2zI5gFAMQReQSLw9nVFjvSlaO0GMUVFWIotwk1tqCi/WToyctO9+4pOcnM5KpJWCl8Z58CAOKJtJXSFElKZimlKFbnaRnKENQl+Sm0uPP0JBtPrp1EbpJuIi9pFlrSmAMAxBH9MNZURZ6SjhI5SjeUbEP5E5Re4o3nJzM96XpSSwo8O8mqboapSVRyykyhRsoBAOKMayslKVH1MUnNyErPMBQ/kxcQlD9BjeenQHEn9SQaT56dWHBycxM3k+mipMYyACCeqIPYU5W0lMpRvB3lM5RfUGaJN4qfoqo7T0+ituPhibriqSle1onoJOWkxKRstG4yDwCIJeoY1l1FlpKKEiGKF3pkKOqUywhFNZ4uqDErPJ+fQtMT15MITynSE9lJyEnEJqEmV0tixwqMxwCAOFOQuLoSnnKDFFeUMNRUKiVWG0hBRSeokf0U1nzy6YnstMnsNMPsxJtOQk4iNDE3SSuxXdpQrAgWAQBxY8VFHM1SViQpGaWYo0hRvBW1Syf0plKb3FABQUW0oEb2kxGfAnri2WkmQ4UdRScpp2UemVhY8rSk7+Y2ACCOhNmKeUqEqXWZo+YoRFGZx1ccTKWCgopuQY3nJ11Pt++r1hPXk2cnVtbx4LQuUpPrJbVve5JpAEA8UQexJiwhKZmkuKKYCTRDuYKiLvltU1Bj+ylMTw9C9cRKuxxzUqHAdMRkxP3zMkssLLwiVom/SZ5zHgEA4oY4eNWhzI9rfoQvLPDj/SX31zYZa4PJan05x4o8V1AJTVAPIgU1op+06i6oJ9EXX1t78/rt3wEAQOft6ze8C8VqvFBBhbXIx/GTv/mk64nVdm/evi8CAIDJ+7dveI3nCSrYgrqonyg++ZtPiUQ+TVezUG239vQ1JgIAEMLrJJ3II0FtpvOJRKAFxQPU6H4Kdp+ouqP4FNDT7PwHTAMAIIQPhdmAoH7kd6xzKzyzAzXqyTuvujP0lE4JPc3OLhXcN/Ovs17vC/v6+RQTAwAoFgtLs7NCUNQkNwTlVXgjnMLz+clsjqvmUzq9ubW1tftkbWd2aW5DvpPPZ6c9gr5+xsQAAIobc0uzO2tPdpkvNtNpsQxKtKC0Fvm4ftK7T+JW40pPrLrLCD0lV5SdhJ56p+wvZ5gYAEBxJSkEleEVXpr3yMVNyaM6UN+PsvjJH59k8ynlpqdkcpHehs301O/3+sSnfv+PMmYGALCYTLoJKqVaUL4ANcoSKP/iAqM5zvyUYPGJX3Mn9JRLLu9xPzE9dbtdy2o2Dw/f7e+3MTMAgL3l5ZwQlLgWj64VFn7yBDXKEgN/eReIT/fyfNk49caXlpie1rmfPpOffv5gN5ot+0P9cP+3XzE1E4lVGnWLcsdqVM//vHKO8J8bd2o18yv5aZ0JamlJ9MinUnIVVFSAGtlP/L4FSk8iPuU3mZ4y/NRdLplcL0xTfOJ++ke1cdQpdrrO/v5vH/9jY77igWNZ3WpoQe606UGrUxnOT+0OGxvQTKNjH5/zDio/YRbiRqUS4ieLf7NieX6aLqwnkzl+Ei/DBLWZFwHKE9QtHqDG8ZNX3rkrx0lP+dTWVmaX9DRHeipkRX7q9bu/t2uVRu1wf5/89PEj5jAmfqqzjFMNeeCga/MHW1Z7GD/VrfrxcTvwsdRpnfsOOhXMwjWOQ0YgUnpqNkMmrUKCqljaI9kCCWqOBLWb2dpK8V/sYqwi1wu8Ef10R/cT3VUlkcjz+LRL93oiPc0XNrifzpifrN//qFrOsdPsvtvv9z7+ggmOjZ+KrU7RbrLoU20wBbUdq0ORp9EQDxZbTrFY6lgO+ym1Wl2ranuDa2wsjWN0pYjYSPqrfJoqC2Bl5ig50HuVA8cp1h160mrTskrWgW9Du9oVbwNclZ+UaPRA5IrI0FDk97MbhXkSFN0TapcHqHwicZevIvf8dGd8P5kX3vHuE19aQDd7Si4zPS0uuH567xwevmuUy+3D/U8n//4vJjg2fjpyWpo5Osdl9u+i3T2Qfio1y7bTsussT8kH1WC727IrFvdTqSlKOxp50G27T9Phf9RA7VWO7GKtZDeY+7oV8pVvw7ZzbCNXXW0Np+q1yrk5yXvE/O7CIhPUMgtQT2f5IoMUv9WKGaAu7Ce5dPwuVXc8Pj3h8Wl5ff7xyuIr7qfeaZ+funu3v08F3qeTL5je+PSfmqQj1xzsB6zB6r2KI8NVsdws1SxWuLGPUXpQC1v8252GSPzqU9fm26unEX5SA7WUJod3lZ98G5asOlqY10FQEXoKF5TfT68WVx7Pk6BYgHoiAxQVeNoi8lH9pF965y4u4DfN1OPTXI6qu5XF7VV6G1/IT4d8aQHn08k/MbvxyU9kGM8cJSGWakv56aBZbrMazGJOYWUYq8rcwW1yWJX7iQ3iT8e/xRSmnkb4SQ00XoUVjuxJlZ/8G9Y63Tpm58oFFbTQKHXf6vbiCrWg6NcneAFK3ErTXWJwx+hADfd7EQw/qfJOxSdW3eVyVN2tbO9xP532ev2mpyfmpxNMbnz8dGAdCXN0PD8dW0fKT6wGo5hD6PmpY+Qn22qZ+akUmZ/Uq7RZBVmzAvlJbsiURzYEVyqokD54dN88mLdW97ZXeIWXYxWeClAJ30Uud3wd8nBJRflJ3Vfl7gsWnzZVfKLm+GOmp+nnIj/1+oeO43QP4acY+qlI5++6LbtmeX6qd1RzqsV+4GynYds1rzklB9tqI4o+VvvYPuAjD5hxTD+5A/VXqTvl4yrzEzW0qP9kbFgq2eVuDdNz1YIaoQcYsr7g+TQTFKvweIucB6hNFqBe3HVvVHcRP91y/aTiU5pf2bIjm+OsutvLPqK30SM/lRiO66f/YW7j4yc6fdaWp+KkHzp12ZyyOvTj9hMtbmJ6afPzd+5gOi0n8hPpxrLkmb560ecnd6D+KsdsZLtLOco6EOfvtA3ZBt0GZidOhKzPfJTdowpPtMh3+FUuaSNAha0wGM5PYnWBfvaO3/Zpxu0+bWws7r3MPlR+cos74Sc0oCaSkJ71ECucBg9EH3xieZh9ube4sjGvOlAz4kZQxhm8wAqD0fykbpuZSOTpyrvMmohP6xSfprMLD1V91+9/cjk5QYF3I2iXWao/uMyBYKL8tJCdpgC1LgLUWoauwqOrhLUCbxw/me0nPT7t0tqnnOw+ZbOvnomPQGao3oniFH66ITS6ltO61IFgknj2KpuVHSjqkIs1mml/gec1oEbxk7j2jhYXiGtb+JXBmV1+3wI3Pq0+kxn9V8pQZ0JPp6cnZ7hHHQA33k+rboDK5ZZmd3Yz/CrhBL/GhZYYiGvwxvcTX/wkF2duTk3R4gK68u7/7J1/TFTZFcdT7ZKo+Iuf4tABFRBY6S4siICLJPsnP/55MgrNaBOsjjMgDKKgBhz54QqN1N0uYEDE4o8I6lJFJCpFRVyDWQEbRVeM2liTNaa7/zRt2qbb3nPvfT8GZkaYN5gRzzdmeDPv3fuu7773mXPPnHsuDc0E8ykkUnQiEBOq73XmaDEBFMIJhUJlZkaGgAEFQZof01l4YSu9FsAsYRqiOZ+HaDrDp58r3E/i3JaYBXRmMA0ugNgnYj6lZ2gUrTkh/kOhUKhMTUY6GFDLolexWXgwS5hmMVAO8BRZfifFJzE4czbjExvehXtT7zgxn2LBfErWYCegUCjbfEoGA4oM8JZQDznNYkAGeIxPs6UkKyr4xDI/keGdB2Qdh+AnX2l4R8yn4CTsBBQKZVNJwWBAiQM8XxYCtSCGJVkBA2qSfFKs3MKjn6yGd17UfALveHRgbFrQ4pAMLfIJhULZ4ZM2I2RxUFpsYDT3kPMsKx7iL3hyBNSbkpCPm9wiuZ8+YHyieX3jvH3F2PE0MJ+0EdgJKBTKpiK0YECliTHkvt5xNM8vc0B9MN8qAupnKvjkyd1PYZRPH/tHBzLveHB8ooByTuvxEqCmuRLjg5mHPDCaDvC848K4A8pTNZ9mzZqlzJy5iOYdZ3NbxOCnZC3yCfmEQtnlkzZZCoHyCQ1d7k3zkC9SZtG0NUX4zanpGJ946icxuiAgnKcdXxa7mgzvQoK1kVHYCcgnFMqmoiK1wSFkgLc6dhlPRB4eEKB0QM2bN3fMMp1q+ATup1AfH/9VkLmAup+QT8gnFMoBn+gveLGBq/x9fEJ9WQi5HAGlik9K9/giyidv4NNS/yWUT2R4FxmZgJ2AfEKhbCpBE0kHeIRPS/yXLiV88qZ8WjTGQT5pPs2w4R73CgjjmemiA1cvDKLDO40aPv1aFPIJhZqmfCIDvKCFq6mD3Md3uXdYgJcNB/kMZ/nEJ995xPixzL7M/QSZn+jwTrPirfPJZCIvBp1Jl4l8QqHcWSs0dIBHs0Ct4nxa6fWJX4yHNAXPWT5BchWl+8lPObmFup+StfGRmjXWwJkknxyR67TF5q59lE9C5vH1OuQTCuXOWqOJjNcmUweUcoqLn9JBLuXQdIJPM634FBbuLad+WpwerI3XJKnkkx0Tin600YH9dFyn05mQTyiUW/MpSROvDeZ8giyav6Dr4Pkppwi7hk9+fiw6M9Ta/TSVfLI9+GP2EzGeupBPKJS788nKARXKIjT9/FzJp9RU7h4Pj2PuceZ+onyK+Egtn2wWdMAnyX5qRD6hUG6tjyI4n8ABxZZxiQvnDvLUVJV8mjOHJVdJ9VTyaSnlU1BQeoZWq1HwyT5Q7O5RYT9NAyGfUO8BnzRabQZLUscWEpb45JnKUqxIKTQnyidF8ky+NIIH5dPK8Di+sBSNfsoA91Oiaj45tp/s+Z+QTyiU+/MpERxQGTQCii8zFRe+UuITm+FiI4XmZPkEK9+x1ON0WXM6+Y7x6dOp9T8Jtu0nw3GTyYTjOxTKrfWpxKeFwCea5BciyGGZcxfwaabEpxjGJ56bLhbc48ngHlfPJ0f20/g9XSaqLoMl09SFfEKh3J1PEEGeDnxawlMYKAMMZkKKOpV88uSz78Sf75ZAbrr0DOBThCo+2R/IydbT2H0UUIRMFt27/nwjn1DTn0/gIE+GCE2Y4eIv/oBHZwh7OssnaXEEFl4wlk/RNPV4RnA88CnlLfMJAEXx1GixIJ9QKHdWCvAJckBBEvJoaz7RHL/zJT5ZpfhVwSd/CH9iuekikyKiUtT9B944xWX8ni4Y12Wi/wmFcns+RUUkRcbzJOQu5NMMiU+K5JnhhE/w853EJ01Solo+TcRHNU2FfEJNfz6Bg1zkE/0Bz5utci7PEBYn4KnnE8wOBj4pwgsSUrAT3IFPOpRTwttwavmUoAgwYHyCFJrq+TRrlsQnFp7Jk/tC8qdonvwJ+eRGfFqLckLIp7fCJ5YCKnqJyCevT8QAKM4nluJXHZ/Y0sHi7GAeXoB8Qj4hn1CO+CSmqGMBBsvpGlPAJw9X8cmD8SlO4tNCzqeIKOQT8gn5hLLLp6gIzqeFEp/iXMOnOTKffhnD+ETDx6Pl8EzkE/IJ+YR6M59ogGa0GEDuJWVYEZcQdoZPc8fzKVTiE02eGRG1ImU9ykkhn94NPmUe3ijpsDskbXWvBlm6uuxGIqasoHyCACjOp9DxfJrrLJ/m2eNTmoJPeJM7KeTTO8Knwxa5gOWwG/DJvRp0wmQ6MQE+pQGf/G3waZ6L+BRmg08JyCe34lPOXn3pcK7Vaeqyc/Faq+LTRmWJMUlds7I3kH+T7S2rUpMv76hBapXztM/2jtGn+tJjfWMbe1ywNJpMjRayYZtPCTb4FDa1fOKLI8RrgE+f4U3uMj5t3dT6ShD2tVwyO8mnPUMNp7KykU9vg0+d9a35bsQnw91jen1pm/Bdm1pCGazfihW2dDQdN4xt7AlTI5uw32jbhvoM+EQDNCFDnev5pMg+Tvi0XOITDx9HPrmYT/pqsyo+tVfvqEM+vRU+XRzeed6N+PSw4o754N97O2s2u9aeEivcV19tGNdYiw7YpKOvJosdPvEAcolPy5V8mj3fpXzyEfkUwvm0xiGfdrQNnjw5OIDPwUT5dLr5MuPT344WVH1RmXX9x2P6ht/sLThzxyyUkD8PzMXZ/zDY5VN7gVF/kvDo7rGCql9tP9I+oi/tAz4VNZcBqa7/81j3fyvIZtGB23VQdWkf8slZPg2de3muUiQN6ZuqPzZt3fSDobOGmFXfHgDT6vqLo2DRSH1Jrn4Z35ZKkR5lj3wW65xcAQrTfi8dNEy8QYaiLV/BHVRv1Os38+awOsvYWeAgdvKcenJbDApyA6XDaBmpXbSWPFYhqZjeWopm07NCNpFMNhu2y1ZrP1vD+RQi8slnivlEp99NlE9NbTdPEvU6OuZJxf3byCfOp80tHfmUT88fme82l2XtbmgaLe8eNA/d35ZTntf71+HzWU/vGBzYT+uo/VQy8Lio+ca3rfn7n/eS97uGL1NLandp2+MnIp9I1ftbOk4hn5zjU075rYdflnE+5RTmnT1Yc6my5Vxl8fDOXGYBk867eaWd0Ersy9I2i4Fvs1K8RxmfYHexyCdatOPrSTRo9FDDI3Jj5BRuhhfWHFonPwscw05e2/rqyl9uCnID2WFiGald5JPeg69phdx+smo2O22jiV5CnanRZkvH8GnVVPDJ08OaT8tkPiU65tOem+cHgU9N/P2RQqNRX3pnh7h/9H9NyCdrPuWUrzPz8V1W9uWs3ZuJOdVQKZBHAb4gyU1idjy+WyeO78ife80PKmHjx+ENbKS3ezNcbpFPt9auvbflNvLJOT4VHcjvrO/njyw1XnY1/75oy7bahvr+rZs+N8DjT57si0Ac3pefGwRxWypFelTkE9kt84kUJZVNxv904aeR0kEzxYnYHFqn9X1DTr6r+UEv2+YNlA6jZaR2MYtsPJ/47onyKVHm07IxfPKcKj4FyXz6kF8mg0D/CAb5yp29eXNgYIDw6XVxjsinZ8+MeskfMtRdhnyy5hO5RfoIn7a+PKrX6+E+Jnw6ZxYufllWSwxtvf7SRPj0O1qamFE/nfniVN3uqu5c2RMl8QneIJ+c5VNnvb6gQE9sD/rI1sJ4jvQRefrrf6jt+BcxrLirhrwo+lKQt6EU61HOJ3iV+ARvdk2KT0RXXo5soDiRm0Oqke8bfnLh+d4zeb2KBrLD5DK8BP3EBp/47gmN7z6U+RQ0hXxa5DeOT3x6sMSnb3oAUN/3fCNdODq0o/rP1asX4ek5Uth9Y0+LMa/Q+Oe1dYf0p0eMxu4bhE8vRqrythNzio6AyRNU/ZJ98D7yiZhLLy+Za7v7zOx7VuKT/a/TcXyq7W7jZtRoeX9d9q2h1nwFn8hLbSvySRWfDBeH+06cKMk+b20/ddbkXS8rvv6CjsyoefKwIlfRl4K8TUttk/3jMp+u3XeST0JnTb+1/QTVyPcNPznZulC+ziA3kB+msJ9oCfv20zZb/nGdxT6f2AQ8Kz7xBAau4tMCrwDHfBJ6er5nL6L6JD6VXL36b2Y/ET61G/uHjNU77o20to8Yn/3pqycVxqpnRuMtsK7OHDU2nHpSoa96picfvJd8EnLKd14yX2t9Rb4NrfgEw36h5PVE/E/XWvP3D43kXhh4/NuadWBP1ZzbLvLpSGH/9tFy5JNK+2mIDLqhaySXDHXeCNfOdHzdWbOT/dQF7p36jnxFXwryNnfkQI/KfMo59IfKC+VO8ank0dl93w3f2ropz2wRm8PqZGcRpJOXPLIcrKk2yA0UD1P6n6Bdh/LOXllPKxznf2IVvjm+wA6fxBWmXMqn8HF8ilDwiZhOPcd7egT5wlE09RH9n727f2rizuMA/jd0+nM719/uOnfTv6Wz0UBmVu2FxiVikhUw+JDAhkQQKw0oiQMSnhSV58iDKHOGYrgODxEVhBar1xKUOjfiXD2YOco59/3ubpINYh48AzF5v4cxye53N+ts9sXn+91dMrExMjIi1U/6f3j0DutAeev3M3r/RZvUv2NvUrSKi0y97Rdt7IPwhOz0ibs/P8TTUrKmNMonetqEtYzFPH8n+3SmyuTYrCo45mEdfUYKUa7mZHHoSoMiD2t5if7d/+eT9ggdTOLuN/5Xef6O7jtSmPhYr1QXXRVPjyn2peK5vBTZowqfmABZIvgu/bsysltZy0M7XYOOU5yLY+R3YcJvXkQ/Fs8VGxhupjh/R5dYfmJiD/PiCpU+RVYY//pM6tOf3vDpj6nx6eNPYvlEgLqq5In6NLawQTIyIvkkj4/fLf62yjGW57CGfJr7TeXTq4t9pKoiLlWEJ2SdT9HXxwm4vyU9fHr77SRcrB2ovFRIuS+T2q/v+/4WQfG47YVXyV+NRe9vydl/Yf/+nMR8+uTjlPkkfTvnW3xS/fp3JU+0f1cyEspGaPxJnFWt75unxVJ4fHyLT99ns0+4/y7NfHrH23Hf4brNnb0/eLsN5BakE45JXG4u3h9MgMpJpH6i39CZWp8+e6tPW3Ln8uWBsE/m0PiTOOun4w79SdVFUkMpfJL6d/oH8Ak+pZVP7/HwT6tss4H9VexQ1zutbDAngf7dZzvj00cJ+aTqumOmldPGxoC5ThVVP5EyiTw75dJb/mYNc3Qxj46P97bDJ/iUCT59qOHe47qUPn20oz6Jf74gtk8qlVns2knFk7J+Uk3r3e0q1UKzfu67CEfa1/L1BfAJPsGnTIjk0+ef/mF3fPrLn7+I6VOd2LXbOLN1+qkOfUXo+YmtM09kybEBn+BTxvv0hfwHoNLCp7Y39v/ABqmfzFsBmvHo54xZf2zg+6Xw/VLwaXd92jYnOlj3NfzuxvdzIvApDX3Koj4cfELg04fnEwKfEPgEn+ATgmSxT+pI2tRI4oFPCHyCT/AJQeATfIJPCAKf4BOCwKdU+LQ2RbIGneATAp/Szqe1NREoP3iCTwh8SjufpqYUBdSqdbHN+Cyqgd/wDD4hCHzaeZ/8a2tSAbUW3KSvvW2zqwb4hCDwafd9kosnks2lpSCZUPDlGx7BJwSBT7vhU5inqeDS0grhqVC1+Ix4pGsoZC60+Avsi23D1KeKnmFRquHnwpXfyNMK+yx9QebCJwSBTyn1aX1qc2VpaSlSP518qK5ov6Jrm1Wv1xCIJJ7InLYran/Ypz2z6gdtNfAJQeBTqnxaD66QLC1F+SQVSyd7XtXQJ6/kEXO/4d9qhU/fiI/wCUHgU0p8Whc7dnJWIj7t61lcPEHKKCv/NamfOG44MhIV8Ym8OAmfEAQ+pW58POJTZHxcxw/LZdTqd7+QQmm8bTbaJ12/5BPqJwSBTym8voD6RDp4Qen6AtmnW7N+b+Gz1Ydq/+MvKUSPB1vCPp3b27J6rh/1E4LAp5RfnynWTyti8UTyWPTJby1kDlmHK3oWfx0UIVqlI09ySVXRsLjnVQ/qJwSBTyn3aVPs2q1s4vYW+ITAp7S7Pzi4QuqnIHSCTwh8wt9XgU8IAp/gE3xCEPgEnxAEPsEn+IQgH7hP+H4pfL8UgnwAPiHwCUHgE3xCEPgEn+ATgsAn+IQg8Ak+wScEgU8IfELgE3yCTwgCn+ATfEIQ+ASfEAQ+wSf4hCDwCYFPCHyCT/AJQeATfIJPCAKf4BOCwCf4BJ8QBD4h7+rTcjO7OXo+dpvceA0SCVmJufYcDjEEPsGnbdL/otnkcDdETxRcp/mymIv9604yHyCtk2XZXuP20xLxSeu8icMQgU/Z5pMwM3eXP/uNfQtaebrYS+U/sSbx+RG24yU8LQGfBPiEwKcs9Mms8XLikx+bTZZJzjwa9Dj6fnexbOt/CBsB8qJ0fOGggemv0plHVzxD/FMPa7mW79Kzc7SBcqmuuOWPvHanl2GmK38XpxGczNJ63BPx6yfp7eTNevTaxPb14OhE4FPG+lRE7KEFyiPNJF/UaDWXn+4qscKaCwAAIABJREFU0eyj9ROVg0x8MR/2qbyvoYz5ZSLfNcTnjlppg+il4pY/Ujtv0xAvdKi1Cp8eaabKmtz2OCsIb6S0WT737bOHeBydCHzKWJ+qW6VRoereHmLQqrncSh4qZJ/oRO2RiE8F0jK+brvsU/RSXOzxp25ebnes0pCrKRCnDUk+TZP1DNSej1c/yW8nb9Z04yR0QuBTFtRPjI9UL0LHadrXEsI+0Yn9eZJPeTpxnCi/w2Niwz5FL8XFrZ+kdlqbl4CkrJ98emLVDWu8Akx+O3mzhECzBUIh8CmTx5/KpW7ZtFwJRflEC5V82/hCrYHR2iSffK0TXKR+il6Kizv+JLdrOt3h55Q+0TdK4PzddKR+IptF2Ao0nsPRicCnTPWJE5osY3z/IB8a2onyaeDeZT4wP27WXOYC85JPM+7b1/O67Vqnrkwx/pRc/cTdP3rUykSPP03yt+r5WPXTvrKyMvnt5M0qmeCWa604OhH4lLnXP+U/9bCOIXvoTFyUT+KJsuZx4cW8o69U8un6E9YS7LaTScrzd/HrJ/Fap1C7/Dw6gqQ8f7fcbHIctseqn/R6/ZxBcf6ueTzgYTu/Qv8OgU+ZfP04F8cvm5cRIoWMIP8jbF1QiLUSIcF2iawgslkIAp+y+P67/EO3hcDBtBviSdPNQuATsqM+VZnYzkku7XxKz81C4BOykz4hCHyCT/AJQeATfEIQ+ASf4BOCwCcEPiHwCT7BJwSBT/AJPiEIfMpWn/66I8FRg8AnBD4h8Ak+wafkshdBUhX4lME+7cUvXOSDDnyCTwgCn+ATfEIQ+ASf4BMCn+ATfEIQ+ITAJwQ+wSf4hCDwCT7BJwSBT/ApzT+BSLZec8ldqn9zZv0lDj7Bp/TxCTsuyxL+VF6q596cy9Vfgk/wCT4hu+1Tfdl2s8vq4RN8gk/Ibvu0N858+ASf4BMCn+ATfIJPCHyCT/AJgU/wKSN8qq40hp7mavbtnk/aUlOvpiDqv1PnLMA+hU/wKQt8ys9zFNDHGb2aS0ufZtztuU74BJ/gU3b61HmaZxitrTM9fTrRoS6ug0/wCT5lqU8HKg0MU1RZSnwqKTU5+hoY5sdm1nK10mguJ6XVdKWR+kRmdT7kKVajL8ncuxzzwmNy1NjFl+6vydxJXm5k1qxziSu05+oBMVf3bOtTh4l1XCYeBZpNnV8VXuyYd1jGqE/HjlqxX+ETfMp4n6aO6DjB5XepOe2Rw11nq4bsuccPd5XYWpU+aW2Hby/f81Kfjrvv3Oro7WF+/oEPNFrJy4ZHtht3+Zk5g9wo98lkEj4xg5JPg7Hrp5KJxWON56Z7jad+vk1eL98bw26FT/Ap833Szbjt5lEr8ano4HmGIQqIj74on+gkwUV7grnHdaTcOmiQOn436UuhyW1nFmqtkUZJJYfylBO/f0ce7t+b5OmTl/f2Ya/CJ/iUDT4RWXzdduKTOOQ0UGsVH6uj+nfVepZkiJcHo44dNOQ/9ZApN+lLoambF5cLN0pyoOnAgb1xxp++feoxmRykjHrdWdNe5+y8gd4dfIJPWeFTv6slb1x4W/3km5PqJ4NysJz4VH1jjKf1k8KnSKMkc+FCvPHx6blrxXXiZQbavNU6p3em14jdCp/gUxb4xEybWo3UJ60tNP7U0nXd1mrUOlvs121zofEnpuSfCp98rc9vPZ2P8klulOT4U0Ln76pbjadezBdcn1g84/LTeso1VIj9mvE+1T3xSj/wKYt90jr9HPUp6vxdkHTyAh7xUT5/x1rGFD49Im1rSqN8khsld/4uMZ/OvDZ1blYV3PeQDTTS8ahc53oxdmym+/STRif9wKcs9SkU4X/s3f9PE3kex/E/copsSca4V5ChAaRIT2hpoZUK1AgrAt1baeG4hAgsAurCyQ/A4hJviYAaBBGDbE6yEIMm+4P+cm7u85mZT2lrUVYLavp8ZbOfmc9nvrjr8PA9n4KfjxEkdPTf/2THz28i73f4lL8+8fN3BJ/wCZ/wieATwSeCT/iET/hEcusTf78vPuET+VJ9Yn0EfGJ9KcL6UviET4Tk/k8vfMInQvAJn/CJEHzCJ3wi+IRP+EQIPhF8IviET/hECD7hEz4Rgk/4RAg+4RM+EYJPBJ8IPuETPh39E0hI9p/Pwyd8+vw+8RtH0oJP+IRPBJ/wCZ/wieATwSeCT/iET/hE8IngE8mXFJSI4FO++lRW7Nb1wNJhF/xdH/zSfeoJP0zbf3re7X6Y0n5y/L2t3oNuRj4+SYWyAIVP+etTvXFpe6XzcGTcjJ7+2nza78kVJvh0rD5p+JTnPmm3zpdre4mqyOUm5+ybvsmg2n7Vp8dKGqqGFzxarWgelXWLYuu0te0xD33bvSqqr3NFr4288Yn66Vh9Mn4wCvApr326MdR/Rtt67FmMB52+wGCjobZjVzfCk0ue5ZVKV7hi+vn9cVe1qJ/sbfPQtv7dqd/uODcXjs0n/40/V/Wx64KGa0LP3WS7T8arTT0QdDhc4jizP90n/4bQtWIgefxabH1Tjw087egU8hR6ezbfWKdnT+1mVaBB+GRfvCd8yry5Otvhaqhyu93zPHK58umJXGmqAJ/yef4pMmbNKjmLbjt9zcb+9mkt1Btr0tY6gjWlnVqou9X0yd42D62LP5o+2ve7Lp/4gnePeFXr2Pv3dFn3L96ecOzXsu6Rs6rd9ykweFPst0e//XFnLzaQ6VNPdUXTRnFr8vi11djgk395kz7Zpzuy3lycPF0bbvWqi6ubq7P9QxM/1rVU8sT9ZZtU3gUqZRuf8vP9TmRqO6Hr+m1n0UnRt78d6h3xaLc6gm3ixU7XJ0yf7G3z0NBWw3DF9LHOP138R0NCUiG1eVD6h2rTXrnuxQbOnZekrNzN9Mk89EHLXVWOrcVNTvZ9sk7Pfm95sny/UxdXN0/61N3s7ZoN8sTlyKcn6bv4lLc+tU3OeWTNJNFJ2VY+1ZRWyqPs+qnSqrBOmle4ES40jtGn9ujY4+kZ5VPLXdW+41PHlazzTw9apE+lyePXrM2n4vBD+CTuY/pkX1zdXJ3tqFl9lhgZ4InLwftdgZx72sEnfBKNMdO/O7W9avmUsq18knNOWu2LsuIKT6O9bR5a+7jxUrT1GOef/F1F4ztbm9Kniasb0dazqs30qT0a+3Vn67HouRAt9BR4VdtV/c+mlOP9tk9dvtc7i4kP+CRu/jfPep98v7Mu3hMeM2+uzvb3fnvihZcHLhc+lRQYPzRSP+GTSctGQ1XkcoPlU8q28kl+ZqcH5rTFhH7asLbNQ2sSemRs9zg/v/PvJfTYfycEJP9JRMx5cqvN9Mmcwg7Mya66hG7WNFZ7I2N+3PLJv7caGVv+UP3kqOvTA3/a8+Pi4j3ha+bN1dn+Zd3t1mNneORy4FNJSQZP+JR/PqUmdMD2F/f9437/J3zXgP/goU+rfGSJNtTpcLiq+fwuNz4V4BM+faU/35Lr77rMSZ52LD25uRe/wiOXmznzAnzCJ3zKWS7sJdyR2CBP3NEEn/CJnw/+1Ph54PCJ4BPBJ3zCJ3wi+IRP+IRPBJ/wifWlCOtL4RM+EXI0f3rhEz4Rgk/4hE+E4BM+4RPBJ3zCJ0LwieATwSd8widC8Amf8IkQfMInQvAJn/CJEHwi+ETwCZ/wiRB8wid8IgSf8IkQfMInfCIEnwg+EXzCJ3wiBJ8IPhGCT/hECD7h01fjk2tzji8Lgk/49Jl9Kit267peb2T2G3/5KVof5CuJ4BPJrU/1Rk4eopvR03wlEXwiH+9TwbVTZq4VZPjknH3VpweWXNXNhuaqrncWnXTOvumbDNY2VEXGrqphw2xjJQ1VwwseTYwNP/LYQ2Xdog5DKIJP5OPrp58sn37KrJ+cvtidqaHR672xJq2u9Ir0yRcYbHRVV/x4KTrRpIZFe3UjPLnkWV6pdIUrpp/fH1dDrmp0IvhEPun97hvJ0zcZ80+RcqdP6FJTWrnWEQwNCY+kT6KUqint1LS6+BU1LNuQNEwcJ8dC3a1qKMWnbwjJQfApD+efTpw6deLd+ScBkoCotLIs+tJZNC53zZ62ljOadqsjqIZlG+od8ci+Njmxrk+oIeonQv1EPnl+/PvvtYN90mZGfxcmKZ+S9VMWn0TNpKWciU8En8jRfH6X9Onc7LNCI+mTK2zPP2XxSc4/abUvkpVXcYWnka8lgk8k59//lPQpNDQZ1JI+aerzuyw+yTE9MJc8czHB53cEn8gRf/84VRDBJ3zi5+8IwSd8IgSf8AmfCMEngk8En/AJnwjBJ3zCJ0LwCZ8IwSd8widC8IngE8EnfMInQvAJn/CJEHzCpy/jCSQkPfiET1+OT/zGkbTgEz7hE8EnfMInfCL4RPCJ4BM+4RM+kdylZD/4hE/4RPAJn74Cn0KuzbncOZNyNevvL99v8Ym8x6fMDXzKO5/spRCMzAOMv8zQ+uDBY8bH+9QufoGRwFx78S9eh+NBPKHr4hc82VncLMZ6qucdDv9iX5UeWDgrjuz/Q+z2tnrNfkfXdw9T+uR19MCjs6lj8j+9OUsTWPKm7f5vYP//ZW1fq5cnCp/w6Zh8qjdyUiXdjB5ioZaP8qnZcXF7pfJB/IqjPSqQenq+3Oq1fZqZXDh7Yf1+vSBFL/S+45Pqk2dcqFl9mDrWrG6Q3uwsr1Sm7F7YCscUUP7FxDN8OjafrJc7fMp7n5yzr/pE2eCqbjY0V7VcWco5+6ZvMqiWkrKGDbONlTRUDS945FJSw4889lBZtyg0hFDqCsZeoipyucm8yluhkb1bdC2hBwZNn6zTXd2r4uxzRa+N9/gkTApe6G711rSccWT61PWdCcm9UkHKtXj5Oz6pPvOMnnDzIXySt0vrdRbN36syF0b27g324hP1Ez4ds0++2J2podHrvbEmra5ULg3s9AUGG13V9lKc9rBor26EJ5c8osKQS3E+vz+uhtRSwfYVtK3HnsV40LyK1EjtyoP7z4ge+/S2/t2p3+44Nxfe59OlIfGWttbx1sQiw6e1+M8Os/dhe/F47+hApk+qz6qf4j8fwqeL2/1303qljer/pR+fqJ/w6VjnnyLlTt9puXB55VpHMDRkLg3s9IlCKLmUuT0s25AUaE0uZd6phbpb1ZDyyb6C9RZ327yK/TZn7oqDbp0vFz326XXxR9Mfnn8a25UwDI8O7Pskp4d097yjrrRSHtblm28vnu8Jv/Rm+KT65BnuyII3Y/5pMpjaRMrNw0auOpK70if/0Ag+UT/h0+ern9SC5NGXzqLx5FLBbS1nNLkscLalgttMISbUkPLJvkLZdkKM3jZHxb8ydsU/9umerYbhiukPzD9ZOXd+3vH++mne8SAezPTJ7pNn+Gv76g9RPy0LBzPrJ/V+h0/UT/j02XzSZkZ/FyYpn5L1UxafRM2kpZypfLKv0DY555EFkw2S2k2tnyrtX8KNcKFxGJ+6ih5m8Sl1/mne4V+ObdtzTeaBGX2iEEodO8Anecm03lv3xx3UT9RP+PTZfTo3+6zQSPrkCtvzT1l8khNIWu2LZOVVXOExF0G3rjDTvzu1vZr0Se2mzz+J02sfN16Ktn5g/smCIbtPqZ/fib2e4r8LP2ZWBr0Xh8wySPVZ9ZPvF2/K2EHz421pn9/trPeNDOATPuHTZ5p/0uuTPv2fvbtxauLM4wD+R+5aTW62ubsoROVNQkogEt6jhLezFVIMREoHxgTKS6AwBw5QUuPEUYGbohgcGkad6jgdpXg6Snt3v+fZZzcJQQiCV2S/3xlJnt3f7haBT3/Ps5FUhybcku6TpN2/28Yntk+pmNOPvBNQchgy6hlW6MBLlbpP2nD2Rer9Ozq8JMBWl3a7f7dD/5T6+ic2c7t/j/zwzAfURavkNr6g1J/fl7ovHSbxgid2m+9kQ9rrn5bsMnyCT/Dp/+9T5qu9pf2+Hko/Q/XW7Znb8Ppx5P0+4d+3wCf8+zsEPsEn+ASfkP0FPsEn+ITAJ/gEn+ATAp8Q+ITAJ/gEn/D+UgjeXwoxhk8IssP/veATfEIQ+ASf4BOCwCf4BJ8Q+ASf4BOCwCcEPiHwCT7BJwSBT/AJPiEIfIJPCAKf4BN8QhD4hMAnBD7BJ/j00VN1Av/gDEnJiSr4BJ8OTU58H8eXDknm2xPwCT4dng4ePCFpwe8vgE+HyCd84RD4BJ/gEwKf4BN8gk8IfEKOmE+O4N3e3rsxfCHhE3yCT+pbB28b6+rcn+CTPxjppUzjKwmf4JOhfOLvb15xV3/P4AfBHX2SUt5dmJXumqyKdvHJFRm5y3zy7/AptpnzPvRvx1qpVCzkHdTZEPiEHKBP523NT366LIaj3pxdfNLDSw+kaBefBiKRWCxGPj0vtfINrWRqfcWc/uklYjuKYg0FlP6/2flzZ3eDQ5bvdyv9txxsbJp1y/O+PpN5W59u+/rwzQOf4NOf65M0VjtXQw/W4n+3UzeVYzJf6+Y9lbOyqH7YL5lmX3SLHovoEqPTvJSV9C+dM82+6Z74Y/ZRQKkISnzg5ju2KTK/tu3NJz6149mcmhpTfbogNz75qUB8dh7vjR19Wvmv31XGGyTXncDP5FNn8d/tjxfc7NBQg8NFf9q296nVez4Nug271tE9/Ux96vrWnn6xxib7Dp3ahj0ctWymlWgHWDdO82f6qdOvqF9txwvAJ/h09HwKh3oK54cGpbKur6zFrH8q90UmQ0OD1uL8gWbveJ02Fj7pe6nUWpM//XhhxFReEaxSd/QU8oHYkVm0emuPPs3pPjmnpt5pPskPa9019NBZ85oZeKPN/IjUpJ4qzEwdlNu4onqP1Vmcw36+fw1eJZ8Wc3+TXaHjDn6S1lDRGaWXPLrTXVT/F3tn6B4dxnwq6XLLLUOpDVQic4W+9dVefErEPOv+LSXaKBHb5tAtV2RXM5RPlr+qscAnA68/1Q8HpbGFvOrQd3XCJ/pQkltQkkvTPkJLG2s+qSNeykqq2xtM5Rds6mFjtXl8IHZkFO19fsdpmqPE3k1NTWk+NYd6fpshPRZzL3fWsP6p3Of3XB3q6yz+xt7oHbdrY/UcT+cvXlY7EOYTU8c1/x39nN++eJNLxTxyxuIlXT/c7in0JKZpXLbwT/Lryx9SdaCzedYHZdcas6RxIxH1Jzqiy9YmroYrYYku2xkfYYuFPfnMEvVr5evRaIxOUMfqk7VsKzvTq2l28sams3QEO5V6rKxuVE/jl10PYurR6r6wJbpRJ2ujo5oOzlMH+idDz++kau6HeURSfWLrT2W5BS0XCwmcL93aWPgkRry0hXoXRRnn27QP/FHsyCj6IJ/m7r+jTE3pPjFTn8kPF/JcV8ftwif6sJh7czG3gD0WaGNW/7D2zIS63KT6NMOWlWZ85BNDSvNJndYtdi3VsScvFj5nG/7xLzbLslieT37vaN5g53AuEwp9DJGOCPVlqk38T5zw8nNdyJ9YY4dfXtmwq+X00RWX6QTMK72Wb21sGn1FwNA+dkQzP1wcq21caWKnIaz41dR9dFI5LHZvHN2OynGdeLoeh0/G9omEKrv4C3GU5pPeP73fJ7WrEjSx/uk+9U9sIHZkFO3dpzk+sRNLT7I+v2PYhBoYIKpPTBjy6HbPTd72aGOxRJXovpDeP6k0XR13aD61PgkQotRG/af/Ul9bef0EE4ufWm62j65F/a61iJiPhZcdKkNpPnmoJ+pgPoU7olHeJamtEC9fXx6Q2QmET6KWbW1sWqdJHNvHjmh9NShOzZRL20gapVyNTkoX79NsPLKJX0/yBJ+M6xM9+eK4jT7mn6vSBaoR60/b+sRL2dKS5HwufPJFJtuHCvlA7Mgs2vP6U6S3d4z79PatLI++TPFJXiRTb6b7pPdPaT4RQuMO3Sd1/YndyEvpn1omgqKNWqn5sc18Y76nkPVPI1sXilxr/jUxCUvxieZ4zg0CxS/okGXdGFYuu5rX+fqS8EmtVbd2XEnpwdJ8StnIThORDeiTLF2XsD4OnyTbzISbHu4E2P074ZF2/25bn3ipjUqUijkxtbum3r/jfZK6I6OodM/37+SBSCnx9M40+jIuM6OS/VPryS9+dNDwuCOuedRZI9afkj45Y3HX4/ILbasjwqfOk+z+HaOIdVvCp5meQs/8vbxwLN7oPc76KS/Z9bDWrf8lcnae0uPXST0YEWz+JjvZTI7aJHV+N8DnbaocvDzuoFkYFeg+8Vq+lUaJZQc7ecr8LmmQ2CiHz77qk1v51cTV6/j8rslIK+bwyXA+JTPvq9vf6733On/L/vXjper87s1b18vR1P5Jnplg69clAXb/Tni0Iu7fJX0q6VaU/t/tD805wifZuar0L7Emp5T8ET41eovqf/fmlQWU+uFCdrTJfN7R0qPfv2P9Dqeocz0o6z65EtFlRyJqOdXEVrvP8v6JLV1H/ZocvDwcjVqm2QmET2ot28rqPGsxfvKv1/T1cX6sesWzlug0fc7rhBW7mu6eWB+HT/DJCD49XrhhO6w+tTGfSuXNN5tv0j+xed8H/Wi6tCcePst7b7a8/inlwPes5u5l5Te7/0oNH8+aH9/H8MmoPlmL67/ZZ/v0EX2Sx94xn+SXv2ymfV5j5pF9/s2w14+/P4fg9eP6yzcN/LJM+IT+6fD/fhVqJ96+TG1g2orrLx35H1rVJ89aFO0TfIJP+P1PCHyCT/AJPiHwCfmEfcL7IyDwCT7h/aWQTyF4fyn4hPfnRPD+nPAJPiHIfmb/8Ak+IQh8gk/wCUHgE3yCTwh8gk/wCUHgEwKfEPgEn+ATgsAn+ASfEAQ+wScEgU/wCT4hCHxC4BMCn+ATfPr434EIkh74BJ8Oj0/4wiFpgU/wCT4h8Ak+wSf4hMAnBD4h8Ak+wSf4hMAnBD4hRsmxUxT4BJ8OONXW1Tn4hBwIUPDJqD7NF53xDWqDB8Es2MimSK2xwSdk37HBJyP3T/M+/X3NR705u6uRTVFWJ4JPSDY8XbEdg0+G9sk0+6Jbqbh7uv2MouRIzsqi/qVzptk33RN/zD4KKBVBiQ/cfEdmkZtOQsP6YT/V8Xq1xmT+PLmdX8Bmbb9HD6Xm1/AJyS7xKzaa4sEno/pUzXwq90UmQ0OD1mJqe6w1+dOPF0ZM5RXBKnVHTyEfiB0ZRTSLsxbnDzR7x+u0el5DPqVvHxps6Xk2uRYxrd6CT0i2QKU8h0/G7J/KiZOS3ALOSknuZam6vcFUfsEm8R1jtXl8IHZkFEnqUCrr+kqr13xK204XKOtamsb8DvkgnOCTYfsnmolJZcKnFpqbKco436Z94I9iR0YRpeViIbn0pVur13xK204XkBKV/fnT8AnJIsfY2tNT+IT+Kc0nanPYZpUa1vfcp/6JDcSOjKKt/dP9bfonzSdJCtcct8EnZPecOma7UoX+Cf2T7tPpk/nn+DKT5HwufPJFJtuHCvlA7Mgokviu5DoT1fMa1kdp28UFnMtVzd4GrD8h2fh06tQWnuCT8Xz69Z4yvKm1N3cCSo7NWVmkVMyJqdo19f4dd0jdkVEkpdy/E/W8JvX+nbhASUCpH36G+3dIdj4dg0+G75/En22j+5Nl9loPn5CdfNoKFHwy3vrTQXoDn5CPGfgEn+ATAp/g06fgE35/AQKf4BN8gk8IfPofe/f60la2h3H8j1zM2Ah7eph4tiulMUZCG0NNTYx4AUW0xMLgpaEDXuI1VqkvtNj2TWlrBlo75YBMUTmIzJl37asezlprX5JozGivnvh9XmRn77XX6oamn/722tGFT/hE8Amf8In1pQjrS5H69YmQGv974RM+EYJP+IRPhOATPuETwSd8widC8IngE8EnfMInQvAJn/CJEHzCJ0LwCZ/wiRB8IvhE8Amf8OnrfwIJ4efv8Omi+sRfHKkIPuETPhF8wid8wieCTwSfCD7hEz7hE8Engk8En/DpMvsUaHyoN8HdrdPOGOyN1GjFJ/I50ctz/lPi0yX3qemJFKH0aEaIidH5Kj4JIWv4VL317TQ+kS/h0xV8uuQ+TSia3uysjYhC/xNZ1SdR06cqKfTb+ES+hE9e8Omy+tTePCK2R9M98mbXQxG/3dq9+IsIPPowufZR+fRibCvQ+FPg0V+TVsdLKfbVZs9B6a16O9UbMa3q5KTqOfs6agYIZ69Zll0x1uQtKYJtt242vscngk/kzD4FGpcK/f+ZmMs8b24JtoXzA/2rmUCiY7pT1U+x4kupBUqMPl6fWZgPDIXz8bac9imQUG/TOeOTPjmYDm/sF5fUABsDR8E2VT9VjLW9MC/ax0YCu8/wiZzVJ3niGD5dOp8K2b6bxeu/Nd9RRMWa7wjjSKJHKrj2ir/qjRJIeRNrbjHNm8Yn761pVSfr/VS2zxwWxqeKsVaK11Mzcxnu78jZfXogygqoK/h0OX0Smwt/LswHh35tei/NhNLKcFKpo0uk7rUtYXzSu+3NLab5ubm/M28Hnfs73Tqobuksa9WZkTI+VYyl6FJ1GvNP5Bw+yQdlPkl8upw+db4Z/m+fTM0sDidLNY/xqdHezh2W+3RK/aRbVXUlvMPH6ifdLNp7/33KZDo+kaqpKJ8ecH93WeunYFu3BmZnYV4E0+6ckePTw1D/XL7Mp8DQvfxy2p1/ct56rXr+ScSP9AzV+pVQUzjaWTGWCDXdaFD3isw/kbNGmPLpR8cngU+X1afUzKsWDU5fVPjP3FyfxL8SP5f5ZB7a/aP0/G6vdH+ne1odW2J/t9UKR1+MW7YsH0vIzbWkEDy/I2eO9GqnH/3yCZ8uoU+1kjr5/cvBhflP+S7T9miG7z+R83xmy27vBD7h099r9e5ILqd1nXXu7BefSnwinxl8wqfTU5jZsboXH5+/Y7Ct+975yyd8IviET2eOlOKbBp8IPuETv1+F4BM+4RM+EXwideITIawvhU+E/N8Fn/CJEHzCJ3wiBJ/wCZ8IPuETPhGCTwSfCD7hEz4Rgk/4hE+E4BM+EYJP+IRPhOATwSedq+fjAAAgAElEQVSCT/iET4TgEz7hEyH4hE+E4BM+4RMh+ETwieATPuETIfhEvoZPP9y96ufuD3zyCT7h08Xx6W5n6czOu3zyCT7h08Xx6Wr5qVerfBQGnTXN/S0h+IRP39WnQjYXOY9Pb6fPduyUxmOnhpquWVbHy1BTQ1SI2Ni4Zan9tZGmW1KI4JAtROrPyVar41lUnZk7VLsTq1G3j3SvPTB0ohPBJ3yqD59WijeWzuFTod8+07FTGo+fGlKoDBy8uhMbSwqD1M2u685Rl5rNtWf5woviz0olqy/q+uT0KV378U4En/CpPnzanjuYy6i6ZtLqmFIueVuV+O3W7nBUvy7+IgKP/prUhU5WlSq2bpp9Ha08JtQ5HybXkm4H4WydxmB2R52oDPG7m1NcVFa6rheyfdHnvYcnqAkk1DspB5vvhJqmxh76Puk+/rXjEz7hU336FEw/fTOcVA6E8/F0LuJtdUtbeGPgSL3mB/pXM4HE6OP1mYX5YJutO4U39otLFce0T4mO6U6vQ2mrGgdzh+vvHptBbTOyaXJ9Wp5Rf97+8Mf0e3mCmt9UXWUAWgo12RMLEc8n08e9dnzCJ3yqU59ivZFC9omMNavbpc1cxNvqFv3WeW0fGwkkbL3TYoDRB1PZvopjxqce6Xfwtqaxfez1hsOh1103ufNP3YvT6sZvZnYhUqJGlVmWdc1Wp444I9vKp2C6IerOP5k+7rWf6ETwCZ/qwqdC1mpttXIRM+WkXrytqHhdGU4GGn9SprgWDRoJViuOaUX0vtfB2zqNf9yeDW94PnlN3v1dysyDddlS1K6flGlb3v2d6uRdO/UTPuFTXfokV4pb9+/HG5f+vn4qt0jVTL5Hx32qWj+pLKcbZLX6SaPid64+/ySc+SdbpCZGDzyfSteOT/iET/VZP22PZvRD+7lA4l5+2cw/OVsNxlA4v34lmHbnn1yLQk3haKeefxLxo4pjHjFeB29rGuO/dw7090mNiNO9fP6plk/lz+/MxNcN3yf/2jP4hE/4VI8+Bdt6dHmi7qL0c7s99/ndnvP8bn+31So9v3MtEi/GLVuqg1bHVuUxj5jK53fCNMbGre7FQz2o1738+V0tn8q+/2TrK93xfSpdOz7hEz7V8c+3mOmcE5Ff+JOW+qResqKr/OpXSfAJn76HT/x8MMEnfLqoPhGCT/iET4TgE8Engk/4hE+E4BM+4RMh+IRPhOATPuETIfhE8IngEz7hEyH4RPCJ4BM+4RMh+IRP+EQIPuETPhF8wid8IgSfyOf6xO9XIfiETxfVp9N/Px0h+IRP39en6utzluVM65sTgk/kW/lUyOYiX8ent9On7zmr1XW8NGuai9jYuGWp/bWRqr94PHco3IWDTR/pXnRg6EQngk/4VFc+rRRvLH0Vnwr99ql7zmoGAwev7sTGksIgVWPhFqsv6i9srvuULpqFEfAJn+rap+25g7mMMOu2TLnrt0wZn0LZHVWseMuwGAme90YCjz5MriX1QbO0y+xrVf6I0sHSwi2hrKpt7KAziHD2xLGFW1a6rheyfdHnvYfVF76TzsJ3U2MPfZ90H/+i8Qmf8KmufQqmn74ZTioOwvm4Wf/O2eoqKne4/u5xsM1Zq873KdEx3akObgwc6VXw9ou6jvEOOgvf+VvbG0S4C3N6Ta5PyzPqD9of/ph+L2svHDyxEPF8Mn3ci8YnfMKn+vYp1hspZJ/IKusHt4+93iit9VvyqUeWLS2cUuWP9sk7eHzhYGcQUW3h4GtW9+K0uvGbmV2IlKgxK6dfs9Wp+iw1sq18CqYbou78k+njXvSJTgSf8KmefCpkrdZWKxcxU07qxduaGe3bs+EN835lOOn7pJfRdE4YNCysRt21Nb0zva2zsPkfehDPJ6/Ju78zy9qtdOm1PWvWT8q0Le/+TnXyLpr6CZ/wqZ59kivFrfv3441LVeonleV0Q0X9tPnK8cmrn1rckUsHj9dPziCyWv1Ue+FgM/8knPknW6QmRg/8hYP9i8YnfMKnuq6ftkcz+tn9XCBxL79s5p+crWqK/9450N8XTLuzSUP3Mstp16fAUDi/fkXPP4n4kUeMf6a7DTWFo53OIFIjova8pjP4VP78Ts9cpW/4PvkXncEnfMKnOvYp2NajqxR1M6Wf2+25z+/2zO1bbNzqXjz0H7m9GDcNjib7u62WeX5ndWz5xFQ+vzM9bHcQ4ezJY8/vavlU9v0nW1/iju9T6aLxCZ/wqf5/vsXM6lRN6kt8xD5tEFnRVVZvJ/iET/XhEz8fTPAJny6qT4TgEz7hEyH4RPCJ4BM+4RMh+IRP+EQIPuETIfiET/hECD4RfCL4hE/4RAg+EXwi+IRP+EQIPuETPhGCT/iETwSf8AmfCMEngk8En/AJnwjBJ3zCJ0LwCZ8IwSd8widC8IngE8EnfMInQvAJn/CJEHzCJ0LwCZ/wiRB8IvhE8Amf8IkQfCIXyafg7hb/UAg+4dM39el/7N39SxtpAsDxP/KhWyNMWy6uTnrGZES2GoyaNFIVDLaWRFp8Z6G+1NSXVZofjOge3JZtdSG2FcHronKIbPvT3bLcHdw885LMjKO2vhQ3fr8/NGbeFDbz2SeTlydUc1dRlFb1pG22JuS/KicK4RM+fWWfWk+DZ76nlnOE8AmfLtunG8/uGD274fZJLRQPRMvgqmhuj05tavKmM3zvfr0QP3dFMvoIqzZQfctY+uKpCKx8GlHibxhPET7RhY6ffjB9+sE7fgplFv+T/IsWTIaX9zZmg43h5d5D26dgoz5+0n3Sl0739iymArHsWn4yN8OJQ/hEF/r8rkryVOW5/tRZL7ar/5GdEU11j0Ui0y1vhPD6ZCxtGewPxPT7TXUN1gGJLid8uobXn765c+cbv+tPw3dnhUjLi+XKYror4uOTsXThUZt8qidabJ+IGD/RhV0fHxjwuz7+buPvuaf2qMgxfioUj46f8Inwib7i63fBmnCop9u4/iSaDwN94el8VbBvNDWXLEZCNWGtQ15/SlrXn/CJ8Im+4vuf1nMRfQj1vdrcHlXiq2JvJ6qEtddDSnxXf1Kn37pev8Mnwif6iu8f580ChE/4xOfviPAJn/CJ8Amf8IkInwifCJ/wCZ+I8Amf8IkIn/CJCJ/wCZ+I8InwifAJn/CJCJ/wCZ+I8AmfiPAJn/CJCJ8Inwif8AmfiPAJaPCJCJ/wiQif8OkK+HRj4HapgRs88gmf8Onq+DTQUd6yY4BHPuETPl0dn247N7196gPDmAnhiwvurPoe5+jyC+1sfyzhEz5dZZ+sGVzUk0/5rQnXGs9dT+oxxzlxFgbfQ578e/AJn/Cp4n1qVU895ed7ap0rPHcvgg7fQ37J78EnfMKnivUpsPJpRMl+2x6deqXZM5vLU/63oWjnw1BGH2PVygnwpjY1fRfn3cDK7yNL/3Psre9lHCz+RjX3Nmf0FM7lQiSs2fTs32UcMrCyO6TEJ9wL5R8pNw5r9gR81lGCmbf6jXNaPvsPJHzCp8ryKZZ9up1ceqOtFxucPn14r70ebDPmOJezC+9tzMpLSY67gVh8osO5t3Qoll3LT+ZmrL3LPtnL5SHM2Yjt32XOom6sH4u4FpobL/ce2rvYR0mPHeR/XSstNWY4tv5Awid8qpzrT531gVitSAxnU+LdozanTwYsLw0omuoei0SmW7N8su4GYg9U4dzbcMhY32Dt7fCptFzuLVoG+z0+6f8s3K/3+mRsXNrFPkrL4OayY2n1Lesv4ozGJ3yqtPGTbkhi+LkmFlw+hfaHFEUxfUrLC+nKou2TddfAx7m3dMiaAt3au+xTeWr0dFdEOH+X6ZN1LK9PxsalXUpH+dA+FV52LLX+Is5ofMKnSvepUJQ+pZdWtfL4qcF+C0Gjc3x0vE/W3n4+ucZP+u8qj5/eWeMne+HR8VP5KHPJm67xUwNnMz7hU4X7FOwbTc0lDZ8KYwf5/bcvQzVhrUNe3hHNh8Y+5bsn+WTt7eeTvrdx2cj+XcYhjStLmVzEtVDu2heezlfZu9hHaX7f0dvT7Vha/gMJn/Cpkt7/5BRGvB5S4rvG87vt9mjnw/aXckmt2tweVeLGmywdd0/yydrbzyf7ZTf7dxmHDFQ/M16/cy2Ueu7tRJXy63fWUZqGlM4XB57X76w/kPAJn67H51sS53p0fcneZ3gPU4LzF5/wqTJ8uuqfD+Y9loRP19enqx4+ET7hExE+4RM+EeET4RPhEz7hExE+ET4R4RM+EeETPuETET7hEz4RPuETPhHhE+ET4RM+4RMRPuETPhHhEz4R4RM+XX2frvr3qxDh0/X16WzfT0eET/h0+T75fb/vZxXcMb8195QvaDr39zfxBVCET/jk8Mn4/nFzTt+T25pw+eHdz7P6SB1bO1Fl6qGGT4RP+PT5PrWq+f1i/2mPkvmeWo9PrWrvfvHxMauPlH773+XEh/cqPhE+4dOX+OScszew8mnEHBeFaj6q8z1jEX3pH9W3MvpwSU6wYq2091tN6jfBxn+5V9tzqpSOJYJ9P5pDJ8+qYOatfuOZhGVqU+O0JHzCJ2scNBYp+STnoJvMzeirhp+n7m18V58YlpMEWxNollbK/eYmxyLr+r2WwX7X6mCjNSddefNfBtvMK1meVemxg/yva6Wl5iR2exuznJaET/hkXEe6m/1JlH0qzQ2s/5vOZn4M1Two+1RaKffrfDEhFjbqE5PPU67VpTl9S5urTXXmM0jvqpbBzWXX1MDyx0Smm9OS8AmfjHGQHAOVfCrPoRmofpn5mM79Ycy5aQJUXmnOO5yQlgSqZ4VrdborIqypOu3N7fHTkVUf2qfCy46laTldqLLIaUn4hE+GM9t9rarhU6Ho9Gm+J7zSdm9lNzdzrE+6UC1d/9R1ca12DIdK1sU+qq7xU3nVXPKma/zUwClJ+IRP5evjhWJ/sG80NZd0+SQKU7mZ+Z7vulV9YagmrHX4+KT/8N1NVbhWB5Oly0nlY3XqT+TmDr2rmt939PZ0O5bK60+i+ZDTkvAJn0xngjXd2ushJb7ren6n/vJWl6egzBoDI319rZ9PamFJPnVzrXa8HGcfK/HbiKJMvVI9q5qGlM4XB57X75T4Kqcl4ROfbzm9U9+5uZ5NnfM4CU5Cwqdr79OlfD54b+NvKicR4ROd06dLKNjYOZriHCJ8oivoExE+ET4RPuETPhHhEz7hExE+4RMRPuETPhHhE+ET4RM+4RMRPuETPhHhEz4R4RM+4RMRPhE+ET7hEz5dUlVE7vAJn66OTwwS6NhHBD7hEz4RPuETPuET4RM++f3XvZTvz8Qnwie6AJ/O9P3j+ET4hE9fwSe/+Vv8SndFgjvHT6GSOGml3faOkovgE+ETncMnOU+5En+jenzyn29la8L64fgZEexNhnNPx1V8olP7q2wcn/DpuPnv8vvF/iM++TTfU3vag83eJJHpVs/0f0u6lj49wSd8OnZ+zoX79XJezKlNTWyNKPFnxjSdgZXfR5barMVyAs1wRh9qSX6MlZ9G5LArsLI7pMQnhDE9+s9dEWuTUCZ6V/nePoAx9abcIfutfrRX2r3qf+MTOX2ywyd8OuJT7/5YRM4rvrcxG4iFp5uTY4ZPsfhEh7U42Bhe7j0MNpqDI2Nldi0/mZsxb8citk/2JnL8ZB6g0Zq6PJZ9up1ceqOtFxsCO6/wifAJnz7r+tPd7E+iqe6xREXeiILl0wPVtVi4fNJ/bKprMG714Ze/T9YBRMtgv9wwMZxNiXeP2nh+R06fxrk+jk8njJ/WczMirT8xU5RF49JT2nx+V31LuBa7fJIrW3Sf5K3+j69PxgHknguP2uSdxPBzTf6MT+Tw6cm4YwD1BJ/wyePTdl+rqo+F5F3n+Eny4lzs65McP72zxk+F4lGfSuMnfCJ/n8arHD6N4xM+ea+PF4r98kKTaD4MxEan55Jln+zFfeHpfFWoJqx1eH3KruUzuUiwbzQ1lyxG7E1KPukHMK8/OXzi+hOVUn2GT/iET06fgjXdWnN7VImvGq/f7Zaf3wlr8d5OVAlrr4eUWtXz/O6Z8fqd0FfJ/YS1ScknYb9+5/CJ1++o3PiTI8MnfOLzLc7Pt6hnfnCZBp0zfLrO4yfn8KmK6+PX2KdL+HwwPtE58xk+4dO19OkSwic6/xCqHD7h05ULn+j4RwQ+4RM+ET7hEz7hE+ETPuET4RM+4dMFPBqJmF8Kn4j+dOETPhHhEz7hExE+4RM+ET7hEz4R4RPhE+ETPuETET7hEz4R4RM+EeETPuETET4RPhE+4RM+EeETPuETET5dM5+I/tzhUwX7RFRZ4RM+EeETPuETET7hExE+4RM+EeET4RPhEz7hExE+4RM+EeETPhH9n737j22yTAA4nqhn4onxFBRPI8gpIBwQ+aWwcUjinyqJ6bvRwUo2dzcKN8ZmbW7QMVpuFD0ZsJug6wCpxW4Iwm27YrcQZDAkECCa3RBHMJCDZRdzGPl1//DHvc/7o327dh3b3smPfr/Rbn33vo/ZWD8879O3FZ/wCZ+I8InwifAJn/CJCJ8In4jwCZ+I8Amf8IkIn/CJCJ/wCZ+I8InwiQif8IkIn/AJn4jwCZ+I8Amf8IkInwifCJ/wCZ+I8Amf8IkIn/CJCJ/w6U7yKSPpn/jZH2x7lyX8Stb8hUmP7O3rRPhEvflUFzLeW/zHJTbbrpvl+v1P9tYE7PhE+IRPt8WnnBxrjE+l9saTp+u1u57N79v76Q8+ET7RwH3KyYz1yZL3zlp7yaqiXe2LNxctsdXLn675R40l6+D/tn9Zpmwv1vz577aiNZXlf/lrgcVy4r1lWQd/2m5becpuEQcszZpfp94jwifqv085H3ebP20ty1u99MDFb+rF/CnvnaW7K/62rzxrxcqdbm275tP5M8XyvhGfVnx0uPnzvXvkAw5U/Kjf41FD+ERm+bTEtmRNbvG7iz4UJ3fFsk/iU8vyrVVZK9baLfr2yPlb1vymqE/5FnmHQuUAi35PHddKZH74lILnd57z86+vX2KT2yd8Wv/eMovln38vU0DStys+Lb60Tb4T9UnssHxRoXKARb/H3+rE/InMWx+3eD7/Qpv4eIzzJwFOZEIk/Fn/5aFiff701b8iPmnzJ3wifCKTry+Q508XV8wT60yWkh+V9afV2vqTAEfbrvrz1af/ab50uilvo7+8YXXUp6yNS3c3W/GJ8InMvT5Tuf5pjTBoVZFt5SHl+gL9+TtlwUndrvp0Vv5C5aomy8lttpX/jp7fWS7+UGRbik+ETzQYr2/xmLArFxYQPhGvvyPCJ3wiwid8wicifMInInzCJ3wiwifCJ8InfMInInzCJ3wiwid8IsInfMInInwifCJ8wid8IsInfMInInzCJyJ8wid8IsInfCLCJ3zCJyJ8Inwiwid8IsInfMInInzCJyJ8wid8IsInwifCJ3zCJyJ8wid8IsInfCLCJ3zCJyJ8InwifMInfCLCJ3zCJyJ8wicifMInfCLCJ8Inwid8wicifCJ8IrpbfGooDXrDVb08RLvC/tJed5Ik7y3sk+Co2hZ8IsInLVfnPL/fX6D7JD4EliV7iF4oDXZIzqSP4iQDJB/b6FMve+IT0b3vk7ezwDh/EmKtO5fsIXrtiLOXB3GSAXoZ2+BTb3viE1EqzJ9UnwK1/tIzbwdlINbJ8ynFhsZwpb/e2RyubP0sKMuxs91/vcq1zj/PXyYrIvbfmR3c0CafxjWI46pqWwtD7f7WJocygJAm9lAFHWXsxrD/eoFT2by2prOytUz9/Eah4pNhEH3PdZXq8fhElIrzJ29tvcMTvix88obPaStI9Y6OcnHb1Znv8Nau3eO6Jk+wrtU7xU7a/lGfSgtl5GqcFW2FygDKQN0OFWOeUwdubpOHWBvsCre2OK2Xj4rPxS7CJ+Mg6p4NpXtcgXJ8IkrJ9ad5VRVtVySpJManiraj+m1z2xVv7Tn1juqTsrnE6FNB5AxN9ynuUM0n5b917Yiy+cJah/SBrJH4/IO2Ku38Th9E27OircDB+R1Rys6fGi4H1efvoj4pm9RbRZAWo0/6/lGf5C+7Mm/K1kV8ijtU86nBL8pXNl/Id0Z2UaZlLcZBtD2dgfDbC4P4RJSi608KHw0J509XlJtuPun7b6it0o+TP7Z+6IyZP3U7NDJ/OhpZC4/4FJk/GQfR9pTzhOvxiShl158WOrrU9SdXZ71TX5Jy7Y4uIsX4FN0/sm4lzveuuHx+dYCY9aeIT+qX5O2SpzzWJ3WJSt4WM4i6p6fG6e2s94bL5H8k8S8+EaXO+pO/QH0+boHiTMNN9fm75rDfX+/0hCv9ypNwMT6J/a+fKg1KDe3+GzvbVJ+6Ov2tTZ3qAGJD90PF6aIYW2y/XhXr0yn9+TvjINqeFfIZX/4eb21BV22BFFnpwieie90nySVulAmTy9XHR6t2Paer+2h9yZngunGXdKeGT4RPd8Hr71wZ5fLkptdLNe+V17XgE+HT3fT64D9Xyudcpj2nhk9E+MT7F+ATET7hExE+4RM+EeET4RPhEz7hExE+ET4R4RM+EeETPuETET7hExE+4RM+EeET4RPRHeCTlYgoUbfZp7SZr/6evySIKPH86dWZabfHp9kjXsEnIurVp1dGzP5FfZqFT0TUJ59m/TI+zcAnIuqHTzMG2adnhw3DJyLqp0/Dhj07aD5NH4tPRDQgn8ZOHxyfxsT5lI5PRJTUp/Q4n8aY79OTUx/HJyIywafHpz5pqk+TpsT5NPc5fCKiW/DpublxPk2ZNIg+vRH16TX+EIgoYa9FfXpjsHx6fUisT5OjPo3DJyJK4tO4qE+Tu/n0+iD49NJwfCK6xdzHK03ouNs4pn2HL3PA+XbYY8bMMOPldhn25D4NH2yfRus+van5NKEHnwIhny/T5wsF+BWlFO545YLcAbeg8rhxzB0++8DfPcPu22EcMyMUsA/0e7UHQhndfZqg+fSm7tNoU326/1GjT0MjPo1UfHqmJ58CPmuGpUPqsGRYfQhFqZsZPAmgjGP63Ga8vY/bZxzTasrDNGBN4NMzik8jIz4NNfr06P3m+/T8NMUn8QYGMyfMSeBoyPATdPtCdn5NKVV9yjWlGJ8yzXn/scwYn0x5kNq7+zRH+DR+hOLTtOcH16eXE/g0MYFPdmuow/Bj6AhZAYrw6c72yZxvN96niQl8etkknx7pyafHkvkUCnX7QYRC/J4SPqW2T48Jn15K4NMj/fXp4Xifnoj49MJsxaeZc+LXnpTZk7u6rq5aPc3rYA2KUjN7ZbYZLbhrfZqp+DT7hYhPT8T79HD/fHoo6tODT6k+jRU+jRI+Pd2jT+rak7suR67OnWApjih15k/J2PnssKPDfaY9O7vQ25l9Y5l3XY97DtynTfMLTPJpcfWxvvv0tPBplPBprOrTUw9GfXpogD4NUX16MeLTLM2n9LQ4nwJW5Zuvztnvdu/Pqdb+VwBMoIj5U2y5RxyS+4BDsubeED61SG/l9nv+9P2qItuubKfJPjVeCJfHbfT0zae0dM2nWRGfXhwcn36r+PS74aMmTzO8QLi7T6EM5Zuvy5GnTu6cOvVHkcEKFKVk/iTTp0LJl5udH/R2Cp+anIH2nnf1J/fpxOn2clfJMbPnT3nViSjqs0/ay4OnTVbePnOsePsnxachA/DpvvsiPv1K8ek3U3WfZqg+zU3sk88S/Qlk6D5ZOMGjVMyTxKf8YFdY/tAiZcrnd1fVOz1NtZL65Nqy8bIydXKd3F60ZoFj08GftttWHpKks6uK1vid8u2udkd/fDp/9fzVYtmjP1Xv/7rG8PHYz2fslkZxc4s+zVV9mqH7NFV/exXdJ9kbE3yaPlT1SbyBgXoBedrEOJ+i1xZY9ud8rF1jgE/E/Cm2I45mMWMqcFqzC13F0lvJVqqSz5++29qiflJyrOPdrS2bVnxU4/1kb3DLar+j8cCW1Usd333T1A+fGn8+VlEtPArvFmd60Y/HzsvnfQ2dB25h/jQxTbt8fKTy8jvZp6HTTfDpgYhPv1Z8mjRF9mmM7NPoYcOHR3wanz4uzqfoD89dl/N1wp8FEfOnGJ8kyTmA+dPyRYXG87hNK45I0reLjn6rbBa3rs3v98Onks5yjzxJUs7nKqoPGz7mVR+2fC9PrW7Bp3Hp4yM+icufZJ/GyD5F375A8+kBs3wSL3CZNlK/ACrtDz3On6r11XHmT8T8Kcn53Y1C17oyyZo70PnThkvbbDZbgUKR7NOJT4+Ktakl8jbbvr779H/2zuU37quK43WjBMeJE8ePsZ2Z2J4Zz9iZjDOe+DHjsT1OnDhJcWaClCyQ3EghqyCIaFVVAoVHjWgXRZG66SLAghIWVKyABSiK2kXVDQKxCgqs2j+hLWIDC+553NdvfmPPjI3IT5zPou6iqqK696PvOff8zt3+9IkC8xI2nZyf259+Ed6FCv5rVit6/Gl8fv/81NVl/HQgxE/JBA6Q0wXeatP+069uPzKVnvhJkPzk38ltef1x+Nmpn95957vYf/rT799/HfIT++k7nJ8+76w/rqLSo0cP2Et+flLF3VdDrvbC/ITXdzg+nkj6fjoKfjpg/KSs06GfeEBzdFH5yQxA1fgCL+gnvr/zkfs74f+Te1vNMfMFW8pPW998/dHTpv/ovR39dPPDN//46s3HH3z4i2+99Ze/Gj+9+857r731y5/98L0f3XzwQft++uQPUMD97YuQ/tON33328NndFv1U0uOZOF6g/LQ4iuOZcH23Rz8dM34aIT/hAHmZBjTpAq8Q+BPx/JPi9m3zn0LmnwTxU5CvffzRa/ffeKasBH765+f3/9Hsn3x5Fz/d//PPb9369W9+/PYrb/77beOnm9/+wSu38P7u1ve+37afHn/2vvrr3d8+/NfDb/C9nf6pctQnT356owU/Fcz1nfJTWY+PKz+NGD8d2w8/4Qsui9ML/ELn/Mr4OPop3l7cEWEAABAFSURBVOAnu/3B+knmxwXxU4h2tlplFz/9N75vubu9jT/uPgYf3eW5JwhN2yZcteCnOPppHMYz6XXOhelFfr2lUz91az8dAT/18IAmvYA3lEnNDqd1gzweX27w06Of/D3wH0K+vxPET3vh5f+BnwzcCffmxh80mdFs8NNyPK7b4+nh4VRmyHn9bvNgD/jpiPZTd5t+Ogx+Oq78tOn6aRD9dG28NgkXeMtrDX9G2V8gCPvqp63nwE/O3PjXHz559mpLflqD9vjEJLbH09get37a3MTru2P4dfBe/IQNqFiMLvCGaMDghP7CpdFPsv9JEKLmp+ZndDvw0//bwNFv9FOJvw5OFLk9nh2di8XMdt/98hNc4GWnqUFOXwjXqmOqwMuH/Cllf6YgkJ/u7Iee7nh+itB+37wq78aqNft18KmB6eyou318b37yXkgYXUQ/pWaTaV5Brgq8fOifU/aPC4Li6X4I6s69p+6/M0LvI+T18syVRDo5m0I/ueMFxw8c69RPfIF3HL/AO3QIN9Rl4QtheiJBT0AtNTGpvN8iCDfeeHpvH3ga1fellvT0Ez8uNTQ1kMXtdPz13XF9fdexn5wvhPtHtZ+SiRW9YmVG/h8UBCGUGb1cZSUB5R36SV/fHbTbx9v3E66AMn6CCzz4wmVxAFaQ0wQUF3jiJ0EQmvhJl3c4/ZTKnBoYWISvW0aw/WT9BF/fte+nw70hDajMIE4YYIE3MVaqyC9BEIRQKiWcLlDlHUwXwOMIuv2kH+c81nt4//w0ahtQ87xjRfwkCEIzP9FuFZouoPIu0B7vyE+84reXv3A5ePToWVzxmx2AFQYpPWGgCrxl+SUIghDK8hj7KQ27fTNDA9B+gq/vYHkBfd3Cfupq20/BBjk2oBZowqCc1h1y8ZMgCM38xN3xdJmmCxZ0+8lvj+/VT5u0Aqp/FP1Ej+BRgIrLL0EQhFDiOj5Reaf8pOJTH7efOvYTryDXTwjrFSt9/IYL3eDhiOZkVfwkCEITP8HwEwxnlsupVCZDb7f0jZj2Ez0ebJeP7+Ynb8WvfkK4pwcnNJWf9I462yGfLMkvQRCEUEqTujsOw5m0m075iXb79ujHgwPLfdvyE61YsQUePjKFHXIKUHX5JQiCEEqd41NyOGWevtPlXQ8tf+rcT6YBpXfUkZ/gBg9fcYEtdbVJ+SUIghCK0pOJT3B7R+XdIftxcNjjCK34ya7QtJ/gjfTpGzx8JQFnNFWFN5E7XZlZyq+trp4/f2Zj48KFC+vrly9fv3r1kuLKlZeIr7h8WRCEaOGdYD7VV67AIb909frly+vr6uRvbJw5f351dS2/NFM5nZuA6u4ExqfhwUyGb+/6RuzHd6HLM9vxE64w0I9MxXSAMh0orPAmYNHvMkhqraAcdfGitpTSFHiKTKVURbwkCEIU0UeYpKRQXlJiYjOduajcVFgDNS3DWt8Jqu5s94niU0w/LYXLCzr3E05ougXe2XN99MoUjRioAEUVXtUKKl9Y9Q0FilKSspaynhIEIVJc0igzXceTvW7sdBHstFrIWz1VubpLJ/VwAbws1efufuo94k9ntuqnbm8Cih5JoFfO+7PcgYIAxRVedcwKas0aChQVdJTmkiAI0QNTk+cmJSdjpzWrJ9irgtWd033K9s+5TyO400/dnfrJD1BzToAqU4UHLSiVoHLKUCCoPBZ5YCgKUVpSZClWlecqQRCec66zlIyZ1vlsY2Gn7ASlXR70pOyUU+kJm09Y3ZWd+DTnx6c9+Env0PRu8GJ9uMRgashWeCCouirxxnIYoSoQoTBDoaJ0jNKSCphKEISIYA+wUZNyE8tptQDhqYLhKTemirs664mrOxgugO64iU+2vHsxMDzeqp9sAwq/EeYlUP0UoKjC8wQFNd5yBTMUGIoURTnKSMrVlCAIkcKc4g1yk5aTshNmp8oy1XaOnqi6y2B86rern0x51/hxcHt+8jvk0IFaNFd4qsLDHvlJbJJTjQcRaon6UGAochQnKU9UgiBECz7DZCZ0E9lJRaclHZ5QT1DcQW9cV3fQfVqE7pNdrcLDma36SUsqxE+0BEovMeAOFApq2AoKIlQpl1MR6jQ0ypWh1grGUSQp8pRmQxCEKHDGhQ7yeeOmwhrYaaZy+rQKTzloPVXrVk/DpCfTfeLhJ1r9FOanF3Yi2CE/zCOadolBzK/wyun0PDfJ63WMUJihlKFAUegokJTxlG8rQRAignuA6UgX0E0gJ7RTHO00NlGvc2t8Pp0ul2fd6i7mri5wyrudPw3exU+2wNMBCio8K6jEihKUjlBkKFYUOookxZYKiEoQhMhgznCB1YRuYjmxnTg8XYOlT1ZP2Bzn+OTd3u3NT1ZQ3CE/O6IDFLagjKBOgKBqdTJUKQ6GWoZWFOSofB4lhRQKnqsEQYgGdHT5HOOZhtwETSdoisfjJbJTvQZ6OmH1hM0njk+8WYU3Z/LtXad+6nL9pAMUDpH3j047gsIxAyUoKvKqEzZEYS+qgpZSUQrIu7ISBCEq0NGlYzyDZqpgzwnlhNEJ7IThSekJBgscPeGXLTj7FIxPL+6+mi58SZ15BY9v8JwhcqjwFmgKCpvkxQQ2ocZPOoZSimJHKUkZSxlRCYIQMegAs5lATeSmXMmxE9Z28zRYQHqaUnrC6s7MPtnbO/flu/b9xAHKjBiYFjm1oFhQMKiZBkONk6FYUaUSOgokZT1FVARBiBbm9GovoZpycMxZTmSncbQT7CzQeuLmk2mOu8MFTnnXtp+6rJ+8Fjm1oIygUkpQRRzVPIEZyipqjHOUsZQ2lSAIkSPukMtRbhpz5ATZCUu7dFHpKZXSeuK7O7c5bv3U1aGfmgUouMMDQWGCwls8JShsk8+ToShEgaLYUWAp1lRQVoIgRAZ9gEtkJnQTyomjE9hpHhvjqKdM5hSlJ2w+sZ6axqdW/eQWeDhiwB+5mAovXFBJbEPpEFUDRSlHYZDSmmJVCYIQRewxhkNdheMNx7xW09EJG09JZadZ0NOQpyenuuNPW7yHObu/1KafzJZft0UOU+TQI9eCoklyaEINl4vKUAkYNuAUpSRVY0mpLBXwlCAIkQO9VEUzYWyqUVmn5AQjBQllpyKEJ2o9nRoweoLeOE2OB+JT4OWWtvykC7zDtgOFLahD51hQMAc1NUQRShlquAh9KKjzVqjSoyRVq9k0ZakKghAF/INLialWo9REVd0K1HXQdyoqC3B4GpqaGljIsp7OHXKrOx2fGsu7nf3kfoLnvNPptsh5CooERV1yFaEyGSzyqMyziiJHcZSqWVMJghA57CE+yWoav+bKKQnRSdkJZsZVbTcFnXHW09mAnmz3yfXTC7vTrAPltqAcQeEglBIUFHmDKTIUKYochdUea0q7ShCEKOKc42tY0bGbUE5kJ7i1U6UdtJ5g7ClET3o0M6T71LafnAoPW1CBEm9OCSrLhlIRisu8slEUNsxXjKY8UQmCEDXgELOYVrAdbuXEXXHY5Ut2UrUdzD15xd1xR09efOrYT26LnAIUCQqb5ByhFugmjw1lFFVMo6TAUsZT2laCIEQG7/TieU6QmqycjJ2gslvg8GRa46Anc3dnm+N78pMXoBoEdXZE13hZNpSnKCj0WFJkKS0qlxVBEJ5fGk6sPsppVhOXdSQnaDuxnbK6toO5ghA9hXSfWvdTqKB6GwWF37r4hlKKytB9HlsKIFEhaUEQokyxiFYql9lMsxScGu2EQ+MNeuptqqcO/bSToM7FYgFDGUUNpkhSeK/HoiJXJZOOsARBeK7RR7bswGZSamI3gZx8O8Vi53bU0z74SQcobkEFBYURys9QrCjtKCUptpQRlUtZEIRIYE8tneYUq8mVk5edODwF9UTNJz8+teunsBa5Iyi8xaMIpQ011w8D5awoLPTIUawpFJU1lSAIUSTFDBo1wXWdchPJCcbFlZzYThSeNvXYuNFTaHO8Iz+BoLrCBQURyhR5ZCgYKc9OT0+TpKY4ShlRZTxhCYIQNZxjPEShidSkTn0WhsWNnfzw1KinrobqriU/GUN175SguMbTRR5mKA5RWlHgKLIUaIo8xWQEQYgmcIBPaTGZ2IRy4uiE2UnbiWu7ndJT93/asbecNoIgjMIWMiYhRIoSibe8Qp4TwSbY/34y09eq6p6bZwzu4Zwl2Po/Vc8SnQqf5CcoC1Q4oYJQ8YhKRiWlglOh30TUWs+mX0GmZFM8nbJO/ngqeap+fFroU/HCy0CJN14Syj/zHFHRqA4pr1TH1EuSSvVMRI0URuvW/CfI9PSabfI4he9OWSf/tit4Ou91l30yF9TRAlUK5Y4o/9BzRnVIdUr1TAWnZC9E1ELleJ8cTJ1MjiZvU4+TO52sTpanY/V62sAnDVQSqv8MlYkSRnmkHFNeqtegFRE1V1iwn3PY9j9hU8Kp1+lN6GSvp1U+1YHKTzwt1O1tIuqUiHJGdUh5pZJTP5VXRNRMZsNh2T88TZ1NGaf4VTx+eBI6lY+75TxVfApAHRVQXqj7+MqLR5Q3KiHVK5Whsv0kouttYLd+1I+ZpmRTOp262+k+6CR5Ohqe1vg0ApQ4oeJ3qEBUNCogFZR6lFgRUZOpNf+NNGWb8unU3U7ieJrmab5P4xdUPqGCUPlLeU+UMKpHyjEVpLJYEVFbhR37Ubt9n07icAo4pe9OTif1tlt9PU1eUB4oI1QmKhkVlYpQZayIqMnSkk+yB2lTPp2UTuM8rfdJAKWFqhDVGxWRkk4R0Z568DQlmxRORqeSp3N9EkCZC8qcUFIoT1Q2yislnVLx3xK1alJ0Scjkv4gHnJJOxfFUvZ4W8lT3KZ1QWagKUb1REikh1dsoWER0vakN24Hfe5vqOAWd7PG0wqeBJ54ESguViXJGVZEiot0VaQo2BZy0ThM8HQ4rfJojVCQqGiWUQiqiXapkZXI2RZzm63SWT6NAWaEGjIpMKauIqOnyqOXUKzZpnTblaRgoLVRJlDNKK1VqRUQNVpu1H/z3Kk51nTbgaQooJ5QhyhnlkYpM1aEiosaLAw97/6Zsyjh5nbbnaQQoKZQlyhuVlBJQEdFuygMPi/9aw6mm00Y8aaCMUCVR0qiklJaKiHaSWLha/s0ETkqnVTyNAxWEUkRpo0qqiGgf1aZ+U+JkddqSJwNUIZQmKiFVVYqIdtuNomkQJ63Tap4sUKVQkahkVEIKp4g+i0uCpmhTiZPRaQOe5giViBJIKaZM/KlELUtkEqvPFHx5H53mCaWQUkxNakVEjVUOXM6/DsSldCqBGhDKIFV1ioh2lFn8oAx3F+SpItSIUSVT1fhriVo0qNoYByUeh+1bJtQiqoiowWYJ8C46VYGajRQRfb7qZBwu1d0dRhHR2TZdUKdRokCKiEZpujROU0TBFBEwfSBOc4hCKiJU+iCcFiFFRJ+7wwfGr09EV0gTThHRVbuEU0R07S5BFREoERERERERERERERERERERERERERHRVfcfQAQfoSVKJSAAAAAASUVORK5CYII=\"> <p>Once you create a configuration for the <code>flask run</code>, you can copy and change it to call any other command.</p> <p>Click the <em>+ (Add New Configuration)</em> button and select <em>Python</em>. Give the configuration a name such as “flask run”.</p> <p>Click the <em>Script path</em> dropdown and change it to <em>Module name</em>, then input <code>flask</code>.</p> <p>The <em>Parameters</em> field is set to the CLI command to execute along with any arguments. This example uses <code>--app hello run --debug</code>, which will run the development server in debug mode. <code>--app hello</code> should be the import or file with your Flask app.</p> <p>If you installed your project as a package in your virtualenv, you may uncheck the <em>PYTHONPATH</em> options. This will more accurately match how you deploy later.</p> <p>Click <em>OK</em> to save and close the configuration. Select the configuration in the main PyCharm window and click the play button next to it to run the server.</p> <p>Now that you have a configuration for <code>flask run</code>, you can copy that configuration and change the <em>Parameters</em> argument to run a different CLI command.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/cli/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/cli/</a>\n  </p>\n</div>\n","patterns/caching/index":"<h1>Caching</h1> <p>When your application runs slow, throw some caches in. Well, at least it’s the easiest way to speed up things. What does a cache do? Say you have a function that takes some time to complete but the results would still be good enough if they were 5 minutes old. So then the idea is that you actually put the result of that calculation into a cache for some time.</p> <p>Flask itself does not provide caching for you, but <a class=\"reference external\" href=\"https://flask-caching.readthedocs.io/en/latest/\">Flask-Caching</a>, an extension for Flask does. Flask-Caching supports various backends, and it is even possible to develop your own caching backend.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/caching/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/caching/</a>\n  </p>\n</div>\n","patterns/appdispatch/index":"<h1>Application Dispatching</h1> <p>Application dispatching is the process of combining multiple Flask applications on the WSGI level. You can combine not only Flask applications but any WSGI application. This would allow you to run a Django and a Flask application in the same interpreter side by side if you want. The usefulness of this depends on how the applications work internally.</p> <p>The fundamental difference from <a class=\"reference internal\" href=\"../packages/index\"><span class=\"doc\">Large Applications as Packages</span></a> is that in this case you are running the same or different Flask applications that are entirely isolated from each other. They run different configurations and are dispatched on the WSGI level.</p> <section id=\"working-with-this-document\"> <h2>Working with this Document</h2> <p>Each of the techniques and examples below results in an <code>application</code> object that can be run with any WSGI server. For development, use the <code>flask run</code> command to start a development server. For production, see <a class=\"reference internal\" href=\"../../deploying/index\"><span class=\"doc\">Deploying to Production</span></a>.</p> <pre data-language=\"python\">from flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    return 'Hello World!'\n</pre> </section> <section id=\"combining-applications\"> <h2>Combining Applications</h2> <p>If you have entirely separated applications and you want them to work next to each other in the same Python interpreter process you can take advantage of the <code>werkzeug.wsgi.DispatcherMiddleware</code>. The idea here is that each Flask application is a valid WSGI application and they are combined by the dispatcher middleware into a larger one that is dispatched based on prefix.</p> <p>For example you could have your main application run on <code>/</code> and your backend interface on <code>/backend</code>.</p> <pre data-language=\"python\">from werkzeug.middleware.dispatcher import DispatcherMiddleware\nfrom frontend_app import application as frontend\nfrom backend_app import application as backend\n\napplication = DispatcherMiddleware(frontend, {\n    '/backend': backend\n})\n</pre> </section> <section id=\"dispatch-by-subdomain\"> <h2>Dispatch by Subdomain</h2> <p>Sometimes you might want to use multiple instances of the same application with different configurations. Assuming the application is created inside a function and you can call that function to instantiate it, that is really easy to implement. In order to develop your application to support creating new instances in functions have a look at the <a class=\"reference internal\" href=\"../appfactories/index\"><span class=\"doc\">Application Factories</span></a> pattern.</p> <p>A very common example would be creating applications per subdomain. For instance you configure your webserver to dispatch all requests for all subdomains to your application and you then use the subdomain information to create user-specific instances. Once you have your server set up to listen on all subdomains you can use a very simple WSGI application to do the dynamic application creation.</p> <p>The perfect level for abstraction in that regard is the WSGI layer. You write your own WSGI application that looks at the request that comes and delegates it to your Flask application. If that application does not exist yet, it is dynamically created and remembered.</p> <pre data-language=\"python\">from threading import Lock\n\nclass SubdomainDispatcher:\n\n    def __init__(self, domain, create_app):\n        self.domain = domain\n        self.create_app = create_app\n        self.lock = Lock()\n        self.instances = {}\n\n    def get_application(self, host):\n        host = host.split(':')[0]\n        assert host.endswith(self.domain), 'Configuration error'\n        subdomain = host[:-len(self.domain)].rstrip('.')\n        with self.lock:\n            app = self.instances.get(subdomain)\n            if app is None:\n                app = self.create_app(subdomain)\n                self.instances[subdomain] = app\n            return app\n\n    def __call__(self, environ, start_response):\n        app = self.get_application(environ['HTTP_HOST'])\n        return app(environ, start_response)\n</pre> <p>This dispatcher can then be used like this:</p> <pre data-language=\"python\">from myapplication import create_app, get_user_for_subdomain\nfrom werkzeug.exceptions import NotFound\n\ndef make_app(subdomain):\n    user = get_user_for_subdomain(subdomain)\n    if user is None:\n        # if there is no user for that subdomain we still have\n        # to return a WSGI application that handles that request.\n        # We can then just return the NotFound() exception as\n        # application which will render a default 404 page.\n        # You might also redirect the user to the main page then\n        return NotFound()\n\n    # otherwise create the application for the specific user\n    return create_app(user)\n\napplication = SubdomainDispatcher('example.com', make_app)\n</pre> </section> <section id=\"dispatch-by-path\"> <h2>Dispatch by Path</h2> <p>Dispatching by a path on the URL is very similar. Instead of looking at the <code>Host</code> header to figure out the subdomain one simply looks at the request path up to the first slash.</p> <pre data-language=\"python\">from threading import Lock\nfrom wsgiref.util import shift_path_info\n\nclass PathDispatcher:\n\n    def __init__(self, default_app, create_app):\n        self.default_app = default_app\n        self.create_app = create_app\n        self.lock = Lock()\n        self.instances = {}\n\n    def get_application(self, prefix):\n        with self.lock:\n            app = self.instances.get(prefix)\n            if app is None:\n                app = self.create_app(prefix)\n                if app is not None:\n                    self.instances[prefix] = app\n            return app\n\n    def __call__(self, environ, start_response):\n        app = self.get_application(_peek_path_info(environ))\n        if app is not None:\n            shift_path_info(environ)\n        else:\n            app = self.default_app\n        return app(environ, start_response)\n\ndef _peek_path_info(environ):\n    segments = environ.get(\"PATH_INFO\", \"\").lstrip(\"/\").split(\"/\", 1)\n    if segments:\n        return segments[0]\n\n    return None\n</pre> <p>The big difference between this and the subdomain one is that this one falls back to another application if the creator function returns <code>None</code>.</p> <pre data-language=\"python\">from myapplication import create_app, default_app, get_user_for_prefix\n\ndef make_app(prefix):\n    user = get_user_for_prefix(prefix)\n    if user is not None:\n        return create_app(user)\n\napplication = PathDispatcher(default_app, make_app)\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/appdispatch/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/appdispatch/</a>\n  </p>\n</div>\n","patterns/urlprocessors/index":"<h1>Using URL Processors</h1> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><p>Flask 0.7 introduces the concept of URL processors. The idea is that you might have a bunch of resources with common parts in the URL that you don’t always explicitly want to provide. For instance you might have a bunch of URLs that have the language code in it but you don’t want to have to handle it in every single function yourself.</p> <p>URL processors are especially helpful when combined with blueprints. We will handle both application specific URL processors here as well as blueprint specifics.</p> <section id=\"internationalized-application-urls\"> <h2>Internationalized Application URLs</h2> <p>Consider an application like this:</p> <pre data-language=\"python\">from flask import Flask, g\n\napp = Flask(__name__)\n\n@app.route('/&lt;lang_code&gt;/')\ndef index(lang_code):\n    g.lang_code = lang_code\n    ...\n\n@app.route('/&lt;lang_code&gt;/about')\ndef about(lang_code):\n    g.lang_code = lang_code\n    ...\n</pre> <p>This is an awful lot of repetition as you have to handle the language code setting on the <a class=\"reference internal\" href=\"../../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> object yourself in every single function. Sure, a decorator could be used to simplify this, but if you want to generate URLs from one function to another you would have to still provide the language code explicitly which can be annoying.</p> <p>For the latter, this is where <a class=\"reference internal\" href=\"../../api/index#flask.Flask.url_defaults\" title=\"flask.Flask.url_defaults\"><code>url_defaults()</code></a> functions come in. They can automatically inject values into a call to <a class=\"reference internal\" href=\"../../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a>. The code below checks if the language code is not yet in the dictionary of URL values and if the endpoint wants a value named <code>'lang_code'</code>:</p> <pre data-language=\"python\">@app.url_defaults\ndef add_language_code(endpoint, values):\n    if 'lang_code' in values or not g.lang_code:\n        return\n    if app.url_map.is_endpoint_expecting(endpoint, 'lang_code'):\n        values['lang_code'] = g.lang_code\n</pre> <p>The method <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Map.is_endpoint_expecting\" title=\"(in Werkzeug v3.1.x)\"><code>is_endpoint_expecting()</code></a> of the URL map can be used to figure out if it would make sense to provide a language code for the given endpoint.</p> <p>The reverse of that function are <a class=\"reference internal\" href=\"../../api/index#flask.Flask.url_value_preprocessor\" title=\"flask.Flask.url_value_preprocessor\"><code>url_value_preprocessor()</code></a>s. They are executed right after the request was matched and can execute code based on the URL values. The idea is that they pull information out of the values dictionary and put it somewhere else:</p> <pre data-language=\"python\">@app.url_value_preprocessor\ndef pull_lang_code(endpoint, values):\n    g.lang_code = values.pop('lang_code', None)\n</pre> <p>That way you no longer have to do the <code>lang_code</code> assignment to <a class=\"reference internal\" href=\"../../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> in every function. You can further improve that by writing your own decorator that prefixes URLs with the language code, but the more beautiful solution is using a blueprint. Once the <code>'lang_code'</code> is popped from the values dictionary and it will no longer be forwarded to the view function reducing the code to this:</p> <pre data-language=\"python\">from flask import Flask, g\n\napp = Flask(__name__)\n\n@app.url_defaults\ndef add_language_code(endpoint, values):\n    if 'lang_code' in values or not g.lang_code:\n        return\n    if app.url_map.is_endpoint_expecting(endpoint, 'lang_code'):\n        values['lang_code'] = g.lang_code\n\n@app.url_value_preprocessor\ndef pull_lang_code(endpoint, values):\n    g.lang_code = values.pop('lang_code', None)\n\n@app.route('/&lt;lang_code&gt;/')\ndef index():\n    ...\n\n@app.route('/&lt;lang_code&gt;/about')\ndef about():\n    ...\n</pre> </section> <section id=\"internationalized-blueprint-urls\"> <h2>Internationalized Blueprint URLs</h2> <p>Because blueprints can automatically prefix all URLs with a common string it’s easy to automatically do that for every function. Furthermore blueprints can have per-blueprint URL processors which removes a whole lot of logic from the <a class=\"reference internal\" href=\"../../api/index#flask.Flask.url_defaults\" title=\"flask.Flask.url_defaults\"><code>url_defaults()</code></a> function because it no longer has to check if the URL is really interested in a <code>'lang_code'</code> parameter:</p> <pre data-language=\"python\">from flask import Blueprint, g\n\nbp = Blueprint('frontend', __name__, url_prefix='/&lt;lang_code&gt;')\n\n@bp.url_defaults\ndef add_language_code(endpoint, values):\n    values.setdefault('lang_code', g.lang_code)\n\n@bp.url_value_preprocessor\ndef pull_lang_code(endpoint, values):\n    g.lang_code = values.pop('lang_code')\n\n@bp.route('/')\ndef index():\n    ...\n\n@bp.route('/about')\ndef about():\n    ...\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/urlprocessors/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/urlprocessors/</a>\n  </p>\n</div>\n","patterns/sqlite3/index":"<h1>Using SQLite 3 with Flask</h1> <p>In Flask you can easily implement the opening of database connections on demand and closing them when the context dies (usually at the end of the request).</p> <p>Here is a simple example of how you can use SQLite 3 with Flask:</p> <pre data-language=\"python\">import sqlite3\nfrom flask import g\n\nDATABASE = '/path/to/database.db'\n\ndef get_db():\n    db = getattr(g, '_database', None)\n    if db is None:\n        db = g._database = sqlite3.connect(DATABASE)\n    return db\n\n@app.teardown_appcontext\ndef close_connection(exception):\n    db = getattr(g, '_database', None)\n    if db is not None:\n        db.close()\n</pre> <p>Now, to use the database, the application must either have an active application context (which is always true if there is a request in flight) or create an application context itself. At that point the <code>get_db</code> function can be used to get the current database connection. Whenever the context is destroyed the database connection will be terminated.</p> <p>Example:</p> <pre data-language=\"python\">@app.route('/')\ndef index():\n    cur = get_db().cursor()\n    ...\n</pre> <div class=\"admonition note\"> <p class=\"admonition-title\">Note</p> <p>Please keep in mind that the teardown request and appcontext functions are always executed, even if a before-request handler failed or was never executed. Because of this we have to make sure here that the database is there before we close it.</p> </div> <section id=\"connect-on-demand\"> <h2>Connect on Demand</h2> <p>The upside of this approach (connecting on first use) is that this will only open the connection if truly necessary. If you want to use this code outside a request context you can use it in a Python shell by opening the application context by hand:</p> <pre data-language=\"python\">with app.app_context():\n    # now you can use get_db()\n</pre> </section> <section id=\"easy-querying\"> <h2>Easy Querying</h2> <p>Now in each request handling function you can access <code>get_db()</code> to get the current open database connection. To simplify working with SQLite, a row factory function is useful. It is executed for every result returned from the database to convert the result. For instance, in order to get dictionaries instead of tuples, this could be inserted into the <code>get_db</code> function we created above:</p> <pre data-language=\"python\">def make_dicts(cursor, row):\n    return dict((cursor.description[idx][0], value)\n                for idx, value in enumerate(row))\n\ndb.row_factory = make_dicts\n</pre> <p>This will make the sqlite3 module return dicts for this database connection, which are much nicer to deal with. Even more simply, we could place this in <code>get_db</code> instead:</p> <pre data-language=\"python\">db.row_factory = sqlite3.Row\n</pre> <p>This would use Row objects rather than dicts to return the results of queries. These are <code>namedtuple</code> s, so we can access them either by index or by key. For example, assuming we have a <code>sqlite3.Row</code> called <code>r</code> for the rows <code>id</code>, <code>FirstName</code>, <code>LastName</code>, and <code>MiddleInitial</code>:</p> <pre data-language=\"python\">&gt;&gt;&gt; # You can get values based on the row's name\n&gt;&gt;&gt; r['FirstName']\nJohn\n&gt;&gt;&gt; # Or, you can get them based on index\n&gt;&gt;&gt; r[1]\nJohn\n# Row objects are also iterable:\n&gt;&gt;&gt; for value in r:\n...     print(value)\n1\nJohn\nDoe\nM\n</pre> <p>Additionally, it is a good idea to provide a query function that combines getting the cursor, executing and fetching the results:</p> <pre data-language=\"python\">def query_db(query, args=(), one=False):\n    cur = get_db().execute(query, args)\n    rv = cur.fetchall()\n    cur.close()\n    return (rv[0] if rv else None) if one else rv\n</pre> <p>This handy little function, in combination with a row factory, makes working with the database much more pleasant than it is by just using the raw cursor and connection objects.</p> <p>Here is how you can use it:</p> <pre data-language=\"python\">for user in query_db('select * from users'):\n    print(user['username'], 'has the id', user['user_id'])\n</pre> <p>Or if you just want a single result:</p> <pre data-language=\"python\">user = query_db('select * from users where username = ?',\n                [the_username], one=True)\nif user is None:\n    print('No such user')\nelse:\n    print(the_username, 'has the id', user['user_id'])\n</pre> <p>To pass variable parts to the SQL statement, use a question mark in the statement and pass in the arguments as a list. Never directly add them to the SQL statement with string formatting because this makes it possible to attack the application using <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/SQL_injection\">SQL Injections</a>.</p> </section> <section id=\"initial-schemas\"> <h2>Initial Schemas</h2> <p>Relational databases need schemas, so applications often ship a <code>schema.sql</code> file that creates the database. It’s a good idea to provide a function that creates the database based on that schema. This function can do that for you:</p> <pre data-language=\"python\">def init_db():\n    with app.app_context():\n        db = get_db()\n        with app.open_resource('schema.sql', mode='r') as f:\n            db.cursor().executescript(f.read())\n        db.commit()\n</pre> <p>You can then create such a database from the Python shell:</p> <pre data-language=\"python\">&gt;&gt;&gt; from yourapplication import init_db\n&gt;&gt;&gt; init_db()\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/sqlite3/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/sqlite3/</a>\n  </p>\n</div>\n","patterns/sqlalchemy/index":"<h1>SQLAlchemy in Flask</h1> <p>Many people prefer <a class=\"reference external\" href=\"https://www.sqlalchemy.org/\">SQLAlchemy</a> for database access. In this case it’s encouraged to use a package instead of a module for your flask application and drop the models into a separate module (<a class=\"reference internal\" href=\"../packages/index\"><span class=\"doc\">Large Applications as Packages</span></a>). While that is not necessary, it makes a lot of sense.</p> <p>There are four very common ways to use SQLAlchemy. I will outline each of them here:</p> <section id=\"flask-sqlalchemy-extension\"> <h2>Flask-SQLAlchemy Extension</h2> <p>Because SQLAlchemy is a common database abstraction layer and object relational mapper that requires a little bit of configuration effort, there is a Flask extension that handles that for you. This is recommended if you want to get started quickly.</p> <p>You can download <a class=\"reference external\" href=\"https://flask-sqlalchemy.palletsprojects.com/\">Flask-SQLAlchemy</a> from <a class=\"reference external\" href=\"https://pypi.org/project/Flask-SQLAlchemy/\">PyPI</a>.</p> </section> <section id=\"declarative\"> <h2>Declarative</h2> <p>The declarative extension in SQLAlchemy is the most recent method of using SQLAlchemy. It allows you to define tables and models in one go, similar to how Django works. In addition to the following text I recommend the official documentation on the <a class=\"reference external\" href=\"https://docs.sqlalchemy.org/en/latest/orm/extensions/declarative/\">declarative</a> extension.</p> <p>Here’s the example <code>database.py</code> module for your application:</p> <pre data-language=\"python\">from sqlalchemy import create_engine\nfrom sqlalchemy.orm import scoped_session, sessionmaker, declarative_base\n\nengine = create_engine('sqlite:////tmp/test.db')\ndb_session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=engine))\nBase = declarative_base()\nBase.query = db_session.query_property()\n\ndef init_db():\n    # import all modules here that might define models so that\n    # they will be registered properly on the metadata.  Otherwise\n    # you will have to import them first before calling init_db()\n    import yourapplication.models\n    Base.metadata.create_all(bind=engine)\n</pre> <p>To define your models, just subclass the <code>Base</code> class that was created by the code above. If you are wondering why we don’t have to care about threads here (like we did in the SQLite3 example above with the <a class=\"reference internal\" href=\"../../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> object): that’s because SQLAlchemy does that for us already with the <a class=\"reference external\" href=\"https://docs.sqlalchemy.org/en/20/orm/contextual.html#sqlalchemy.orm.scoped_session\" title=\"(in SQLAlchemy v2.0)\"><code>scoped_session</code></a>.</p> <p>To use SQLAlchemy in a declarative way with your application, you just have to put the following code into your application module. Flask will automatically remove database sessions at the end of the request or when the application shuts down:</p> <pre data-language=\"python\">from yourapplication.database import db_session\n\n@app.teardown_appcontext\ndef shutdown_session(exception=None):\n    db_session.remove()\n</pre> <p>Here is an example model (put this into <code>models.py</code>, e.g.):</p> <pre data-language=\"python\">from sqlalchemy import Column, Integer, String\nfrom yourapplication.database import Base\n\nclass User(Base):\n    __tablename__ = 'users'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(50), unique=True)\n    email = Column(String(120), unique=True)\n\n    def __init__(self, name=None, email=None):\n        self.name = name\n        self.email = email\n\n    def __repr__(self):\n        return f'&lt;User {self.name!r}&gt;'\n</pre> <p>To create the database you can use the <code>init_db</code> function:</p> <pre data-language=\"python\">&gt;&gt;&gt; from yourapplication.database import init_db\n&gt;&gt;&gt; init_db()\n</pre> <p>You can insert entries into the database like this:</p> <pre data-language=\"python\">&gt;&gt;&gt; from yourapplication.database import db_session\n&gt;&gt;&gt; from yourapplication.models import User\n&gt;&gt;&gt; u = User('admin', 'admin@localhost')\n&gt;&gt;&gt; db_session.add(u)\n&gt;&gt;&gt; db_session.commit()\n</pre> <p>Querying is simple as well:</p> <pre data-language=\"python\">&gt;&gt;&gt; User.query.all()\n[&lt;User 'admin'&gt;]\n&gt;&gt;&gt; User.query.filter(User.name == 'admin').first()\n&lt;User 'admin'&gt;\n</pre> </section> <section id=\"manual-object-relational-mapping\"> <h2>Manual Object Relational Mapping</h2> <p>Manual object relational mapping has a few upsides and a few downsides versus the declarative approach from above. The main difference is that you define tables and classes separately and map them together. It’s more flexible but a little more to type. In general it works like the declarative approach, so make sure to also split up your application into multiple modules in a package.</p> <p>Here is an example <code>database.py</code> module for your application:</p> <pre data-language=\"python\">from sqlalchemy import create_engine, MetaData\nfrom sqlalchemy.orm import scoped_session, sessionmaker\n\nengine = create_engine('sqlite:////tmp/test.db')\nmetadata = MetaData()\ndb_session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=engine))\ndef init_db():\n    metadata.create_all(bind=engine)\n</pre> <p>As in the declarative approach, you need to close the session after each request or application context shutdown. Put this into your application module:</p> <pre data-language=\"python\">from yourapplication.database import db_session\n\n@app.teardown_appcontext\ndef shutdown_session(exception=None):\n    db_session.remove()\n</pre> <p>Here is an example table and model (put this into <code>models.py</code>):</p> <pre data-language=\"python\">from sqlalchemy import Table, Column, Integer, String\nfrom sqlalchemy.orm import mapper\nfrom yourapplication.database import metadata, db_session\n\nclass User(object):\n    query = db_session.query_property()\n\n    def __init__(self, name=None, email=None):\n        self.name = name\n        self.email = email\n\n    def __repr__(self):\n        return f'&lt;User {self.name!r}&gt;'\n\nusers = Table('users', metadata,\n    Column('id', Integer, primary_key=True),\n    Column('name', String(50), unique=True),\n    Column('email', String(120), unique=True)\n)\nmapper(User, users)\n</pre> <p>Querying and inserting works exactly the same as in the example above.</p> </section> <section id=\"sql-abstraction-layer\"> <h2>SQL Abstraction Layer</h2> <p>If you just want to use the database system (and SQL) abstraction layer you basically only need the engine:</p> <pre data-language=\"python\">from sqlalchemy import create_engine, MetaData, Table\n\nengine = create_engine('sqlite:////tmp/test.db')\nmetadata = MetaData(bind=engine)\n</pre> <p>Then you can either declare the tables in your code like in the examples above, or automatically load them:</p> <pre data-language=\"python\">from sqlalchemy import Table\n\nusers = Table('users', metadata, autoload=True)\n</pre> <p>To insert data you can use the <code>insert</code> method. We have to get a connection first so that we can use a transaction:</p> <pre data-language=\"python\">&gt;&gt;&gt; con = engine.connect()\n&gt;&gt;&gt; con.execute(users.insert(), name='admin', email='admin@localhost')\n</pre> <p>SQLAlchemy will automatically commit for us.</p> <p>To query your database, you use the engine directly or use a connection:</p> <pre data-language=\"python\">&gt;&gt;&gt; users.select(users.c.id == 1).execute().first()\n(1, 'admin', 'admin@localhost')\n</pre> <p>These results are also dict-like tuples:</p> <pre data-language=\"python\">&gt;&gt;&gt; r = users.select(users.c.id == 1).execute().first()\n&gt;&gt;&gt; r['name']\n'admin'\n</pre> <p>You can also pass strings of SQL statements to the <code>execute()</code> method:</p> <pre data-language=\"python\">&gt;&gt;&gt; engine.execute('select * from users where id = :1', [1]).first()\n(1, 'admin', 'admin@localhost')\n</pre> <p>For more information about SQLAlchemy, head over to the <a class=\"reference external\" href=\"https://www.sqlalchemy.org/\">website</a>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/sqlalchemy/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/sqlalchemy/</a>\n  </p>\n</div>\n","patterns/fileuploads/index":"<h1>Uploading Files</h1> <p>Ah yes, the good old problem of file uploads. The basic idea of file uploads is actually quite simple. It basically works like this:</p> <ol class=\"arabic simple\"> <li>A <code>&lt;form&gt;</code> tag is marked with <code>enctype=multipart/form-data</code> and an <code>&lt;input type=file&gt;</code> is placed in that form.</li> <li>The application accesses the file from the <code>files</code> dictionary on the request object.</li> <li>use the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.FileStorage.save\" title=\"(in Werkzeug v3.1.x)\"><code>save()</code></a> method of the file to save the file permanently somewhere on the filesystem.</li> </ol> <section id=\"a-gentle-introduction\"> <h2>A Gentle Introduction</h2> <p>Let’s start with a very basic application that uploads a file to a specific upload folder and displays a file to the user. Let’s look at the bootstrapping code for our application:</p> <pre data-language=\"python\">import os\nfrom flask import Flask, flash, request, redirect, url_for\nfrom werkzeug.utils import secure_filename\n\nUPLOAD_FOLDER = '/path/to/the/uploads'\nALLOWED_EXTENSIONS = {'txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif'}\n\napp = Flask(__name__)\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\n</pre> <p>So first we need a couple of imports. Most should be straightforward, the <code>werkzeug.secure_filename()</code> is explained a little bit later. The <code>UPLOAD_FOLDER</code> is where we will store the uploaded files and the <code>ALLOWED_EXTENSIONS</code> is the set of allowed file extensions.</p> <p>Why do we limit the extensions that are allowed? You probably don’t want your users to be able to upload everything there if the server is directly sending out the data to the client. That way you can make sure that users are not able to upload HTML files that would cause XSS problems (see <a class=\"reference internal\" href=\"../../web-security/index#security-xss\"><span class=\"std std-ref\">Cross-Site Scripting (XSS)</span></a>). Also make sure to disallow <code>.php</code> files if the server executes them, but who has PHP installed on their server, right? :)</p> <p>Next the functions that check if an extension is valid and that uploads the file and redirects the user to the URL for the uploaded file:</p> <pre data-language=\"python\">def allowed_file(filename):\n    return '.' in filename and \\\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\n@app.route('/', methods=['GET', 'POST'])\ndef upload_file():\n    if request.method == 'POST':\n        # check if the post request has the file part\n        if 'file' not in request.files:\n            flash('No file part')\n            return redirect(request.url)\n        file = request.files['file']\n        # If the user does not select a file, the browser submits an\n        # empty file without a filename.\n        if file.filename == '':\n            flash('No selected file')\n            return redirect(request.url)\n        if file and allowed_file(file.filename):\n            filename = secure_filename(file.filename)\n            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))\n            return redirect(url_for('download_file', name=filename))\n    return '''\n    &lt;!doctype html&gt;\n    &lt;title&gt;Upload new File&lt;/title&gt;\n    &lt;h1&gt;Upload new File&lt;/h1&gt;\n    &lt;form method=post enctype=multipart/form-data&gt;\n      &lt;input type=file name=file&gt;\n      &lt;input type=submit value=Upload&gt;\n    &lt;/form&gt;\n    '''\n</pre> <p>So what does that <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.utils.secure_filename\" title=\"(in Werkzeug v3.1.x)\"><code>secure_filename()</code></a> function actually do? Now the problem is that there is that principle called “never trust user input”. This is also true for the filename of an uploaded file. All submitted form data can be forged, and filenames can be dangerous. For the moment just remember: always use that function to secure a filename before storing it directly on the filesystem.</p> <div class=\"admonition-information-for-the-pros admonition\"> <p class=\"admonition-title\">Information for the Pros</p> <p>So you’re interested in what that <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.utils.secure_filename\" title=\"(in Werkzeug v3.1.x)\"><code>secure_filename()</code></a> function does and what the problem is if you’re not using it? So just imagine someone would send the following information as <code>filename</code> to your application:</p> <pre data-language=\"python\">filename = \"../../../../home/username/.bashrc\"\n</pre> <p>Assuming the number of <code>../</code> is correct and you would join this with the <code>UPLOAD_FOLDER</code> the user might have the ability to modify a file on the server’s filesystem he or she should not modify. This does require some knowledge about how the application looks like, but trust me, hackers are patient :)</p> <p>Now let’s look how that function works:</p> <pre data-language=\"python\">&gt;&gt;&gt; secure_filename('../../../../home/username/.bashrc')\n'home_username_.bashrc'\n</pre> </div> <p>We want to be able to serve the uploaded files so they can be downloaded by users. We’ll define a <code>download_file</code> view to serve files in the upload folder by name. <code>url_for(\"download_file\", name=name)</code> generates download URLs.</p> <pre data-language=\"python\">from flask import send_from_directory\n\n@app.route('/uploads/&lt;name&gt;')\ndef download_file(name):\n    return send_from_directory(app.config[\"UPLOAD_FOLDER\"], name)\n</pre> <p>If you’re using middleware or the HTTP server to serve files, you can register the <code>download_file</code> endpoint as <code>build_only</code> so <code>url_for</code> will work without a view function.</p> <pre data-language=\"python\">app.add_url_rule(\n    \"/uploads/&lt;name&gt;\", endpoint=\"download_file\", build_only=True\n)\n</pre> </section> <section id=\"improving-uploads\"> <h2>Improving Uploads</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><p>So how exactly does Flask handle uploads? Well it will store them in the webserver’s memory if the files are reasonably small, otherwise in a temporary location (as returned by <a class=\"reference external\" href=\"https://docs.python.org/3/library/tempfile.html#tempfile.gettempdir\" title=\"(in Python v3.13)\"><code>tempfile.gettempdir()</code></a>). But how do you specify the maximum file size after which an upload is aborted? By default Flask will happily accept file uploads with an unlimited amount of memory, but you can limit that by setting the <code>MAX_CONTENT_LENGTH</code> config key:</p> <pre data-language=\"python\">from flask import Flask, Request\n\napp = Flask(__name__)\napp.config['MAX_CONTENT_LENGTH'] = 16 * 1000 * 1000\n</pre> <p>The code above will limit the maximum allowed payload to 16 megabytes. If a larger file is transmitted, Flask will raise a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> exception.</p> <div class=\"admonition-connection-reset-issue admonition\"> <p class=\"admonition-title\">Connection Reset Issue</p> <p>When using the local development server, you may get a connection reset error instead of a 413 response. You will get the correct status response when running the app with a production WSGI server.</p> </div> <p>This feature was added in Flask 0.6 but can be achieved in older versions as well by subclassing the request object. For more information on that consult the Werkzeug documentation on file handling.</p> </section> <section id=\"upload-progress-bars\"> <h2>Upload Progress Bars</h2> <p>A while ago many developers had the idea to read the incoming file in small chunks and store the upload progress in the database to be able to poll the progress with JavaScript from the client. The client asks the server every 5 seconds how much it has transmitted, but this is something it should already know.</p> </section> <section id=\"an-easier-solution\"> <h2>An Easier Solution</h2> <p>Now there are better solutions that work faster and are more reliable. There are JavaScript libraries like <a class=\"reference external\" href=\"https://jquery.com/\">jQuery</a> that have form plugins to ease the construction of progress bar.</p> <p>Because the common pattern for file uploads exists almost unchanged in all applications dealing with uploads, there are also some Flask extensions that implement a full fledged upload mechanism that allows controlling which file extensions are allowed to be uploaded.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/fileuploads/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/fileuploads/</a>\n  </p>\n</div>\n","patterns/viewdecorators/index":"<h1>View Decorators</h1> <p>Python has a really interesting feature called function decorators. This allows some really neat things for web applications. Because each view in Flask is a function, decorators can be used to inject additional functionality to one or more functions. The <a class=\"reference internal\" href=\"../../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator is the one you probably used already. But there are use cases for implementing your own decorator. For instance, imagine you have a view that should only be used by people that are logged in. If a user goes to the site and is not logged in, they should be redirected to the login page. This is a good example of a use case where a decorator is an excellent solution.</p> <section id=\"login-required-decorator\"> <h2>Login Required Decorator</h2> <p>So let’s implement such a decorator. A decorator is a function that wraps and replaces another function. Since the original function is replaced, you need to remember to copy the original function’s information to the new function. Use <a class=\"reference external\" href=\"https://docs.python.org/3/library/functools.html#functools.wraps\" title=\"(in Python v3.13)\"><code>functools.wraps()</code></a> to handle this for you.</p> <p>This example assumes that the login page is called <code>'login'</code> and that the current user is stored in <code>g.user</code> and is <code>None</code> if there is no-one logged in.</p> <pre data-language=\"python\">from functools import wraps\nfrom flask import g, request, redirect, url_for\n\ndef login_required(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        if g.user is None:\n            return redirect(url_for('login', next=request.url))\n        return f(*args, **kwargs)\n    return decorated_function\n</pre> <p>To use the decorator, apply it as innermost decorator to a view function. When applying further decorators, always remember that the <a class=\"reference internal\" href=\"../../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator is the outermost.</p> <pre data-language=\"python\">@app.route('/secret_page')\n@login_required\ndef secret_page():\n    pass\n</pre> <div class=\"admonition note\"> <p class=\"admonition-title\">Note</p> <p>The <code>next</code> value will exist in <code>request.args</code> after a <code>GET</code> request for the login page. You’ll have to pass it along when sending the <code>POST</code> request from the login form. You can do this with a hidden input tag, then retrieve it from <code>request.form</code> when logging the user in.</p> <pre data-language=\"python\">&lt;input type=\"hidden\" value=\"{{ request.args.get('next', '') }}\"/&gt;\n</pre> </div> </section> <section id=\"caching-decorator\"> <h2>Caching Decorator</h2> <p>Imagine you have a view function that does an expensive calculation and because of that you would like to cache the generated results for a certain amount of time. A decorator would be nice for that. We’re assuming you have set up a cache like mentioned in <a class=\"reference internal\" href=\"../caching/index\"><span class=\"doc\">Caching</span></a>.</p> <p>Here is an example cache function. It generates the cache key from a specific prefix (actually a format string) and the current path of the request. Notice that we are using a function that first creates the decorator that then decorates the function. Sounds awful? Unfortunately it is a little bit more complex, but the code should still be straightforward to read.</p> <p>The decorated function will then work as follows</p> <ol class=\"arabic simple\"> <li>get the unique cache key for the current request based on the current path.</li> <li>get the value for that key from the cache. If the cache returned something we will return that value.</li> <li>otherwise the original function is called and the return value is stored in the cache for the timeout provided (by default 5 minutes).</li> </ol> <p>Here the code:</p> <pre data-language=\"python\">from functools import wraps\nfrom flask import request\n\ndef cached(timeout=5 * 60, key='view/{}'):\n    def decorator(f):\n        @wraps(f)\n        def decorated_function(*args, **kwargs):\n            cache_key = key.format(request.path)\n            rv = cache.get(cache_key)\n            if rv is not None:\n                return rv\n            rv = f(*args, **kwargs)\n            cache.set(cache_key, rv, timeout=timeout)\n            return rv\n        return decorated_function\n    return decorator\n</pre> <p>Notice that this assumes an instantiated <code>cache</code> object is available, see <a class=\"reference internal\" href=\"../caching/index\"><span class=\"doc\">Caching</span></a>.</p> </section> <section id=\"templating-decorator\"> <h2>Templating Decorator</h2> <p>A common pattern invented by the TurboGears guys a while back is a templating decorator. The idea of that decorator is that you return a dictionary with the values passed to the template from the view function and the template is automatically rendered. With that, the following three examples do exactly the same:</p> <pre data-language=\"python\">@app.route('/')\ndef index():\n    return render_template('index.html', value=42)\n\n@app.route('/')\n@templated('index.html')\ndef index():\n    return dict(value=42)\n\n@app.route('/')\n@templated()\ndef index():\n    return dict(value=42)\n</pre> <p>As you can see, if no template name is provided it will use the endpoint of the URL map with dots converted to slashes + <code>'.html'</code>. Otherwise the provided template name is used. When the decorated function returns, the dictionary returned is passed to the template rendering function. If <code>None</code> is returned, an empty dictionary is assumed, if something else than a dictionary is returned we return it from the function unchanged. That way you can still use the redirect function or return simple strings.</p> <p>Here is the code for that decorator:</p> <pre data-language=\"python\">from functools import wraps\nfrom flask import request, render_template\n\ndef templated(template=None):\n    def decorator(f):\n        @wraps(f)\n        def decorated_function(*args, **kwargs):\n            template_name = template\n            if template_name is None:\n                template_name = f\"{request.endpoint.replace('.', '/')}.html\"\n            ctx = f(*args, **kwargs)\n            if ctx is None:\n                ctx = {}\n            elif not isinstance(ctx, dict):\n                return ctx\n            return render_template(template_name, **ctx)\n        return decorated_function\n    return decorator\n</pre> </section> <section id=\"endpoint-decorator\"> <h2>Endpoint Decorator</h2> <p>When you want to use the werkzeug routing system for more flexibility you need to map the endpoint as defined in the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Rule\" title=\"(in Werkzeug v3.1.x)\"><code>Rule</code></a> to a view function. This is possible with this decorator. For example:</p> <pre data-language=\"python\">from flask import Flask\nfrom werkzeug.routing import Rule\n\napp = Flask(__name__)\napp.url_map.add(Rule('/', endpoint='index'))\n\n@app.endpoint('index')\ndef my_index():\n    return \"Hello world\"\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/viewdecorators/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/viewdecorators/</a>\n  </p>\n</div>\n","patterns/templateinheritance/index":"<h1>Template Inheritance</h1> <p>The most powerful part of Jinja is template inheritance. Template inheritance allows you to build a base “skeleton” template that contains all the common elements of your site and defines <strong>blocks</strong> that child templates can override.</p> <p>Sounds complicated but is very basic. It’s easiest to understand it by starting with an example.</p> <section id=\"base-template\"> <h2>Base Template</h2> <p>This template, which we’ll call <code>layout.html</code>, defines a simple HTML skeleton document that you might use for a simple two-column page. It’s the job of “child” templates to fill the empty blocks with content:</p> <pre data-language=\"html+jinja\">&lt;!doctype html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    {% block head %}\n    &lt;link rel=\"stylesheet\" href=\"{{ url_for('static', filename='style.css') }}\"&gt;\n    &lt;title&gt;{% block title %}{% endblock %} - My Webpage&lt;/title&gt;\n    {% endblock %}\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"content\"&gt;{% block content %}{% endblock %}&lt;/div&gt;\n    &lt;div id=\"footer\"&gt;\n      {% block footer %}\n      &amp;copy; Copyright 2010 by &lt;a href=\"http://domain.invalid/\"&gt;you&lt;/a&gt;.\n      {% endblock %}\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</pre> <p>In this example, the <code>{% block %}</code> tags define four blocks that child templates can fill in. All the <code>block</code> tag does is tell the template engine that a child template may override those portions of the template.</p> </section> <section id=\"child-template\"> <h2>Child Template</h2> <p>A child template might look like this:</p> <pre data-language=\"html+jinja\">{% extends \"layout.html\" %}\n{% block title %}Index{% endblock %}\n{% block head %}\n  {{ super() }}\n  &lt;style type=\"text/css\"&gt;\n    .important { color: #336699; }\n  &lt;/style&gt;\n{% endblock %}\n{% block content %}\n  &lt;h1&gt;Index&lt;/h1&gt;\n  &lt;p class=\"important\"&gt;\n    Welcome on my awesome homepage.\n{% endblock %}\n</pre> <p>The <code>{% extends %}</code> tag is the key here. It tells the template engine that this template “extends” another template. When the template system evaluates this template, first it locates the parent. The extends tag must be the first tag in the template. To render the contents of a block defined in the parent template, use <code>{{ super() }}</code>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/templateinheritance/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/templateinheritance/</a>\n  </p>\n</div>\n","patterns/mongoengine/index":"<h1>MongoDB with MongoEngine</h1> <p>Using a document database like MongoDB is a common alternative to relational SQL databases. This pattern shows how to use <a class=\"reference external\" href=\"http://mongoengine.org\">MongoEngine</a>, a document mapper library, to integrate with MongoDB.</p> <p>A running MongoDB server and <a class=\"reference external\" href=\"https://flask-mongoengine.readthedocs.io\">Flask-MongoEngine</a> are required.</p> <pre data-language=\"python\">pip install flask-mongoengine\n</pre> <section id=\"configuration\"> <h2>Configuration</h2> <p>Basic setup can be done by defining <code>MONGODB_SETTINGS</code> on <code>app.config</code> and creating a <code>MongoEngine</code> instance.</p> <pre data-language=\"python\">from flask import Flask\nfrom flask_mongoengine import MongoEngine\n\napp = Flask(__name__)\napp.config['MONGODB_SETTINGS'] = {\n    \"db\": \"myapp\",\n}\ndb = MongoEngine(app)\n</pre> </section> <section id=\"mapping-documents\"> <h2>Mapping Documents</h2> <p>To declare a model that represents a Mongo document, create a class that inherits from <code>Document</code> and declare each of the fields.</p> <pre data-language=\"python\">import mongoengine as me\n\nclass Movie(me.Document):\n    title = me.StringField(required=True)\n    year = me.IntField()\n    rated = me.StringField()\n    director = me.StringField()\n    actors = me.ListField()\n</pre> <p>If the document has nested fields, use <code>EmbeddedDocument</code> to defined the fields of the embedded document and <code>EmbeddedDocumentField</code> to declare it on the parent document.</p> <pre data-language=\"python\">class Imdb(me.EmbeddedDocument):\n    imdb_id = me.StringField()\n    rating = me.DecimalField()\n    votes = me.IntField()\n\nclass Movie(me.Document):\n    ...\n    imdb = me.EmbeddedDocumentField(Imdb)\n</pre> </section> <section id=\"creating-data\"> <h2>Creating Data</h2> <p>Instantiate your document class with keyword arguments for the fields. You can also assign values to the field attributes after instantiation. Then call <code>doc.save()</code>.</p> <pre data-language=\"python\">bttf = Movie(title=\"Back To The Future\", year=1985)\nbttf.actors = [\n    \"Michael J. Fox\",\n    \"Christopher Lloyd\"\n]\nbttf.imdb = Imdb(imdb_id=\"tt0088763\", rating=8.5)\nbttf.save()\n</pre> </section> <section id=\"queries\"> <h2>Queries</h2> <p>Use the class <code>objects</code> attribute to make queries. A keyword argument looks for an equal value on the field.</p> <pre data-language=\"python\">bttf = Movies.objects(title=\"Back To The Future\").get_or_404()\n</pre> <p>Query operators may be used by concatenating them with the field name using a double-underscore. <code>objects</code>, and queries returned by calling it, are iterable.</p> <pre data-language=\"python\">some_theron_movie = Movie.objects(actors__in=[\"Charlize Theron\"]).first()\n\nfor recents in Movie.objects(year__gte=2017):\n    print(recents.title)\n</pre> </section> <section id=\"documentation\"> <h2>Documentation</h2> <p>There are many more ways to define and query documents with MongoEngine. For more information, check out the <a class=\"reference external\" href=\"http://mongoengine.org\">official documentation</a>.</p> <p>Flask-MongoEngine adds helpful utilities on top of MongoEngine. Check out their <a class=\"reference external\" href=\"https://flask-mongoengine.readthedocs.io\">documentation</a> as well.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/mongoengine/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/mongoengine/</a>\n  </p>\n</div>\n","quickstart/index":"<h1>Quickstart</h1> <p>Eager to get started? This page gives a good introduction to Flask. Follow <a class=\"reference internal\" href=\"../installation/index\"><span class=\"doc\">Installation</span></a> to set up a project and install Flask first.</p> <section id=\"a-minimal-application\"> <h2>A Minimal Application</h2> <p>A minimal Flask application looks something like this:</p> <pre data-language=\"python\">from flask import Flask\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef hello_world():\n    return \"&lt;p&gt;Hello, World!&lt;/p&gt;\"\n</pre> <p>So what did that code do?</p> <ol class=\"arabic simple\"> <li>First we imported the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> class. An instance of this class will be our WSGI application.</li> <li>Next we create an instance of this class. The first argument is the name of the application’s module or package. <code>__name__</code> is a convenient shortcut for this that is appropriate for most cases. This is needed so that Flask knows where to look for resources such as templates and static files.</li> <li>We then use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator to tell Flask what URL should trigger our function.</li> <li>The function returns the message we want to display in the user’s browser. The default content type is HTML, so HTML in the string will be rendered by the browser.</li> </ol> <p>Save it as <code>hello.py</code> or something similar. Make sure to not call your application <code>flask.py</code> because this would conflict with Flask itself.</p> <p>To run the application, use the <code>flask</code> command or <code>python -m flask</code>. You need to tell the Flask where your application is with the <code>--app</code> option.</p> <pre data-language=\"text\">$ flask --app hello run\n * Serving Flask app 'hello'\n * Running on http://127.0.0.1:5000 (Press CTRL+C to quit)\n</pre> <div class=\"admonition-application-discovery-behavior admonition\"> <p class=\"admonition-title\">Application Discovery Behavior</p> <p>As a shortcut, if the file is named <code>app.py</code> or <code>wsgi.py</code>, you don’t have to use <code>--app</code>. See <a class=\"reference internal\" href=\"../cli/index\"><span class=\"doc\">Command Line Interface</span></a> for more details.</p> </div> <p>This launches a very simple builtin server, which is good enough for testing but probably not what you want to use in production. For deployment options see <a class=\"reference internal\" href=\"../deploying/index\"><span class=\"doc\">Deploying to Production</span></a>.</p> <p>Now head over to <a class=\"reference external\" href=\"http://127.0.0.1:5000/\">http://127.0.0.1:5000/</a>, and you should see your hello world greeting.</p> <p>If another program is already using port 5000, you’ll see <code>OSError: [Errno 98]</code> or <code>OSError: [WinError 10013]</code> when the server tries to start. See <a class=\"reference internal\" href=\"../server/index#address-already-in-use\"><span class=\"std std-ref\">Address already in use</span></a> for how to handle that.</p> <div class=\"admonition-externally-visible-server admonition\" id=\"public-server\"> <p class=\"admonition-title\">Externally Visible Server</p> <p>If you run the server you will notice that the server is only accessible from your own computer, not from any other in the network. This is the default because in debugging mode a user of the application can execute arbitrary Python code on your computer.</p> <p>If you have the debugger disabled or trust the users on your network, you can make the server publicly available simply by adding <code>--host=0.0.0.0</code> to the command line:</p> <pre data-language=\"python\">$ flask run --host=0.0.0.0\n</pre> <p>This tells your operating system to listen on all public IPs.</p> </div> </section> <section id=\"debug-mode\"> <h2>Debug Mode</h2> <p>The <code>flask run</code> command can do more than just start the development server. By enabling debug mode, the server will automatically reload if code changes, and will show an interactive debugger in the browser if an error occurs during a request.</p> <img alt=\"The interactive debugger in action.\" class=\"screenshot align-center\" src=\"https://flask.palletsprojects.com/en/stable/_images/debugger.png\"> <div class=\"admonition warning\"> <p class=\"admonition-title\">Warning</p> <p>The debugger allows executing arbitrary Python code from the browser. It is protected by a pin, but still represents a major security risk. Do not run the development server or debugger in a production environment.</p> </div> <p>To enable debug mode, use the <code>--debug</code> option.</p> <pre data-language=\"text\">$ flask --app hello run --debug\n * Serving Flask app 'hello'\n * Debug mode: on\n * Running on http://127.0.0.1:5000 (Press CTRL+C to quit)\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: nnn-nnn-nnn\n</pre> <p>See also:</p> <ul class=\"simple\"> <li>\n<a class=\"reference internal\" href=\"../server/index\"><span class=\"doc\">Development Server</span></a> and <a class=\"reference internal\" href=\"../cli/index\"><span class=\"doc\">Command Line Interface</span></a> for information about running in debug mode.</li> <li>\n<a class=\"reference internal\" href=\"../debugging/index\"><span class=\"doc\">Debugging Application Errors</span></a> for information about using the built-in debugger and other debuggers.</li> <li>\n<a class=\"reference internal\" href=\"../logging/index\"><span class=\"doc\">Logging</span></a> and <a class=\"reference internal\" href=\"../errorhandling/index\"><span class=\"doc\">Handling Application Errors</span></a> to log errors and display nice error pages.</li> </ul> </section> <section id=\"html-escaping\"> <h2>HTML Escaping</h2> <p>When returning HTML (the default response type in Flask), any user-provided values rendered in the output must be escaped to protect from injection attacks. HTML templates rendered with Jinja, introduced later, will do this automatically.</p> <p><code>escape()</code>, shown here, can be used manually. It is omitted in most examples for brevity, but you should always be aware of how you’re using untrusted data.</p> <pre data-language=\"python\">from markupsafe import escape\n\n@app.route(\"/&lt;name&gt;\")\ndef hello(name):\n    return f\"Hello, {escape(name)}!\"\n</pre> <p>If a user managed to submit the name <code>&lt;script&gt;alert(\"bad\")&lt;/script&gt;</code>, escaping causes it to be rendered as text, rather than running the script in the user’s browser.</p> <p><code>&lt;name&gt;</code> in the route captures a value from the URL and passes it to the view function. These variable rules are explained below.</p> </section> <section id=\"routing\"> <h2>Routing</h2> <p>Modern web applications use meaningful URLs to help users. Users are more likely to like a page and come back if the page uses a meaningful URL they can remember and use to directly visit a page.</p> <p>Use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator to bind a function to a URL.</p> <pre data-language=\"python\">@app.route('/')\ndef index():\n    return 'Index Page'\n\n@app.route('/hello')\ndef hello():\n    return 'Hello, World'\n</pre> <p>You can do more! You can make parts of the URL dynamic and attach multiple rules to a function.</p> <section id=\"variable-rules\"> <h3>Variable Rules</h3> <p>You can add variable sections to a URL by marking sections with <code>&lt;variable_name&gt;</code>. Your function then receives the <code>&lt;variable_name&gt;</code> as a keyword argument. Optionally, you can use a converter to specify the type of the argument like <code>&lt;converter:variable_name&gt;</code>.</p> <pre data-language=\"python\">from markupsafe import escape\n\n@app.route('/user/&lt;username&gt;')\ndef show_user_profile(username):\n    # show the user profile for that user\n    return f'User {escape(username)}'\n\n@app.route('/post/&lt;int:post_id&gt;')\ndef show_post(post_id):\n    # show the post with the given id, the id is an integer\n    return f'Post {post_id}'\n\n@app.route('/path/&lt;path:subpath&gt;')\ndef show_subpath(subpath):\n    # show the subpath after /path/\n    return f'Subpath {escape(subpath)}'\n</pre> <p>Converter types:</p> <table class=\"docutils align-default\">  <tr>\n<td><p><code>string</code></p></td> <td><p>(default) accepts any text without a slash</p></td> </tr> <tr>\n<td><p><code>int</code></p></td> <td><p>accepts positive integers</p></td> </tr> <tr>\n<td><p><code>float</code></p></td> <td><p>accepts positive floating point values</p></td> </tr> <tr>\n<td><p><code>path</code></p></td> <td><p>like <code>string</code> but also accepts slashes</p></td> </tr> <tr>\n<td><p><code>uuid</code></p></td> <td><p>accepts UUID strings</p></td> </tr>  </table> </section> <section id=\"unique-urls-redirection-behavior\"> <h3>Unique URLs / Redirection Behavior</h3> <p>The following two rules differ in their use of a trailing slash.</p> <pre data-language=\"python\">@app.route('/projects/')\ndef projects():\n    return 'The project page'\n\n@app.route('/about')\ndef about():\n    return 'The about page'\n</pre> <p>The canonical URL for the <code>projects</code> endpoint has a trailing slash. It’s similar to a folder in a file system. If you access the URL without a trailing slash (<code>/projects</code>), Flask redirects you to the canonical URL with the trailing slash (<code>/projects/</code>).</p> <p>The canonical URL for the <code>about</code> endpoint does not have a trailing slash. It’s similar to the pathname of a file. Accessing the URL with a trailing slash (<code>/about/</code>) produces a 404 “Not Found” error. This helps keep URLs unique for these resources, which helps search engines avoid indexing the same page twice.</p> </section> <section id=\"url-building\"> <h3 id=\"id1\">URL Building</h3> <p>To build a URL to a specific function, use the <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> function. It accepts the name of the function as its first argument and any number of keyword arguments, each corresponding to a variable part of the URL rule. Unknown variable parts are appended to the URL as query parameters.</p> <p>Why would you want to build URLs using the URL reversing function <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> instead of hard-coding them into your templates?</p> <ol class=\"arabic simple\"> <li>Reversing is often more descriptive than hard-coding the URLs.</li> <li>You can change your URLs in one go instead of needing to remember to manually change hard-coded URLs.</li> <li>URL building handles escaping of special characters transparently.</li> <li>The generated paths are always absolute, avoiding unexpected behavior of relative paths in browsers.</li> <li>If your application is placed outside the URL root, for example, in <code>/myapplication</code> instead of <code>/</code>, <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> properly handles that for you.</li> </ol> <p>For example, here we use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> method to try out <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a>. <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> tells Flask to behave as though it’s handling a request even while we use a Python shell. See <a class=\"reference internal\" href=\"#context-locals\"><span class=\"std std-ref\">Context Locals</span></a>.</p> <pre data-language=\"python\">from flask import url_for\n\n@app.route('/')\ndef index():\n    return 'index'\n\n@app.route('/login')\ndef login():\n    return 'login'\n\n@app.route('/user/&lt;username&gt;')\ndef profile(username):\n    return f'{username}\\'s profile'\n\nwith app.test_request_context():\n    print(url_for('index'))\n    print(url_for('login'))\n    print(url_for('login', next='/'))\n    print(url_for('profile', username='John Doe'))\n</pre> <pre data-language=\"text\">/\n/login\n/login?next=/\n/user/John%20Doe\n</pre> </section> <section id=\"http-methods\"> <h3>HTTP Methods</h3> <p>Web applications use different HTTP methods when accessing URLs. You should familiarize yourself with the HTTP methods as you work with Flask. By default, a route only answers to <code>GET</code> requests. You can use the <code>methods</code> argument of the <a class=\"reference internal\" href=\"../api/index#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator to handle different HTTP methods.</p> <pre data-language=\"python\">from flask import request\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    if request.method == 'POST':\n        return do_the_login()\n    else:\n        return show_the_login_form()\n</pre> <p>The example above keeps all methods for the route within one function, which can be useful if each part uses some common data.</p> <p>You can also separate views for different methods into different functions. Flask provides a shortcut for decorating such routes with <a class=\"reference internal\" href=\"../api/index#flask.Flask.get\" title=\"flask.Flask.get\"><code>get()</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.Flask.post\" title=\"flask.Flask.post\"><code>post()</code></a>, etc. for each common HTTP method.</p> <pre data-language=\"python\">@app.get('/login')\ndef login_get():\n    return show_the_login_form()\n\n@app.post('/login')\ndef login_post():\n    return do_the_login()\n</pre> <p>If <code>GET</code> is present, Flask automatically adds support for the <code>HEAD</code> method and handles <code>HEAD</code> requests according to the <a class=\"reference external\" href=\"https://www.ietf.org/rfc/rfc2068.txt\">HTTP RFC</a>. Likewise, <code>OPTIONS</code> is automatically implemented for you.</p> </section> </section> <section id=\"static-files\"> <h2>Static Files</h2> <p>Dynamic web applications also need static files. That’s usually where the CSS and JavaScript files are coming from. Ideally your web server is configured to serve them for you, but during development Flask can do that as well. Just create a folder called <code>static</code> in your package or next to your module and it will be available at <code>/static</code> on the application.</p> <p>To generate URLs for static files, use the special <code>'static'</code> endpoint name:</p> <pre data-language=\"python\">url_for('static', filename='style.css')\n</pre> <p>The file has to be stored on the filesystem as <code>static/style.css</code>.</p> </section> <section id=\"rendering-templates\"> <h2>Rendering Templates</h2> <p>Generating HTML from within Python is not fun, and actually pretty cumbersome because you have to do the HTML escaping on your own to keep the application secure. Because of that Flask configures the <a class=\"reference external\" href=\"https://palletsprojects.com/p/jinja/\">Jinja2</a> template engine for you automatically.</p> <p>Templates can be used to generate any type of text file. For web applications, you’ll primarily be generating HTML pages, but you can also generate markdown, plain text for emails, and anything else.</p> <p>For a reference to HTML, CSS, and other web APIs, use the <a class=\"reference external\" href=\"https://developer.mozilla.org/\">MDN Web Docs</a>.</p> <p>To render a template you can use the <a class=\"reference internal\" href=\"../api/index#flask.render_template\" title=\"flask.render_template\"><code>render_template()</code></a> method. All you have to do is provide the name of the template and the variables you want to pass to the template engine as keyword arguments. Here’s a simple example of how to render a template:</p> <pre data-language=\"python\">from flask import render_template\n\n@app.route('/hello/')\n@app.route('/hello/&lt;name&gt;')\ndef hello(name=None):\n    return render_template('hello.html', person=name)\n</pre> <p>Flask will look for templates in the <code>templates</code> folder. So if your application is a module, this folder is next to that module, if it’s a package it’s actually inside your package:</p> <p><strong>Case 1</strong>: a module:</p> <pre data-language=\"python\">/application.py\n/templates\n    /hello.html\n</pre> <p><strong>Case 2</strong>: a package:</p> <pre data-language=\"python\">/application\n    /__init__.py\n    /templates\n        /hello.html\n</pre> <p>For templates you can use the full power of Jinja2 templates. Head over to the official <a class=\"reference external\" href=\"https://jinja.palletsprojects.com/templates/\">Jinja2 Template Documentation</a> for more information.</p> <p>Here is an example template:</p> <pre data-language=\"html+jinja\">&lt;!doctype html&gt;\n&lt;title&gt;Hello from Flask&lt;/title&gt;\n{% if person %}\n  &lt;h1&gt;Hello {{ person }}!&lt;/h1&gt;\n{% else %}\n  &lt;h1&gt;Hello, World!&lt;/h1&gt;\n{% endif %}\n</pre> <p>Inside templates you also have access to the <a class=\"reference internal\" href=\"../api/index#flask.Flask.config\" title=\"flask.Flask.config\"><code>config</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a>, <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> <a class=\"footnote-reference brackets\" href=\"#id3\" id=\"id2\" role=\"doc-noteref\"><span class=\"fn-bracket\">[</span>1<span class=\"fn-bracket\">]</span></a> objects as well as the <a class=\"reference internal\" href=\"../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> and <a class=\"reference internal\" href=\"../api/index#flask.get_flashed_messages\" title=\"flask.get_flashed_messages\"><code>get_flashed_messages()</code></a> functions.</p> <p>Templates are especially useful if inheritance is used. If you want to know how that works, see <a class=\"reference internal\" href=\"../patterns/templateinheritance/index\"><span class=\"doc\">Template Inheritance</span></a>. Basically template inheritance makes it possible to keep certain elements on each page (like header, navigation and footer).</p> <p>Automatic escaping is enabled, so if <code>person</code> contains HTML it will be escaped automatically. If you can trust a variable and you know that it will be safe HTML (for example because it came from a module that converts wiki markup to HTML) you can mark it as safe by using the <code>Markup</code> class or by using the <code>|safe</code> filter in the template. Head over to the Jinja 2 documentation for more examples.</p> <p>Here is a basic introduction to how the <code>Markup</code> class works:</p> <pre data-language=\"python\">&gt;&gt;&gt; from markupsafe import Markup\n&gt;&gt;&gt; Markup('&lt;strong&gt;Hello %s!&lt;/strong&gt;') % '&lt;blink&gt;hacker&lt;/blink&gt;'\nMarkup('&lt;strong&gt;Hello &amp;lt;blink&amp;gt;hacker&amp;lt;/blink&amp;gt;!&lt;/strong&gt;')\n&gt;&gt;&gt; Markup.escape('&lt;blink&gt;hacker&lt;/blink&gt;')\nMarkup('&amp;lt;blink&amp;gt;hacker&amp;lt;/blink&amp;gt;')\n&gt;&gt;&gt; Markup('&lt;em&gt;Marked up&lt;/em&gt; &amp;raquo; HTML').striptags()\n'Marked up » HTML'\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.5: </span>Autoescaping is no longer enabled for all templates. The following extensions for templates trigger autoescaping: <code>.html</code>, <code>.htm</code>, <code>.xml</code>, <code>.xhtml</code>. Templates loaded from a string will have autoescaping disabled.</p> </div> </details><aside class=\"footnote-list brackets\"> <aside class=\"footnote brackets\" id=\"id3\" role=\"doc-footnote\"> <span class=\"label\"><span class=\"fn-bracket\">[</span><a role=\"doc-backlink\" href=\"#id2\">1</a><span class=\"fn-bracket\">]</span></span> <p>Unsure what that <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a> object is? It’s something in which you can store information for your own needs. See the documentation for <a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>flask.g</code></a> and <a class=\"reference internal\" href=\"../patterns/sqlite3/index\"><span class=\"doc\">Using SQLite 3 with Flask</span></a>.</p> </aside> </aside> </section> <section id=\"accessing-request-data\"> <h2>Accessing Request Data</h2> <p>For web applications it’s crucial to react to the data a client sends to the server. In Flask this information is provided by the global <a class=\"reference internal\" href=\"../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> object. If you have some experience with Python you might be wondering how that object can be global and how Flask manages to still be threadsafe. The answer is context locals:</p> <section id=\"context-locals\"> <h3 id=\"id4\">Context Locals</h3> <div class=\"admonition-insider-information admonition\"> <p class=\"admonition-title\">Insider Information</p> <p>If you want to understand how that works and how you can implement tests with context locals, read this section, otherwise just skip it.</p> </div> <p>Certain objects in Flask are global objects, but not of the usual kind. These objects are actually proxies to objects that are local to a specific context. What a mouthful. But that is actually quite easy to understand.</p> <p>Imagine the context being the handling thread. A request comes in and the web server decides to spawn a new thread (or something else, the underlying object is capable of dealing with concurrency systems other than threads). When Flask starts its internal request handling it figures out that the current thread is the active context and binds the current application and the WSGI environments to that context (thread). It does that in an intelligent way so that one application can invoke another application without breaking.</p> <p>So what does this mean to you? Basically you can completely ignore that this is the case unless you are doing something like unit testing. You will notice that code which depends on a request object will suddenly break because there is no request object. The solution is creating a request object yourself and binding it to the context. The easiest solution for unit testing is to use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> context manager. In combination with the <code>with</code> statement it will bind a test request so that you can interact with it. Here is an example:</p> <pre data-language=\"python\">from flask import request\n\nwith app.test_request_context('/hello', method='POST'):\n    # now you can do something with the request until the\n    # end of the with block, such as basic assertions:\n    assert request.path == '/hello'\n    assert request.method == 'POST'\n</pre> <p>The other possibility is passing a whole WSGI environment to the <a class=\"reference internal\" href=\"../api/index#flask.Flask.request_context\" title=\"flask.Flask.request_context\"><code>request_context()</code></a> method:</p> <pre data-language=\"python\">with app.request_context(environ):\n    assert request.method == 'POST'\n</pre> </section> <section id=\"the-request-object\"> <h3>The Request Object</h3> <p>The request object is documented in the API section and we will not cover it here in detail (see <a class=\"reference internal\" href=\"../api/index#flask.Request\" title=\"flask.Request\"><code>Request</code></a>). Here is a broad overview of some of the most common operations. First of all you have to import it from the <code>flask</code> module:</p> <pre data-language=\"python\">from flask import request\n</pre> <p>The current request method is available by using the <a class=\"reference internal\" href=\"../api/index#flask.Request.method\" title=\"flask.Request.method\"><code>method</code></a> attribute. To access form data (data transmitted in a <code>POST</code> or <code>PUT</code> request) you can use the <a class=\"reference internal\" href=\"../api/index#flask.Request.form\" title=\"flask.Request.form\"><code>form</code></a> attribute. Here is a full example of the two attributes mentioned above:</p> <pre data-language=\"python\">@app.route('/login', methods=['POST', 'GET'])\ndef login():\n    error = None\n    if request.method == 'POST':\n        if valid_login(request.form['username'],\n                       request.form['password']):\n            return log_the_user_in(request.form['username'])\n        else:\n            error = 'Invalid username/password'\n    # the code below is executed if the request method\n    # was GET or the credentials were invalid\n    return render_template('login.html', error=error)\n</pre> <p>What happens if the key does not exist in the <code>form</code> attribute? In that case a special <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#KeyError\" title=\"(in Python v3.13)\"><code>KeyError</code></a> is raised. You can catch it like a standard <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#KeyError\" title=\"(in Python v3.13)\"><code>KeyError</code></a> but if you don’t do that, a HTTP 400 Bad Request error page is shown instead. So for many situations you don’t have to deal with that problem.</p> <p>To access parameters submitted in the URL (<code>?key=value</code>) you can use the <a class=\"reference internal\" href=\"../api/index#flask.Request.args\" title=\"flask.Request.args\"><code>args</code></a> attribute:</p> <pre data-language=\"python\">searchword = request.args.get('key', '')\n</pre> <p>We recommend accessing URL parameters with <code>get</code> or by catching the <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#KeyError\" title=\"(in Python v3.13)\"><code>KeyError</code></a> because users might change the URL and presenting them a 400 bad request page in that case is not user friendly.</p> <p>For a full list of methods and attributes of the request object, head over to the <a class=\"reference internal\" href=\"../api/index#flask.Request\" title=\"flask.Request\"><code>Request</code></a> documentation.</p> </section> <section id=\"file-uploads\"> <h3>File Uploads</h3> <p>You can handle uploaded files with Flask easily. Just make sure not to forget to set the <code>enctype=\"multipart/form-data\"</code> attribute on your HTML form, otherwise the browser will not transmit your files at all.</p> <p>Uploaded files are stored in memory or at a temporary location on the filesystem. You can access those files by looking at the <code>files</code> attribute on the request object. Each uploaded file is stored in that dictionary. It behaves just like a standard Python <code>file</code> object, but it also has a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.FileStorage.save\" title=\"(in Werkzeug v3.1.x)\"><code>save()</code></a> method that allows you to store that file on the filesystem of the server. Here is a simple example showing how that works:</p> <pre data-language=\"python\">from flask import request\n\n@app.route('/upload', methods=['GET', 'POST'])\ndef upload_file():\n    if request.method == 'POST':\n        f = request.files['the_file']\n        f.save('/var/www/uploads/uploaded_file.txt')\n    ...\n</pre> <p>If you want to know how the file was named on the client before it was uploaded to your application, you can access the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.FileStorage.filename\" title=\"(in Werkzeug v3.1.x)\"><code>filename</code></a> attribute. However please keep in mind that this value can be forged so never ever trust that value. If you want to use the filename of the client to store the file on the server, pass it through the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.utils.secure_filename\" title=\"(in Werkzeug v3.1.x)\"><code>secure_filename()</code></a> function that Werkzeug provides for you:</p> <pre data-language=\"python\">from werkzeug.utils import secure_filename\n\n@app.route('/upload', methods=['GET', 'POST'])\ndef upload_file():\n    if request.method == 'POST':\n        file = request.files['the_file']\n        file.save(f\"/var/www/uploads/{secure_filename(file.filename)}\")\n    ...\n</pre> <p>For some better examples, see <a class=\"reference internal\" href=\"../patterns/fileuploads/index\"><span class=\"doc\">Uploading Files</span></a>.</p> </section> <section id=\"cookies\"> <h3>Cookies</h3> <p>To access cookies you can use the <a class=\"reference internal\" href=\"../api/index#flask.Request.cookies\" title=\"flask.Request.cookies\"><code>cookies</code></a> attribute. To set cookies you can use the <a class=\"reference internal\" href=\"../api/index#flask.Response.set_cookie\" title=\"flask.Response.set_cookie\"><code>set_cookie</code></a> method of response objects. The <a class=\"reference internal\" href=\"../api/index#flask.Request.cookies\" title=\"flask.Request.cookies\"><code>cookies</code></a> attribute of request objects is a dictionary with all the cookies the client transmits. If you want to use sessions, do not use the cookies directly but instead use the <a class=\"reference internal\" href=\"#sessions\"><span class=\"std std-ref\">Sessions</span></a> in Flask that add some security on top of cookies for you.</p> <p>Reading cookies:</p> <pre data-language=\"python\">from flask import request\n\n@app.route('/')\ndef index():\n    username = request.cookies.get('username')\n    # use cookies.get(key) instead of cookies[key] to not get a\n    # KeyError if the cookie is missing.\n</pre> <p>Storing cookies:</p> <pre data-language=\"python\">from flask import make_response\n\n@app.route('/')\ndef index():\n    resp = make_response(render_template(...))\n    resp.set_cookie('username', 'the username')\n    return resp\n</pre> <p>Note that cookies are set on response objects. Since you normally just return strings from the view functions Flask will convert them into response objects for you. If you explicitly want to do that you can use the <a class=\"reference internal\" href=\"../api/index#flask.make_response\" title=\"flask.make_response\"><code>make_response()</code></a> function and then modify it.</p> <p>Sometimes you might want to set a cookie at a point where the response object does not exist yet. This is possible by utilizing the <a class=\"reference internal\" href=\"../patterns/deferredcallbacks/index\"><span class=\"doc\">Deferred Request Callbacks</span></a> pattern.</p> <p>For this also see <a class=\"reference internal\" href=\"#about-responses\"><span class=\"std std-ref\">About Responses</span></a>.</p> </section> </section> <section id=\"redirects-and-errors\"> <h2>Redirects and Errors</h2> <p>To redirect a user to another endpoint, use the <a class=\"reference internal\" href=\"../api/index#flask.redirect\" title=\"flask.redirect\"><code>redirect()</code></a> function; to abort a request early with an error code, use the <a class=\"reference internal\" href=\"../api/index#flask.abort\" title=\"flask.abort\"><code>abort()</code></a> function:</p> <pre data-language=\"python\">from flask import abort, redirect, url_for\n\n@app.route('/')\ndef index():\n    return redirect(url_for('login'))\n\n@app.route('/login')\ndef login():\n    abort(401)\n    this_is_never_executed()\n</pre> <p>This is a rather pointless example because a user will be redirected from the index to a page they cannot access (401 means access denied) but it shows how that works.</p> <p>By default a black and white error page is shown for each error code. If you want to customize the error page, you can use the <a class=\"reference internal\" href=\"../api/index#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> decorator:</p> <pre data-language=\"python\">from flask import render_template\n\n@app.errorhandler(404)\ndef page_not_found(error):\n    return render_template('page_not_found.html'), 404\n</pre> <p>Note the <code>404</code> after the <a class=\"reference internal\" href=\"../api/index#flask.render_template\" title=\"flask.render_template\"><code>render_template()</code></a> call. This tells Flask that the status code of that page should be 404 which means not found. By default 200 is assumed which translates to: all went well.</p> <p>See <a class=\"reference internal\" href=\"../errorhandling/index\"><span class=\"doc\">Handling Application Errors</span></a> for more details.</p> </section> <section id=\"about-responses\"> <h2 id=\"id5\">About Responses</h2> <p>The return value from a view function is automatically converted into a response object for you. If the return value is a string it’s converted into a response object with the string as response body, a <code>200 OK</code> status code and a <em class=\"mimetype\">text/html</em> mimetype. If the return value is a dict or list, <code>jsonify()</code> is called to produce a response. The logic that Flask applies to converting return values into response objects is as follows:</p> <ol class=\"arabic simple\"> <li>If a response object of the correct type is returned it’s directly returned from the view.</li> <li>If it’s a string, a response object is created with that data and the default parameters.</li> <li>If it’s an iterator or generator returning strings or bytes, it is treated as a streaming response.</li> <li>If it’s a dict or list, a response object is created using <a class=\"reference internal\" href=\"../api/index#flask.json.jsonify\" title=\"flask.json.jsonify\"><code>jsonify()</code></a>.</li> <li>If a tuple is returned the items in the tuple can provide extra information. Such tuples have to be in the form <code>(response, status)</code>, <code>(response, headers)</code>, or <code>(response, status, headers)</code>. The <code>status</code> value will override the status code and <code>headers</code> can be a list or dictionary of additional header values.</li> <li>If none of that works, Flask will assume the return value is a valid WSGI application and convert that into a response object.</li> </ol> <p>If you want to get hold of the resulting response object inside the view you can use the <a class=\"reference internal\" href=\"../api/index#flask.make_response\" title=\"flask.make_response\"><code>make_response()</code></a> function.</p> <p>Imagine you have a view like this:</p> <pre data-language=\"python\">from flask import render_template\n\n@app.errorhandler(404)\ndef not_found(error):\n    return render_template('error.html'), 404\n</pre> <p>You just need to wrap the return expression with <a class=\"reference internal\" href=\"../api/index#flask.make_response\" title=\"flask.make_response\"><code>make_response()</code></a> and get the response object to modify it, then return it:</p> <pre data-language=\"python\">from flask import make_response\n\n@app.errorhandler(404)\ndef not_found(error):\n    resp = make_response(render_template('error.html'), 404)\n    resp.headers['X-Something'] = 'A value'\n    return resp\n</pre> <section id=\"apis-with-json\"> <h3>APIs with JSON</h3> <p>A common response format when writing an API is JSON. It’s easy to get started writing such an API with Flask. If you return a <code>dict</code> or <code>list</code> from a view, it will be converted to a JSON response.</p> <pre data-language=\"python\">@app.route(\"/me\")\ndef me_api():\n    user = get_current_user()\n    return {\n        \"username\": user.username,\n        \"theme\": user.theme,\n        \"image\": url_for(\"user_image\", filename=user.image),\n    }\n\n@app.route(\"/users\")\ndef users_api():\n    users = get_all_users()\n    return [user.to_json() for user in users]\n</pre> <p>This is a shortcut to passing the data to the <a class=\"reference internal\" href=\"../api/index#flask.json.jsonify\" title=\"flask.json.jsonify\"><code>jsonify()</code></a> function, which will serialize any supported JSON data type. That means that all the data in the dict or list must be JSON serializable.</p> <p>For complex types such as database models, you’ll want to use a serialization library to convert the data to valid JSON types first. There are many serialization libraries and Flask API extensions maintained by the community that support more complex applications.</p> </section> </section> <section id=\"sessions\"> <h2 id=\"id6\">Sessions</h2> <p>In addition to the request object there is also a second object called <a class=\"reference internal\" href=\"../api/index#flask.session\" title=\"flask.session\"><code>session</code></a> which allows you to store information specific to a user from one request to the next. This is implemented on top of cookies for you and signs the cookies cryptographically. What this means is that the user could look at the contents of your cookie but not modify it, unless they know the secret key used for signing.</p> <p>In order to use sessions you have to set a secret key. Here is how sessions work:</p> <pre data-language=\"python\">from flask import session\n\n# Set the secret key to some random bytes. Keep this really secret!\napp.secret_key = b'_5#y2L\"F4Q8z\\n\\xec]/'\n\n@app.route('/')\ndef index():\n    if 'username' in session:\n        return f'Logged in as {session[\"username\"]}'\n    return 'You are not logged in'\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    if request.method == 'POST':\n        session['username'] = request.form['username']\n        return redirect(url_for('index'))\n    return '''\n        &lt;form method=\"post\"&gt;\n            &lt;p&gt;&lt;input type=text name=username&gt;\n            &lt;p&gt;&lt;input type=submit value=Login&gt;\n        &lt;/form&gt;\n    '''\n\n@app.route('/logout')\ndef logout():\n    # remove the username from the session if it's there\n    session.pop('username', None)\n    return redirect(url_for('index'))\n</pre> <div class=\"admonition-how-to-generate-good-secret-keys admonition\"> <p class=\"admonition-title\">How to generate good secret keys</p> <p>A secret key should be as random as possible. Your operating system has ways to generate pretty random data based on a cryptographic random generator. Use the following command to quickly generate a value for <code>Flask.secret_key</code> (or <a class=\"reference internal\" href=\"../config/index#SECRET_KEY\" title=\"SECRET_KEY\"><code>SECRET_KEY</code></a>):</p> <pre data-language=\"python\">$ python -c 'import secrets; print(secrets.token_hex())'\n'192b9bdd22ab9ed4d12e236c78afcb9a393ec15f71bbf5dc987d54727823bcbf'\n</pre> </div> <p>A note on cookie-based sessions: Flask will take the values you put into the session object and serialize them into a cookie. If you are finding some values do not persist across requests, cookies are indeed enabled, and you are not getting a clear error message, check the size of the cookie in your page responses compared to the size supported by web browsers.</p> <p>Besides the default client-side based sessions, if you want to handle sessions on the server-side instead, there are several Flask extensions that support this.</p> </section> <section id=\"message-flashing\"> <h2>Message Flashing</h2> <p>Good applications and user interfaces are all about feedback. If the user does not get enough feedback they will probably end up hating the application. Flask provides a really simple way to give feedback to a user with the flashing system. The flashing system basically makes it possible to record a message at the end of a request and access it on the next (and only the next) request. This is usually combined with a layout template to expose the message.</p> <p>To flash a message use the <a class=\"reference internal\" href=\"../api/index#flask.flash\" title=\"flask.flash\"><code>flash()</code></a> method, to get hold of the messages you can use <a class=\"reference internal\" href=\"../api/index#flask.get_flashed_messages\" title=\"flask.get_flashed_messages\"><code>get_flashed_messages()</code></a> which is also available in the templates. See <a class=\"reference internal\" href=\"../patterns/flashing/index\"><span class=\"doc\">Message Flashing</span></a> for a full example.</p> </section> <section id=\"logging\"> <h2>Logging</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.3.</span></p> </div> </details><p>Sometimes you might be in a situation where you deal with data that should be correct, but actually is not. For example you may have some client-side code that sends an HTTP request to the server but it’s obviously malformed. This might be caused by a user tampering with the data, or the client code failing. Most of the time it’s okay to reply with <code>400 Bad Request</code> in that situation, but sometimes that won’t do and the code has to continue working.</p> <p>You may still want to log that something fishy happened. This is where loggers come in handy. As of Flask 0.3 a logger is preconfigured for you to use.</p> <p>Here are some example log calls:</p> <pre data-language=\"python\">app.logger.debug('A value for debugging')\napp.logger.warning('A warning occurred (%d apples)', 42)\napp.logger.error('An error occurred')\n</pre> <p>The attached <a class=\"reference internal\" href=\"../api/index#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>logger</code></a> is a standard logging <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#logging.Logger\" title=\"(in Python v3.13)\"><code>Logger</code></a>, so head over to the official <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#module-logging\" title=\"(in Python v3.13)\"><code>logging</code></a> docs for more information.</p> <p>See <a class=\"reference internal\" href=\"../errorhandling/index\"><span class=\"doc\">Handling Application Errors</span></a>.</p> </section> <section id=\"hooking-in-wsgi-middleware\"> <h2>Hooking in WSGI Middleware</h2> <p>To add WSGI middleware to your Flask application, wrap the application’s <code>wsgi_app</code> attribute. For example, to apply Werkzeug’s <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/middleware/proxy_fix/#werkzeug.middleware.proxy_fix.ProxyFix\" title=\"(in Werkzeug v3.1.x)\"><code>ProxyFix</code></a> middleware for running behind Nginx:</p> <pre data-language=\"python\">from werkzeug.middleware.proxy_fix import ProxyFix\napp.wsgi_app = ProxyFix(app.wsgi_app)\n</pre> <p>Wrapping <code>app.wsgi_app</code> instead of <code>app</code> means that <code>app</code> still points at your Flask application, not at the middleware, so you can continue to use and configure <code>app</code> directly.</p> </section> <section id=\"using-flask-extensions\"> <h2>Using Flask Extensions</h2> <p>Extensions are packages that help you accomplish common tasks. For example, Flask-SQLAlchemy provides SQLAlchemy support that makes it simple and easy to use with Flask.</p> <p>For more on Flask extensions, see <a class=\"reference internal\" href=\"../extensions/index\"><span class=\"doc\">Extensions</span></a>.</p> </section> <section id=\"deploying-to-a-web-server\"> <h2>Deploying to a Web Server</h2> <p>Ready to deploy your new Flask app? See <a class=\"reference internal\" href=\"../deploying/index\"><span class=\"doc\">Deploying to Production</span></a>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/quickstart/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/quickstart/</a>\n  </p>\n</div>\n","config/index":"<h1>Configuration Handling</h1> <p>Applications need some kind of configuration. There are different settings you might want to change depending on the application environment like toggling the debug mode, setting the secret key, and other such environment-specific things.</p> <p>The way Flask is designed usually requires the configuration to be available when the application starts up. You can hard code the configuration in the code, which for many small applications is not actually that bad, but there are better ways.</p> <p>Independent of how you load your config, there is a config object available which holds the loaded configuration values: The <a class=\"reference internal\" href=\"../api/index#flask.Flask.config\" title=\"flask.Flask.config\"><code>config</code></a> attribute of the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> object. This is the place where Flask itself puts certain configuration values and also where extensions can put their configuration values. But this is also where you can have your own configuration.</p> <section id=\"configuration-basics\"> <h2>Configuration Basics</h2> <p>The <a class=\"reference internal\" href=\"../api/index#flask.Flask.config\" title=\"flask.Flask.config\"><code>config</code></a> is actually a subclass of a dictionary and can be modified just like any dictionary:</p> <pre data-language=\"python\">app = Flask(__name__)\napp.config['TESTING'] = True\n</pre> <p>Certain configuration values are also forwarded to the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> object so you can read and write them from there:</p> <pre data-language=\"python\">app.testing = True\n</pre> <p>To update multiple keys at once you can use the <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict.update\" title=\"(in Python v3.13)\"><code>dict.update()</code></a> method:</p> <pre data-language=\"python\">app.config.update(\n    TESTING=True,\n    SECRET_KEY='192b9bdd22ab9ed4d12e236c78afcb9a393ec15f71bbf5dc987d54727823bcbf'\n)\n</pre> </section> <section id=\"debug-mode\"> <h2>Debug Mode</h2> <p>The <a class=\"reference internal\" href=\"#DEBUG\" title=\"DEBUG\"><code>DEBUG</code></a> config value is special because it may behave inconsistently if changed after the app has begun setting up. In order to set debug mode reliably, use the <code>--debug</code> option on the <code>flask</code> or <code>flask run</code> command. <code>flask run</code> will use the interactive debugger and reloader by default in debug mode.</p> <pre data-language=\"text\">$ flask --app hello run --debug\n</pre> <p>Using the option is recommended. While it is possible to set <a class=\"reference internal\" href=\"#DEBUG\" title=\"DEBUG\"><code>DEBUG</code></a> in your config or code, this is strongly discouraged. It can’t be read early by the <code>flask run</code> command, and some systems or extensions may have already configured themselves based on a previous value.</p> </section> <section id=\"builtin-configuration-values\"> <h2>Builtin Configuration Values</h2> <p>The following configuration values are used internally by Flask:</p> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"DEBUG\">\n<code>DEBUG</code> </dt> <dd>\n<p>Whether debug mode is enabled. When using <code>flask run</code> to start the development server, an interactive debugger will be shown for unhandled exceptions, and the server will be reloaded when code changes. The <a class=\"reference internal\" href=\"../api/index#flask.Flask.debug\" title=\"flask.Flask.debug\"><code>debug</code></a> attribute maps to this config key. This is set with the <code>FLASK_DEBUG</code> environment variable. It may not behave as expected if set in code.</p> <p><strong>Do not enable debug mode when deploying in production.</strong></p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"TESTING\">\n<code>TESTING</code> </dt> <dd>\n<p>Enable testing mode. Exceptions are propagated rather than handled by the the app’s error handlers. Extensions may also change their behavior to facilitate easier testing. You should enable this in your own tests.</p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"PROPAGATE_EXCEPTIONS\">\n<code>PROPAGATE_EXCEPTIONS</code> </dt> <dd>\n<p>Exceptions are re-raised rather than being handled by the app’s error handlers. If not set, this is implicitly true if <code>TESTING</code> or <code>DEBUG</code> is enabled.</p> <p>Default: <code>None</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"TRAP_HTTP_EXCEPTIONS\">\n<code>TRAP_HTTP_EXCEPTIONS</code> </dt> <dd>\n<p>If there is no handler for an <code>HTTPException</code>-type exception, re-raise it to be handled by the interactive debugger instead of returning it as a simple error response.</p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"TRAP_BAD_REQUEST_ERRORS\">\n<code>TRAP_BAD_REQUEST_ERRORS</code> </dt> <dd>\n<p>Trying to access a key that doesn’t exist from request dicts like <code>args</code> and <code>form</code> will return a 400 Bad Request error page. Enable this to treat the error as an unhandled exception instead so that you get the interactive debugger. This is a more specific version of <code>TRAP_HTTP_EXCEPTIONS</code>. If unset, it is enabled in debug mode.</p> <p>Default: <code>None</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SECRET_KEY\">\n<code>SECRET_KEY</code> </dt> <dd>\n<p>A secret key that will be used for securely signing the session cookie and can be used for any other security related needs by extensions or your application. It should be a long random <code>bytes</code> or <code>str</code>. For example, copy the output of this to your config:</p> <pre data-language=\"python\">$ python -c 'import secrets; print(secrets.token_hex())'\n'192b9bdd22ab9ed4d12e236c78afcb9a393ec15f71bbf5dc987d54727823bcbf'\n</pre> <p><strong>Do not reveal the secret key when posting questions or committing code.</strong></p> <p>Default: <code>None</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SECRET_KEY_FALLBACKS\">\n<code>SECRET_KEY_FALLBACKS</code> </dt> <dd>\n<p>A list of old secret keys that can still be used for unsigning, most recent first. This allows a project to implement key rotation without invalidating active sessions or other recently-signed secrets.</p> <p>Keys should be removed after an appropriate period of time, as checking each additional key adds some overhead.</p> <p>Flask’s built-in secure cookie session supports this. Extensions that use <a class=\"reference internal\" href=\"#SECRET_KEY\" title=\"SECRET_KEY\"><code>SECRET_KEY</code></a> may not support this yet.</p> <p>Default: <code>None</code></p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_NAME\">\n<code>SESSION_COOKIE_NAME</code> </dt> <dd>\n<p>The name of the session cookie. Can be changed in case you already have a cookie with the same name.</p> <p>Default: <code>'session'</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_DOMAIN\">\n<code>SESSION_COOKIE_DOMAIN</code> </dt> <dd>\n<p>The value of the <code>Domain</code> parameter on the session cookie. If not set, browsers will only send the cookie to the exact domain it was set from. Otherwise, they will send it to any subdomain of the given value as well.</p> <p>Not setting this value is more restricted and secure than setting it.</p> <p>Default: <code>None</code></p> <div class=\"admonition warning\"> <p class=\"admonition-title\">Warning</p> <p>If this is changed after the browser created a cookie is created with one setting, it may result in another being created. Browsers may send send both in an undefined order. In that case, you may want to change <a class=\"reference internal\" href=\"#SESSION_COOKIE_NAME\" title=\"SESSION_COOKIE_NAME\"><code>SESSION_COOKIE_NAME</code></a> as well or otherwise invalidate old sessions.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Not set by default, does not fall back to <code>SERVER_NAME</code>.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_PATH\">\n<code>SESSION_COOKIE_PATH</code> </dt> <dd>\n<p>The path that the session cookie will be valid for. If not set, the cookie will be valid underneath <code>APPLICATION_ROOT</code> or <code>/</code> if that is not set.</p> <p>Default: <code>None</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_HTTPONLY\">\n<code>SESSION_COOKIE_HTTPONLY</code> </dt> <dd>\n<p>Browsers will not allow JavaScript access to cookies marked as “HTTP only” for security.</p> <p>Default: <code>True</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_SECURE\">\n<code>SESSION_COOKIE_SECURE</code> </dt> <dd>\n<p>Browsers will only send cookies with requests over HTTPS if the cookie is marked “secure”. The application must be served over HTTPS for this to make sense.</p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_PARTITIONED\">\n<code>SESSION_COOKIE_PARTITIONED</code> </dt> <dd>\n<p>Browsers will send cookies based on the top-level document’s domain, rather than only the domain of the document setting the cookie. This prevents third party cookies set in iframes from “leaking” between separate sites.</p> <p>Browsers are beginning to disallow non-partitioned third party cookies, so you need to mark your cookies partitioned if you expect them to work in such embedded situations.</p> <p>Enabling this implicitly enables <a class=\"reference internal\" href=\"#SESSION_COOKIE_SECURE\" title=\"SESSION_COOKIE_SECURE\"><code>SESSION_COOKIE_SECURE</code></a> as well, as it is only valid when served over HTTPS.</p> <p>Default: <code>False</code></p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_COOKIE_SAMESITE\">\n<code>SESSION_COOKIE_SAMESITE</code> </dt> <dd>\n<p>Restrict how cookies are sent with requests from external sites. Can be set to <code>'Lax'</code> (recommended) or <code>'Strict'</code>. See <a class=\"reference internal\" href=\"../web-security/index#security-cookie\"><span class=\"std std-ref\">Set-Cookie options</span></a>.</p> <p>Default: <code>None</code></p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 1.0.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"PERMANENT_SESSION_LIFETIME\">\n<code>PERMANENT_SESSION_LIFETIME</code> </dt> <dd>\n<p>If <code>session.permanent</code> is true, the cookie’s expiration will be set this number of seconds in the future. Can either be a <a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.timedelta\" title=\"(in Python v3.13)\"><code>datetime.timedelta</code></a> or an <code>int</code>.</p> <p>Flask’s default cookie implementation validates that the cryptographic signature is not older than this value.</p> <p>Default: <code>timedelta(days=31)</code> (<code>2678400</code> seconds)</p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SESSION_REFRESH_EACH_REQUEST\">\n<code>SESSION_REFRESH_EACH_REQUEST</code> </dt> <dd>\n<p>Control whether the cookie is sent with every response when <code>session.permanent</code> is true. Sending the cookie every time (the default) can more reliably keep the session from expiring, but uses more bandwidth. Non-permanent sessions are not affected.</p> <p>Default: <code>True</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"USE_X_SENDFILE\">\n<code>USE_X_SENDFILE</code> </dt> <dd>\n<p>When serving files, set the <code>X-Sendfile</code> header instead of serving the data with Flask. Some web servers, such as Apache, recognize this and serve the data more efficiently. This only makes sense when using such a server.</p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SEND_FILE_MAX_AGE_DEFAULT\">\n<code>SEND_FILE_MAX_AGE_DEFAULT</code> </dt> <dd>\n<p>When serving files, set the cache control max age to this number of seconds. Can be a <a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.timedelta\" title=\"(in Python v3.13)\"><code>datetime.timedelta</code></a> or an <code>int</code>. Override this value on a per-file basis using <a class=\"reference internal\" href=\"../api/index#flask.Flask.get_send_file_max_age\" title=\"flask.Flask.get_send_file_max_age\"><code>get_send_file_max_age()</code></a> on the application or blueprint.</p> <p>If <code>None</code>, <code>send_file</code> tells the browser to use conditional requests will be used instead of a timed cache, which is usually preferable.</p> <p>Default: <code>None</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"TRUSTED_HOSTS\">\n<code>TRUSTED_HOSTS</code> </dt> <dd>\n<p>Validate <a class=\"reference internal\" href=\"../api/index#flask.Request.host\" title=\"flask.Request.host\"><code>Request.host</code></a> and other attributes that use it against these trusted values. Raise a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.SecurityError\" title=\"(in Werkzeug v3.1.x)\"><code>SecurityError</code></a> if the host is invalid, which results in a 400 error. If it is <code>None</code>, all hosts are valid. Each value is either an exact match, or can start with a dot <code>.</code> to match any subdomain.</p> <p>Validation is done during routing against this value. <code>before_request</code> and <code>after_request</code> callbacks will still be called.</p> <p>Default: <code>None</code></p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"SERVER_NAME\">\n<code>SERVER_NAME</code> </dt> <dd>\n<p>Inform the application what host and port it is bound to.</p> <p>Must be set if <code>subdomain_matching</code> is enabled, to be able to extract the subdomain from the request.</p> <p>Must be set for <code>url_for</code> to generate external URLs outside of a request context.</p> <p>Default: <code>None</code></p> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>Does not restrict requests to only this domain, for both <code>subdomain_matching</code> and <code>host_matching</code>.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Does not affect <code>SESSION_COOKIE_DOMAIN</code>.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>Does not implicitly enable <code>subdomain_matching</code>.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"APPLICATION_ROOT\">\n<code>APPLICATION_ROOT</code> </dt> <dd>\n<p>Inform the application what path it is mounted under by the application / web server. This is used for generating URLs outside the context of a request (inside a request, the dispatcher is responsible for setting <code>SCRIPT_NAME</code> instead; see <a class=\"reference internal\" href=\"../patterns/appdispatch/index\"><span class=\"doc\">Application Dispatching</span></a> for examples of dispatch configuration).</p> <p>Will be used for the session cookie path if <code>SESSION_COOKIE_PATH</code> is not set.</p> <p>Default: <code>'/'</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"PREFERRED_URL_SCHEME\">\n<code>PREFERRED_URL_SCHEME</code> </dt> <dd>\n<p>Use this scheme for generating external URLs when not in a request context.</p> <p>Default: <code>'http'</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"MAX_CONTENT_LENGTH\">\n<code>MAX_CONTENT_LENGTH</code> </dt> <dd>\n<p>The maximum number of bytes that will be read during this request. If this limit is exceeded, a 413 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> error is raised. If it is set to <code>None</code>, no limit is enforced at the Flask application level. However, if it is <code>None</code> and the request has no <code>Content-Length</code> header and the WSGI server does not indicate that it terminates the stream, then no data is read to avoid an infinite stream.</p> <p>Each request defaults to this config. It can be set on a specific <a class=\"reference internal\" href=\"../api/index#flask.Request.max_content_length\" title=\"flask.Request.max_content_length\"><code>Request.max_content_length</code></a> to apply the limit to that specific view. This should be set appropriately based on an application’s or view’s specific needs.</p> <p>Default: <code>None</code></p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"MAX_FORM_MEMORY_SIZE\">\n<code>MAX_FORM_MEMORY_SIZE</code> </dt> <dd>\n<p>The maximum size in bytes any non-file form field may be in a <code>multipart/form-data</code> body. If this limit is exceeded, a 413 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> error is raised. If it is set to <code>None</code>, no limit is enforced at the Flask application level.</p> <p>Each request defaults to this config. It can be set on a specific <code>Request.max_form_memory_parts</code> to apply the limit to that specific view. This should be set appropriately based on an application’s or view’s specific needs.</p> <p>Default: <code>500_000</code></p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"MAX_FORM_PARTS\">\n<code>MAX_FORM_PARTS</code> </dt> <dd>\n<p>The maximum number of fields that may be present in a <code>multipart/form-data</code> body. If this limit is exceeded, a 413 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> error is raised. If it is set to <code>None</code>, no limit is enforced at the Flask application level.</p> <p>Each request defaults to this config. It can be set on a specific <a class=\"reference internal\" href=\"../api/index#flask.Request.max_form_parts\" title=\"flask.Request.max_form_parts\"><code>Request.max_form_parts</code></a> to apply the limit to that specific view. This should be set appropriately based on an application’s or view’s specific needs.</p> <p>Default: <code>1_000</code></p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"TEMPLATES_AUTO_RELOAD\">\n<code>TEMPLATES_AUTO_RELOAD</code> </dt> <dd>\n<p>Reload templates when they are changed. If not set, it will be enabled in debug mode.</p> <p>Default: <code>None</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"EXPLAIN_TEMPLATE_LOADING\">\n<code>EXPLAIN_TEMPLATE_LOADING</code> </dt> <dd>\n<p>Log debugging information tracing how a template file was loaded. This can be useful to figure out why a template was not loaded or the wrong file appears to be loaded.</p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"MAX_COOKIE_SIZE\">\n<code>MAX_COOKIE_SIZE</code> </dt> <dd>\n<p>Warn if cookie headers are larger than this many bytes. Defaults to <code>4093</code>. Larger cookies may be silently ignored by browsers. Set to <code>0</code> to disable the warning.</p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"PROVIDE_AUTOMATIC_OPTIONS\">\n<code>PROVIDE_AUTOMATIC_OPTIONS</code> </dt> <dd>\n<p>Set to <code>False</code> to disable the automatic addition of OPTIONS responses. This can be overridden per route by altering the <code>provide_automatic_options</code> attribute.</p> </dd>\n</dl> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.10: </span>Added <a class=\"reference internal\" href=\"#PROVIDE_AUTOMATIC_OPTIONS\" title=\"PROVIDE_AUTOMATIC_OPTIONS\"><code>PROVIDE_AUTOMATIC_OPTIONS</code></a> to control the default addition of autogenerated OPTIONS responses.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span><code>JSON_AS_ASCII</code>, <code>JSON_SORT_KEYS</code>, <code>JSONIFY_MIMETYPE</code>, and <code>JSONIFY_PRETTYPRINT_REGULAR</code> were removed. The default <code>app.json</code> provider has equivalent attributes instead.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span><code>ENV</code> was removed.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Removed <code>PRESERVE_CONTEXT_ON_EXCEPTION</code>.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span><code>LOGGER_NAME</code> and <code>LOGGER_HANDLER_POLICY</code> were removed. See <a class=\"reference internal\" href=\"../logging/index\"><span class=\"doc\">Logging</span></a> for information about configuration.</p> <p>Added <code>ENV</code> to reflect the <code id=\"index-0\">FLASK_ENV</code> environment variable.</p> <p>Added <a class=\"reference internal\" href=\"#SESSION_COOKIE_SAMESITE\" title=\"SESSION_COOKIE_SAMESITE\"><code>SESSION_COOKIE_SAMESITE</code></a> to control the session cookie’s <code>SameSite</code> option.</p> <p>Added <a class=\"reference internal\" href=\"#MAX_COOKIE_SIZE\" title=\"MAX_COOKIE_SIZE\"><code>MAX_COOKIE_SIZE</code></a> to control a warning from Werkzeug.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11: </span><code>SESSION_REFRESH_EACH_REQUEST</code>, <code>TEMPLATES_AUTO_RELOAD</code>, <code>LOGGER_HANDLER_POLICY</code>, <code>EXPLAIN_TEMPLATE_LOADING</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10: </span><code>JSON_AS_ASCII</code>, <code>JSON_SORT_KEYS</code>, <code>JSONIFY_PRETTYPRINT_REGULAR</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9: </span><code>PREFERRED_URL_SCHEME</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8: </span><code>TRAP_BAD_REQUEST_ERRORS</code>, <code>TRAP_HTTP_EXCEPTIONS</code>, <code>APPLICATION_ROOT</code>, <code>SESSION_COOKIE_DOMAIN</code>, <code>SESSION_COOKIE_PATH</code>, <code>SESSION_COOKIE_HTTPONLY</code>, <code>SESSION_COOKIE_SECURE</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span><code>PROPAGATE_EXCEPTIONS</code>, <code>PRESERVE_CONTEXT_ON_EXCEPTION</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6: </span><code>MAX_CONTENT_LENGTH</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5: </span><code>SERVER_NAME</code></p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.4: </span><code>LOGGER_NAME</code></p> </div> </details></section> <section id=\"configuring-from-python-files\"> <h2>Configuring from Python Files</h2> <p>Configuration becomes more useful if you can store it in a separate file, ideally located outside the actual application package. You can deploy your application, then separately configure it for the specific deployment.</p> <p>A common pattern is this:</p> <pre data-language=\"python\">app = Flask(__name__)\napp.config.from_object('yourapplication.default_settings')\napp.config.from_envvar('YOURAPPLICATION_SETTINGS')\n</pre> <p>This first loads the configuration from the <code>yourapplication.default_settings</code> module and then overrides the values with the contents of the file the <code id=\"index-1\">YOURAPPLICATION_SETTINGS</code> environment variable points to. This environment variable can be set in the shell before starting the server:</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-0-QmFzaA==\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-QmFzaA==\" name=\"QmFzaA==\" role=\"tab\" tabindex=\"0\">Bash</button><button aria-controls=\"panel-0-RmlzaA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-RmlzaA==\" name=\"RmlzaA==\" role=\"tab\" tabindex=\"-1\">Fish</button><button aria-controls=\"panel-0-Q01E\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-Q01E\" name=\"Q01E\" role=\"tab\" tabindex=\"-1\">CMD</button><button aria-controls=\"panel-0-UG93ZXJzaGVsbA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-0-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tab\" tabindex=\"-1\">Powershell</button>\n</div>\n<div aria-labelledby=\"tab-0-QmFzaA==\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-0-QmFzaA==\" name=\"QmFzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ export YOURAPPLICATION_SETTINGS=/path/to/settings.cfg\n$ flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n<div aria-labelledby=\"tab-0-RmlzaA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-RmlzaA==\" name=\"RmlzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ set -x YOURAPPLICATION_SETTINGS /path/to/settings.cfg\n$ flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n<div aria-labelledby=\"tab-0-Q01E\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-Q01E\" name=\"Q01E\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; set YOURAPPLICATION_SETTINGS=\\path\\to\\settings.cfg\n&gt; flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n<div aria-labelledby=\"tab-0-UG93ZXJzaGVsbA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-0-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; $env:YOURAPPLICATION_SETTINGS = \"\\path\\to\\settings.cfg\"\n&gt; flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n</div> <p>The configuration files themselves are actual Python files. Only values in uppercase are actually stored in the config object later on. So make sure to use uppercase letters for your config keys.</p> <p>Here is an example of a configuration file:</p> <pre data-language=\"python\"># Example configuration\nSECRET_KEY = '192b9bdd22ab9ed4d12e236c78afcb9a393ec15f71bbf5dc987d54727823bcbf'\n</pre> <p>Make sure to load the configuration very early on, so that extensions have the ability to access the configuration when starting up. There are other methods on the config object as well to load from individual files. For a complete reference, read the <a class=\"reference internal\" href=\"../api/index#flask.Config\" title=\"flask.Config\"><code>Config</code></a> object’s documentation.</p> </section> <section id=\"configuring-from-data-files\"> <h2>Configuring from Data Files</h2> <p>It is also possible to load configuration from a file in a format of your choice using <a class=\"reference internal\" href=\"../api/index#flask.Config.from_file\" title=\"flask.Config.from_file\"><code>from_file()</code></a>. For example to load from a TOML file:</p> <pre data-language=\"python\">import tomllib\napp.config.from_file(\"config.toml\", load=tomllib.load, text=False)\n</pre> <p>Or from a JSON file:</p> <pre data-language=\"python\">import json\napp.config.from_file(\"config.json\", load=json.load)\n</pre> </section> <section id=\"configuring-from-environment-variables\"> <h2>Configuring from Environment Variables</h2> <p>In addition to pointing to configuration files using environment variables, you may find it useful (or necessary) to control your configuration values directly from the environment. Flask can be instructed to load all environment variables starting with a specific prefix into the config using <a class=\"reference internal\" href=\"../api/index#flask.Config.from_prefixed_env\" title=\"flask.Config.from_prefixed_env\"><code>from_prefixed_env()</code></a>.</p> <p>Environment variables can be set in the shell before starting the server:</p> <div class=\"sphinx-tabs docutils container\"> <div aria-label=\"Tabbed content\" class=\"closeable\" role=\"tablist\">\n<button aria-controls=\"panel-1-QmFzaA==\" aria-selected=\"true\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-QmFzaA==\" name=\"QmFzaA==\" role=\"tab\" tabindex=\"0\">Bash</button><button aria-controls=\"panel-1-RmlzaA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-RmlzaA==\" name=\"RmlzaA==\" role=\"tab\" tabindex=\"-1\">Fish</button><button aria-controls=\"panel-1-Q01E\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-Q01E\" name=\"Q01E\" role=\"tab\" tabindex=\"-1\">CMD</button><button aria-controls=\"panel-1-UG93ZXJzaGVsbA==\" aria-selected=\"false\" class=\"sphinx-tabs-tab group-tab\" id=\"tab-1-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tab\" tabindex=\"-1\">Powershell</button>\n</div>\n<div aria-labelledby=\"tab-1-QmFzaA==\" class=\"sphinx-tabs-panel group-tab\" id=\"panel-1-QmFzaA==\" name=\"QmFzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ export FLASK_SECRET_KEY=\"5f352379324c22463451387a0aec5d2f\"\n$ export FLASK_MAIL_ENABLED=false\n$ flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n<div aria-labelledby=\"tab-1-RmlzaA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-RmlzaA==\" name=\"RmlzaA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">$ set -x FLASK_SECRET_KEY \"5f352379324c22463451387a0aec5d2f\"\n$ set -x FLASK_MAIL_ENABLED false\n$ flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n<div aria-labelledby=\"tab-1-Q01E\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-Q01E\" name=\"Q01E\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; set FLASK_SECRET_KEY=\"5f352379324c22463451387a0aec5d2f\"\n&gt; set FLASK_MAIL_ENABLED=false\n&gt; flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n<div aria-labelledby=\"tab-1-UG93ZXJzaGVsbA==\" class=\"sphinx-tabs-panel group-tab\" hidden=\"true\" id=\"panel-1-UG93ZXJzaGVsbA==\" name=\"UG93ZXJzaGVsbA==\" role=\"tabpanel\" tabindex=\"0\">\n<pre data-language=\"text\">&gt; $env:FLASK_SECRET_KEY = \"5f352379324c22463451387a0aec5d2f\"\n&gt; $env:FLASK_MAIL_ENABLED = \"false\"\n&gt; flask run\n * Running on http://127.0.0.1:5000/\n</pre> </div>\n</div> <p>The variables can then be loaded and accessed via the config with a key equal to the environment variable name without the prefix i.e.</p> <pre data-language=\"python\">app.config.from_prefixed_env()\napp.config[\"SECRET_KEY\"]  # Is \"5f352379324c22463451387a0aec5d2f\"\n</pre> <p>The prefix is <code>FLASK_</code> by default. This is configurable via the <code>prefix</code> argument of <a class=\"reference internal\" href=\"../api/index#flask.Config.from_prefixed_env\" title=\"flask.Config.from_prefixed_env\"><code>from_prefixed_env()</code></a>.</p> <p>Values will be parsed to attempt to convert them to a more specific type than strings. By default <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.loads\" title=\"(in Python v3.13)\"><code>json.loads()</code></a> is used, so any valid JSON value is possible, including lists and dicts. This is configurable via the <code>loads</code> argument of <a class=\"reference internal\" href=\"../api/index#flask.Config.from_prefixed_env\" title=\"flask.Config.from_prefixed_env\"><code>from_prefixed_env()</code></a>.</p> <p>When adding a boolean value with the default JSON parsing, only “true” and “false”, lowercase, are valid values. Keep in mind that any non-empty string is considered <code>True</code> by Python.</p> <p>It is possible to set keys in nested dictionaries by separating the keys with double underscore (<code>__</code>). Any intermediate keys that don’t exist on the parent dict will be initialized to an empty dict.</p> <pre data-language=\"text\">$ export FLASK_MYAPI__credentials__username=user123\n</pre> <pre data-language=\"python\">app.config[\"MYAPI\"][\"credentials\"][\"username\"]  # Is \"user123\"\n</pre> <p>On Windows, environment variable keys are always uppercase, therefore the above example would end up as <code>MYAPI__CREDENTIALS__USERNAME</code>.</p> <p>For even more config loading features, including merging and case-insensitive Windows support, try a dedicated library such as <a class=\"reference external\" href=\"https://www.dynaconf.com/\">Dynaconf</a>, which includes integration with Flask.</p> </section> <section id=\"configuration-best-practices\"> <h2>Configuration Best Practices</h2> <p>The downside with the approach mentioned earlier is that it makes testing a little harder. There is no single 100% solution for this problem in general, but there are a couple of things you can keep in mind to improve that experience:</p> <ol class=\"arabic simple\"> <li>Create your application in a function and register blueprints on it. That way you can create multiple instances of your application with different configurations attached which makes unit testing a lot easier. You can use this to pass in configuration as needed.</li> <li>Do not write code that needs the configuration at import time. If you limit yourself to request-only accesses to the configuration you can reconfigure the object later on as needed.</li> <li>Make sure to load the configuration very early on, so that extensions can access the configuration when calling <code>init_app</code>.</li> </ol> </section> <section id=\"development-production\"> <h2 id=\"config-dev-prod\">Development / Production</h2> <p>Most applications need more than one configuration. There should be at least separate configurations for the production server and the one used during development. The easiest way to handle this is to use a default configuration that is always loaded and part of the version control, and a separate configuration that overrides the values as necessary as mentioned in the example above:</p> <pre data-language=\"python\">app = Flask(__name__)\napp.config.from_object('yourapplication.default_settings')\napp.config.from_envvar('YOURAPPLICATION_SETTINGS')\n</pre> <p>Then you just have to add a separate <code>config.py</code> file and export <code>YOURAPPLICATION_SETTINGS=/path/to/config.py</code> and you are done. However there are alternative ways as well. For example you could use imports or subclassing.</p> <p>What is very popular in the Django world is to make the import explicit in the config file by adding <code>from yourapplication.default_settings\nimport *</code> to the top of the file and then overriding the changes by hand. You could also inspect an environment variable like <code>YOURAPPLICATION_MODE</code> and set that to <code>production</code>, <code>development</code> etc and import different hard-coded files based on that.</p> <p>An interesting pattern is also to use classes and inheritance for configuration:</p> <pre data-language=\"python\">class Config(object):\n    TESTING = False\n\nclass ProductionConfig(Config):\n    DATABASE_URI = 'mysql://user@localhost/foo'\n\nclass DevelopmentConfig(Config):\n    DATABASE_URI = \"sqlite:////tmp/foo.db\"\n\nclass TestingConfig(Config):\n    DATABASE_URI = 'sqlite:///:memory:'\n    TESTING = True\n</pre> <p>To enable such a config you just have to call into <a class=\"reference internal\" href=\"../api/index#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a>:</p> <pre data-language=\"python\">app.config.from_object('configmodule.ProductionConfig')\n</pre> <p>Note that <a class=\"reference internal\" href=\"../api/index#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a> does not instantiate the class object. If you need to instantiate the class, such as to access a property, then you must do so before calling <a class=\"reference internal\" href=\"../api/index#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a>:</p> <pre data-language=\"python\">from configmodule import ProductionConfig\napp.config.from_object(ProductionConfig())\n\n# Alternatively, import via string:\nfrom werkzeug.utils import import_string\ncfg = import_string('configmodule.ProductionConfig')()\napp.config.from_object(cfg)\n</pre> <p>Instantiating the configuration object allows you to use <code>@property</code> in your configuration classes:</p> <pre data-language=\"python\">class Config(object):\n    \"\"\"Base config, uses staging database server.\"\"\"\n    TESTING = False\n    DB_SERVER = '192.168.1.56'\n\n    @property\n    def DATABASE_URI(self):  # Note: all caps\n        return f\"mysql://user@{self.DB_SERVER}/foo\"\n\nclass ProductionConfig(Config):\n    \"\"\"Uses production database server.\"\"\"\n    DB_SERVER = '192.168.19.32'\n\nclass DevelopmentConfig(Config):\n    DB_SERVER = 'localhost'\n\nclass TestingConfig(Config):\n    DB_SERVER = 'localhost'\n    DATABASE_URI = 'sqlite:///:memory:'\n</pre> <p>There are many different ways and it’s up to you how you want to manage your configuration files. However here a list of good recommendations:</p> <ul class=\"simple\"> <li>Keep a default configuration in version control. Either populate the config with this default configuration or import it in your own configuration files before overriding values.</li> <li>Use an environment variable to switch between the configurations. This can be done from outside the Python interpreter and makes development and deployment much easier because you can quickly and easily switch between different configs without having to touch the code at all. If you are working often on different projects you can even create your own script for sourcing that activates a virtualenv and exports the development configuration for you.</li> <li>Use a tool like <a class=\"reference external\" href=\"https://www.fabfile.org/\">fabric</a> to push code and configuration separately to the production server(s).</li> </ul> </section> <section id=\"instance-folders\"> <h2 id=\"id1\">Instance Folders</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><p>Flask 0.8 introduces instance folders. Flask for a long time made it possible to refer to paths relative to the application’s folder directly (via <code>Flask.root_path</code>). This was also how many developers loaded configurations stored next to the application. Unfortunately however this only works well if applications are not packages in which case the root path refers to the contents of the package.</p> <p>With Flask 0.8 a new attribute was introduced: <code>Flask.instance_path</code>. It refers to a new concept called the “instance folder”. The instance folder is designed to not be under version control and be deployment specific. It’s the perfect place to drop things that either change at runtime or configuration files.</p> <p>You can either explicitly provide the path of the instance folder when creating the Flask application or you can let Flask autodetect the instance folder. For explicit configuration use the <code>instance_path</code> parameter:</p> <pre data-language=\"python\">app = Flask(__name__, instance_path='/path/to/instance/folder')\n</pre> <p>Please keep in mind that this path <em>must</em> be absolute when provided.</p> <p>If the <code>instance_path</code> parameter is not provided the following default locations are used:</p> <ul> <li>\n<p>Uninstalled module:</p> <pre data-language=\"python\">/myapp.py\n/instance\n</pre> </li> <li>\n<p>Uninstalled package:</p> <pre data-language=\"python\">/myapp\n    /__init__.py\n/instance\n</pre> </li> <li>\n<p>Installed module or package:</p> <pre data-language=\"python\">$PREFIX/lib/pythonX.Y/site-packages/myapp\n$PREFIX/var/myapp-instance\n</pre> <p><code>$PREFIX</code> is the prefix of your Python installation. This can be <code>/usr</code> or the path to your virtualenv. You can print the value of <code>sys.prefix</code> to see what the prefix is set to.</p> </li> </ul> <p>Since the config object provided loading of configuration files from relative filenames we made it possible to change the loading via filenames to be relative to the instance path if wanted. The behavior of relative paths in config files can be flipped between “relative to the application root” (the default) to “relative to instance folder” via the <code>instance_relative_config</code> switch to the application constructor:</p> <pre data-language=\"python\">app = Flask(__name__, instance_relative_config=True)\n</pre> <p>Here is a full example of how to configure Flask to preload the config from a module and then override the config from a file in the instance folder if it exists:</p> <pre data-language=\"python\">app = Flask(__name__, instance_relative_config=True)\napp.config.from_object('yourapplication.default_settings')\napp.config.from_pyfile('application.cfg', silent=True)\n</pre> <p>The path to the instance folder can be found via the <code>Flask.instance_path</code>. Flask also provides a shortcut to open a file from the instance folder with <code>Flask.open_instance_resource()</code>.</p> <p>Example usage for both:</p> <pre data-language=\"python\">filename = os.path.join(app.instance_path, 'application.cfg')\nwith open(filename) as f:\n    config = f.read()\n\n# or via open_instance_resource:\nwith app.open_instance_resource('application.cfg') as f:\n    config = f.read()\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/config/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/config/</a>\n  </p>\n</div>\n","patterns/wtforms/index":"<h1>Form Validation with WTForms</h1> <p>When you have to work with form data submitted by a browser view, code quickly becomes very hard to read. There are libraries out there designed to make this process easier to manage. One of them is <a class=\"reference external\" href=\"https://wtforms.readthedocs.io/\">WTForms</a> which we will handle here. If you find yourself in the situation of having many forms, you might want to give it a try.</p> <p>When you are working with WTForms you have to define your forms as classes first. I recommend breaking up the application into multiple modules (<a class=\"reference internal\" href=\"../packages/index\"><span class=\"doc\">Large Applications as Packages</span></a>) for that and adding a separate module for the forms.</p> <div class=\"admonition-getting-the-most-out-of-wtforms-with-an-extension admonition\"> <p class=\"admonition-title\">Getting the most out of WTForms with an Extension</p> <p>The <a class=\"reference external\" href=\"https://flask-wtf.readthedocs.io/\">Flask-WTF</a> extension expands on this pattern and adds a few little helpers that make working with forms and Flask more fun. You can get it from <a class=\"reference external\" href=\"https://pypi.org/project/Flask-WTF/\">PyPI</a>.</p> </div> <section id=\"the-forms\"> <h2>The Forms</h2> <p>This is an example form for a typical registration page:</p> <pre data-language=\"python\">from wtforms import Form, BooleanField, StringField, PasswordField, validators\n\nclass RegistrationForm(Form):\n    username = StringField('Username', [validators.Length(min=4, max=25)])\n    email = StringField('Email Address', [validators.Length(min=6, max=35)])\n    password = PasswordField('New Password', [\n        validators.DataRequired(),\n        validators.EqualTo('confirm', message='Passwords must match')\n    ])\n    confirm = PasswordField('Repeat Password')\n    accept_tos = BooleanField('I accept the TOS', [validators.DataRequired()])\n</pre> </section> <section id=\"in-the-view\"> <h2>In the View</h2> <p>In the view function, the usage of this form looks like this:</p> <pre data-language=\"python\">@app.route('/register', methods=['GET', 'POST'])\ndef register():\n    form = RegistrationForm(request.form)\n    if request.method == 'POST' and form.validate():\n        user = User(form.username.data, form.email.data,\n                    form.password.data)\n        db_session.add(user)\n        flash('Thanks for registering')\n        return redirect(url_for('login'))\n    return render_template('register.html', form=form)\n</pre> <p>Notice we’re implying that the view is using SQLAlchemy here (<a class=\"reference internal\" href=\"../sqlalchemy/index\"><span class=\"doc\">SQLAlchemy in Flask</span></a>), but that’s not a requirement, of course. Adapt the code as necessary.</p> <p>Things to remember:</p> <ol class=\"arabic simple\"> <li>create the form from the request <code>form</code> value if the data is submitted via the HTTP <code>POST</code> method and <code>args</code> if the data is submitted as <code>GET</code>.</li> <li>to validate the data, call the <code>validate()</code> method, which will return <code>True</code> if the data validates, <code>False</code> otherwise.</li> <li>to access individual values from the form, access <code>form.&lt;NAME&gt;.data</code>.</li> </ol> </section> <section id=\"forms-in-templates\"> <h2>Forms in Templates</h2> <p>Now to the template side. When you pass the form to the templates, you can easily render them there. Look at the following example template to see how easy this is. WTForms does half the form generation for us already. To make it even nicer, we can write a macro that renders a field with label and a list of errors if there are any.</p> <p>Here’s an example <code>_formhelpers.html</code> template with such a macro:</p> <pre data-language=\"html+jinja\">{% macro render_field(field) %}\n  &lt;dt&gt;{{ field.label }}\n  &lt;dd&gt;{{ field(**kwargs)|safe }}\n  {% if field.errors %}\n    &lt;ul class=errors&gt;\n    {% for error in field.errors %}\n      &lt;li&gt;{{ error }}&lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n  {% endif %}\n  &lt;/dd&gt;\n{% endmacro %}\n</pre> <p>This macro accepts a couple of keyword arguments that are forwarded to WTForm’s field function, which renders the field for us. The keyword arguments will be inserted as HTML attributes. So, for example, you can call <code>render_field(form.username, class='username')</code> to add a class to the input element. Note that WTForms returns standard Python strings, so we have to tell Jinja2 that this data is already HTML-escaped with the <code>|safe</code> filter.</p> <p>Here is the <code>register.html</code> template for the function we used above, which takes advantage of the <code>_formhelpers.html</code> template:</p> <pre data-language=\"html+jinja\">{% from \"_formhelpers.html\" import render_field %}\n&lt;form method=post&gt;\n  &lt;dl&gt;\n    {{ render_field(form.username) }}\n    {{ render_field(form.email) }}\n    {{ render_field(form.password) }}\n    {{ render_field(form.confirm) }}\n    {{ render_field(form.accept_tos) }}\n  &lt;/dl&gt;\n  &lt;p&gt;&lt;input type=submit value=Register&gt;\n&lt;/form&gt;\n</pre> <p>For more information about WTForms, head over to the <a class=\"reference external\" href=\"https://wtforms.readthedocs.io/\">WTForms website</a>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/wtforms/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/wtforms/</a>\n  </p>\n</div>\n","patterns/flashing/index":"<h1>Message Flashing</h1> <p>Good applications and user interfaces are all about feedback. If the user does not get enough feedback they will probably end up hating the application. Flask provides a really simple way to give feedback to a user with the flashing system. The flashing system basically makes it possible to record a message at the end of a request and access it next request and only next request. This is usually combined with a layout template that does this. Note that browsers and sometimes web servers enforce a limit on cookie sizes. This means that flashing messages that are too large for session cookies causes message flashing to fail silently.</p> <section id=\"simple-flashing\"> <h2>Simple Flashing</h2> <p>So here is a full example:</p> <pre data-language=\"python\">from flask import Flask, flash, redirect, render_template, \\\n     request, url_for\n\napp = Flask(__name__)\napp.secret_key = b'_5#y2L\"F4Q8z\\n\\xec]/'\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    error = None\n    if request.method == 'POST':\n        if request.form['username'] != 'admin' or \\\n                request.form['password'] != 'secret':\n            error = 'Invalid credentials'\n        else:\n            flash('You were successfully logged in')\n            return redirect(url_for('index'))\n    return render_template('login.html', error=error)\n</pre> <p>And here is the <code>layout.html</code> template which does the magic:</p> <pre data-language=\"html+jinja\">&lt;!doctype html&gt;\n&lt;title&gt;My Application&lt;/title&gt;\n{% with messages = get_flashed_messages() %}\n  {% if messages %}\n    &lt;ul class=flashes&gt;\n    {% for message in messages %}\n      &lt;li&gt;{{ message }}&lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n  {% endif %}\n{% endwith %}\n{% block body %}{% endblock %}\n</pre> <p>Here is the <code>index.html</code> template which inherits from <code>layout.html</code>:</p> <pre data-language=\"html+jinja\">{% extends \"layout.html\" %}\n{% block body %}\n  &lt;h1&gt;Overview&lt;/h1&gt;\n  &lt;p&gt;Do you want to &lt;a href=\"{{ url_for('login') }}\"&gt;log in?&lt;/a&gt;\n{% endblock %}\n</pre> <p>And here is the <code>login.html</code> template which also inherits from <code>layout.html</code>:</p> <pre data-language=\"html+jinja\">{% extends \"layout.html\" %}\n{% block body %}\n  &lt;h1&gt;Login&lt;/h1&gt;\n  {% if error %}\n    &lt;p class=error&gt;&lt;strong&gt;Error:&lt;/strong&gt; {{ error }}\n  {% endif %}\n  &lt;form method=post&gt;\n    &lt;dl&gt;\n      &lt;dt&gt;Username:\n      &lt;dd&gt;&lt;input type=text name=username value=\"{{\n          request.form.username }}\"&gt;\n      &lt;dt&gt;Password:\n      &lt;dd&gt;&lt;input type=password name=password&gt;\n    &lt;/dl&gt;\n    &lt;p&gt;&lt;input type=submit value=Login&gt;\n  &lt;/form&gt;\n{% endblock %}\n</pre> </section> <section id=\"flashing-with-categories\"> <h2>Flashing With Categories</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.3.</span></p> </div> </details><p>It is also possible to provide categories when flashing a message. The default category if nothing is provided is <code>'message'</code>. Alternative categories can be used to give the user better feedback. For example error messages could be displayed with a red background.</p> <p>To flash a message with a different category, just use the second argument to the <a class=\"reference internal\" href=\"../../api/index#flask.flash\" title=\"flask.flash\"><code>flash()</code></a> function:</p> <pre data-language=\"python\">flash('Invalid password provided', 'error')\n</pre> <p>Inside the template you then have to tell the <a class=\"reference internal\" href=\"../../api/index#flask.get_flashed_messages\" title=\"flask.get_flashed_messages\"><code>get_flashed_messages()</code></a> function to also return the categories. The loop looks slightly different in that situation then:</p> <pre data-language=\"html+jinja\">{% with messages = get_flashed_messages(with_categories=true) %}\n  {% if messages %}\n    &lt;ul class=flashes&gt;\n    {% for category, message in messages %}\n      &lt;li class=\"{{ category }}\"&gt;{{ message }}&lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n  {% endif %}\n{% endwith %}\n</pre> <p>This is just one example of how to render these flashed messages. One might also use the category to add a prefix such as <code>&lt;strong&gt;Error:&lt;/strong&gt;</code> to the message.</p> </section> <section id=\"filtering-flash-messages\"> <h2>Filtering Flash Messages</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><p>Optionally you can pass a list of categories which filters the results of <a class=\"reference internal\" href=\"../../api/index#flask.get_flashed_messages\" title=\"flask.get_flashed_messages\"><code>get_flashed_messages()</code></a>. This is useful if you wish to render each category in a separate block.</p> <pre data-language=\"html+jinja\">{% with errors = get_flashed_messages(category_filter=[\"error\"]) %}\n{% if errors %}\n&lt;div class=\"alert-message block-message error\"&gt;\n  &lt;a class=\"close\" href=\"#\"&gt;×&lt;/a&gt;\n  &lt;ul&gt;\n    {%- for msg in errors %}\n    &lt;li&gt;{{ msg }}&lt;/li&gt;\n    {% endfor -%}\n  &lt;/ul&gt;\n&lt;/div&gt;\n{% endif %}\n{% endwith %}\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/flashing/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/flashing/</a>\n  </p>\n</div>\n","patterns/javascript/index":"<h1>JavaScript, fetch, and JSON</h1> <p>You may want to make your HTML page dynamic, by changing data without reloading the entire page. Instead of submitting an HTML <code>&lt;form&gt;</code> and performing a redirect to re-render the template, you can add <a class=\"reference external\" href=\"https://developer.mozilla.org/Web/JavaScript\">JavaScript</a> that calls <a class=\"reference external\" href=\"https://developer.mozilla.org/Web/API/Fetch_API\"><code>fetch()</code></a> and replaces content on the page.</p> <p><a class=\"reference external\" href=\"https://developer.mozilla.org/Web/API/Fetch_API\"><code>fetch()</code></a> is the modern, built-in JavaScript solution to making requests from a page. You may have heard of other “AJAX” methods and libraries, such as <a class=\"reference external\" href=\"https://developer.mozilla.org/Web/API/XMLHttpRequest\"><code>XMLHttpRequest()</code></a> or <a class=\"reference external\" href=\"https://jquery.com/\">jQuery</a>. These are no longer needed in modern browsers, although you may choose to use them or another library depending on your application’s requirements. These docs will only focus on built-in JavaScript features.</p> <section id=\"rendering-templates\"> <h2>Rendering Templates</h2> <p>It is important to understand the difference between templates and JavaScript. Templates are rendered on the server, before the response is sent to the user’s browser. JavaScript runs in the user’s browser, after the template is rendered and sent. Therefore, it is impossible to use JavaScript to affect how the Jinja template is rendered, but it is possible to render data into the JavaScript that will run.</p> <p>To provide data to JavaScript when rendering the template, use the <a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/templates/#jinja-filters.tojson\" title=\"(in Jinja v3.1.x)\"><code>tojson()</code></a> filter in a <code>&lt;script&gt;</code> block. This will convert the data to a valid JavaScript object, and ensure that any unsafe HTML characters are rendered safely. If you do not use the <code>tojson</code> filter, you will get a <code>SyntaxError</code> in the browser console.</p> <pre data-language=\"python\">data = generate_report()\nreturn render_template(\"report.html\", chart_data=data)\n</pre> <pre data-language=\"jinja\">&lt;script&gt;\n    const chart_data = {{ chart_data|tojson }}\n    chartLib.makeChart(chart_data)\n&lt;/script&gt;\n</pre> <p>A less common pattern is to add the data to a <code>data-</code> attribute on an HTML tag. In this case, you must use single quotes around the value, not double quotes, otherwise you will produce invalid or unsafe HTML.</p> <pre data-language=\"jinja\">&lt;div data-chart='{{ chart_data|tojson }}'&gt;&lt;/div&gt;\n</pre> </section> <section id=\"generating-urls\"> <h2>Generating URLs</h2> <p>The other way to get data from the server to JavaScript is to make a request for it. First, you need to know the URL to request.</p> <p>The simplest way to generate URLs is to continue to use <a class=\"reference internal\" href=\"../../api/index#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a> when rendering the template. For example:</p> <pre data-language=\"javascript\">const user_url = {{ url_for(\"user\", id=current_user.id)|tojson }}\nfetch(user_url).then(...)\n</pre> <p>However, you might need to generate a URL based on information you only know in JavaScript. As discussed above, JavaScript runs in the user’s browser, not as part of the template rendering, so you can’t use <code>url_for</code> at that point.</p> <p>In this case, you need to know the “root URL” under which your application is served. In simple setups, this is <code>/</code>, but it might also be something else, like <code>https://example.com/myapp/</code>.</p> <p>A simple way to tell your JavaScript code about this root is to set it as a global variable when rendering the template. Then you can use it when generating URLs from JavaScript.</p> <pre data-language=\"javascript\">const SCRIPT_ROOT = {{ request.script_root|tojson }}\nlet user_id = ...  // do something to get a user id from the page\nlet user_url = `${SCRIPT_ROOT}/user/${user_id}`\nfetch(user_url).then(...)\n</pre> </section> <section id=\"making-a-request-with-fetch\"> <h2>Making a Request with <code>fetch</code>\n</h2> <p><a class=\"reference external\" href=\"https://developer.mozilla.org/Web/API/Fetch_API\"><code>fetch()</code></a> takes two arguments, a URL and an object with other options, and returns a <a class=\"reference external\" href=\"https://developer.mozilla.org/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>. We won’t cover all the available options, and will only use <code>then()</code> on the promise, not other callbacks or <code>await</code> syntax. Read the linked MDN docs for more information about those features.</p> <p>By default, the GET method is used. If the response contains JSON, it can be used with a <code>then()</code> callback chain.</p> <pre data-language=\"javascript\">const room_url = {{ url_for(\"room_detail\", id=room.id)|tojson }}\nfetch(room_url)\n    .then(response =&gt; response.json())\n    .then(data =&gt; {\n        // data is a parsed JSON object\n    })\n</pre> <p>To send data, use a data method such as POST, and pass the <code>body</code> option. The most common types for data are form data or JSON data.</p> <p>To send form data, pass a populated <a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/FormData\"><code>FormData</code></a> object. This uses the same format as an HTML form, and would be accessed with <code>request.form</code> in a Flask view.</p> <pre data-language=\"javascript\">let data = new FormData()\ndata.append(\"name\", \"Flask Room\")\ndata.append(\"description\", \"Talk about Flask here.\")\nfetch(room_url, {\n    \"method\": \"POST\",\n    \"body\": data,\n}).then(...)\n</pre> <p>In general, prefer sending request data as form data, as would be used when submitting an HTML form. JSON can represent more complex data, but unless you need that it’s better to stick with the simpler format. When sending JSON data, the <code>Content-Type: application/json</code> header must be sent as well, otherwise Flask will return a 400 error.</p> <pre data-language=\"javascript\">let data = {\n    \"name\": \"Flask Room\",\n    \"description\": \"Talk about Flask here.\",\n}\nfetch(room_url, {\n    \"method\": \"POST\",\n    \"headers\": {\"Content-Type\": \"application/json\"},\n    \"body\": JSON.stringify(data),\n}).then(...)\n</pre> </section> <section id=\"following-redirects\"> <h2>Following Redirects</h2> <p>A response might be a redirect, for example if you logged in with JavaScript instead of a traditional HTML form, and your view returned a redirect instead of JSON. JavaScript requests do follow redirects, but they don’t change the page. If you want to make the page change you can inspect the response and apply the redirect manually.</p> <pre data-language=\"javascript\">fetch(\"/login\", {\"body\": ...}).then(\n    response =&gt; {\n        if (response.redirected) {\n            window.location = response.url\n        } else {\n            showLoginError()\n        }\n    }\n)\n</pre> </section> <section id=\"replacing-content\"> <h2>Replacing Content</h2> <p>A response might be new HTML, either a new section of the page to add or replace, or an entirely new page. In general, if you’re returning the entire page, it would be better to handle that with a redirect as shown in the previous section. The following example shows how to replace a <code>&lt;div&gt;</code> with the HTML returned by a request.</p> <pre data-language=\"html\">&lt;div id=\"geology-fact\"&gt;\n    {{ include \"geology_fact.html\" }}\n&lt;/div&gt;\n&lt;script&gt;\n    const geology_url = {{ url_for(\"geology_fact\")|tojson }}\n    const geology_div = getElementById(\"geology-fact\")\n    fetch(geology_url)\n        .then(response =&gt; response.text)\n        .then(text =&gt; geology_div.innerHTML = text)\n&lt;/script&gt;\n</pre> </section> <section id=\"return-json-from-views\"> <h2>Return JSON from Views</h2> <p>To return a JSON object from your API view, you can directly return a dict from the view. It will be serialized to JSON automatically.</p> <pre data-language=\"python\">@app.route(\"/user/&lt;int:id&gt;\")\ndef user_detail(id):\n    user = User.query.get_or_404(id)\n    return {\n        \"username\": User.username,\n        \"email\": User.email,\n        \"picture\": url_for(\"static\", filename=f\"users/{id}/profile.png\"),\n    }\n</pre> <p>If you want to return another JSON type, use the <a class=\"reference internal\" href=\"../../api/index#flask.json.jsonify\" title=\"flask.json.jsonify\"><code>jsonify()</code></a> function, which creates a response object with the given data serialized to JSON.</p> <pre data-language=\"python\">from flask import jsonify\n\n@app.route(\"/users\")\ndef user_list():\n    users = User.query.order_by(User.name).all()\n    return jsonify([u.to_json() for u in users])\n</pre> <p>It is usually not a good idea to return file data in a JSON response. JSON cannot represent binary data directly, so it must be base64 encoded, which can be slow, takes more bandwidth to send, and is not as easy to cache. Instead, serve files using one view, and generate a URL to the desired file to include in the JSON. Then the client can make a separate request to get the linked resource after getting the JSON.</p> </section> <section id=\"receiving-json-in-views\"> <h2>Receiving JSON in Views</h2> <p>Use the <a class=\"reference internal\" href=\"../../api/index#flask.Request.json\" title=\"flask.Request.json\"><code>json</code></a> property of the <a class=\"reference internal\" href=\"../../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> object to decode the request’s body as JSON. If the body is not valid JSON, or the <code>Content-Type</code> header is not set to <code>application/json</code>, a 400 Bad Request error will be raised.</p> <pre data-language=\"python\">from flask import request\n\n@app.post(\"/user/&lt;int:id&gt;\")\ndef user_update(id):\n    user = User.query.get_or_404(id)\n    user.update_from_json(request.json)\n    db.session.commit()\n    return user.to_json()\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/javascript/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/javascript/</a>\n  </p>\n</div>\n","patterns/lazyloading/index":"<h1>Lazily Loading Views</h1> <p>Flask is usually used with the decorators. Decorators are simple and you have the URL right next to the function that is called for that specific URL. However there is a downside to this approach: it means all your code that uses decorators has to be imported upfront or Flask will never actually find your function.</p> <p>This can be a problem if your application has to import quick. It might have to do that on systems like Google’s App Engine or other systems. So if you suddenly notice that your application outgrows this approach you can fall back to a centralized URL mapping.</p> <p>The system that enables having a central URL map is the <a class=\"reference internal\" href=\"../../api/index#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a> function. Instead of using decorators, you have a file that sets up the application with all URLs.</p> <section id=\"converting-to-centralized-url-map\"> <h2>Converting to Centralized URL Map</h2> <p>Imagine the current application looks somewhat like this:</p> <pre data-language=\"python\">from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    pass\n\n@app.route('/user/&lt;username&gt;')\ndef user(username):\n    pass\n</pre> <p>Then, with the centralized approach you would have one file with the views (<code>views.py</code>) but without any decorator:</p> <pre data-language=\"python\">def index():\n    pass\n\ndef user(username):\n    pass\n</pre> <p>And then a file that sets up an application which maps the functions to URLs:</p> <pre data-language=\"python\">from flask import Flask\nfrom yourapplication import views\napp = Flask(__name__)\napp.add_url_rule('/', view_func=views.index)\napp.add_url_rule('/user/&lt;username&gt;', view_func=views.user)\n</pre> </section> <section id=\"loading-late\"> <h2>Loading Late</h2> <p>So far we only split up the views and the routing, but the module is still loaded upfront. The trick is to actually load the view function as needed. This can be accomplished with a helper class that behaves just like a function but internally imports the real function on first use:</p> <pre data-language=\"python\">from werkzeug.utils import import_string, cached_property\n\nclass LazyView(object):\n\n    def __init__(self, import_name):\n        self.__module__, self.__name__ = import_name.rsplit('.', 1)\n        self.import_name = import_name\n\n    @cached_property\n    def view(self):\n        return import_string(self.import_name)\n\n    def __call__(self, *args, **kwargs):\n        return self.view(*args, **kwargs)\n</pre> <p>What’s important here is is that <code>__module__</code> and <code>__name__</code> are properly set. This is used by Flask internally to figure out how to name the URL rules in case you don’t provide a name for the rule yourself.</p> <p>Then you can define your central place to combine the views like this:</p> <pre data-language=\"python\">from flask import Flask\nfrom yourapplication.helpers import LazyView\napp = Flask(__name__)\napp.add_url_rule('/',\n                 view_func=LazyView('yourapplication.views.index'))\napp.add_url_rule('/user/&lt;username&gt;',\n                 view_func=LazyView('yourapplication.views.user'))\n</pre> <p>You can further optimize this in terms of amount of keystrokes needed to write this by having a function that calls into <a class=\"reference internal\" href=\"../../api/index#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a> by prefixing a string with the project name and a dot, and by wrapping <code>view_func</code> in a <code>LazyView</code> as needed.</p> <pre data-language=\"python\">def url(import_name, url_rules=[], **options):\n    view = LazyView(f\"yourapplication.{import_name}\")\n    for url_rule in url_rules:\n        app.add_url_rule(url_rule, view_func=view, **options)\n\n# add a single route to the index view\nurl('views.index', ['/'])\n\n# add two routes to a single function endpoint\nurl_rules = ['/user/','/user/&lt;username&gt;']\nurl('views.user', url_rules)\n</pre> <p>One thing to keep in mind is that before and after request handlers have to be in a file that is imported upfront to work properly on the first request. The same goes for any kind of remaining decorator.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/lazyloading/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/lazyloading/</a>\n  </p>\n</div>\n","patterns/favicon/index":"<h1>Adding a favicon</h1> <p>A “favicon” is an icon used by browsers for tabs and bookmarks. This helps to distinguish your website and to give it a unique brand.</p> <p>A common question is how to add a favicon to a Flask application. First, of course, you need an icon. It should be 16 × 16 pixels and in the ICO file format. This is not a requirement but a de-facto standard supported by all relevant browsers. Put the icon in your static directory as <code>favicon.ico</code>.</p> <p>Now, to get browsers to find your icon, the correct way is to add a link tag in your HTML. So, for example:</p> <pre data-language=\"html+jinja\">&lt;link rel=\"shortcut icon\" href=\"{{ url_for('static', filename='favicon.ico') }}\"&gt;\n</pre> <p>That’s all you need for most browsers, however some really old ones do not support this standard. The old de-facto standard is to serve this file, with this name, at the website root. If your application is not mounted at the root path of the domain you either need to configure the web server to serve the icon at the root or if you can’t do that you’re out of luck. If however your application is the root you can simply route a redirect:</p> <pre data-language=\"python\">app.add_url_rule('/favicon.ico',\n                 redirect_to=url_for('static', filename='favicon.ico'))\n</pre> <p>If you want to save the extra redirect request you can also write a view using <a class=\"reference internal\" href=\"../../api/index#flask.send_from_directory\" title=\"flask.send_from_directory\"><code>send_from_directory()</code></a>:</p> <pre data-language=\"python\">import os\nfrom flask import send_from_directory\n\n@app.route('/favicon.ico')\ndef favicon():\n    return send_from_directory(os.path.join(app.root_path, 'static'),\n                               'favicon.ico', mimetype='image/vnd.microsoft.icon')\n</pre> <p>We can leave out the explicit mimetype and it will be guessed, but we may as well specify it to avoid the extra guessing, as it will always be the same.</p> <p>The above will serve the icon via your application and if possible it’s better to configure your dedicated web server to serve it; refer to the web server’s documentation.</p> <section id=\"see-also\"> <h2>See also</h2> <ul class=\"simple\"> <li>The <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Favicon\">Favicon</a> article on Wikipedia</li> </ul> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/favicon/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/favicon/</a>\n  </p>\n</div>\n","patterns/streaming/index":"<h1>Streaming Contents</h1> <p>Sometimes you want to send an enormous amount of data to the client, much more than you want to keep in memory. When you are generating the data on the fly though, how do you send that back to the client without the roundtrip to the filesystem?</p> <p>The answer is by using generators and direct responses.</p> <section id=\"basic-usage\"> <h2>Basic Usage</h2> <p>This is a basic view function that generates a lot of CSV data on the fly. The trick is to have an inner function that uses a generator to generate data and to then invoke that function and pass it to a response object:</p> <pre data-language=\"python\">@app.route('/large.csv')\ndef generate_large_csv():\n    def generate():\n        for row in iter_all_rows():\n            yield f\"{','.join(row)}\\n\"\n    return generate(), {\"Content-Type\": \"text/csv\"}\n</pre> <p>Each <code>yield</code> expression is directly sent to the browser. Note though that some WSGI middlewares might break streaming, so be careful there in debug environments with profilers and other things you might have enabled.</p> </section> <section id=\"streaming-from-templates\"> <h2>Streaming from Templates</h2> <p>The Jinja2 template engine supports rendering a template piece by piece, returning an iterator of strings. Flask provides the <a class=\"reference internal\" href=\"../../api/index#flask.stream_template\" title=\"flask.stream_template\"><code>stream_template()</code></a> and <a class=\"reference internal\" href=\"../../api/index#flask.stream_template_string\" title=\"flask.stream_template_string\"><code>stream_template_string()</code></a> functions to make this easier to use.</p> <pre data-language=\"python\">from flask import stream_template\n\n@app.get(\"/timeline\")\ndef timeline():\n    return stream_template(\"timeline.html\")\n</pre> <p>The parts yielded by the render stream tend to match statement blocks in the template.</p> </section> <section id=\"streaming-with-context\"> <h2>Streaming with Context</h2> <p>The <a class=\"reference internal\" href=\"../../api/index#flask.request\" title=\"flask.request\"><code>request</code></a> will not be active while the generator is running, because the view has already returned at that point. If you try to access <code>request</code>, you’ll get a <code>RuntimeError</code>.</p> <p>If your generator function relies on data in <code>request</code>, use the <a class=\"reference internal\" href=\"../../api/index#flask.stream_with_context\" title=\"flask.stream_with_context\"><code>stream_with_context()</code></a> wrapper. This will keep the request context active during the generator.</p> <pre data-language=\"python\">from flask import stream_with_context, request\nfrom markupsafe import escape\n\n@app.route('/stream')\ndef streamed_response():\n    def generate():\n        yield '&lt;p&gt;Hello '\n        yield escape(request.args['name'])\n        yield '!&lt;/p&gt;'\n    return stream_with_context(generate())\n</pre> <p>It can also be used as a decorator.</p> <pre data-language=\"python\">@stream_with_context\ndef generate():\n    ...\n\nreturn generate()\n</pre> <p>The <a class=\"reference internal\" href=\"../../api/index#flask.stream_template\" title=\"flask.stream_template\"><code>stream_template()</code></a> and <a class=\"reference internal\" href=\"../../api/index#flask.stream_template_string\" title=\"flask.stream_template_string\"><code>stream_template_string()</code></a> functions automatically use <a class=\"reference internal\" href=\"../../api/index#flask.stream_with_context\" title=\"flask.stream_with_context\"><code>stream_with_context()</code></a> if a request is active.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/streaming/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/streaming/</a>\n  </p>\n</div>\n","patterns/deferredcallbacks/index":"<h1>Deferred Request Callbacks</h1> <p>One of the design principles of Flask is that response objects are created and passed down a chain of potential callbacks that can modify them or replace them. When the request handling starts, there is no response object yet. It is created as necessary either by a view function or by some other component in the system.</p> <p>What happens if you want to modify the response at a point where the response does not exist yet? A common example for that would be a <a class=\"reference internal\" href=\"../../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> callback that wants to set a cookie on the response object.</p> <p>One way is to avoid the situation. Very often that is possible. For instance you can try to move that logic into a <a class=\"reference internal\" href=\"../../api/index#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>after_request()</code></a> callback instead. However, sometimes moving code there makes it more complicated or awkward to reason about.</p> <p>As an alternative, you can use <a class=\"reference internal\" href=\"../../api/index#flask.after_this_request\" title=\"flask.after_this_request\"><code>after_this_request()</code></a> to register callbacks that will execute after only the current request. This way you can defer code execution from anywhere in the application, based on the current request.</p> <p>At any time during a request, we can register a function to be called at the end of the request. For example you can remember the current language of the user in a cookie in a <a class=\"reference internal\" href=\"../../api/index#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> callback:</p> <pre data-language=\"python\">from flask import request, after_this_request\n\n@app.before_request\ndef detect_user_language():\n    language = request.cookies.get('user_lang')\n\n    if language is None:\n        language = guess_language_from_request()\n\n        # when the response exists, set a cookie with the language\n        @after_this_request\n        def remember_language(response):\n            response.set_cookie('user_lang', language)\n            return response\n\n    g.language = language\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/deferredcallbacks/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/deferredcallbacks/</a>\n  </p>\n</div>\n","patterns/methodoverrides/index":"<h1>Adding HTTP Method Overrides</h1> <p>Some HTTP proxies do not support arbitrary HTTP methods or newer HTTP methods (such as PATCH). In that case it’s possible to “proxy” HTTP methods through another HTTP method in total violation of the protocol.</p> <p>The way this works is by letting the client do an HTTP POST request and set the <code>X-HTTP-Method-Override</code> header. Then the method is replaced with the header value before being passed to Flask.</p> <p>This can be accomplished with an HTTP middleware:</p> <pre data-language=\"python\">class HTTPMethodOverrideMiddleware(object):\n    allowed_methods = frozenset([\n        'GET',\n        'HEAD',\n        'POST',\n        'DELETE',\n        'PUT',\n        'PATCH',\n        'OPTIONS'\n    ])\n    bodyless_methods = frozenset(['GET', 'HEAD', 'OPTIONS', 'DELETE'])\n\n    def __init__(self, app):\n        self.app = app\n\n    def __call__(self, environ, start_response):\n        method = environ.get('HTTP_X_HTTP_METHOD_OVERRIDE', '').upper()\n        if method in self.allowed_methods:\n            environ['REQUEST_METHOD'] = method\n        if method in self.bodyless_methods:\n            environ['CONTENT_LENGTH'] = '0'\n        return self.app(environ, start_response)\n</pre> <p>To use this with Flask, wrap the app object with the middleware:</p> <pre data-language=\"python\">from flask import Flask\n\napp = Flask(__name__)\napp.wsgi_app = HTTPMethodOverrideMiddleware(app.wsgi_app)\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/methodoverrides/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/methodoverrides/</a>\n  </p>\n</div>\n","patterns/requestchecksum/index":"<h1>Request Content Checksums</h1> <p>Various pieces of code can consume the request data and preprocess it. For instance JSON data ends up on the request object already read and processed, form data ends up there as well but goes through a different code path. This seems inconvenient when you want to calculate the checksum of the incoming request data. This is necessary sometimes for some APIs.</p> <p>Fortunately this is however very simple to change by wrapping the input stream.</p> <p>The following example calculates the SHA1 checksum of the incoming data as it gets read and stores it in the WSGI environment:</p> <pre data-language=\"python\">import hashlib\n\nclass ChecksumCalcStream(object):\n\n    def __init__(self, stream):\n        self._stream = stream\n        self._hash = hashlib.sha1()\n\n    def read(self, bytes):\n        rv = self._stream.read(bytes)\n        self._hash.update(rv)\n        return rv\n\n    def readline(self, size_hint):\n        rv = self._stream.readline(size_hint)\n        self._hash.update(rv)\n        return rv\n\ndef generate_checksum(request):\n    env = request.environ\n    stream = ChecksumCalcStream(env['wsgi.input'])\n    env['wsgi.input'] = stream\n    return stream._hash\n</pre> <p>To use this, all you need to do is to hook the calculating stream in before the request starts consuming data. (Eg: be careful accessing <code>request.form</code> or anything of that nature. <code>before_request_handlers</code> for instance should be careful not to access it).</p> <p>Example usage:</p> <pre data-language=\"python\">@app.route('/special-api', methods=['POST'])\ndef special_api():\n    hash = generate_checksum(request)\n    # Accessing this parses the input stream\n    files = request.files\n    # At this point the hash is fully constructed.\n    checksum = hash.hexdigest()\n    return f\"Hash was: {checksum}\"\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/requestchecksum/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/requestchecksum/</a>\n  </p>\n</div>\n","patterns/subclassing/index":"<h1>Subclassing Flask</h1> <p>The <a class=\"reference internal\" href=\"../../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> class is designed for subclassing.</p> <p>For example, you may want to override how request parameters are handled to preserve their order:</p> <pre data-language=\"python\">from flask import Flask, Request\nfrom werkzeug.datastructures import ImmutableOrderedMultiDict\nclass MyRequest(Request):\n    \"\"\"Request subclass to override request parameter storage\"\"\"\n    parameter_storage_class = ImmutableOrderedMultiDict\nclass MyFlask(Flask):\n    \"\"\"Flask subclass using the custom request class\"\"\"\n    request_class = MyRequest\n</pre> <p>This is the recommended approach for overriding or augmenting Flask’s internal functionality.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/subclassing/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/subclassing/</a>\n  </p>\n</div>\n","patterns/singlepageapplications/index":"<h1>Single-Page Applications</h1> <p>Flask can be used to serve Single-Page Applications (SPA) by placing static files produced by your frontend framework in a subfolder inside of your project. You will also need to create a catch-all endpoint that routes all requests to your SPA.</p> <p>The following example demonstrates how to serve an SPA along with an API:</p> <pre data-language=\"python\">from flask import Flask, jsonify\n\napp = Flask(__name__, static_folder='app', static_url_path=\"/app\")\n\n\n@app.route(\"/heartbeat\")\ndef heartbeat():\n    return jsonify({\"status\": \"healthy\"})\n\n\n@app.route('/', defaults={'path': ''})\n@app.route('/&lt;path:path&gt;')\ndef catch_all(path):\n    return app.send_static_file(\"index.html\")\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/singlepageapplications/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/singlepageapplications/</a>\n  </p>\n</div>\n","deploying/index":"<h1>Deploying to Production</h1> <p>After developing your application, you’ll want to make it available publicly to other users. When you’re developing locally, you’re probably using the built-in development server, debugger, and reloader. These should not be used in production. Instead, you should use a dedicated WSGI server or hosting platform, some of which will be described here.</p> <p>“Production” means “not development”, which applies whether you’re serving your application publicly to millions of users or privately / locally to a single user. <strong>Do not use the development server when deploying to production. It is intended for use only during local development. It is not designed to be particularly secure, stable, or efficient.</strong></p> <section id=\"self-hosted-options\"> <h2>Self-Hosted Options</h2> <p>Flask is a WSGI <em>application</em>. A WSGI <em>server</em> is used to run the application, converting incoming HTTP requests to the standard WSGI environ, and converting outgoing WSGI responses to HTTP responses.</p> <p>The primary goal of these docs is to familiarize you with the concepts involved in running a WSGI application using a production WSGI server and HTTP server. There are many WSGI servers and HTTP servers, with many configuration possibilities. The pages below discuss the most common servers, and show the basics of running each one. The next section discusses platforms that can manage this for you.</p>  <ul> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"gunicorn/index\">Gunicorn</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"waitress/index\">Waitress</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"mod_wsgi/index\">mod_wsgi</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"uwsgi/index\">uWSGI</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"gevent/index\">gevent</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"eventlet/index\">eventlet</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"asgi/index\">ASGI</a></li> </ul>  <p>WSGI servers have HTTP servers built-in. However, a dedicated HTTP server may be safer, more efficient, or more capable. Putting an HTTP server in front of the WSGI server is called a “reverse proxy.”</p>  <ul> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"proxy_fix/index\">Tell Flask it is Behind a Proxy</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"nginx/index\">nginx</a></li> <li class=\"toctree-l1\"><a class=\"reference internal\" href=\"apache-httpd/index\">Apache httpd</a></li> </ul>  <p>This list is not exhaustive, and you should evaluate these and other servers based on your application’s needs. Different servers will have different capabilities, configuration, and support.</p> </section> <section id=\"hosting-platforms\"> <h2>Hosting Platforms</h2> <p>There are many services available for hosting web applications without needing to maintain your own server, networking, domain, etc. Some services may have a free tier up to a certain time or bandwidth. Many of these services use one of the WSGI servers described above, or a similar interface. The links below are for some of the most common platforms, which have instructions for Flask, WSGI, or Python.</p> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://help.pythonanywhere.com/pages/Flask/\">PythonAnywhere</a></li> <li><a class=\"reference external\" href=\"https://cloud.google.com/appengine/docs/standard/python3/building-app\">Google App Engine</a></li> <li><a class=\"reference external\" href=\"https://cloud.google.com/run/docs/quickstarts/build-and-deploy/deploy-python-service\">Google Cloud Run</a></li> <li><a class=\"reference external\" href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html\">AWS Elastic Beanstalk</a></li> <li><a class=\"reference external\" href=\"https://docs.microsoft.com/en-us/azure/app-service/quickstart-python\">Microsoft Azure</a></li> </ul> <p>This list is not exhaustive, and you should evaluate these and other services based on your application’s needs. Different services will have different capabilities, configuration, pricing, and support.</p> <p>You’ll probably need to <a class=\"reference internal\" href=\"proxy_fix/index\"><span class=\"doc\">Tell Flask it is Behind a Proxy</span></a> when using most hosting platforms.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/</a>\n  </p>\n</div>\n","async-await/index":"<h1 id=\"async-await\">Using async and await</h1> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><p>Routes, error handlers, before request, after request, and teardown functions can all be coroutine functions if Flask is installed with the <code>async</code> extra (<code>pip install flask[async]</code>). This allows views to be defined with <code>async def</code> and use <code>await</code>.</p> <pre data-language=\"python\">@app.route(\"/get-data\")\nasync def get_data():\n    data = await async_db_query(...)\n    return jsonify(data)\n</pre> <p>Pluggable class-based views also support handlers that are implemented as coroutines. This applies to the <a class=\"reference internal\" href=\"../api/index#flask.views.View.dispatch_request\" title=\"flask.views.View.dispatch_request\"><code>dispatch_request()</code></a> method in views that inherit from the <a class=\"reference internal\" href=\"../api/index#flask.views.View\" title=\"flask.views.View\"><code>flask.views.View</code></a> class, as well as all the HTTP method handlers in views that inherit from the <a class=\"reference internal\" href=\"../api/index#flask.views.MethodView\" title=\"flask.views.MethodView\"><code>flask.views.MethodView</code></a> class.</p> <div class=\"admonition-using-async-with-greenlet admonition\"> <p class=\"admonition-title\">Using <code>async</code> with greenlet</p> <p>When using gevent or eventlet to serve an application or patch the runtime, greenlet&gt;=1.0 is required. When using PyPy, PyPy&gt;=7.3.7 is required.</p> </div> <section id=\"performance\"> <h2>Performance</h2> <p>Async functions require an event loop to run. Flask, as a WSGI application, uses one worker to handle one request/response cycle. When a request comes in to an async view, Flask will start an event loop in a thread, run the view function there, then return the result.</p> <p>Each request still ties up one worker, even for async views. The upside is that you can run async code within a view, for example to make multiple concurrent database queries, HTTP requests to an external API, etc. However, the number of requests your application can handle at one time will remain the same.</p> <p><strong>Async is not inherently faster than sync code.</strong> Async is beneficial when performing concurrent IO-bound tasks, but will probably not improve CPU-bound tasks. Traditional Flask views will still be appropriate for most use cases, but Flask’s async support enables writing and using code that wasn’t possible natively before.</p> </section> <section id=\"background-tasks\"> <h2>Background tasks</h2> <p>Async functions will run in an event loop until they complete, at which stage the event loop will stop. This means any additional spawned tasks that haven’t completed when the async function completes will be cancelled. Therefore you cannot spawn background tasks, for example via <code>asyncio.create_task</code>.</p> <p>If you wish to use background tasks it is best to use a task queue to trigger background work, rather than spawn tasks in a view function. With that in mind you can spawn asyncio tasks by serving Flask with an ASGI server and utilising the asgiref WsgiToAsgi adapter as described in <a class=\"reference internal\" href=\"../deploying/asgi/index\"><span class=\"doc\">ASGI</span></a>. This works as the adapter creates an event loop that runs continually.</p> </section> <section id=\"when-to-use-quart-instead\"> <h2>When to use Quart instead</h2> <p>Flask’s async support is less performant than async-first frameworks due to the way it is implemented. If you have a mainly async codebase it would make sense to consider <a class=\"reference external\" href=\"https://github.com/pallets/quart\">Quart</a>. Quart is a reimplementation of Flask based on the <a class=\"reference external\" href=\"https://asgi.readthedocs.io/en/latest/\">ASGI</a> standard instead of WSGI. This allows it to handle many concurrent requests, long running requests, and websockets without requiring multiple worker processes or threads.</p> <p>It has also already been possible to run Flask with Gevent or Eventlet to get many of the benefits of async request handling. These libraries patch low-level Python functions to accomplish this, whereas <code>async</code>/ <code>await</code> and ASGI use standard, modern Python capabilities. Deciding whether you should use Flask, Quart, or something else is ultimately up to understanding the specific needs of your project.</p> </section> <section id=\"extensions\"> <h2>Extensions</h2> <p>Flask extensions predating Flask’s async support do not expect async views. If they provide decorators to add functionality to views, those will probably not work with async views because they will not await the function or be awaitable. Other functions they provide will not be awaitable either and will probably be blocking if called within an async view.</p> <p>Extension authors can support async functions by utilising the <a class=\"reference internal\" href=\"../api/index#flask.Flask.ensure_sync\" title=\"flask.Flask.ensure_sync\"><code>flask.Flask.ensure_sync()</code></a> method. For example, if the extension provides a view function decorator add <code>ensure_sync</code> before calling the decorated function,</p> <pre data-language=\"python\">def extension(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        ...  # Extension logic\n        return current_app.ensure_sync(func)(*args, **kwargs)\n\n    return wrapper\n</pre> <p>Check the changelog of the extension you want to use to see if they’ve implemented async support, or make a feature request or PR to them.</p> </section> <section id=\"other-event-loops\"> <h2>Other event loops</h2> <p>At the moment Flask only supports <a class=\"reference external\" href=\"https://docs.python.org/3/library/asyncio.html#module-asyncio\" title=\"(in Python v3.13)\"><code>asyncio</code></a>. It’s possible to override <a class=\"reference internal\" href=\"../api/index#flask.Flask.ensure_sync\" title=\"flask.Flask.ensure_sync\"><code>flask.Flask.ensure_sync()</code></a> to change how async functions are wrapped to use a different library.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/async-await/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/async-await/</a>\n  </p>\n</div>\n","patterns/celery/index":"<h1>Background Tasks with Celery</h1> <p>If your application has a long running task, such as processing some uploaded data or sending email, you don’t want to wait for it to finish during a request. Instead, use a task queue to send the necessary data to another process that will run the task in the background while the request returns immediately.</p> <p><a class=\"reference external\" href=\"https://celery.readthedocs.io\">Celery</a> is a powerful task queue that can be used for simple background tasks as well as complex multi-stage programs and schedules. This guide will show you how to configure Celery using Flask. Read Celery’s <a class=\"reference external\" href=\"https://celery.readthedocs.io/en/latest/getting-started/first-steps-with-celery.html\">First Steps with Celery</a> guide to learn how to use Celery itself.</p> <p>The Flask repository contains <a class=\"reference external\" href=\"https://github.com/pallets/flask/tree/main/examples/celery\">an example</a> based on the information on this page, which also shows how to use JavaScript to submit tasks and poll for progress and results.</p> <section id=\"install\"> <h2>Install</h2> <p>Install Celery from PyPI, for example using pip:</p> <pre data-language=\"text\">$ pip install celery\n</pre> </section> <section id=\"integrate-celery-with-flask\"> <h2>Integrate Celery with Flask</h2> <p>You can use Celery without any integration with Flask, but it’s convenient to configure it through Flask’s config, and to let tasks access the Flask application.</p> <p>Celery uses similar ideas to Flask, with a <code>Celery</code> app object that has configuration and registers tasks. While creating a Flask app, use the following code to create and configure a Celery app as well.</p> <pre data-language=\"python\">from celery import Celery, Task\n\ndef celery_init_app(app: Flask) -&gt; Celery:\n    class FlaskTask(Task):\n        def __call__(self, *args: object, **kwargs: object) -&gt; object:\n            with app.app_context():\n                return self.run(*args, **kwargs)\n\n    celery_app = Celery(app.name, task_cls=FlaskTask)\n    celery_app.config_from_object(app.config[\"CELERY\"])\n    celery_app.set_default()\n    app.extensions[\"celery\"] = celery_app\n    return celery_app\n</pre> <p>This creates and returns a <code>Celery</code> app object. Celery <a class=\"reference external\" href=\"https://celery.readthedocs.io/en/stable/userguide/configuration.html\">configuration</a> is taken from the <code>CELERY</code> key in the Flask configuration. The Celery app is set as the default, so that it is seen during each request. The <code>Task</code> subclass automatically runs task functions with a Flask app context active, so that services like your database connections are available.</p> <p>Here’s a basic <code>example.py</code> that configures Celery to use Redis for communication. We enable a result backend, but ignore results by default. This allows us to store results only for tasks where we care about the result.</p> <pre data-language=\"python\">from flask import Flask\n\napp = Flask(__name__)\napp.config.from_mapping(\n    CELERY=dict(\n        broker_url=\"redis://localhost\",\n        result_backend=\"redis://localhost\",\n        task_ignore_result=True,\n    ),\n)\ncelery_app = celery_init_app(app)\n</pre> <p>Point the <code>celery worker</code> command at this and it will find the <code>celery_app</code> object.</p> <pre data-language=\"text\">$ celery -A example worker --loglevel INFO\n</pre> <p>You can also run the <code>celery beat</code> command to run tasks on a schedule. See Celery’s docs for more information about defining schedules.</p> <pre data-language=\"text\">$ celery -A example beat --loglevel INFO\n</pre> </section> <section id=\"application-factory\"> <h2>Application Factory</h2> <p>When using the Flask application factory pattern, call the <code>celery_init_app</code> function inside the factory. It sets <code>app.extensions[\"celery\"]</code> to the Celery app object, which can be used to get the Celery app from the Flask app returned by the factory.</p> <pre data-language=\"python\">def create_app() -&gt; Flask:\n    app = Flask(__name__)\n    app.config.from_mapping(\n        CELERY=dict(\n            broker_url=\"redis://localhost\",\n            result_backend=\"redis://localhost\",\n            task_ignore_result=True,\n        ),\n    )\n    app.config.from_prefixed_env()\n    celery_init_app(app)\n    return app\n</pre> <p>To use <code>celery</code> commands, Celery needs an app object, but that’s no longer directly available. Create a <code>make_celery.py</code> file that calls the Flask app factory and gets the Celery app from the returned Flask app.</p> <pre data-language=\"python\">from example import create_app\n\nflask_app = create_app()\ncelery_app = flask_app.extensions[\"celery\"]\n</pre> <p>Point the <code>celery</code> command to this file.</p> <pre data-language=\"text\">$ celery -A make_celery worker --loglevel INFO\n$ celery -A make_celery beat --loglevel INFO\n</pre> </section> <section id=\"defining-tasks\"> <h2>Defining Tasks</h2> <p>Using <code>@celery_app.task</code> to decorate task functions requires access to the <code>celery_app</code> object, which won’t be available when using the factory pattern. It also means that the decorated tasks are tied to the specific Flask and Celery app instances, which could be an issue during testing if you change configuration for a test.</p> <p>Instead, use Celery’s <code>@shared_task</code> decorator. This creates task objects that will access whatever the “current app” is, which is a similar concept to Flask’s blueprints and app context. This is why we called <code>celery_app.set_default()</code> above.</p> <p>Here’s an example task that adds two numbers together and returns the result.</p> <pre data-language=\"python\">from celery import shared_task\n\n@shared_task(ignore_result=False)\ndef add_together(a: int, b: int) -&gt; int:\n    return a + b\n</pre> <p>Earlier, we configured Celery to ignore task results by default. Since we want to know the return value of this task, we set <code>ignore_result=False</code>. On the other hand, a task that didn’t need a result, such as sending an email, wouldn’t set this.</p> </section> <section id=\"calling-tasks\"> <h2>Calling Tasks</h2> <p>The decorated function becomes a task object with methods to call it in the background. The simplest way is to use the <code>delay(*args, **kwargs)</code> method. See Celery’s docs for more methods.</p> <p>A Celery worker must be running to run the task. Starting a worker is shown in the previous sections.</p> <pre data-language=\"python\">from flask import request\n\n@app.post(\"/add\")\ndef start_add() -&gt; dict[str, object]:\n    a = request.form.get(\"a\", type=int)\n    b = request.form.get(\"b\", type=int)\n    result = add_together.delay(a, b)\n    return {\"result_id\": result.id}\n</pre> <p>The route doesn’t get the task’s result immediately. That would defeat the purpose by blocking the response. Instead, we return the running task’s result id, which we can use later to get the result.</p> </section> <section id=\"getting-results\"> <h2>Getting Results</h2> <p>To fetch the result of the task we started above, we’ll add another route that takes the result id we returned before. We return whether the task is finished (ready), whether it finished successfully, and what the return value (or error) was if it is finished.</p> <pre data-language=\"python\">from celery.result import AsyncResult\n\n@app.get(\"/result/&lt;id&gt;\")\ndef task_result(id: str) -&gt; dict[str, object]:\n    result = AsyncResult(id)\n    return {\n        \"ready\": result.ready(),\n        \"successful\": result.successful(),\n        \"value\": result.result if result.ready() else None,\n    }\n</pre> <p>Now you can start the task using the first route, then poll for the result using the second route. This keeps the Flask request workers from being blocked waiting for tasks to finish.</p> <p>The Flask repository contains <a class=\"reference external\" href=\"https://github.com/pallets/flask/tree/main/examples/celery\">an example</a> using JavaScript to submit tasks and poll for progress and results.</p> </section> <section id=\"passing-data-to-tasks\"> <h2>Passing Data to Tasks</h2> <p>The “add” task above took two integers as arguments. To pass arguments to tasks, Celery has to serialize them to a format that it can pass to other processes. Therefore, passing complex objects is not recommended. For example, it would be impossible to pass a SQLAlchemy model object, since that object is probably not serializable and is tied to the session that queried it.</p> <p>Pass the minimal amount of data necessary to fetch or recreate any complex data within the task. Consider a task that will run when the logged in user asks for an archive of their data. The Flask request knows the logged in user, and has the user object queried from the database. It got that by querying the database for a given id, so the task can do the same thing. Pass the user’s id rather than the user object.</p> <pre data-language=\"python\">@shared_task\ndef generate_user_archive(user_id: str) -&gt; None:\n    user = db.session.get(User, user_id)\n    ...\n\ngenerate_user_archive.delay(current_user.id)\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/patterns/celery/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/patterns/celery/</a>\n  </p>\n</div>\n","web-security/index":"<h1>Security Considerations</h1> <p>Web applications face many types of potential security problems, and it can be hard to get everything right, or even to know what “right” is in general. Flask tries to solve a few of these things by default, but there are other parts you may have to take care of yourself. Many of these solutions are tradeoffs, and will depend on each application’s specific needs and threat model. Many hosting platforms may take care of certain types of problems without the need for the Flask application to handle them.</p> <section id=\"resource-use\"> <h2>Resource Use</h2> <p>A common category of attacks is “Denial of Service” (DoS or DDoS). This is a very broad category, and different variants target different layers in a deployed application. In general, something is done to increase how much processing time or memory is used to handle each request, to the point where there are not enough resources to handle legitimate requests.</p> <p>Flask provides a few configuration options to handle resource use. They can also be set on individual requests to customize only that request. The documentation for each goes into more detail.</p> <ul class=\"simple\"> <li>\n<a class=\"reference internal\" href=\"../config/index#MAX_CONTENT_LENGTH\" title=\"MAX_CONTENT_LENGTH\"><code>MAX_CONTENT_LENGTH</code></a> or <a class=\"reference internal\" href=\"../api/index#flask.Request.max_content_length\" title=\"flask.Request.max_content_length\"><code>Request.max_content_length</code></a> controls how much data will be read from a request. It is not set by default, although it will still block truly unlimited streams unless the WSGI server indicates support.</li> <li>\n<a class=\"reference internal\" href=\"../config/index#MAX_FORM_MEMORY_SIZE\" title=\"MAX_FORM_MEMORY_SIZE\"><code>MAX_FORM_MEMORY_SIZE</code></a> or <a class=\"reference internal\" href=\"../api/index#flask.Request.max_form_memory_size\" title=\"flask.Request.max_form_memory_size\"><code>Request.max_form_memory_size</code></a> controls how large any non-file <code>multipart/form-data</code> field can be. It is set to 500kB by default.</li> <li>\n<a class=\"reference internal\" href=\"../config/index#MAX_FORM_PARTS\" title=\"MAX_FORM_PARTS\"><code>MAX_FORM_PARTS</code></a> or <a class=\"reference internal\" href=\"../api/index#flask.Request.max_form_parts\" title=\"flask.Request.max_form_parts\"><code>Request.max_form_parts</code></a> controls how many <code>multipart/form-data</code> fields can be parsed. It is set to 1000 by default. Combined with the default <code>max_form_memory_size</code>, this means that a form will occupy at most 500MB of memory.</li> </ul> <p>Regardless of these settings, you should also review what settings are available from your operating system, container deployment (Docker etc), WSGI server, HTTP server, and hosting platform. They typically have ways to set process resource limits, timeouts, and other checks regardless of how Flask is configured.</p> </section> <section id=\"cross-site-scripting-xss\"> <h2 id=\"security-xss\">Cross-Site Scripting (XSS)</h2> <p>Cross site scripting is the concept of injecting arbitrary HTML (and with it JavaScript) into the context of a website. To remedy this, developers have to properly escape text so that it cannot include arbitrary HTML tags. For more information on that have a look at the Wikipedia article on <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\">Cross-Site Scripting</a>.</p> <p>Flask configures Jinja2 to automatically escape all values unless explicitly told otherwise. This should rule out all XSS problems caused in templates, but there are still other places where you have to be careful:</p> <ul class=\"simple\"> <li>generating HTML without the help of Jinja2</li> <li>calling <code>Markup</code> on data submitted by users</li> <li>sending out HTML from uploaded files, never do that, use the <code>Content-Disposition: attachment</code> header to prevent that problem.</li> <li>sending out textfiles from uploaded files. Some browsers are using content-type guessing based on the first few bytes so users could trick a browser to execute HTML.</li> </ul> <p>Another thing that is very important are unquoted attributes. While Jinja2 can protect you from XSS issues by escaping HTML, there is one thing it cannot protect you from: XSS by attribute injection. To counter this possible attack vector, be sure to always quote your attributes with either double or single quotes when using Jinja expressions in them:</p> <pre data-language=\"html+jinja\">&lt;input value=\"{{ value }}\"&gt;\n</pre> <p>Why is this necessary? Because if you would not be doing that, an attacker could easily inject custom JavaScript handlers. For example an attacker could inject this piece of HTML+JavaScript:</p> <pre data-language=\"html\">onmouseover=alert(document.cookie)\n</pre> <p>When the user would then move with the mouse over the input, the cookie would be presented to the user in an alert window. But instead of showing the cookie to the user, a good attacker might also execute any other JavaScript code. In combination with CSS injections the attacker might even make the element fill out the entire page so that the user would just have to have the mouse anywhere on the page to trigger the attack.</p> <p>There is one class of XSS issues that Jinja’s escaping does not protect against. The <code>a</code> tag’s <code>href</code> attribute can contain a <code>javascript:</code> URI, which the browser will execute when clicked if not secured properly.</p> <pre data-language=\"html\">&lt;a href=\"{{ value }}\"&gt;click here&lt;/a&gt;\n&lt;a href=\"javascript:alert('unsafe');\"&gt;click here&lt;/a&gt;\n</pre> <p>To prevent this, you’ll need to set the <a class=\"reference internal\" href=\"#security-csp\"><span class=\"std std-ref\">Content Security Policy (CSP)</span></a> response header.</p> </section> <section id=\"cross-site-request-forgery-csrf\"> <h2>Cross-Site Request Forgery (CSRF)</h2> <p>Another big problem is CSRF. This is a very complex topic and I won’t outline it here in detail just mention what it is and how to theoretically prevent it.</p> <p>If your authentication information is stored in cookies, you have implicit state management. The state of “being logged in” is controlled by a cookie, and that cookie is sent with each request to a page. Unfortunately that includes requests triggered by 3rd party sites. If you don’t keep that in mind, some people might be able to trick your application’s users with social engineering to do stupid things without them knowing.</p> <p>Say you have a specific URL that, when you sent <code>POST</code> requests to will delete a user’s profile (say <code>http://example.com/user/delete</code>). If an attacker now creates a page that sends a post request to that page with some JavaScript they just have to trick some users to load that page and their profiles will end up being deleted.</p> <p>Imagine you were to run Facebook with millions of concurrent users and someone would send out links to images of little kittens. When users would go to that page, their profiles would get deleted while they are looking at images of fluffy cats.</p> <p>How can you prevent that? Basically for each request that modifies content on the server you would have to either use a one-time token and store that in the cookie <strong>and</strong> also transmit it with the form data. After receiving the data on the server again, you would then have to compare the two tokens and ensure they are equal.</p> <p>Why does Flask not do that for you? The ideal place for this to happen is the form validation framework, which does not exist in Flask.</p> </section> <section id=\"json-security\"> <h2 id=\"security-json\">JSON Security</h2> <p>In Flask 0.10 and lower, <code>jsonify()</code> did not serialize top-level arrays to JSON. This was because of a security vulnerability in ECMAScript 4.</p> <p>ECMAScript 5 closed this vulnerability, so only extremely old browsers are still vulnerable. All of these browsers have <a class=\"reference external\" href=\"https://github.com/pallets/flask/issues/248#issuecomment-59934857\">other more serious vulnerabilities</a>, so this behavior was changed and <code>jsonify()</code> now supports serializing arrays.</p> </section> <section id=\"security-headers\"> <h2>Security Headers</h2> <p>Browsers recognize various response headers in order to control security. We recommend reviewing each of the headers below for use in your application. The <a class=\"reference external\" href=\"https://github.com/GoogleCloudPlatform/flask-talisman\">Flask-Talisman</a> extension can be used to manage HTTPS and the security headers for you.</p> <section id=\"http-strict-transport-security-hsts\"> <h3>HTTP Strict Transport Security (HSTS)</h3> <p>Tells the browser to convert all HTTP requests to HTTPS, preventing man-in-the-middle (MITM) attacks.</p> <pre data-language=\"python\">response.headers['Strict-Transport-Security'] = 'max-age=31536000; includeSubDomains'\n</pre> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security</a></li> </ul> </section> <section id=\"content-security-policy-csp\"> <h3 id=\"security-csp\">Content Security Policy (CSP)</h3> <p>Tell the browser where it can load various types of resource from. This header should be used whenever possible, but requires some work to define the correct policy for your site. A very strict policy would be:</p> <pre data-language=\"python\">response.headers['Content-Security-Policy'] = \"default-src 'self'\"\n</pre> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://csp.withgoogle.com/docs/index.html\">https://csp.withgoogle.com/docs/index.html</a></li> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy</a></li> </ul> </section> <section id=\"x-content-type-options\"> <h3>X-Content-Type-Options</h3> <p>Forces the browser to honor the response content type instead of trying to detect it, which can be abused to generate a cross-site scripting (XSS) attack.</p> <pre data-language=\"python\">response.headers['X-Content-Type-Options'] = 'nosniff'\n</pre> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options</a></li> </ul> </section> <section id=\"x-frame-options\"> <h3>X-Frame-Options</h3> <p>Prevents external sites from embedding your site in an <code>iframe</code>. This prevents a class of attacks where clicks in the outer frame can be translated invisibly to clicks on your page’s elements. This is also known as “clickjacking”.</p> <pre data-language=\"python\">response.headers['X-Frame-Options'] = 'SAMEORIGIN'\n</pre> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options</a></li> </ul> </section> <section id=\"set-cookie-options\"> <h3 id=\"security-cookie\">Set-Cookie options</h3> <p>These options can be added to a <code>Set-Cookie</code> header to improve their security. Flask has configuration options to set these on the session cookie. They can be set on other cookies too.</p> <ul class=\"simple\"> <li>\n<code>Secure</code> limits cookies to HTTPS traffic only.</li> <li>\n<code>HttpOnly</code> protects the contents of cookies from being read with JavaScript.</li> <li>\n<code>SameSite</code> restricts how cookies are sent with requests from external sites. Can be set to <code>'Lax'</code> (recommended) or <code>'Strict'</code>. <code>Lax</code> prevents sending cookies with CSRF-prone requests from external sites, such as submitting a form. <code>Strict</code> prevents sending cookies with all external requests, including following regular links.</li> </ul> <pre data-language=\"python\">app.config.update(\n    SESSION_COOKIE_SECURE=True,\n    SESSION_COOKIE_HTTPONLY=True,\n    SESSION_COOKIE_SAMESITE='Lax',\n)\n\nresponse.set_cookie('username', 'flask', secure=True, httponly=True, samesite='Lax')\n</pre> <p>Specifying <code>Expires</code> or <code>Max-Age</code> options, will remove the cookie after the given time, or the current time plus the age, respectively. If neither option is set, the cookie will be removed when the browser is closed.</p> <pre data-language=\"python\"># cookie expires after 10 minutes\nresponse.set_cookie('snakes', '3', max_age=600)\n</pre> <p>For the session cookie, if <a class=\"reference internal\" href=\"../api/index#flask.session.permanent\" title=\"flask.session.permanent\"><code>session.permanent</code></a> is set, then <a class=\"reference internal\" href=\"../config/index#PERMANENT_SESSION_LIFETIME\" title=\"PERMANENT_SESSION_LIFETIME\"><code>PERMANENT_SESSION_LIFETIME</code></a> is used to set the expiration. Flask’s default cookie implementation validates that the cryptographic signature is not older than this value. Lowering this value may help mitigate replay attacks, where intercepted cookies can be sent at a later time.</p> <pre data-language=\"python\">app.config.update(\n    PERMANENT_SESSION_LIFETIME=600\n)\n\n@app.route('/login', methods=['POST'])\ndef login():\n    ...\n    session.clear()\n    session['user_id'] = user.id\n    session.permanent = True\n    ...\n</pre> <p>Use <code>itsdangerous.TimedSerializer</code> to sign and validate other cookie values (or any values that need secure signatures).</p> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies</a></li> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie</a></li> </ul> </section> <section id=\"http-public-key-pinning-hpkp\"> <h3>HTTP Public Key Pinning (HPKP)</h3> <p>This tells the browser to authenticate with the server using only the specific certificate key to prevent MITM attacks.</p> <div class=\"admonition warning\"> <p class=\"admonition-title\">Warning</p> <p>Be careful when enabling this, as it is very difficult to undo if you set up or upgrade your key incorrectly.</p> </div> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Public_Key_Pinning\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Public_Key_Pinning</a></li> </ul> </section> </section> <section id=\"copy-paste-to-terminal\"> <h2>Copy/Paste to Terminal</h2> <p>Hidden characters such as the backspace character (<code>\\b</code>, <code>^H</code>) can cause text to render differently in HTML than how it is interpreted if <a class=\"reference external\" href=\"https://security.stackexchange.com/q/39118\">pasted into a terminal</a>.</p> <p>For example, <code>import y\\bose\\bm\\bi\\bt\\be\\b</code> renders as <code>import yosemite</code> in HTML, but the backspaces are applied when pasted into a terminal, and it becomes <code>import os</code>.</p> <p>If you expect users to copy and paste untrusted code from your site, such as from comments posted by users on a technical blog, consider applying extra filtering, such as replacing all <code>\\b</code> characters.</p> <pre data-language=\"python\">body = body.replace(\"\\b\", \"\")\n</pre> <p>Most modern terminals will warn about and remove hidden characters when pasting, so this isn’t strictly necessary. It’s also possible to craft dangerous commands in other ways that aren’t possible to filter. Depending on your site’s use case, it may be good to show a warning about copying code in general.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/web-security/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/web-security/</a>\n  </p>\n</div>\n","design/index":"<h1>Design Decisions in Flask</h1> <p>If you are curious why Flask does certain things the way it does and not differently, this section is for you. This should give you an idea about some of the design decisions that may appear arbitrary and surprising at first, especially in direct comparison with other frameworks.</p> <section id=\"the-explicit-application-object\"> <h2>The Explicit Application Object</h2> <p>A Python web application based on WSGI has to have one central callable object that implements the actual application. In Flask this is an instance of the <a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> class. Each Flask application has to create an instance of this class itself and pass it the name of the module, but why can’t Flask do that itself?</p> <p>Without such an explicit application object the following code:</p> <pre data-language=\"python\">from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return 'Hello World!'\n</pre> <p>Would look like this instead:</p> <pre data-language=\"python\">from hypothetical_flask import route\n\n@route('/')\ndef index():\n    return 'Hello World!'\n</pre> <p>There are three major reasons for this. The most important one is that implicit application objects require that there may only be one instance at the time. There are ways to fake multiple applications with a single application object, like maintaining a stack of applications, but this causes some problems I won’t outline here in detail. Now the question is: when does a microframework need more than one application at the same time? A good example for this is unit testing. When you want to test something it can be very helpful to create a minimal application to test specific behavior. When the application object is deleted everything it allocated will be freed again.</p> <p>Another thing that becomes possible when you have an explicit object lying around in your code is that you can subclass the base class (<a class=\"reference internal\" href=\"../api/index#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a>) to alter specific behavior. This would not be possible without hacks if the object were created ahead of time for you based on a class that is not exposed to you.</p> <p>But there is another very important reason why Flask depends on an explicit instantiation of that class: the package name. Whenever you create a Flask instance you usually pass it <code>__name__</code> as package name. Flask depends on that information to properly load resources relative to your module. With Python’s outstanding support for reflection it can then access the package to figure out where the templates and static files are stored (see <a class=\"reference internal\" href=\"../api/index#flask.Flask.open_resource\" title=\"flask.Flask.open_resource\"><code>open_resource()</code></a>). Now obviously there are frameworks around that do not need any configuration and will still be able to load templates relative to your application module. But they have to use the current working directory for that, which is a very unreliable way to determine where the application is. The current working directory is process-wide and if you are running multiple applications in one process (which could happen in a webserver without you knowing) the paths will be off. Worse: many webservers do not set the working directory to the directory of your application but to the document root which does not have to be the same folder.</p> <p>The third reason is “explicit is better than implicit”. That object is your WSGI application, you don’t have to remember anything else. If you want to apply a WSGI middleware, just wrap it and you’re done (though there are better ways to do that so that you do not lose the reference to the application object <a class=\"reference internal\" href=\"../api/index#flask.Flask.wsgi_app\" title=\"flask.Flask.wsgi_app\"><code>wsgi_app()</code></a>).</p> <p>Furthermore this design makes it possible to use a factory function to create the application which is very helpful for unit testing and similar things (<a class=\"reference internal\" href=\"../patterns/appfactories/index\"><span class=\"doc\">Application Factories</span></a>).</p> </section> <section id=\"the-routing-system\"> <h2>The Routing System</h2> <p>Flask uses the Werkzeug routing system which was designed to automatically order routes by complexity. This means that you can declare routes in arbitrary order and they will still work as expected. This is a requirement if you want to properly implement decorator based routing since decorators could be fired in undefined order when the application is split into multiple modules.</p> <p>Another design decision with the Werkzeug routing system is that routes in Werkzeug try to ensure that URLs are unique. Werkzeug will go quite far with that in that it will automatically redirect to a canonical URL if a route is ambiguous.</p> </section> <section id=\"one-template-engine\"> <h2>One Template Engine</h2> <p>Flask decides on one template engine: Jinja2. Why doesn’t Flask have a pluggable template engine interface? You can obviously use a different template engine, but Flask will still configure Jinja2 for you. While that limitation that Jinja2 is <em>always</em> configured will probably go away, the decision to bundle one template engine and use that will not.</p> <p>Template engines are like programming languages and each of those engines has a certain understanding about how things work. On the surface they all work the same: you tell the engine to evaluate a template with a set of variables and take the return value as string.</p> <p>But that’s about where similarities end. Jinja2 for example has an extensive filter system, a certain way to do template inheritance, support for reusable blocks (macros) that can be used from inside templates and also from Python code, supports iterative template rendering, configurable syntax and more. On the other hand an engine like Genshi is based on XML stream evaluation, template inheritance by taking the availability of XPath into account and more. Mako on the other hand treats templates similar to Python modules.</p> <p>When it comes to connecting a template engine with an application or framework there is more than just rendering templates. For instance, Flask uses Jinja2’s extensive autoescaping support. Also it provides ways to access macros from Jinja2 templates.</p> <p>A template abstraction layer that would not take the unique features of the template engines away is a science on its own and a too large undertaking for a microframework like Flask.</p> <p>Furthermore extensions can then easily depend on one template language being present. You can easily use your own templating language, but an extension could still depend on Jinja itself.</p> </section> <section id=\"what-does-micro-mean\"> <h2>What does “micro” mean?</h2> <p>“Micro” does not mean that your whole web application has to fit into a single Python file (although it certainly can), nor does it mean that Flask is lacking in functionality. The “micro” in microframework means Flask aims to keep the core simple but extensible. Flask won’t make many decisions for you, such as what database to use. Those decisions that it does make, such as what templating engine to use, are easy to change. Everything else is up to you, so that Flask can be everything you need and nothing you don’t.</p> <p>By default, Flask does not include a database abstraction layer, form validation or anything else where different libraries already exist that can handle that. Instead, Flask supports extensions to add such functionality to your application as if it was implemented in Flask itself. Numerous extensions provide database integration, form validation, upload handling, various open authentication technologies, and more. Flask may be “micro”, but it’s ready for production use on a variety of needs.</p> <p>Why does Flask call itself a microframework and yet it depends on two libraries (namely Werkzeug and Jinja2). Why shouldn’t it? If we look over to the Ruby side of web development there we have a protocol very similar to WSGI. Just that it’s called Rack there, but besides that it looks very much like a WSGI rendition for Ruby. But nearly all applications in Ruby land do not work with Rack directly, but on top of a library with the same name. This Rack library has two equivalents in Python: WebOb (formerly Paste) and Werkzeug. Paste is still around but from my understanding it’s sort of deprecated in favour of WebOb. The development of WebOb and Werkzeug started side by side with similar ideas in mind: be a good implementation of WSGI for other applications to take advantage.</p> <p>Flask is a framework that takes advantage of the work already done by Werkzeug to properly interface WSGI (which can be a complex task at times). Thanks to recent developments in the Python package infrastructure, packages with dependencies are no longer an issue and there are very few reasons against having libraries that depend on others.</p> </section> <section id=\"thread-locals\"> <h2>Thread Locals</h2> <p>Flask uses thread local objects (context local objects in fact, they support greenlet contexts as well) for request, session and an extra object you can put your own things on (<a class=\"reference internal\" href=\"../api/index#flask.g\" title=\"flask.g\"><code>g</code></a>). Why is that and isn’t that a bad idea?</p> <p>Yes it is usually not such a bright idea to use thread locals. They cause troubles for servers that are not based on the concept of threads and make large applications harder to maintain. However Flask is just not designed for large applications or asynchronous servers. Flask wants to make it quick and easy to write a traditional web application.</p> </section> <section id=\"async-await-and-asgi-support\"> <h2>Async/await and ASGI support</h2> <p>Flask supports <code>async</code> coroutines for view functions by executing the coroutine on a separate thread instead of using an event loop on the main thread as an async-first (ASGI) framework would. This is necessary for Flask to remain backwards compatible with extensions and code built before <code>async</code> was introduced into Python. This compromise introduces a performance cost compared with the ASGI frameworks, due to the overhead of the threads.</p> <p>Due to how tied to WSGI Flask’s code is, it’s not clear if it’s possible to make the <code>Flask</code> class support ASGI and WSGI at the same time. Work is currently being done in Werkzeug to work with ASGI, which may eventually enable support in Flask as well.</p> <p>See <a class=\"reference internal\" href=\"../async-await/index\"><span class=\"doc\">Using async and await</span></a> for more discussion.</p> </section> <section id=\"what-flask-is-what-flask-is-not\"> <h2>What Flask is, What Flask is Not</h2> <p>Flask will never have a database layer. It will not have a form library or anything else in that direction. Flask itself just bridges to Werkzeug to implement a proper WSGI application and to Jinja2 to handle templating. It also binds to a few common standard library packages such as logging. Everything else is up for extensions.</p> <p>Why is this the case? Because people have different preferences and requirements and Flask could not meet those if it would force any of this into the core. The majority of web applications will need a template engine in some sort. However not every application needs a SQL database.</p> <p>As your codebase grows, you are free to make the design decisions appropriate for your project. Flask will continue to provide a very simple glue layer to the best that Python has to offer. You can implement advanced patterns in SQLAlchemy or another database tool, introduce non-relational data persistence as appropriate, and take advantage of framework-agnostic tools built for WSGI, the Python web interface.</p> <p>The idea of Flask is to build a good foundation for all applications. Everything else is up to you or extensions.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/design/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/design/</a>\n  </p>\n</div>\n","changes/index":"<h1>Changes</h1> <section id=\"version-3-1-1\"> <h2>Version 3.1.1</h2> <p>Unreleased</p> <ul class=\"simple\"> <li>Fix type hint for <code>cli_runner.invoke</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5645\">#5645</a>\n</li> </ul> </section> <section id=\"version-3-1-0\"> <h2>Version 3.1.0</h2> <p>Released 2024-11-13</p> <ul class=\"simple\"> <li>Drop support for Python 3.8. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5623\">#5623</a>\n</li> <li>Update minimum dependency versions to latest feature releases. Werkzeug &gt;= 3.1, ItsDangerous &gt;= 2.2, Blinker &gt;= 1.9. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5624,5633\">#5624,5633</a>\n</li> <li>Provide a configuration option to control automatic option responses. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5496\">#5496</a>\n</li> <li>\n<code>Flask.open_resource</code>/<code>open_instance_resource</code> and <code>Blueprint.open_resource</code> take an <code>encoding</code> parameter to use when opening in text mode. It defaults to <code>utf-8</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5504\">#5504</a>\n</li> <li>\n<code>Request.max_content_length</code> can be customized per-request instead of only through the <code>MAX_CONTENT_LENGTH</code> config. Added <code>MAX_FORM_MEMORY_SIZE</code> and <code>MAX_FORM_PARTS</code> config. Added documentation about resource limits to the security page. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5625\">#5625</a>\n</li> <li>Add support for the <code>Partitioned</code> cookie attribute (CHIPS), with the <code>SESSION_COOKIE_PARTITIONED</code> config. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5472\">#5472</a>\n</li> <li>\n<code>-e path</code> takes precedence over default <code>.env</code> and <code>.flaskenv</code> files. <code>load_dotenv</code> loads default files in addition to a path unless <code>load_defaults=False</code> is passed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5628\">#5628</a>\n</li> <li>Support key rotation with the <code>SECRET_KEY_FALLBACKS</code> config, a list of old secret keys that can still be used for unsigning. Extensions will need to add support. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5621\">#5621</a>\n</li> <li>Fix how setting <code>host_matching=True</code> or <code>subdomain_matching=False</code> interacts with <code>SERVER_NAME</code>. Setting <code>SERVER_NAME</code> no longer restricts requests to only that domain. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5553\">#5553</a>\n</li> <li>\n<code>Request.trusted_hosts</code> is checked during routing, and can be set through the <code>TRUSTED_HOSTS</code> config. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5636\">#5636</a>\n</li> </ul> </section> <section id=\"version-3-0-3\"> <h2>Version 3.0.3</h2> <p>Released 2024-04-07</p> <ul class=\"simple\"> <li>The default <code>hashlib.sha1</code> may not be available in FIPS builds. Don’t access it at import time so the developer has time to change the default. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5448\">#5448</a>\n</li> <li>Don’t initialize the <code>cli</code> attribute in the sansio scaffold, but rather in the <code>Flask</code> concrete class. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5270\">#5270</a>\n</li> </ul> </section> <section id=\"version-3-0-2\"> <h2>Version 3.0.2</h2> <p>Released 2024-02-03</p> <ul class=\"simple\"> <li>Correct type for <code>jinja_loader</code> property. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5388\">#5388</a>\n</li> <li>Fix error with <code>--extra-files</code> and <code>--exclude-patterns</code> CLI options. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5391\">#5391</a>\n</li> </ul> </section> <section id=\"version-3-0-1\"> <h2>Version 3.0.1</h2> <p>Released 2024-01-18</p> <ul class=\"simple\"> <li>Correct type for <code>path</code> argument to <code>send_file</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5336\">#5336</a>\n</li> <li>Fix a typo in an error message for the <code>flask run --key</code> option. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5344\">#5344</a>\n</li> <li>Session data is untagged without relying on the built-in <code>json.loads</code> <code>object_hook</code>. This allows other JSON providers that don’t implement that. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5381\">#5381</a>\n</li> <li>Address more type findings when using mypy strict mode. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5383\">#5383</a>\n</li> </ul> </section> <section id=\"version-3-0-0\"> <h2>Version 3.0.0</h2> <p>Released 2023-09-30</p> <ul class=\"simple\"> <li>Remove previously deprecated code. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5223\">#5223</a>\n</li> <li>Deprecate the <code>__version__</code> attribute. Use feature detection, or <code>importlib.metadata.version(\"flask\")</code>, instead. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5230\">#5230</a>\n</li> <li>Restructure the code such that the Flask (app) and Blueprint classes have Sans-IO bases. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5127\">#5127</a>\n</li> <li>Allow self as an argument to url_for. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5264\">#5264</a>\n</li> <li>Require Werkzeug &gt;= 3.0.0.</li> </ul> </section> <section id=\"version-2-3-3\"> <h2>Version 2.3.3</h2> <p>Released 2023-08-21</p> <ul class=\"simple\"> <li>Python 3.12 compatibility.</li> <li>Require Werkzeug &gt;= 2.3.7.</li> <li>Use <code>flit_core</code> instead of <code>setuptools</code> as build backend.</li> <li>Refactor how an app’s root and instance paths are determined. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5160\">#5160</a>\n</li> </ul> </section> <section id=\"version-2-3-2\"> <h2>Version 2.3.2</h2> <p>Released 2023-05-01</p> <ul class=\"simple\"> <li>Set <code>Vary: Cookie</code> header when the session is accessed, modified, or refreshed.</li> <li>Update Werkzeug requirement to &gt;=2.3.3 to apply recent bug fixes.</li> </ul> </section> <section id=\"version-2-3-1\"> <h2>Version 2.3.1</h2> <p>Released 2023-04-25</p> <ul class=\"simple\"> <li>Restore deprecated <code>from flask import Markup</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5084\">#5084</a>\n</li> </ul> </section> <section id=\"version-2-3-0\"> <h2>Version 2.3.0</h2> <p>Released 2023-04-25</p> <ul class=\"simple\"> <li>Drop support for Python 3.7. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5072\">#5072</a>\n</li> <li>Update minimum requirements to the latest versions: Werkzeug&gt;=2.3.0, Jinja2&gt;3.1.2, itsdangerous&gt;=2.1.2, click&gt;=8.1.3.</li> <li>\n<p>Remove previously deprecated code. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4995\">#4995</a></p> <ul> <li>The <code>push</code> and <code>pop</code> methods of the deprecated <code>_app_ctx_stack</code> and <code>_request_ctx_stack</code> objects are removed. <code>top</code> still exists to give extensions more time to update, but it will be removed.</li> <li>The <code>FLASK_ENV</code> environment variable, <code>ENV</code> config key, and <code>app.env</code> property are removed.</li> <li>The <code>session_cookie_name</code>, <code>send_file_max_age_default</code>, <code>use_x_sendfile</code>, <code>propagate_exceptions</code>, and <code>templates_auto_reload</code> properties on <code>app</code> are removed.</li> <li>The <code>JSON_AS_ASCII</code>, <code>JSON_SORT_KEYS</code>, <code>JSONIFY_MIMETYPE</code>, and <code>JSONIFY_PRETTYPRINT_REGULAR</code> config keys are removed.</li> <li>The <code>app.before_first_request</code> and <code>bp.before_app_first_request</code> decorators are removed.</li> <li>\n<code>json_encoder</code> and <code>json_decoder</code> attributes on app and blueprint, and the corresponding <code>json.JSONEncoder</code> and <code>JSONDecoder</code> classes, are removed.</li> <li>The <code>json.htmlsafe_dumps</code> and <code>htmlsafe_dump</code> functions are removed.</li> <li>Calling setup methods on blueprints after registration is an error instead of a warning. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4997\">#4997</a>\n</li> </ul> </li> <li>Importing <code>escape</code> and <code>Markup</code> from <code>flask</code> is deprecated. Import them directly from <code>markupsafe</code> instead. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4996\">#4996</a>\n</li> <li>The <code>app.got_first_request</code> property is deprecated. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4997\">#4997</a>\n</li> <li>The <code>locked_cached_property</code> decorator is deprecated. Use a lock inside the decorated function if locking is needed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4993\">#4993</a>\n</li> <li>Signals are always available. <code>blinker&gt;=1.6.2</code> is a required dependency. The <code>signals_available</code> attribute is deprecated. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5056\">#5056</a>\n</li> <li>Signals support <code>async</code> subscriber functions. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5049\">#5049</a>\n</li> <li>Remove uses of locks that could cause requests to block each other very briefly. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4993\">#4993</a>\n</li> <li>Use modern packaging metadata with <code>pyproject.toml</code> instead of <code>setup.cfg</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4947\">#4947</a>\n</li> <li>Ensure subdomains are applied with nested blueprints. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4834\">#4834</a>\n</li> <li>\n<code>config.from_file</code> can use <code>text=False</code> to indicate that the parser wants a binary file instead. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4989\">#4989</a>\n</li> <li>If a blueprint is created with an empty name it raises a <code>ValueError</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5010\">#5010</a>\n</li> <li>\n<code>SESSION_COOKIE_DOMAIN</code> does not fall back to <code>SERVER_NAME</code>. The default is not to set the domain, which modern browsers interpret as an exact match rather than a subdomain match. Warnings about <code>localhost</code> and IP addresses are also removed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5051\">#5051</a>\n</li> <li>The <code>routes</code> command shows each rule’s <code>subdomain</code> or <code>host</code> when domain matching is in use. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/5004\">#5004</a>\n</li> <li>Use postponed evaluation of annotations. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/5071\">#5071</a>\n</li> </ul> </section> <section id=\"version-2-2-5\"> <h2>Version 2.2.5</h2> <p>Released 2023-05-02</p> <ul class=\"simple\"> <li>Update for compatibility with Werkzeug 2.3.3.</li> <li>Set <code>Vary: Cookie</code> header when the session is accessed, modified, or refreshed.</li> </ul> </section> <section id=\"version-2-2-4\"> <h2>Version 2.2.4</h2> <p>Released 2023-04-25</p> <ul class=\"simple\"> <li>Update for compatibility with Werkzeug 2.3.</li> </ul> </section> <section id=\"version-2-2-3\"> <h2>Version 2.2.3</h2> <p>Released 2023-02-15</p> <ul class=\"simple\"> <li>Autoescape is enabled by default for <code>.svg</code> template files. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4831\">#4831</a>\n</li> <li>Fix the type of <code>template_folder</code> to accept <code>pathlib.Path</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4892\">#4892</a>\n</li> <li>Add <code>--debug</code> option to the <code>flask run</code> command. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4777\">#4777</a>\n</li> </ul> </section> <section id=\"version-2-2-2\"> <h2>Version 2.2.2</h2> <p>Released 2022-08-08</p> <ul class=\"simple\"> <li>Update Werkzeug dependency to &gt;= 2.2.2. This includes fixes related to the new faster router, header parsing, and the development server. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4754\">#4754</a>\n</li> <li>Fix the default value for <code>app.env</code> to be <code>\"production\"</code>. This attribute remains deprecated. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4740\">#4740</a>\n</li> </ul> </section> <section id=\"version-2-2-1\"> <h2>Version 2.2.1</h2> <p>Released 2022-08-03</p> <ul class=\"simple\"> <li>Setting or accessing <code>json_encoder</code> or <code>json_decoder</code> raises a deprecation warning. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4732\">#4732</a>\n</li> </ul> </section> <section id=\"version-2-2-0\"> <h2>Version 2.2.0</h2> <p>Released 2022-08-01</p> <ul class=\"simple\"> <li>\n<p>Remove previously deprecated code. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4667\">#4667</a></p> <ul> <li>Old names for some <code>send_file</code> parameters have been removed. <code>download_name</code> replaces <code>attachment_filename</code>, <code>max_age</code> replaces <code>cache_timeout</code>, and <code>etag</code> replaces <code>add_etags</code>. Additionally, <code>path</code> replaces <code>filename</code> in <code>send_from_directory</code>.</li> <li>The <code>RequestContext.g</code> property returning <code>AppContext.g</code> is removed.</li> </ul> </li> <li>Update Werkzeug dependency to &gt;= 2.2.</li> <li>\n<p>The app and request contexts are managed using Python context vars directly rather than Werkzeug’s <code>LocalStack</code>. This should result in better performance and memory use. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4682\">#4682</a></p> <ul> <li>Extension maintainers, be aware that <code>_app_ctx_stack.top</code> and <code>_request_ctx_stack.top</code> are deprecated. Store data on <code>g</code> instead using a unique prefix, like <code>g._extension_name_attr</code>.</li> </ul> </li> <li>The <code>FLASK_ENV</code> environment variable and <code>app.env</code> attribute are deprecated, removing the distinction between development and debug mode. Debug mode should be controlled directly using the <code>--debug</code> option or <code>app.run(debug=True)</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4714\">#4714</a>\n</li> <li>Some attributes that proxied config keys on <code>app</code> are deprecated: <code>session_cookie_name</code>, <code>send_file_max_age_default</code>, <code>use_x_sendfile</code>, <code>propagate_exceptions</code>, and <code>templates_auto_reload</code>. Use the relevant config keys instead. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4716\">#4716</a>\n</li> <li>\n<p>Add new customization points to the <code>Flask</code> app object for many previously global behaviors.</p> <ul> <li>\n<code>flask.url_for</code> will call <code>app.url_for</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4568\">#4568</a>\n</li> <li>\n<code>flask.abort</code> will call <code>app.aborter</code>. <code>Flask.aborter_class</code> and <code>Flask.make_aborter</code> can be used to customize this aborter. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4567\">#4567</a>\n</li> <li>\n<code>flask.redirect</code> will call <code>app.redirect</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4569\">#4569</a>\n</li> <li>\n<code>flask.json</code> is an instance of <code>JSONProvider</code>. A different provider can be set to use a different JSON library. <code>flask.jsonify</code> will call <code>app.json.response</code>, other functions in <code>flask.json</code> will call corresponding functions in <code>app.json</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4692\">#4692</a>\n</li> </ul> </li> <li>JSON configuration is moved to attributes on the default <code>app.json</code> provider. <code>JSON_AS_ASCII</code>, <code>JSON_SORT_KEYS</code>, <code>JSONIFY_MIMETYPE</code>, and <code>JSONIFY_PRETTYPRINT_REGULAR</code> are deprecated. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4692\">#4692</a>\n</li> <li>Setting custom <code>json_encoder</code> and <code>json_decoder</code> classes on the app or a blueprint, and the corresponding <code>json.JSONEncoder</code> and <code>JSONDecoder</code> classes, are deprecated. JSON behavior can now be overridden using the <code>app.json</code> provider interface. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4692\">#4692</a>\n</li> <li>\n<code>json.htmlsafe_dumps</code> and <code>json.htmlsafe_dump</code> are deprecated, the function is built-in to Jinja now. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4692\">#4692</a>\n</li> <li>Refactor <code>register_error_handler</code> to consolidate error checking. Rewrite some error messages to be more consistent. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4559\">#4559</a>\n</li> <li>Use Blueprint decorators and functions intended for setup after registering the blueprint will show a warning. In the next version, this will become an error just like the application setup methods. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4571\">#4571</a>\n</li> <li>\n<code>before_first_request</code> is deprecated. Run setup code when creating the application instead. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4605\">#4605</a>\n</li> <li>Added the <code>View.init_every_request</code> class attribute. If a view subclass sets this to <code>False</code>, the view will not create a new instance on every request. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2520\">#2520</a>.</li> <li>A <code>flask.cli.FlaskGroup</code> Click group can be nested as a sub-command in a custom CLI. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3263\">#3263</a>\n</li> <li>Add <code>--app</code> and <code>--debug</code> options to the <code>flask</code> CLI, instead of requiring that they are set through environment variables. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2836\">#2836</a>\n</li> <li>Add <code>--env-file</code> option to the <code>flask</code> CLI. This allows specifying a dotenv file to load in addition to <code>.env</code> and <code>.flaskenv</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3108\">#3108</a>\n</li> <li>It is no longer required to decorate custom CLI commands on <code>app.cli</code> or <code>blueprint.cli</code> with <code>@with_appcontext</code>, an app context will already be active at that point. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2410\">#2410</a>\n</li> <li>\n<code>SessionInterface.get_expiration_time</code> uses a timezone-aware value. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4645\">#4645</a>\n</li> <li>View functions can return generators directly instead of wrapping them in a <code>Response</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4629\">#4629</a>\n</li> <li>Add <code>stream_template</code> and <code>stream_template_string</code> functions to render a template as a stream of pieces. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4629\">#4629</a>\n</li> <li>\n<p>A new implementation of context preservation during debugging and testing. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4666\">#4666</a></p> <ul> <li>\n<code>request</code>, <code>g</code>, and other context-locals point to the correct data when running code in the interactive debugger console. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2836\">#2836</a>\n</li> <li>Teardown functions are always run at the end of the request, even if the context is preserved. They are also run after the preserved context is popped.</li> <li>\n<code>stream_with_context</code> preserves context separately from a <code>with client</code> block. It will be cleaned up when <code>response.get_data()</code> or <code>response.close()</code> is called.</li> </ul> </li> <li>Allow returning a list from a view function, to convert it to a JSON response like a dict is. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4672\">#4672</a>\n</li> <li>When type checking, allow <code>TypedDict</code> to be returned from view functions. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4695\">#4695</a>\n</li> <li>Remove the <code>--eager-loading/--lazy-loading</code> options from the <code>flask run</code> command. The app is always eager loaded the first time, then lazily loaded in the reloader. The reloader always prints errors immediately but continues serving. Remove the internal <code>DispatchingApp</code> middleware used by the previous implementation. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4715\">#4715</a>\n</li> </ul> </section> <section id=\"version-2-1-3\"> <h2>Version 2.1.3</h2> <p>Released 2022-07-13</p> <ul class=\"simple\"> <li>Inline some optional imports that are only used for certain CLI commands. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4606\">#4606</a>\n</li> <li>Relax type annotation for <code>after_request</code> functions. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4600\">#4600</a>\n</li> <li>\n<code>instance_path</code> for namespace packages uses the path closest to the imported submodule. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4610\">#4610</a>\n</li> <li>Clearer error message when <code>render_template</code> and <code>render_template_string</code> are used outside an application context. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4693\">#4693</a>\n</li> </ul> </section> <section id=\"version-2-1-2\"> <h2>Version 2.1.2</h2> <p>Released 2022-04-28</p> <ul class=\"simple\"> <li>Fix type annotation for <code>json.loads</code>, it accepts str or bytes. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4519\">#4519</a>\n</li> <li>The <code>--cert</code> and <code>--key</code> options on <code>flask run</code> can be given in either order. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4459\">#4459</a>\n</li> </ul> </section> <section id=\"version-2-1-1\"> <h2>Version 2.1.1</h2> <p>Released on 2022-03-30</p> <ul class=\"simple\"> <li>Set the minimum required version of importlib_metadata to 3.6.0, which is required on Python &lt; 3.10. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4502\">#4502</a>\n</li> </ul> </section> <section id=\"version-2-1-0\"> <h2>Version 2.1.0</h2> <p>Released 2022-03-28</p> <ul class=\"simple\"> <li>Drop support for Python 3.6. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4335\">#4335</a>\n</li> <li>Update Click dependency to &gt;= 8.0. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4008\">#4008</a>\n</li> <li>\n<p>Remove previously deprecated code. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4337\">#4337</a></p> <ul> <li>The CLI does not pass <code>script_info</code> to app factory functions.</li> <li>\n<code>config.from_json</code> is replaced by <code>config.from_file(name, load=json.load)</code>.</li> <li>\n<code>json</code> functions no longer take an <code>encoding</code> parameter.</li> <li>\n<code>safe_join</code> is removed, use <code>werkzeug.utils.safe_join</code> instead.</li> <li>\n<code>total_seconds</code> is removed, use <code>timedelta.total_seconds</code> instead.</li> <li>The same blueprint cannot be registered with the same name. Use <code>name=</code> when registering to specify a unique name.</li> <li>The test client’s <code>as_tuple</code> parameter is removed. Use <code>response.request.environ</code> instead. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4417\">#4417</a>\n</li> </ul> </li> <li>\n<p>Some parameters in <code>send_file</code> and <code>send_from_directory</code> were renamed in 2.0. The deprecation period for the old names is extended to 2.2. Be sure to test with deprecation warnings visible.</p> <ul> <li>\n<code>attachment_filename</code> is renamed to <code>download_name</code>.</li> <li>\n<code>cache_timeout</code> is renamed to <code>max_age</code>.</li> <li>\n<code>add_etags</code> is renamed to <code>etag</code>.</li> <li>\n<code>filename</code> is renamed to <code>path</code>.</li> </ul> </li> <li>The <code>RequestContext.g</code> property is deprecated. Use <code>g</code> directly or <code>AppContext.g</code> instead. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3898\">#3898</a>\n</li> <li>\n<code>copy_current_request_context</code> can decorate async functions. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4303\">#4303</a>\n</li> <li>The CLI uses <code>importlib.metadata</code> instead of <code>pkg_resources</code> to load command entry points. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4419\">#4419</a>\n</li> <li>Overriding <code>FlaskClient.open</code> will not cause an error on redirect. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3396\">#3396</a>\n</li> <li>Add an <code>--exclude-patterns</code> option to the <code>flask run</code> CLI command to specify patterns that will be ignored by the reloader. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4188\">#4188</a>\n</li> <li>When using lazy loading (the default with the debugger), the Click context from the <code>flask run</code> command remains available in the loader thread. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4460\">#4460</a>\n</li> <li>Deleting the session cookie uses the <code>httponly</code> flag. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4485\">#4485</a>\n</li> <li>Relax typing for <code>errorhandler</code> to allow the user to use more precise types and decorate the same function multiple times. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4095,%204295,%204297\">#4095, 4295, 4297</a>\n</li> <li>Fix typing for <code>__exit__</code> methods for better compatibility with <code>ExitStack</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4474\">#4474</a>\n</li> <li>From Werkzeug, for redirect responses the <code>Location</code> header URL will remain relative, and exclude the scheme and domain, by default. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4496\">#4496</a>\n</li> <li>Add <code>Config.from_prefixed_env()</code> to load config values from environment variables that start with <code>FLASK_</code> or another prefix. This parses values as JSON by default, and allows setting keys in nested dicts. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4479\">#4479</a>\n</li> </ul> </section> <section id=\"version-2-0-3\"> <h2>Version 2.0.3</h2> <p>Released 2022-02-14</p> <ul class=\"simple\"> <li>The test client’s <code>as_tuple</code> parameter is deprecated and will be removed in Werkzeug 2.1. It is now also deprecated in Flask, to be removed in Flask 2.1, while remaining compatible with both in 2.0.x. Use <code>response.request.environ</code> instead. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4341\">#4341</a>\n</li> <li>Fix type annotation for <code>errorhandler</code> decorator. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4295\">#4295</a>\n</li> <li>Revert a change to the CLI that caused it to hide <code>ImportError</code> tracebacks when importing the application. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4307\">#4307</a>\n</li> <li>\n<code>app.json_encoder</code> and <code>json_decoder</code> are only passed to <code>dumps</code> and <code>loads</code> if they have custom behavior. This improves performance, mainly on PyPy. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4349\">#4349</a>\n</li> <li>Clearer error message when <code>after_this_request</code> is used outside a request context. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4333\">#4333</a>\n</li> </ul> </section> <section id=\"version-2-0-2\"> <h2>Version 2.0.2</h2> <p>Released 2021-10-04</p> <ul class=\"simple\"> <li>Fix type annotation for <code>teardown_*</code> methods. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4093\">#4093</a>\n</li> <li>Fix type annotation for <code>before_request</code> and <code>before_app_request</code> decorators. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4104\">#4104</a>\n</li> <li>Fixed the issue where typing requires template global decorators to accept functions with no arguments. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4098\">#4098</a>\n</li> <li>Support View and MethodView instances with async handlers. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4112\">#4112</a>\n</li> <li>Enhance typing of <code>app.errorhandler</code> decorator. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4095\">#4095</a>\n</li> <li>Fix registering a blueprint twice with differing names. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4124\">#4124</a>\n</li> <li>Fix the type of <code>static_folder</code> to accept <code>pathlib.Path</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4150\">#4150</a>\n</li> <li>\n<code>jsonify</code> handles <code>decimal.Decimal</code> by encoding to <code>str</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4157\">#4157</a>\n</li> <li>Correctly handle raising deferred errors in CLI lazy loading. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4096\">#4096</a>\n</li> <li>The CLI loader handles <code>**kwargs</code> in a <code>create_app</code> function. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4170\">#4170</a>\n</li> <li>Fix the order of <code>before_request</code> and other callbacks that trigger before the view returns. They are called from the app down to the closest nested blueprint. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4229\">#4229</a>\n</li> </ul> </section> <section id=\"version-2-0-1\"> <h2>Version 2.0.1</h2> <p>Released 2021-05-21</p> <ul class=\"simple\"> <li>Re-add the <code>filename</code> parameter in <code>send_from_directory</code>. The <code>filename</code> parameter has been renamed to <code>path</code>, the old name is deprecated. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4019\">#4019</a>\n</li> <li>Mark top-level names as exported so type checking understands imports in user projects. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4024\">#4024</a>\n</li> <li>Fix type annotation for <code>g</code> and inform mypy that it is a namespace object that has arbitrary attributes. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4020\">#4020</a>\n</li> <li>Fix some types that weren’t available in Python 3.6.0. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4040\">#4040</a>\n</li> <li>Improve typing for <code>send_file</code>, <code>send_from_directory</code>, and <code>get_send_file_max_age</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4044\">#4044</a>, <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/4026\">#4026</a>\n</li> <li>Show an error when a blueprint name contains a dot. The <code>.</code> has special meaning, it is used to separate (nested) blueprint names and the endpoint name. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4041\">#4041</a>\n</li> <li>Combine URL prefixes when nesting blueprints that were created with a <code>url_prefix</code> value. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4037\">#4037</a>\n</li> <li>Revert a change to the order that URL matching was done. The URL is again matched after the session is loaded, so the session is available in custom URL converters. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4053\">#4053</a>\n</li> <li>Re-add deprecated <code>Config.from_json</code>, which was accidentally removed early. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4078\">#4078</a>\n</li> <li>Improve typing for some functions using <code>Callable</code> in their type signatures, focusing on decorator factories. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4060\">#4060</a>\n</li> <li>Nested blueprints are registered with their dotted name. This allows different blueprints with the same name to be nested at different locations. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4069\">#4069</a>\n</li> <li>\n<code>register_blueprint</code> takes a <code>name</code> option to change the (pre-dotted) name the blueprint is registered with. This allows the same blueprint to be registered multiple times with unique names for <code>url_for</code>. Registering the same blueprint with the same name multiple times is deprecated. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/1091\">#1091</a>\n</li> <li>Improve typing for <code>stream_with_context</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4052\">#4052</a>\n</li> </ul> </section> <section id=\"version-2-0-0\"> <h2>Version 2.0.0</h2> <p>Released 2021-05-11</p> <ul class=\"simple\"> <li>Drop support for Python 2 and 3.5.</li> <li>Bump minimum versions of other Pallets projects: Werkzeug &gt;= 2, Jinja2 &gt;= 3, MarkupSafe &gt;= 2, ItsDangerous &gt;= 2, Click &gt;= 8. Be sure to check the change logs for each project. For better compatibility with other applications (e.g. Celery) that still require Click 7, there is no hard dependency on Click 8 yet, but using Click 7 will trigger a DeprecationWarning and Flask 2.1 will depend on Click 8.</li> <li>JSON support no longer uses simplejson. To use another JSON module, override <code>app.json_encoder</code> and <code>json_decoder</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3555\">#3555</a>\n</li> <li>The <code>encoding</code> option to JSON functions is deprecated. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3562\">#3562</a>\n</li> <li>Passing <code>script_info</code> to app factory functions is deprecated. This was not portable outside the <code>flask</code> command. Use <code>click.get_current_context().obj</code> if it’s needed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3552\">#3552</a>\n</li> <li>The CLI shows better error messages when the app failed to load when looking up commands. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2741\">#2741</a>\n</li> <li>Add <code>SessionInterface.get_cookie_name</code> to allow setting the session cookie name dynamically. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3369\">#3369</a>\n</li> <li>Add <code>Config.from_file</code> to load config using arbitrary file loaders, such as <code>toml.load</code> or <code>json.load</code>. <code>Config.from_json</code> is deprecated in favor of this. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3398\">#3398</a>\n</li> <li>The <code>flask run</code> command will only defer errors on reload. Errors present during the initial call will cause the server to exit with the traceback immediately. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3431\">#3431</a>\n</li> <li>\n<code>send_file</code> raises a <code>ValueError</code> when passed an <code>io</code> object in text mode. Previously, it would respond with 200 OK and an empty file. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3358\">#3358</a>\n</li> <li>When using ad-hoc certificates, check for the cryptography library instead of PyOpenSSL. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3492\">#3492</a>\n</li> <li>When specifying a factory function with <code>FLASK_APP</code>, keyword argument can be passed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3553\">#3553</a>\n</li> <li>When loading a <code>.env</code> or <code>.flaskenv</code> file, the current working directory is no longer changed to the location of the file. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3560\">#3560</a>\n</li> <li>When returning a <code>(response, headers)</code> tuple from a view, the headers replace rather than extend existing headers on the response. For example, this allows setting the <code>Content-Type</code> for <code>jsonify()</code>. Use <code>response.headers.extend()</code> if extending is desired. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3628\">#3628</a>\n</li> <li>The <code>Scaffold</code> class provides a common API for the <code>Flask</code> and <code>Blueprint</code> classes. <code>Blueprint</code> information is stored in attributes just like <code>Flask</code>, rather than opaque lambda functions. This is intended to improve consistency and maintainability. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3215\">#3215</a>\n</li> <li>Include <code>samesite</code> and <code>secure</code> options when removing the session cookie. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3726\">#3726</a>\n</li> <li>Support passing a <code>pathlib.Path</code> to <code>static_folder</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3579\">#3579</a>\n</li> <li>\n<code>send_file</code> and <code>send_from_directory</code> are wrappers around the implementations in <code>werkzeug.utils</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3828\">#3828</a>\n</li> <li>Some <code>send_file</code> parameters have been renamed, the old names are deprecated. <code>attachment_filename</code> is renamed to <code>download_name</code>. <code>cache_timeout</code> is renamed to <code>max_age</code>. <code>add_etags</code> is renamed to <code>etag</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3828,%203883\">#3828, 3883</a>\n</li> <li>\n<code>send_file</code> passes <code>download_name</code> even if <code>as_attachment=False</code> by using <code>Content-Disposition: inline</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3828\">#3828</a>\n</li> <li>\n<code>send_file</code> sets <code>conditional=True</code> and <code>max_age=None</code> by default. <code>Cache-Control</code> is set to <code>no-cache</code> if <code>max_age</code> is not set, otherwise <code>public</code>. This tells browsers to validate conditional requests instead of using a timed cache. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3828\">#3828</a>\n</li> <li>\n<code>helpers.safe_join</code> is deprecated. Use <code>werkzeug.utils.safe_join</code> instead. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3828\">#3828</a>\n</li> <li>The request context does route matching before opening the session. This could allow a session interface to change behavior based on <code>request.endpoint</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3776\">#3776</a>\n</li> <li>Use Jinja’s implementation of the <code>|tojson</code> filter. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3881\">#3881</a>\n</li> <li>Add route decorators for common HTTP methods. For example, <code>@app.post(\"/login\")</code> is a shortcut for <code>@app.route(\"/login\", methods=[\"POST\"])</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3907\">#3907</a>\n</li> <li>Support async views, error handlers, before and after request, and teardown functions. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3412\">#3412</a>\n</li> <li>Support nesting blueprints. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/593,%201548\">#593, 1548</a>, <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3923\">#3923</a>\n</li> <li>Set the default encoding to “UTF-8” when loading <code>.env</code> and <code>.flaskenv</code> files to allow to use non-ASCII characters. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3931\">#3931</a>\n</li> <li>\n<code>flask shell</code> sets up tab and history completion like the default <code>python</code> shell if <code>readline</code> is installed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3941\">#3941</a>\n</li> <li>\n<code>helpers.total_seconds()</code> is deprecated. Use <code>timedelta.total_seconds()</code> instead. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3962\">#3962</a>\n</li> <li>Add type hinting. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3973\">#3973</a>.</li> </ul> </section> <section id=\"version-1-1-4\"> <h2>Version 1.1.4</h2> <p>Released 2021-05-13</p> <ul class=\"simple\"> <li>Update <code>static_folder</code> to use <code>_compat.fspath</code> instead of <code>os.fspath</code> to continue supporting Python &lt; 3.6 <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4050\">#4050</a>\n</li> </ul> </section> <section id=\"version-1-1-3\"> <h2>Version 1.1.3</h2> <p>Released 2021-05-13</p> <ul class=\"simple\"> <li>Set maximum versions of Werkzeug, Jinja, Click, and ItsDangerous. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/4043\">#4043</a>\n</li> <li>Re-add support for passing a <code>pathlib.Path</code> for <code>static_folder</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3579\">#3579</a>\n</li> </ul> </section> <section id=\"version-1-1-2\"> <h2>Version 1.1.2</h2> <p>Released 2020-04-03</p> <ul class=\"simple\"> <li>Work around an issue when running the <code>flask</code> command with an external debugger on Windows. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3297\">#3297</a>\n</li> <li>The static route will not catch all URLs if the <code>Flask</code> <code>static_folder</code> argument ends with a slash. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3452\">#3452</a>\n</li> </ul> </section> <section id=\"version-1-1-1\"> <h2>Version 1.1.1</h2> <p>Released 2019-07-08</p> <ul class=\"simple\"> <li>The <code>flask.json_available</code> flag was added back for compatibility with some extensions. It will raise a deprecation warning when used, and will be removed in version 2.0.0. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3288\">#3288</a>\n</li> </ul> </section> <section id=\"version-1-1-0\"> <h2>Version 1.1.0</h2> <p>Released 2019-07-04</p> <ul class=\"simple\"> <li>Bump minimum Werkzeug version to &gt;= 0.15.</li> <li>Drop support for Python 3.4.</li> <li>\n<p>Error handlers for <code>InternalServerError</code> or <code>500</code> will always be passed an instance of <code>InternalServerError</code>. If they are invoked due to an unhandled exception, that original exception is now available as <code>e.original_exception</code> rather than being passed directly to the handler. The same is true if the handler is for the base <code>HTTPException</code>. This makes error handler behavior more consistent. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3266\">#3266</a></p> <ul> <li>\n<code>Flask.finalize_request</code> is called for all unhandled exceptions even if there is no <code>500</code> error handler.</li> </ul> </li> <li>\n<code>Flask.logger</code> takes the same name as <code>Flask.name</code> (the value passed as <code>Flask(import_name)</code>. This reverts 1.0’s behavior of always logging to <code>\"flask.app\"</code>, in order to support multiple apps in the same process. A warning will be shown if old configuration is detected that needs to be moved. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2866\">#2866</a>\n</li> <li>\n<code>RequestContext.copy</code> includes the current session object in the request context copy. This prevents <code>session</code> pointing to an out-of-date object. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2935\">#2935</a>\n</li> <li>Using built-in RequestContext, unprintable Unicode characters in Host header will result in a HTTP 400 response and not HTTP 500 as previously. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2994\">#2994</a>\n</li> <li>\n<code>send_file</code> supports <code>PathLike</code> objects as described in <a class=\"pep reference external\" href=\"https://peps.python.org/pep-0519/\" id=\"index-0\"><strong>PEP 519</strong></a>, to support <code>pathlib</code> in Python 3. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3059\">#3059</a>\n</li> <li>\n<code>send_file</code> supports <code>BytesIO</code> partial content. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2957\">#2957</a>\n</li> <li>\n<code>open_resource</code> accepts the “rt” file mode. This still does the same thing as “r”. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3163\">#3163</a>\n</li> <li>The <code>MethodView.methods</code> attribute set in a base class is used by subclasses. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3138\">#3138</a>\n</li> <li>\n<code>Flask.jinja_options</code> is a <code>dict</code> instead of an <code>ImmutableDict</code> to allow easier configuration. Changes must still be made before creating the environment. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3190\">#3190</a>\n</li> <li>Flask’s <code>JSONMixin</code> for the request and response wrappers was moved into Werkzeug. Use Werkzeug’s version with Flask-specific support. This bumps the Werkzeug dependency to &gt;= 0.15. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3125\">#3125</a>\n</li> <li>The <code>flask</code> command entry point is simplified to take advantage of Werkzeug 0.15’s better reloader support. This bumps the Werkzeug dependency to &gt;= 0.15. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3022\">#3022</a>\n</li> <li>Support <code>static_url_path</code> that ends with a forward slash. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3134\">#3134</a>\n</li> <li>Support empty <code>static_folder</code> without requiring setting an empty <code>static_url_path</code> as well. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3124\">#3124</a>\n</li> <li>\n<code>jsonify</code> supports <code>dataclass</code> objects. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3195\">#3195</a>\n</li> <li>Allow customizing the <code>Flask.url_map_class</code> used for routing. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3069\">#3069</a>\n</li> <li>The development server port can be set to 0, which tells the OS to pick an available port. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2926\">#2926</a>\n</li> <li>The return value from <code>cli.load_dotenv</code> is more consistent with the documentation. It will return <code>False</code> if python-dotenv is not installed, or if the given path isn’t a file. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2937\">#2937</a>\n</li> <li>Signaling support has a stub for the <code>connect_via</code> method when the Blinker library is not installed. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3208\">#3208</a>\n</li> <li>Add an <code>--extra-files</code> option to the <code>flask run</code> CLI command to specify extra files that will trigger the reloader on change. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2897\">#2897</a>\n</li> <li>Allow returning a dictionary from a view function. Similar to how returning a string will produce a <code>text/html</code> response, returning a dict will call <code>jsonify</code> to produce a <code>application/json</code> response. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3111\">#3111</a>\n</li> <li>Blueprints have a <code>cli</code> Click group like <code>app.cli</code>. CLI commands registered with a blueprint will be available as a group under the <code>flask</code> command. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/1357\">#1357</a>.</li> <li>When using the test client as a context manager (<code>with client:</code>), all preserved request contexts are popped when the block exits, ensuring nested contexts are cleaned up correctly. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3157\">#3157</a>\n</li> <li>Show a better error message when the view return type is not supported. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3214\">#3214</a>\n</li> <li>\n<code>flask.testing.make_test_environ_builder()</code> has been deprecated in favour of a new class <code>flask.testing.EnvironBuilder</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/3232\">#3232</a>\n</li> <li>The <code>flask run</code> command no longer fails if Python is not built with SSL support. Using the <code>--cert</code> option will show an appropriate error message. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3211\">#3211</a>\n</li> <li>URL matching now occurs after the request context is pushed, rather than when it’s created. This allows custom URL converters to access the app and request contexts, such as to query a database for an id. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3088\">#3088</a>\n</li> </ul> </section> <section id=\"version-1-0-4\"> <h2>Version 1.0.4</h2> <p>Released 2019-07-04</p> <ul class=\"simple\"> <li>The key information for <code>BadRequestKeyError</code> is no longer cleared outside debug mode, so error handlers can still access it. This requires upgrading to Werkzeug 0.15.5. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3249\">#3249</a>\n</li> <li>\n<code>send_file</code> url quotes the “:” and “/” characters for more compatible UTF-8 filename support in some browsers. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3074\">#3074</a>\n</li> <li>Fixes for <a class=\"pep reference external\" href=\"https://peps.python.org/pep-0451/\" id=\"index-1\"><strong>PEP 451</strong></a> import loaders and pytest 5.x. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3275\">#3275</a>\n</li> <li>Show message about dotenv on stderr instead of stdout. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3285\">#3285</a>\n</li> </ul> </section> <section id=\"version-1-0-3\"> <h2>Version 1.0.3</h2> <p>Released 2019-05-17</p> <ul class=\"simple\"> <li>\n<code>send_file</code> encodes filenames as ASCII instead of Latin-1 (ISO-8859-1). This fixes compatibility with Gunicorn, which is stricter about header encodings than <a class=\"pep reference external\" href=\"https://peps.python.org/pep-3333/\" id=\"index-2\"><strong>PEP 3333</strong></a>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2766\">#2766</a>\n</li> <li>Allow custom CLIs using <code>FlaskGroup</code> to set the debug flag without it always being overwritten based on environment variables. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2765\">#2765</a>\n</li> <li>\n<code>flask --version</code> outputs Werkzeug’s version and simplifies the Python version. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2825\">#2825</a>\n</li> <li>\n<code>send_file</code> handles an <code>attachment_filename</code> that is a native Python 2 string (bytes) with UTF-8 coded bytes. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2933\">#2933</a>\n</li> <li>A catch-all error handler registered for <code>HTTPException</code> will not handle <code>RoutingException</code>, which is used internally during routing. This fixes the unexpected behavior that had been introduced in 1.0. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2986\">#2986</a>\n</li> <li>Passing the <code>json</code> argument to <code>app.test_client</code> does not push/pop an extra app context. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2900\">#2900</a>\n</li> </ul> </section> <section id=\"version-1-0-2\"> <h2>Version 1.0.2</h2> <p>Released 2018-05-02</p> <ul class=\"simple\"> <li>Fix more backwards compatibility issues with merging slashes between a blueprint prefix and route. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2748\">#2748</a>\n</li> <li>Fix error with <code>flask routes</code> command when there are no routes. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2751\">#2751</a>\n</li> </ul> </section> <section id=\"version-1-0-1\"> <h2>Version 1.0.1</h2> <p>Released 2018-04-29</p> <ul class=\"simple\"> <li>Fix registering partials (with no <code>__name__</code>) as view functions. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2730\">#2730</a>\n</li> <li>Don’t treat lists returned from view functions the same as tuples. Only tuples are interpreted as response data. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2736\">#2736</a>\n</li> <li>Extra slashes between a blueprint’s <code>url_prefix</code> and a route URL are merged. This fixes some backwards compatibility issues with the change in 1.0. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2731\">#2731</a>, <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2742\">#2742</a>\n</li> <li>Only trap <code>BadRequestKeyError</code> errors in debug mode, not all <code>BadRequest</code> errors. This allows <code>abort(400)</code> to continue working as expected. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2735\">#2735</a>\n</li> <li>The <code>FLASK_SKIP_DOTENV</code> environment variable can be set to <code>1</code> to skip automatically loading dotenv files. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2722\">#2722</a>\n</li> </ul> </section> <section id=\"version-1-0\"> <h2>Version 1.0</h2> <p>Released 2018-04-26</p> <ul class=\"simple\"> <li>Python 2.6 and 3.3 are no longer supported.</li> <li>Bump minimum dependency versions to the latest stable versions: Werkzeug &gt;= 0.14, Jinja &gt;= 2.10, itsdangerous &gt;= 0.24, Click &gt;= 5.1. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2586\">#2586</a>\n</li> <li>Skip <code>app.run</code> when a Flask application is run from the command line. This avoids some behavior that was confusing to debug.</li> <li>Change the default for <code>JSONIFY_PRETTYPRINT_REGULAR</code> to <code>False</code>. <code>~json.jsonify</code> returns a compact format by default, and an indented format in debug mode. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2193\">#2193</a>\n</li> <li>\n<code>Flask.__init__</code> accepts the <code>host_matching</code> argument and sets it on <code>Flask.url_map</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/1559\">#1559</a>\n</li> <li>\n<code>Flask.__init__</code> accepts the <code>static_host</code> argument and passes it as the <code>host</code> argument when defining the static route. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/1559\">#1559</a>\n</li> <li>\n<code>send_file</code> supports Unicode in <code>attachment_filename</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2223\">#2223</a>\n</li> <li>Pass <code>_scheme</code> argument from <code>url_for</code> to <code>Flask.handle_url_build_error</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2017\">#2017</a>\n</li> <li>\n<code>Flask.add_url_rule</code> accepts the <code>provide_automatic_options</code> argument to disable adding the <code>OPTIONS</code> method. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1489\">#1489</a>\n</li> <li>\n<code>MethodView</code> subclasses inherit method handlers from base classes. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1936\">#1936</a>\n</li> <li>Errors caused while opening the session at the beginning of the request are handled by the app’s error handlers. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2254\">#2254</a>\n</li> <li>Blueprints gained <code>Blueprint.json_encoder</code> and <code>Blueprint.json_decoder</code> attributes to override the app’s encoder and decoder. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1898\">#1898</a>\n</li> <li>\n<code>Flask.make_response</code> raises <code>TypeError</code> instead of <code>ValueError</code> for bad response types. The error messages have been improved to describe why the type is invalid. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2256\">#2256</a>\n</li> <li>Add <code>routes</code> CLI command to output routes registered on the application. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2259\">#2259</a>\n</li> <li>Show warning when session cookie domain is a bare hostname or an IP address, as these may not behave properly in some browsers, such as Chrome. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2282\">#2282</a>\n</li> <li>Allow IP address as exact session cookie domain. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2282\">#2282</a>\n</li> <li>\n<code>SESSION_COOKIE_DOMAIN</code> is set if it is detected through <code>SERVER_NAME</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2282\">#2282</a>\n</li> <li>Auto-detect zero-argument app factory called <code>create_app</code> or <code>make_app</code> from <code>FLASK_APP</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2297\">#2297</a>\n</li> <li>Factory functions are not required to take a <code>script_info</code> parameter to work with the <code>flask</code> command. If they take a single parameter or a parameter named <code>script_info</code>, the <code>ScriptInfo</code> object will be passed. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2319\">#2319</a>\n</li> <li>\n<code>FLASK_APP</code> can be set to an app factory, with arguments if needed, for example <code>FLASK_APP=myproject.app:create_app('dev')</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2326\">#2326</a>\n</li> <li>\n<code>FLASK_APP</code> can point to local packages that are not installed in editable mode, although <code>pip install -e</code> is still preferred. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2414\">#2414</a>\n</li> <li>The <code>View</code> class attribute <code>View.provide_automatic_options</code> is set in <code>View.as_view</code>, to be detected by <code>Flask.add_url_rule</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2316\">#2316</a>\n</li> <li>Error handling will try handlers registered for <code>blueprint, code</code>, <code>app, code</code>, <code>blueprint, exception</code>, <code>app, exception</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2314\">#2314</a>\n</li> <li>\n<code>Cookie</code> is added to the response’s <code>Vary</code> header if the session is accessed at all during the request (and not deleted). <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2288\">#2288</a>\n</li> <li>\n<code>Flask.test_request_context</code> accepts <code>subdomain</code> and <code>url_scheme</code> arguments for use when building the base URL. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1621\">#1621</a>\n</li> <li>Set <code>APPLICATION_ROOT</code> to <code>'/'</code> by default. This was already the implicit default when it was set to <code>None</code>.</li> <li>\n<code>TRAP_BAD_REQUEST_ERRORS</code> is enabled by default in debug mode. <code>BadRequestKeyError</code> has a message with the bad key in debug mode instead of the generic bad request message. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2348\">#2348</a>\n</li> <li>Allow registering new tags with <code>TaggedJSONSerializer</code> to support storing other types in the session cookie. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2352\">#2352</a>\n</li> <li>Only open the session if the request has not been pushed onto the context stack yet. This allows <code>stream_with_context</code> generators to access the same session that the containing view uses. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2354\">#2354</a>\n</li> <li>Add <code>json</code> keyword argument for the test client request methods. This will dump the given object as JSON and set the appropriate content type. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2358\">#2358</a>\n</li> <li>Extract JSON handling to a mixin applied to both the <code>Request</code> and <code>Response</code> classes. This adds the <code>Response.is_json</code> and <code>Response.get_json</code> methods to the response to make testing JSON response much easier. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2358\">#2358</a>\n</li> <li>Removed error handler caching because it caused unexpected results for some exception inheritance hierarchies. Register handlers explicitly for each exception if you want to avoid traversing the MRO. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2362\">#2362</a>\n</li> <li>Fix incorrect JSON encoding of aware, non-UTC datetimes. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2374\">#2374</a>\n</li> <li>Template auto reloading will honor debug mode even if <code>Flask.jinja_env</code> was already accessed. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2373\">#2373</a>\n</li> <li>\n<p>The following old deprecated code was removed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2385\">#2385</a></p> <ul> <li>\n<code>flask.ext</code> - import extensions directly by their name instead of through the <code>flask.ext</code> namespace. For example, <code>import flask.ext.sqlalchemy</code> becomes <code>import flask_sqlalchemy</code>.</li> <li>\n<code>Flask.init_jinja_globals</code> - extend <code>Flask.create_jinja_environment</code> instead.</li> <li>\n<code>Flask.error_handlers</code> - tracked by <code>Flask.error_handler_spec</code>, use <code>Flask.errorhandler</code> to register handlers.</li> <li>\n<code>Flask.request_globals_class</code> - use <code>Flask.app_ctx_globals_class</code> instead.</li> <li>\n<code>Flask.static_path</code> - use <code>Flask.static_url_path</code> instead.</li> <li>\n<code>Request.module</code> - use <code>Request.blueprint</code> instead.</li> </ul> </li> <li>The <code>Request.json</code> property is no longer deprecated. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/1421\">#1421</a>\n</li> <li>Support passing a <code>EnvironBuilder</code> or <code>dict</code> to <code>test_client.open</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2412\">#2412</a>\n</li> <li>The <code>flask</code> command and <code>Flask.run</code> will load environment variables from <code>.env</code> and <code>.flaskenv</code> files if python-dotenv is installed. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2416\">#2416</a>\n</li> <li>When passing a full URL to the test client, the scheme in the URL is used instead of <code>PREFERRED_URL_SCHEME</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2430\">#2430</a>\n</li> <li>\n<code>Flask.logger</code> has been simplified. <code>LOGGER_NAME</code> and <code>LOGGER_HANDLER_POLICY</code> config was removed. The logger is always named <code>flask.app</code>. The level is only set on first access, it doesn’t check <code>Flask.debug</code> each time. Only one format is used, not different ones depending on <code>Flask.debug</code>. No handlers are removed, and a handler is only added if no handlers are already configured. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2436\">#2436</a>\n</li> <li>Blueprint view function names may not contain dots. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2450\">#2450</a>\n</li> <li>Fix a <code>ValueError</code> caused by invalid <code>Range</code> requests in some cases. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2526\">#2526</a>\n</li> <li>The development server uses threads by default. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2529\">#2529</a>\n</li> <li>Loading config files with <code>silent=True</code> will ignore <code>ENOTDIR</code> errors. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2581\">#2581</a>\n</li> <li>Pass <code>--cert</code> and <code>--key</code> options to <code>flask run</code> to run the development server over HTTPS. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2606\">#2606</a>\n</li> <li>Added <code>SESSION_COOKIE_SAMESITE</code> to control the <code>SameSite</code> attribute on the session cookie. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2607\">#2607</a>\n</li> <li>Added <code>Flask.test_cli_runner</code> to create a Click runner that can invoke Flask CLI commands for testing. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2636\">#2636</a>\n</li> <li>Subdomain matching is disabled by default and setting <code>SERVER_NAME</code> does not implicitly enable it. It can be enabled by passing <code>subdomain_matching=True</code> to the <code>Flask</code> constructor. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2635\">#2635</a>\n</li> <li>A single trailing slash is stripped from the blueprint <code>url_prefix</code> when it is registered with the app. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2629\">#2629</a>\n</li> <li>\n<code>Request.get_json</code> doesn’t cache the result if parsing fails when <code>silent</code> is true. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2651\">#2651</a>\n</li> <li>\n<code>Request.get_json</code> no longer accepts arbitrary encodings. Incoming JSON should be encoded using UTF-8 per <a class=\"rfc reference external\" href=\"https://datatracker.ietf.org/doc/html/rfc8259.html\" id=\"index-3\"><strong>RFC 8259</strong></a>, but Flask will autodetect UTF-8, -16, or -32. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2691\">#2691</a>\n</li> <li>Added <code>MAX_COOKIE_SIZE</code> and <code>Response.max_cookie_size</code> to control when Werkzeug warns about large cookies that browsers may ignore. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2693\">#2693</a>\n</li> <li>Updated documentation theme to make docs look better in small windows. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2709\">#2709</a>\n</li> <li>Rewrote the tutorial docs and example project to take a more structured approach to help new users avoid common pitfalls. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2676\">#2676</a>\n</li> </ul> </section> <section id=\"version-0-12-5\"> <h2>Version 0.12.5</h2> <p>Released 2020-02-10</p> <ul class=\"simple\"> <li>Pin Werkzeug to &lt; 1.0.0. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/3497\">#3497</a>\n</li> </ul> </section> <section id=\"version-0-12-4\"> <h2>Version 0.12.4</h2> <p>Released 2018-04-29</p> <ul class=\"simple\"> <li>Repackage 0.12.3 to fix package layout issue. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2728\">#2728</a>\n</li> </ul> </section> <section id=\"version-0-12-3\"> <h2>Version 0.12.3</h2> <p>Released 2018-04-26</p> <ul class=\"simple\"> <li>\n<code>Request.get_json</code> no longer accepts arbitrary encodings. Incoming JSON should be encoded using UTF-8 per <a class=\"rfc reference external\" href=\"https://datatracker.ietf.org/doc/html/rfc8259.html\" id=\"index-4\"><strong>RFC 8259</strong></a>, but Flask will autodetect UTF-8, -16, or -32. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2692\">#2692</a>\n</li> <li>Fix a Python warning about imports when using <code>python -m flask</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2666\">#2666</a>\n</li> <li>Fix a <code>ValueError</code> caused by invalid <code>Range</code> requests in some cases.</li> </ul> </section> <section id=\"version-0-12-2\"> <h2>Version 0.12.2</h2> <p>Released 2017-05-16</p> <ul class=\"simple\"> <li>Fix a bug in <code>safe_join</code> on Windows.</li> </ul> </section> <section id=\"version-0-12-1\"> <h2>Version 0.12.1</h2> <p>Released 2017-03-31</p> <ul class=\"simple\"> <li>Prevent <code>flask run</code> from showing a <code>NoAppException</code> when an <code>ImportError</code> occurs within the imported application module.</li> <li>Fix encoding behavior of <code>app.config.from_pyfile</code> for Python 3. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2118\">#2118</a>\n</li> <li>Use the <code>SERVER_NAME</code> config if it is present as default values for <code>app.run</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/2109\">#2109</a>, <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2152\">#2152</a>\n</li> <li>Call <code>ctx.auto_pop</code> with the exception object instead of <code>None</code>, in the event that a <code>BaseException</code> such as <code>KeyboardInterrupt</code> is raised in a request handler.</li> </ul> </section> <section id=\"version-0-12\"> <h2>Version 0.12</h2> <p>Released 2016-12-21, codename Punsch</p> <ul class=\"simple\"> <li>The cli command now responds to <code>--version</code>.</li> <li>Mimetype guessing and ETag generation for file-like objects in <code>send_file</code> has been removed. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/104\">#104</a>, :pr`1849`</li> <li>Mimetype guessing in <code>send_file</code> now fails loudly and doesn’t fall back to <code>application/octet-stream</code>. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1988\">#1988</a>\n</li> <li>Make <code>flask.safe_join</code> able to join multiple paths like <code>os.path.join</code> <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1730\">#1730</a>\n</li> <li>Revert a behavior change that made the dev server crash instead of returning an Internal Server Error. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/2006\">#2006</a>\n</li> <li>Correctly invoke response handlers for both regular request dispatching as well as error handlers.</li> <li>Disable logger propagation by default for the app logger.</li> <li>Add support for range requests in <code>send_file</code>.</li> <li>\n<code>app.test_client</code> includes preset default environment, which can now be directly set, instead of per <code>client.get</code>.</li> <li>Fix crash when running under PyPy3. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1814\">#1814</a>\n</li> </ul> </section> <section id=\"version-0-11-1\"> <h2>Version 0.11.1</h2> <p>Released 2016-06-07</p> <ul class=\"simple\"> <li>Fixed a bug that prevented <code>FLASK_APP=foobar/__init__.py</code> from working. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1872\">#1872</a>\n</li> </ul> </section> <section id=\"version-0-11\"> <h2>Version 0.11</h2> <p>Released 2016-05-29, codename Absinthe</p> <ul class=\"simple\"> <li>Added support to serializing top-level arrays to <code>jsonify</code>. This introduces a security risk in ancient browsers.</li> <li>Added before_render_template signal.</li> <li>Added <code>**kwargs</code> to <code>Flask.test_client</code> to support passing additional keyword arguments to the constructor of <code>Flask.test_client_class</code>.</li> <li>Added <code>SESSION_REFRESH_EACH_REQUEST</code> config key that controls the set-cookie behavior. If set to <code>True</code> a permanent session will be refreshed each request and get their lifetime extended, if set to <code>False</code> it will only be modified if the session actually modifies. Non permanent sessions are not affected by this and will always expire if the browser window closes.</li> <li>Made Flask support custom JSON mimetypes for incoming data.</li> <li>Added support for returning tuples in the form <code>(response,\nheaders)</code> from a view function.</li> <li>Added <code>Config.from_json</code>.</li> <li>Added <code>Flask.config_class</code>.</li> <li>Added <code>Config.get_namespace</code>.</li> <li>Templates are no longer automatically reloaded outside of debug mode. This can be configured with the new <code>TEMPLATES_AUTO_RELOAD</code> config key.</li> <li>Added a workaround for a limitation in Python 3.3’s namespace loader.</li> <li>Added support for explicit root paths when using Python 3.3’s namespace packages.</li> <li>Added <code>flask</code> and the <code>flask.cli</code> module to start the local debug server through the click CLI system. This is recommended over the old <code>flask.run()</code> method as it works faster and more reliable due to a different design and also replaces <code>Flask-Script</code>.</li> <li>Error handlers that match specific classes are now checked first, thereby allowing catching exceptions that are subclasses of HTTP exceptions (in <code>werkzeug.exceptions</code>). This makes it possible for an extension author to create exceptions that will by default result in the HTTP error of their choosing, but may be caught with a custom error handler if desired.</li> <li>Added <code>Config.from_mapping</code>.</li> <li>Flask will now log by default even if debug is disabled. The log format is now hardcoded but the default log handling can be disabled through the <code>LOGGER_HANDLER_POLICY</code> configuration key.</li> <li>Removed deprecated module functionality.</li> <li>Added the <code>EXPLAIN_TEMPLATE_LOADING</code> config flag which when enabled will instruct Flask to explain how it locates templates. This should help users debug when the wrong templates are loaded.</li> <li>Enforce blueprint handling in the order they were registered for template loading.</li> <li>Ported test suite to py.test.</li> <li>Deprecated <code>request.json</code> in favour of <code>request.get_json()</code>.</li> <li>Add “pretty” and “compressed” separators definitions in jsonify() method. Reduces JSON response size when <code>JSONIFY_PRETTYPRINT_REGULAR=False</code> by removing unnecessary white space included by default after separators.</li> <li>JSON responses are now terminated with a newline character, because it is a convention that UNIX text files end with a newline and some clients don’t deal well when this newline is missing. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1262\">#1262</a>\n</li> <li>The automatically provided <code>OPTIONS</code> method is now correctly disabled if the user registered an overriding rule with the lowercase-version <code>options</code>. <a class=\"extlink-issue reference external\" href=\"https://github.com/pallets/flask/issues/1288\">#1288</a>\n</li> <li>\n<code>flask.json.jsonify</code> now supports the <code>datetime.date</code> type. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1326\">#1326</a>\n</li> <li>Don’t leak exception info of already caught exceptions to context teardown handlers. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1393\">#1393</a>\n</li> <li>Allow custom Jinja environment subclasses. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1422\">#1422</a>\n</li> <li>Updated extension dev guidelines.</li> <li>\n<code>flask.g</code> now has <code>pop()</code> and <code>setdefault</code> methods.</li> <li>Turn on autoescape for <code>flask.templating.render_template_string</code> by default. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1515\">#1515</a>\n</li> <li>\n<code>flask.ext</code> is now deprecated. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1484\">#1484</a>\n</li> <li>\n<code>send_from_directory</code> now raises BadRequest if the filename is invalid on the server OS. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1763\">#1763</a>\n</li> <li>Added the <code>JSONIFY_MIMETYPE</code> configuration variable. <a class=\"extlink-pr reference external\" href=\"https://github.com/pallets/flask/pull/1728\">#1728</a>\n</li> <li>Exceptions during teardown handling will no longer leave bad application contexts lingering around.</li> <li>Fixed broken <code>test_appcontext_signals()</code> test case.</li> <li>Raise an <code>AttributeError</code> in <code>helpers.find_package</code> with a useful message explaining why it is raised when a <a class=\"pep reference external\" href=\"https://peps.python.org/pep-0302/\" id=\"index-5\"><strong>PEP 302</strong></a> import hook is used without an <code>is_package()</code> method.</li> <li>Fixed an issue causing exceptions raised before entering a request or app context to be passed to teardown handlers.</li> <li>Fixed an issue with query parameters getting removed from requests in the test client when absolute URLs were requested.</li> <li>Made <code>@before_first_request</code> into a decorator as intended.</li> <li>Fixed an etags bug when sending a file streams with a name.</li> <li>Fixed <code>send_from_directory</code> not expanding to the application root path correctly.</li> <li>Changed logic of before first request handlers to flip the flag after invoking. This will allow some uses that are potentially dangerous but should probably be permitted.</li> <li>Fixed Python 3 bug when a handler from <code>app.url_build_error_handlers</code> reraises the <code>BuildError</code>.</li> </ul> </section> <section id=\"version-0-10-1\"> <h2>Version 0.10.1</h2> <p>Released 2013-06-14</p> <ul class=\"simple\"> <li>Fixed an issue where <code>|tojson</code> was not quoting single quotes which made the filter not work properly in HTML attributes. Now it’s possible to use that filter in single quoted attributes. This should make using that filter with angular.js easier.</li> <li>Added support for byte strings back to the session system. This broke compatibility with the common case of people putting binary data for token verification into the session.</li> <li>Fixed an issue where registering the same method twice for the same endpoint would trigger an exception incorrectly.</li> </ul> </section> <section id=\"version-0-10\"> <h2>Version 0.10</h2> <p>Released 2013-06-13, codename Limoncello</p> <ul class=\"simple\"> <li>Changed default cookie serialization format from pickle to JSON to limit the impact an attacker can do if the secret key leaks.</li> <li>Added <code>template_test</code> methods in addition to the already existing <code>template_filter</code> method family.</li> <li>Added <code>template_global</code> methods in addition to the already existing <code>template_filter</code> method family.</li> <li>Set the content-length header for x-sendfile.</li> <li>\n<code>tojson</code> filter now does not escape script blocks in HTML5 parsers.</li> <li>\n<code>tojson</code> used in templates is now safe by default. This was allowed due to the different escaping behavior.</li> <li>Flask will now raise an error if you attempt to register a new function on an already used endpoint.</li> <li>Added wrapper module around simplejson and added default serialization of datetime objects. This allows much easier customization of how JSON is handled by Flask or any Flask extension.</li> <li>Removed deprecated internal <code>flask.session</code> module alias. Use <code>flask.sessions</code> instead to get the session module. This is not to be confused with <code>flask.session</code> the session proxy.</li> <li>Templates can now be rendered without request context. The behavior is slightly different as the <code>request</code>, <code>session</code> and <code>g</code> objects will not be available and blueprint’s context processors are not called.</li> <li>The config object is now available to the template as a real global and not through a context processor which makes it available even in imported templates by default.</li> <li>Added an option to generate non-ascii encoded JSON which should result in less bytes being transmitted over the network. It’s disabled by default to not cause confusion with existing libraries that might expect <code>flask.json.dumps</code> to return bytes by default.</li> <li>\n<code>flask.g</code> is now stored on the app context instead of the request context.</li> <li>\n<code>flask.g</code> now gained a <code>get()</code> method for not erroring out on non existing items.</li> <li>\n<code>flask.g</code> now can be used with the <code>in</code> operator to see what’s defined and it now is iterable and will yield all attributes stored.</li> <li>\n<code>flask.Flask.request_globals_class</code> got renamed to <code>flask.Flask.app_ctx_globals_class</code> which is a better name to what it does since 0.10.</li> <li>\n<code>request</code>, <code>session</code> and <code>g</code> are now also added as proxies to the template context which makes them available in imported templates. One has to be very careful with those though because usage outside of macros might cause caching.</li> <li>Flask will no longer invoke the wrong error handlers if a proxy exception is passed through.</li> <li>Added a workaround for chrome’s cookies in localhost not working as intended with domain names.</li> <li>Changed logic for picking defaults for cookie values from sessions to work better with Google Chrome.</li> <li>Added <code>message_flashed</code> signal that simplifies flashing testing.</li> <li>Added support for copying of request contexts for better working with greenlets.</li> <li>Removed custom JSON HTTP exception subclasses. If you were relying on them you can reintroduce them again yourself trivially. Using them however is strongly discouraged as the interface was flawed.</li> <li>Python requirements changed: requiring Python 2.6 or 2.7 now to prepare for Python 3.3 port.</li> <li>Changed how the teardown system is informed about exceptions. This is now more reliable in case something handles an exception halfway through the error handling process.</li> <li>Request context preservation in debug mode now keeps the exception information around which means that teardown handlers are able to distinguish error from success cases.</li> <li>Added the <code>JSONIFY_PRETTYPRINT_REGULAR</code> configuration variable.</li> <li>Flask now orders JSON keys by default to not trash HTTP caches due to different hash seeds between different workers.</li> <li>Added <code>appcontext_pushed</code> and <code>appcontext_popped</code> signals.</li> <li>The builtin run method now takes the <code>SERVER_NAME</code> into account when picking the default port to run on.</li> <li>Added <code>flask.request.get_json()</code> as a replacement for the old <code>flask.request.json</code> property.</li> </ul> </section> <section id=\"version-0-9\"> <h2>Version 0.9</h2> <p>Released 2012-07-01, codename Campari</p> <ul class=\"simple\"> <li>The <code>Request.on_json_loading_failed</code> now returns a JSON formatted response by default.</li> <li>The <code>url_for</code> function now can generate anchors to the generated links.</li> <li>The <code>url_for</code> function now can also explicitly generate URL rules specific to a given HTTP method.</li> <li>Logger now only returns the debug log setting if it was not set explicitly.</li> <li>Unregister a circular dependency between the WSGI environment and the request object when shutting down the request. This means that environ <code>werkzeug.request</code> will be <code>None</code> after the response was returned to the WSGI server but has the advantage that the garbage collector is not needed on CPython to tear down the request unless the user created circular dependencies themselves.</li> <li>Session is now stored after callbacks so that if the session payload is stored in the session you can still modify it in an after request callback.</li> <li>The <code>Flask</code> class will avoid importing the provided import name if it can (the required first parameter), to benefit tools which build Flask instances programmatically. The Flask class will fall back to using import on systems with custom module hooks, e.g. Google App Engine, or when the import name is inside a zip archive (usually an egg) prior to Python 2.7.</li> <li>Blueprints now have a decorator to add custom template filters application wide, <code>Blueprint.app_template_filter</code>.</li> <li>The Flask and Blueprint classes now have a non-decorator method for adding custom template filters application wide, <code>Flask.add_template_filter</code> and <code>Blueprint.add_app_template_filter</code>.</li> <li>The <code>get_flashed_messages</code> function now allows rendering flashed message categories in separate blocks, through a <code>category_filter</code> argument.</li> <li>The <code>Flask.run</code> method now accepts <code>None</code> for <code>host</code> and <code>port</code> arguments, using default values when <code>None</code>. This allows for calling run using configuration values, e.g. <code>app.run(app.config.get('MYHOST'), app.config.get('MYPORT'))</code>, with proper behavior whether or not a config file is provided.</li> <li>The <code>render_template</code> method now accepts a either an iterable of template names or a single template name. Previously, it only accepted a single template name. On an iterable, the first template found is rendered.</li> <li>Added <code>Flask.app_context</code> which works very similar to the request context but only provides access to the current application. This also adds support for URL generation without an active request context.</li> <li>View functions can now return a tuple with the first instance being an instance of <code>Response</code>. This allows for returning <code>jsonify(error=\"error msg\"), 400</code> from a view function.</li> <li>\n<code>Flask</code> and <code>Blueprint</code> now provide a <code>get_send_file_max_age</code> hook for subclasses to override behavior of serving static files from Flask when using <code>Flask.send_static_file</code> (used for the default static file handler) and <code>helpers.send_file</code>. This hook is provided a filename, which for example allows changing cache controls by file extension. The default max-age for <code>send_file</code> and static files can be configured through a new <code>SEND_FILE_MAX_AGE_DEFAULT</code> configuration variable, which is used in the default <code>get_send_file_max_age</code> implementation.</li> <li>Fixed an assumption in sessions implementation which could break message flashing on sessions implementations which use external storage.</li> <li>Changed the behavior of tuple return values from functions. They are no longer arguments to the response object, they now have a defined meaning.</li> <li>Added <code>Flask.request_globals_class</code> to allow a specific class to be used on creation of the <code>g</code> instance of each request.</li> <li>Added <code>required_methods</code> attribute to view functions to force-add methods on registration.</li> <li>Added <code>flask.after_this_request</code>.</li> <li>Added <code>flask.stream_with_context</code> and the ability to push contexts multiple times without producing unexpected behavior.</li> </ul> </section> <section id=\"version-0-8-1\"> <h2>Version 0.8.1</h2> <p>Released 2012-07-01</p> <ul class=\"simple\"> <li>Fixed an issue with the undocumented <code>flask.session</code> module to not work properly on Python 2.5. It should not be used but did cause some problems for package managers.</li> </ul> </section> <section id=\"version-0-8\"> <h2>Version 0.8</h2> <p>Released 2011-09-29, codename Rakija</p> <ul class=\"simple\"> <li>Refactored session support into a session interface so that the implementation of the sessions can be changed without having to override the Flask class.</li> <li>Empty session cookies are now deleted properly automatically.</li> <li>View functions can now opt out of getting the automatic OPTIONS implementation.</li> <li>HTTP exceptions and Bad Request errors can now be trapped so that they show up normally in the traceback.</li> <li>Flask in debug mode is now detecting some common problems and tries to warn you about them.</li> <li>Flask in debug mode will now complain with an assertion error if a view was attached after the first request was handled. This gives earlier feedback when users forget to import view code ahead of time.</li> <li>Added the ability to register callbacks that are only triggered once at the beginning of the first request with <code>Flask.before_first_request</code>.</li> <li>Malformed JSON data will now trigger a bad request HTTP exception instead of a value error which usually would result in a 500 internal server error if not handled. This is a backwards incompatible change.</li> <li>Applications now not only have a root path where the resources and modules are located but also an instance path which is the designated place to drop files that are modified at runtime (uploads etc.). Also this is conceptually only instance depending and outside version control so it’s the perfect place to put configuration files etc.</li> <li>Added the <code>APPLICATION_ROOT</code> configuration variable.</li> <li>Implemented <code>TestClient.session_transaction</code> to easily modify sessions from the test environment.</li> <li>Refactored test client internally. The <code>APPLICATION_ROOT</code> configuration variable as well as <code>SERVER_NAME</code> are now properly used by the test client as defaults.</li> <li>Added <code>View.decorators</code> to support simpler decorating of pluggable (class-based) views.</li> <li>Fixed an issue where the test client if used with the “with” statement did not trigger the execution of the teardown handlers.</li> <li>Added finer control over the session cookie parameters.</li> <li>HEAD requests to a method view now automatically dispatch to the <code>get</code> method if no handler was implemented.</li> <li>Implemented the virtual <code>flask.ext</code> package to import extensions from.</li> <li>The context preservation on exceptions is now an integral component of Flask itself and no longer of the test client. This cleaned up some internal logic and lowers the odds of runaway request contexts in unittests.</li> <li>Fixed the Jinja2 environment’s <code>list_templates</code> method not returning the correct names when blueprints or modules were involved.</li> </ul> </section> <section id=\"version-0-7-2\"> <h2>Version 0.7.2</h2> <p>Released 2011-07-06</p> <ul class=\"simple\"> <li>Fixed an issue with URL processors not properly working on blueprints.</li> </ul> </section> <section id=\"version-0-7-1\"> <h2>Version 0.7.1</h2> <p>Released 2011-06-29</p> <ul class=\"simple\"> <li>Added missing future import that broke 2.5 compatibility.</li> <li>Fixed an infinite redirect issue with blueprints.</li> </ul> </section> <section id=\"version-0-7\"> <h2>Version 0.7</h2> <p>Released 2011-06-28, codename Grappa</p> <ul class=\"simple\"> <li>Added <code>Flask.make_default_options_response</code> which can be used by subclasses to alter the default behavior for <code>OPTIONS</code> responses.</li> <li>Unbound locals now raise a proper <code>RuntimeError</code> instead of an <code>AttributeError</code>.</li> <li>Mimetype guessing and etag support based on file objects is now deprecated for <code>send_file</code> because it was unreliable. Pass filenames instead or attach your own etags and provide a proper mimetype by hand.</li> <li>Static file handling for modules now requires the name of the static folder to be supplied explicitly. The previous autodetection was not reliable and caused issues on Google’s App Engine. Until 1.0 the old behavior will continue to work but issue dependency warnings.</li> <li>Fixed a problem for Flask to run on jython.</li> <li>Added a <code>PROPAGATE_EXCEPTIONS</code> configuration variable that can be used to flip the setting of exception propagation which previously was linked to <code>DEBUG</code> alone and is now linked to either <code>DEBUG</code> or <code>TESTING</code>.</li> <li>Flask no longer internally depends on rules being added through the <code>add_url_rule</code> function and can now also accept regular werkzeug rules added to the url map.</li> <li>Added an <code>endpoint</code> method to the flask application object which allows one to register a callback to an arbitrary endpoint with a decorator.</li> <li>Use Last-Modified for static file sending instead of Date which was incorrectly introduced in 0.6.</li> <li>Added <code>create_jinja_loader</code> to override the loader creation process.</li> <li>Implemented a silent flag for <code>config.from_pyfile</code>.</li> <li>Added <code>teardown_request</code> decorator, for functions that should run at the end of a request regardless of whether an exception occurred. Also the behavior for <code>after_request</code> was changed. It’s now no longer executed when an exception is raised.</li> <li>Implemented <code>has_request_context</code>.</li> <li>Deprecated <code>init_jinja_globals</code>. Override the <code>Flask.create_jinja_environment</code> method instead to achieve the same functionality.</li> <li>Added <code>safe_join</code>.</li> <li>The automatic JSON request data unpacking now looks at the charset mimetype parameter.</li> <li>Don’t modify the session on <code>get_flashed_messages</code> if there are no messages in the session.</li> <li>\n<code>before_request</code> handlers are now able to abort requests with errors.</li> <li>It is not possible to define user exception handlers. That way you can provide custom error messages from a central hub for certain errors that might occur during request processing (for instance database connection errors, timeouts from remote resources etc.).</li> <li>Blueprints can provide blueprint specific error handlers.</li> <li>Implemented generic class-based views.</li> </ul> </section> <section id=\"version-0-6-1\"> <h2>Version 0.6.1</h2> <p>Released 2010-12-31</p> <ul class=\"simple\"> <li>Fixed an issue where the default <code>OPTIONS</code> response was not exposing all valid methods in the <code>Allow</code> header.</li> <li>Jinja2 template loading syntax now allows “./” in front of a template load path. Previously this caused issues with module setups.</li> <li>Fixed an issue where the subdomain setting for modules was ignored for the static folder.</li> <li>Fixed a security problem that allowed clients to download arbitrary files if the host server was a windows based operating system and the client uses backslashes to escape the directory the files where exposed from.</li> </ul> </section> <section id=\"version-0-6\"> <h2>Version 0.6</h2> <p>Released 2010-07-27, codename Whisky</p> <ul class=\"simple\"> <li>After request functions are now called in reverse order of registration.</li> <li>OPTIONS is now automatically implemented by Flask unless the application explicitly adds ‘OPTIONS’ as method to the URL rule. In this case no automatic OPTIONS handling kicks in.</li> <li>Static rules are now even in place if there is no static folder for the module. This was implemented to aid GAE which will remove the static folder if it’s part of a mapping in the .yml file.</li> <li>\n<code>Flask.config</code> is now available in the templates as <code>config</code>.</li> <li>Context processors will no longer override values passed directly to the render function.</li> <li>Added the ability to limit the incoming request data with the new <code>MAX_CONTENT_LENGTH</code> configuration value.</li> <li>The endpoint for the <code>Module.add_url_rule</code> method is now optional to be consistent with the function of the same name on the application object.</li> <li>Added a <code>make_response</code> function that simplifies creating response object instances in views.</li> <li>Added signalling support based on blinker. This feature is currently optional and supposed to be used by extensions and applications. If you want to use it, make sure to have <code>blinker</code> installed.</li> <li>Refactored the way URL adapters are created. This process is now fully customizable with the <code>Flask.create_url_adapter</code> method.</li> <li>Modules can now register for a subdomain instead of just an URL prefix. This makes it possible to bind a whole module to a configurable subdomain.</li> </ul> </section> <section id=\"version-0-5-2\"> <h2>Version 0.5.2</h2> <p>Released 2010-07-15</p> <ul class=\"simple\"> <li>Fixed another issue with loading templates from directories when modules were used.</li> </ul> </section> <section id=\"version-0-5-1\"> <h2>Version 0.5.1</h2> <p>Released 2010-07-06</p> <ul class=\"simple\"> <li>Fixes an issue with template loading from directories when modules where used.</li> </ul> </section> <section id=\"version-0-5\"> <h2>Version 0.5</h2> <p>Released 2010-07-06, codename Calvados</p> <ul class=\"simple\"> <li>Fixed a bug with subdomains that was caused by the inability to specify the server name. The server name can now be set with the <code>SERVER_NAME</code> config key. This key is now also used to set the session cookie cross-subdomain wide.</li> <li>Autoescaping is no longer active for all templates. Instead it is only active for <code>.html</code>, <code>.htm</code>, <code>.xml</code> and <code>.xhtml</code>. Inside templates this behavior can be changed with the <code>autoescape</code> tag.</li> <li>Refactored Flask internally. It now consists of more than a single file.</li> <li>\n<code>send_file</code> now emits etags and has the ability to do conditional responses builtin.</li> <li>(temporarily) dropped support for zipped applications. This was a rarely used feature and led to some confusing behavior.</li> <li>Added support for per-package template and static-file directories.</li> <li>Removed support for <code>create_jinja_loader</code> which is no longer used in 0.5 due to the improved module support.</li> <li>Added a helper function to expose files from any directory.</li> </ul> </section> <section id=\"version-0-4\"> <h2>Version 0.4</h2> <p>Released 2010-06-18, codename Rakia</p> <ul class=\"simple\"> <li>Added the ability to register application wide error handlers from modules.</li> <li>\n<code>Flask.after_request</code> handlers are now also invoked if the request dies with an exception and an error handling page kicks in.</li> <li>Test client has not the ability to preserve the request context for a little longer. This can also be used to trigger custom requests that do not pop the request stack for testing.</li> <li>Because the Python standard library caches loggers, the name of the logger is configurable now to better support unittests.</li> <li>Added <code>TESTING</code> switch that can activate unittesting helpers.</li> <li>The logger switches to <code>DEBUG</code> mode now if debug is enabled.</li> </ul> </section> <section id=\"version-0-3-1\"> <h2>Version 0.3.1</h2> <p>Released 2010-05-28</p> <ul class=\"simple\"> <li>Fixed a error reporting bug with <code>Config.from_envvar</code>.</li> <li>Removed some unused code.</li> <li>Release does no longer include development leftover files (.git folder for themes, built documentation in zip and pdf file and some .pyc files)</li> </ul> </section> <section id=\"version-0-3\"> <h2>Version 0.3</h2> <p>Released 2010-05-28, codename Schnaps</p> <ul class=\"simple\"> <li>Added support for categories for flashed messages.</li> <li>The application now configures a <code>logging.Handler</code> and will log request handling exceptions to that logger when not in debug mode. This makes it possible to receive mails on server errors for example.</li> <li>Added support for context binding that does not require the use of the with statement for playing in the console.</li> <li>The request context is now available within the with statement making it possible to further push the request context or pop it.</li> <li>Added support for configurations.</li> </ul> </section> <section id=\"version-0-2\"> <h2>Version 0.2</h2> <p>Released 2010-05-12, codename J?germeister</p> <ul class=\"simple\"> <li>Various bugfixes</li> <li>Integrated JSON support</li> <li>Added <code>get_template_attribute</code> helper function.</li> <li>\n<code>Flask.add_url_rule</code> can now also register a view function.</li> <li>Refactored internal request dispatching.</li> <li>Server listens on 127.0.0.1 by default now to fix issues with chrome.</li> <li>Added external URL support.</li> <li>Added support for <code>send_file</code>.</li> <li>Module support and internal request handling refactoring to better support pluggable applications.</li> <li>Sessions can be set to be permanent now on a per-session basis.</li> <li>Better error reporting on missing secret keys.</li> <li>Added support for Google Appengine.</li> </ul> </section> <section id=\"version-0-1\"> <h2>Version 0.1</h2> <p>Released 2010-04-16</p> <ul class=\"simple\"> <li>First public preview release.</li> </ul> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/changes/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/changes/</a>\n  </p>\n</div>\n","deploying/gunicorn/index":"<h1>Gunicorn</h1> <p><a class=\"reference external\" href=\"https://gunicorn.org/\">Gunicorn</a> is a pure Python WSGI server with simple configuration and multiple worker implementations for performance tuning.</p> <ul class=\"simple\"> <li>It tends to integrate easily with hosting platforms.</li> <li>It does not support Windows (but does run on WSL).</li> <li>It is easy to install as it does not require additional dependencies or compilation.</li> <li>It has built-in async worker support using gevent or eventlet.</li> </ul> <p>This page outlines the basics of running Gunicorn. Be sure to read its <a class=\"reference external\" href=\"https://docs.gunicorn.org/\">documentation</a> and use <code>gunicorn --help</code> to understand what features are available.</p> <section id=\"installing\"> <h2>Installing</h2> <p>Gunicorn is easy to install, as it does not require external dependencies or compilation. It runs on Windows only under WSL.</p> <p>Create a virtualenv, install your application, then install <code>gunicorn</code>.</p> <pre data-language=\"text\">$ cd hello-app\n$ python -m venv .venv\n$ . .venv/bin/activate\n$ pip install .  # install your application\n$ pip install gunicorn\n</pre> </section> <section id=\"running\"> <h2>Running</h2> <p>The only required argument to Gunicorn tells it how to load your Flask application. The syntax is <code>{module_import}:{app_variable}</code>. <code>module_import</code> is the dotted import name to the module with your application. <code>app_variable</code> is the variable with the application. It can also be a function call (with any arguments) if you’re using the app factory pattern.</p> <pre data-language=\"text\"># equivalent to 'from hello import app'\n$ gunicorn -w 4 'hello:app'\n\n# equivalent to 'from hello import create_app; create_app()'\n$ gunicorn -w 4 'hello:create_app()'\n\nStarting gunicorn 20.1.0\nListening at: http://127.0.0.1:8000 (x)\nUsing worker: sync\nBooting worker with pid: x\nBooting worker with pid: x\nBooting worker with pid: x\nBooting worker with pid: x\n</pre> <p>The <code>-w</code> option specifies the number of processes to run; a starting value could be <code>CPU * 2</code>. The default is only 1 worker, which is probably not what you want for the default worker type.</p> <p>Logs for each request aren’t shown by default, only worker info and errors are shown. To show access logs on stdout, use the <code>--access-logfile=-</code> option.</p> </section> <section id=\"binding-externally\"> <h2>Binding Externally</h2> <p>Gunicorn should not be run as root because it would cause your application code to run as root, which is not secure. However, this means it will not be possible to bind to port 80 or 443. Instead, a reverse proxy such as <a class=\"reference internal\" href=\"../nginx/index\"><span class=\"doc\">nginx</span></a> or <a class=\"reference internal\" href=\"../apache-httpd/index\"><span class=\"doc\">Apache httpd</span></a> should be used in front of Gunicorn.</p> <p>You can bind to all external IPs on a non-privileged port using the <code>-b 0.0.0.0</code> option. Don’t do this when using a reverse proxy setup, otherwise it will be possible to bypass the proxy.</p> <pre data-language=\"text\">$ gunicorn -w 4 -b 0.0.0.0 'hello:create_app()'\nListening at: http://0.0.0.0:8000 (x)\n</pre> <p><code>0.0.0.0</code> is not a valid address to navigate to, you’d use a specific IP address in your browser.</p> </section> <section id=\"async-with-gevent-or-eventlet\"> <h2>Async with gevent or eventlet</h2> <p>The default sync worker is appropriate for many use cases. If you need asynchronous support, Gunicorn provides workers using either <a class=\"reference external\" href=\"https://www.gevent.org/\">gevent</a> or <a class=\"reference external\" href=\"https://eventlet.net/\">eventlet</a>. This is not the same as Python’s <code>async/await</code>, or the ASGI server spec. You must actually use gevent/eventlet in your own code to see any benefit to using the workers.</p> <p>When using either gevent or eventlet, greenlet&gt;=1.0 is required, otherwise context locals such as <code>request</code> will not work as expected. When using PyPy, PyPy&gt;=7.3.7 is required.</p> <p>To use gevent:</p> <pre data-language=\"text\">$ gunicorn -k gevent 'hello:create_app()'\nStarting gunicorn 20.1.0\nListening at: http://127.0.0.1:8000 (x)\nUsing worker: gevent\nBooting worker with pid: x\n</pre> <p>To use eventlet:</p> <pre data-language=\"text\">$ gunicorn -k eventlet 'hello:create_app()'\nStarting gunicorn 20.1.0\nListening at: http://127.0.0.1:8000 (x)\nUsing worker: eventlet\nBooting worker with pid: x\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/gunicorn/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/gunicorn/</a>\n  </p>\n</div>\n","deploying/waitress/index":"<h1>Waitress</h1> <p><a class=\"reference external\" href=\"https://docs.pylonsproject.org/projects/waitress/\">Waitress</a> is a pure Python WSGI server.</p> <ul class=\"simple\"> <li>It is easy to configure.</li> <li>It supports Windows directly.</li> <li>It is easy to install as it does not require additional dependencies or compilation.</li> <li>It does not support streaming requests, full request data is always buffered.</li> <li>It uses a single process with multiple thread workers.</li> </ul> <p>This page outlines the basics of running Waitress. Be sure to read its documentation and <code>waitress-serve --help</code> to understand what features are available.</p> <section id=\"installing\"> <h2>Installing</h2> <p>Create a virtualenv, install your application, then install <code>waitress</code>.</p> <pre data-language=\"text\">$ cd hello-app\n$ python -m venv .venv\n$ . .venv/bin/activate\n$ pip install .  # install your application\n$ pip install waitress\n</pre> </section> <section id=\"running\"> <h2>Running</h2> <p>The only required argument to <code>waitress-serve</code> tells it how to load your Flask application. The syntax is <code>{module}:{app}</code>. <code>module</code> is the dotted import name to the module with your application. <code>app</code> is the variable with the application. If you’re using the app factory pattern, use <code>--call {module}:{factory}</code> instead.</p> <pre data-language=\"text\"># equivalent to 'from hello import app'\n$ waitress-serve --host 127.0.0.1 hello:app\n\n# equivalent to 'from hello import create_app; create_app()'\n$ waitress-serve --host 127.0.0.1 --call hello:create_app\n\nServing on http://127.0.0.1:8080\n</pre> <p>The <code>--host</code> option binds the server to local <code>127.0.0.1</code> only.</p> <p>Logs for each request aren’t shown, only errors are shown. Logging can be configured through the Python interface instead of the command line.</p> </section> <section id=\"binding-externally\"> <h2>Binding Externally</h2> <p>Waitress should not be run as root because it would cause your application code to run as root, which is not secure. However, this means it will not be possible to bind to port 80 or 443. Instead, a reverse proxy such as <a class=\"reference internal\" href=\"../nginx/index\"><span class=\"doc\">nginx</span></a> or <a class=\"reference internal\" href=\"../apache-httpd/index\"><span class=\"doc\">Apache httpd</span></a> should be used in front of Waitress.</p> <p>You can bind to all external IPs on a non-privileged port by not specifying the <code>--host</code> option. Don’t do this when using a reverse proxy setup, otherwise it will be possible to bypass the proxy.</p> <p><code>0.0.0.0</code> is not a valid address to navigate to, you’d use a specific IP address in your browser.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/waitress/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/waitress/</a>\n  </p>\n</div>\n","deploying/mod_wsgi/index":"<h1>mod_wsgi</h1> <p><a class=\"reference external\" href=\"https://modwsgi.readthedocs.io/\">mod_wsgi</a> is a WSGI server integrated with the <a class=\"reference external\" href=\"https://httpd.apache.org/\">Apache httpd</a> server. The modern <a class=\"reference external\" href=\"https://pypi.org/project/mod-wsgi/\">mod_wsgi-express</a> command makes it easy to configure and start the server without needing to write Apache httpd configuration.</p> <ul class=\"simple\"> <li>Tightly integrated with Apache httpd.</li> <li>Supports Windows directly.</li> <li>Requires a compiler and the Apache development headers to install.</li> <li>Does not require a reverse proxy setup.</li> </ul> <p>This page outlines the basics of running mod_wsgi-express, not the more complex installation and configuration with httpd. Be sure to read the <a class=\"reference external\" href=\"https://pypi.org/project/mod-wsgi/\">mod_wsgi-express</a>, <a class=\"reference external\" href=\"https://modwsgi.readthedocs.io/\">mod_wsgi</a>, and <a class=\"reference external\" href=\"https://httpd.apache.org/\">Apache httpd</a> documentation to understand what features are available.</p> <section id=\"installing\"> <h2>Installing</h2> <p>Installing mod_wsgi requires a compiler and the Apache server and development headers installed. You will get an error if they are not. How to install them depends on the OS and package manager that you use.</p> <p>Create a virtualenv, install your application, then install <code>mod_wsgi</code>.</p> <pre data-language=\"text\">$ cd hello-app\n$ python -m venv .venv\n$ . .venv/bin/activate\n$ pip install .  # install your application\n$ pip install mod_wsgi\n</pre> </section> <section id=\"running\"> <h2>Running</h2> <p>The only argument to <code>mod_wsgi-express</code> specifies a script containing your Flask application, which must be called <code>application</code>. You can write a small script to import your app with this name, or to create it if using the app factory pattern.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id2\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>wsgi.py</code></span></div> <pre data-language=\"python\">from hello import app\n\napplication = app\n</pre> </div> <div class=\"literal-block-wrapper docutils container\" id=\"id3\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>wsgi.py</code></span></div> <pre data-language=\"python\">from hello import create_app\n\napplication = create_app()\n</pre> </div> <p>Now run the <code>mod_wsgi-express start-server</code> command.</p> <pre data-language=\"text\">$ mod_wsgi-express start-server wsgi.py --processes 4\n</pre> <p>The <code>--processes</code> option specifies the number of worker processes to run; a starting value could be <code>CPU * 2</code>.</p> <p>Logs for each request aren’t show in the terminal. If an error occurs, its information is written to the error log file shown when starting the server.</p> </section> <section id=\"binding-externally\"> <h2>Binding Externally</h2> <p>Unlike the other WSGI servers in these docs, mod_wsgi can be run as root to bind to privileged ports like 80 and 443. However, it must be configured to drop permissions to a different user and group for the worker processes.</p> <p>For example, if you created a <code>hello</code> user and group, you should install your virtualenv and application as that user, then tell mod_wsgi to drop to that user after starting.</p> <pre data-language=\"text\">$ sudo /home/hello/.venv/bin/mod_wsgi-express start-server \\\n    /home/hello/wsgi.py \\\n    --user hello --group hello --port 80 --processes 4\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/mod_wsgi/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/mod_wsgi/</a>\n  </p>\n</div>\n","deploying/uwsgi/index":"<h1>uWSGI</h1> <p><a class=\"reference external\" href=\"https://uwsgi-docs.readthedocs.io/en/latest/\">uWSGI</a> is a fast, compiled server suite with extensive configuration and capabilities beyond a basic server.</p> <ul class=\"simple\"> <li>It can be very performant due to being a compiled program.</li> <li>It is complex to configure beyond the basic application, and has so many options that it can be difficult for beginners to understand.</li> <li>It does not support Windows (but does run on WSL).</li> <li>It requires a compiler to install in some cases.</li> </ul> <p>This page outlines the basics of running uWSGI. Be sure to read its documentation to understand what features are available.</p> <section id=\"installing\"> <h2>Installing</h2> <p>uWSGI has multiple ways to install it. The most straightforward is to install the <code>pyuwsgi</code> package, which provides precompiled wheels for common platforms. However, it does not provide SSL support, which can be provided with a reverse proxy instead.</p> <p>Create a virtualenv, install your application, then install <code>pyuwsgi</code>.</p> <pre data-language=\"text\">$ cd hello-app\n$ python -m venv .venv\n$ . .venv/bin/activate\n$ pip install .  # install your application\n$ pip install pyuwsgi\n</pre> <p>If you have a compiler available, you can install the <code>uwsgi</code> package instead. Or install the <code>pyuwsgi</code> package from sdist instead of wheel. Either method will include SSL support.</p> <pre data-language=\"text\">$ pip install uwsgi\n\n# or\n$ pip install --no-binary pyuwsgi pyuwsgi\n</pre> </section> <section id=\"running\"> <h2>Running</h2> <p>The most basic way to run uWSGI is to tell it to start an HTTP server and import your application.</p> <pre data-language=\"text\">$ uwsgi --http 127.0.0.1:8000 --master -p 4 -w hello:app\n\n*** Starting uWSGI 2.0.20 (64bit) on [x] ***\n*** Operational MODE: preforking ***\nmounting hello:app on /\nspawned uWSGI master process (pid: x)\nspawned uWSGI worker 1 (pid: x, cores: 1)\nspawned uWSGI worker 2 (pid: x, cores: 1)\nspawned uWSGI worker 3 (pid: x, cores: 1)\nspawned uWSGI worker 4 (pid: x, cores: 1)\nspawned uWSGI http 1 (pid: x)\n</pre> <p>If you’re using the app factory pattern, you’ll need to create a small Python file to create the app, then point uWSGI at that.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id2\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>wsgi.py</code></span></div> <pre data-language=\"python\">from hello import create_app\n\napp = create_app()\n</pre> </div> <pre data-language=\"text\">$ uwsgi --http 127.0.0.1:8000 --master -p 4 -w wsgi:app\n</pre> <p>The <code>--http</code> option starts an HTTP server at 127.0.0.1 port 8000. The <code>--master</code> option specifies the standard worker manager. The <code>-p</code> option starts 4 worker processes; a starting value could be <code>CPU * 2</code>. The <code>-w</code> option tells uWSGI how to import your application</p> </section> <section id=\"binding-externally\"> <h2>Binding Externally</h2> <p>uWSGI should not be run as root with the configuration shown in this doc because it would cause your application code to run as root, which is not secure. However, this means it will not be possible to bind to port 80 or 443. Instead, a reverse proxy such as <a class=\"reference internal\" href=\"../nginx/index\"><span class=\"doc\">nginx</span></a> or <a class=\"reference internal\" href=\"../apache-httpd/index\"><span class=\"doc\">Apache httpd</span></a> should be used in front of uWSGI. It is possible to run uWSGI as root securely, but that is beyond the scope of this doc.</p> <p>uWSGI has optimized integration with <a class=\"reference external\" href=\"https://uwsgi-docs.readthedocs.io/en/latest/Nginx.html\">Nginx uWSGI</a> and <a class=\"reference external\" href=\"https://uwsgi-docs.readthedocs.io/en/latest/Apache.html#mod-proxy-uwsgi\">Apache mod_proxy_uwsgi</a>, and possibly other servers, instead of using a standard HTTP proxy. That configuration is beyond the scope of this doc, see the links for more information.</p> <p>You can bind to all external IPs on a non-privileged port using the <code>--http 0.0.0.0:8000</code> option. Don’t do this when using a reverse proxy setup, otherwise it will be possible to bypass the proxy.</p> <pre data-language=\"text\">$ uwsgi --http 0.0.0.0:8000 --master -p 4 -w wsgi:app\n</pre> <p><code>0.0.0.0</code> is not a valid address to navigate to, you’d use a specific IP address in your browser.</p> </section> <section id=\"async-with-gevent\"> <h2>Async with gevent</h2> <p>The default sync worker is appropriate for many use cases. If you need asynchronous support, uWSGI provides a <a class=\"reference external\" href=\"https://www.gevent.org/\">gevent</a> worker. This is not the same as Python’s <code>async/await</code>, or the ASGI server spec. You must actually use gevent in your own code to see any benefit to using the worker.</p> <p>When using gevent, greenlet&gt;=1.0 is required, otherwise context locals such as <code>request</code> will not work as expected. When using PyPy, PyPy&gt;=7.3.7 is required.</p> <pre data-language=\"text\">$ uwsgi --http 127.0.0.1:8000 --master --gevent 100 -w wsgi:app\n\n*** Starting uWSGI 2.0.20 (64bit) on [x] ***\n*** Operational MODE: async ***\nmounting hello:app on /\nspawned uWSGI master process (pid: x)\nspawned uWSGI worker 1 (pid: x, cores: 100)\nspawned uWSGI http 1 (pid: x)\n*** running gevent loop engine [addr:x] ***\n</pre> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/uwsgi/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/uwsgi/</a>\n  </p>\n</div>\n","deploying/gevent/index":"<h1>gevent</h1> <p>Prefer using <a class=\"reference internal\" href=\"../gunicorn/index\"><span class=\"doc\">Gunicorn</span></a> or <a class=\"reference internal\" href=\"../uwsgi/index\"><span class=\"doc\">uWSGI</span></a> with gevent workers rather than using <a class=\"reference external\" href=\"https://www.gevent.org/\">gevent</a> directly. Gunicorn and uWSGI provide much more configurable and production-tested servers.</p> <p><a class=\"reference external\" href=\"https://www.gevent.org/\">gevent</a> allows writing asynchronous, coroutine-based code that looks like standard synchronous Python. It uses <a class=\"reference external\" href=\"https://greenlet.readthedocs.io/en/latest/\">greenlet</a> to enable task switching without writing <code>async/await</code> or using <code>asyncio</code>.</p> <p><a class=\"reference internal\" href=\"../eventlet/index\"><span class=\"doc\">eventlet</span></a> is another library that does the same thing. Certain dependencies you have, or other considerations, may affect which of the two you choose to use.</p> <p>gevent provides a WSGI server that can handle many connections at once instead of one per worker process. You must actually use gevent in your own code to see any benefit to using the server.</p> <section id=\"installing\"> <h2>Installing</h2> <p>When using gevent, greenlet&gt;=1.0 is required, otherwise context locals such as <code>request</code> will not work as expected. When using PyPy, PyPy&gt;=7.3.7 is required.</p> <p>Create a virtualenv, install your application, then install <code>gevent</code>.</p> <pre data-language=\"text\">$ cd hello-app\n$ python -m venv .venv\n$ . .venv/bin/activate\n$ pip install .  # install your application\n$ pip install gevent\n</pre> </section> <section id=\"running\"> <h2>Running</h2> <p>To use gevent to serve your application, write a script that imports its <code>WSGIServer</code>, as well as your app or app factory.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id2\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>wsgi.py</code></span></div> <pre data-language=\"python\">from gevent.pywsgi import WSGIServer\nfrom hello import create_app\n\napp = create_app()\nhttp_server = WSGIServer((\"127.0.0.1\", 8000), app)\nhttp_server.serve_forever()\n</pre> </div> <pre data-language=\"text\">$ python wsgi.py\n</pre> <p>No output is shown when the server starts.</p> </section> <section id=\"binding-externally\"> <h2>Binding Externally</h2> <p>gevent should not be run as root because it would cause your application code to run as root, which is not secure. However, this means it will not be possible to bind to port 80 or 443. Instead, a reverse proxy such as <a class=\"reference internal\" href=\"../nginx/index\"><span class=\"doc\">nginx</span></a> or <a class=\"reference internal\" href=\"../apache-httpd/index\"><span class=\"doc\">Apache httpd</span></a> should be used in front of gevent.</p> <p>You can bind to all external IPs on a non-privileged port by using <code>0.0.0.0</code> in the server arguments shown in the previous section. Don’t do this when using a reverse proxy setup, otherwise it will be possible to bypass the proxy.</p> <p><code>0.0.0.0</code> is not a valid address to navigate to, you’d use a specific IP address in your browser.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/gevent/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/gevent/</a>\n  </p>\n</div>\n","deploying/eventlet/index":"<h1>eventlet</h1> <p>Prefer using <a class=\"reference internal\" href=\"../gunicorn/index\"><span class=\"doc\">Gunicorn</span></a> with eventlet workers rather than using <a class=\"reference external\" href=\"https://eventlet.net/\">eventlet</a> directly. Gunicorn provides a much more configurable and production-tested server.</p> <p><a class=\"reference external\" href=\"https://eventlet.net/\">eventlet</a> allows writing asynchronous, coroutine-based code that looks like standard synchronous Python. It uses <a class=\"reference external\" href=\"https://greenlet.readthedocs.io/en/latest/\">greenlet</a> to enable task switching without writing <code>async/await</code> or using <code>asyncio</code>.</p> <p><a class=\"reference internal\" href=\"../gevent/index\"><span class=\"doc\">gevent</span></a> is another library that does the same thing. Certain dependencies you have, or other considerations, may affect which of the two you choose to use.</p> <p>eventlet provides a WSGI server that can handle many connections at once instead of one per worker process. You must actually use eventlet in your own code to see any benefit to using the server.</p> <section id=\"installing\"> <h2>Installing</h2> <p>When using eventlet, greenlet&gt;=1.0 is required, otherwise context locals such as <code>request</code> will not work as expected. When using PyPy, PyPy&gt;=7.3.7 is required.</p> <p>Create a virtualenv, install your application, then install <code>eventlet</code>.</p> <pre data-language=\"text\">$ cd hello-app\n$ python -m venv .venv\n$ . .venv/bin/activate\n$ pip install .  # install your application\n$ pip install eventlet\n</pre> </section> <section id=\"running\"> <h2>Running</h2> <p>To use eventlet to serve your application, write a script that imports its <code>wsgi.server</code>, as well as your app or app factory.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id2\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>wsgi.py</code></span></div> <pre data-language=\"python\">import eventlet\nfrom eventlet import wsgi\nfrom hello import create_app\n\napp = create_app()\nwsgi.server(eventlet.listen((\"127.0.0.1\", 8000)), app)\n</pre> </div> <pre data-language=\"text\">$ python wsgi.py\n(x) wsgi starting up on http://127.0.0.1:8000\n</pre> </section> <section id=\"binding-externally\"> <h2>Binding Externally</h2> <p>eventlet should not be run as root because it would cause your application code to run as root, which is not secure. However, this means it will not be possible to bind to port 80 or 443. Instead, a reverse proxy such as <a class=\"reference internal\" href=\"../nginx/index\"><span class=\"doc\">nginx</span></a> or <a class=\"reference internal\" href=\"../apache-httpd/index\"><span class=\"doc\">Apache httpd</span></a> should be used in front of eventlet.</p> <p>You can bind to all external IPs on a non-privileged port by using <code>0.0.0.0</code> in the server arguments shown in the previous section. Don’t do this when using a reverse proxy setup, otherwise it will be possible to bypass the proxy.</p> <p><code>0.0.0.0</code> is not a valid address to navigate to, you’d use a specific IP address in your browser.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/eventlet/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/eventlet/</a>\n  </p>\n</div>\n","deploying/asgi/index":"<h1>ASGI</h1> <p>If you’d like to use an ASGI server you will need to utilise WSGI to ASGI middleware. The asgiref <a class=\"reference external\" href=\"https://github.com/django/asgiref#wsgi-to-asgi-adapter\">WsgiToAsgi</a> adapter is recommended as it integrates with the event loop used for Flask’s <a class=\"reference internal\" href=\"../../async-await/index#async-await\"><span class=\"std std-ref\">Using async and await</span></a> support. You can use the adapter by wrapping the Flask app,</p> <pre data-language=\"python\">from asgiref.wsgi import WsgiToAsgi\nfrom flask import Flask\n\napp = Flask(__name__)\n\n...\n\nasgi_app = WsgiToAsgi(app)\n</pre> <p>and then serving the <code>asgi_app</code> with the ASGI server, e.g. using <a class=\"reference external\" href=\"https://github.com/pgjones/hypercorn\">Hypercorn</a>,</p> <pre data-language=\"text\">$ hypercorn module:asgi_app\n</pre><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/asgi/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/asgi/</a>\n  </p>\n</div>\n","deploying/proxy_fix/index":"<h1>Tell Flask it is Behind a Proxy</h1> <p>When using a reverse proxy, or many Python hosting platforms, the proxy will intercept and forward all external requests to the local WSGI server.</p> <p>From the WSGI server and Flask application’s perspectives, requests are now coming from the HTTP server to the local address, rather than from the remote address to the external server address.</p> <p>HTTP servers should set <code>X-Forwarded-</code> headers to pass on the real values to the application. The application can then be told to trust and use those values by wrapping it with the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/middleware/proxy_fix/\" title=\"(in Werkzeug v3.1.x)\"><span>X-Forwarded-For Proxy Fix</span></a> middleware provided by Werkzeug.</p> <p>This middleware should only be used if the application is actually behind a proxy, and should be configured with the number of proxies that are chained in front of it. Not all proxies set all the headers. Since incoming headers can be faked, you must set how many proxies are setting each header so the middleware knows what to trust.</p> <pre data-language=\"python\">from werkzeug.middleware.proxy_fix import ProxyFix\n\napp.wsgi_app = ProxyFix(\n    app.wsgi_app, x_for=1, x_proto=1, x_host=1, x_prefix=1\n)\n</pre> <p>Remember, only apply this middleware if you are behind a proxy, and set the correct number of proxies that set each header. It can be a security issue if you get this configuration wrong.</p><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/proxy_fix/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/proxy_fix/</a>\n  </p>\n</div>\n","deploying/nginx/index":"<h1>nginx</h1> <p><a class=\"reference external\" href=\"https://nginx.org/\">nginx</a> is a fast, production level HTTP server. When serving your application with one of the WSGI servers listed in <a class=\"reference internal\" href=\"../index\"><span class=\"doc\">Deploying to Production</span></a>, it is often good or necessary to put a dedicated HTTP server in front of it. This “reverse proxy” can handle incoming requests, TLS, and other security and performance concerns better than the WSGI server.</p> <p>Nginx can be installed using your system package manager, or a pre-built executable for Windows. Installing and running Nginx itself is outside the scope of this doc. This page outlines the basics of configuring Nginx to proxy your application. Be sure to read its documentation to understand what features are available.</p> <section id=\"domain-name\"> <h2>Domain Name</h2> <p>Acquiring and configuring a domain name is outside the scope of this doc. In general, you will buy a domain name from a registrar, pay for server space with a hosting provider, and then point your registrar at the hosting provider’s name servers.</p> <p>To simulate this, you can also edit your <code>hosts</code> file, located at <code>/etc/hosts</code> on Linux. Add a line that associates a name with the local IP.</p> <p>Modern Linux systems may be configured to treat any domain name that ends with <code>.localhost</code> like this without adding it to the <code>hosts</code> file.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id2\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>/etc/hosts</code></span></div> <pre data-language=\"python\">127.0.0.1 hello.localhost\n</pre> </div> </section> <section id=\"configuration\"> <h2>Configuration</h2> <p>The nginx configuration is located at <code>/etc/nginx/nginx.conf</code> on Linux. It may be different depending on your operating system. Check the docs and look for <code>nginx.conf</code>.</p> <p>Remove or comment out any existing <code>server</code> section. Add a <code>server</code> section and use the <code>proxy_pass</code> directive to point to the address the WSGI server is listening on. We’ll assume the WSGI server is listening locally at <code>http://127.0.0.1:8000</code>.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id3\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>/etc/nginx.conf</code></span></div> <pre data-language=\"nginx\">server {\n    listen 80;\n    server_name _;\n\n    location / {\n        proxy_pass http://127.0.0.1:8000/;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Forwarded-Host $host;\n        proxy_set_header X-Forwarded-Prefix /;\n    }\n}\n</pre> </div> <p>Then <a class=\"reference internal\" href=\"../proxy_fix/index\"><span class=\"doc\">Tell Flask it is Behind a Proxy</span></a> so that your application uses these headers.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/nginx/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/nginx/</a>\n  </p>\n</div>\n","deploying/apache-httpd/index":"<h1>Apache httpd</h1> <p><a class=\"reference external\" href=\"https://httpd.apache.org/\">Apache httpd</a> is a fast, production level HTTP server. When serving your application with one of the WSGI servers listed in <a class=\"reference internal\" href=\"../index\"><span class=\"doc\">Deploying to Production</span></a>, it is often good or necessary to put a dedicated HTTP server in front of it. This “reverse proxy” can handle incoming requests, TLS, and other security and performance concerns better than the WSGI server.</p> <p>httpd can be installed using your system package manager, or a pre-built executable for Windows. Installing and running httpd itself is outside the scope of this doc. This page outlines the basics of configuring httpd to proxy your application. Be sure to read its documentation to understand what features are available.</p> <section id=\"domain-name\"> <h2>Domain Name</h2> <p>Acquiring and configuring a domain name is outside the scope of this doc. In general, you will buy a domain name from a registrar, pay for server space with a hosting provider, and then point your registrar at the hosting provider’s name servers.</p> <p>To simulate this, you can also edit your <code>hosts</code> file, located at <code>/etc/hosts</code> on Linux. Add a line that associates a name with the local IP.</p> <p>Modern Linux systems may be configured to treat any domain name that ends with <code>.localhost</code> like this without adding it to the <code>hosts</code> file.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id2\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>/etc/hosts</code></span></div> <pre data-language=\"python\">127.0.0.1 hello.localhost\n</pre> </div> </section> <section id=\"configuration\"> <h2>Configuration</h2> <p>The httpd configuration is located at <code>/etc/httpd/conf/httpd.conf</code> on Linux. It may be different depending on your operating system. Check the docs and look for <code>httpd.conf</code>.</p> <p>Remove or comment out any existing <code>DocumentRoot</code> directive. Add the config lines below. We’ll assume the WSGI server is listening locally at <code>http://127.0.0.1:8000</code>.</p> <div class=\"literal-block-wrapper docutils container\" id=\"id3\"> <div class=\"code-block-caption\"><span class=\"caption-text\"><code>/etc/httpd/conf/httpd.conf</code></span></div> <pre data-language=\"apache\">LoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nProxyPass / http://127.0.0.1:8000/\nRequestHeader set X-Forwarded-Proto http\nRequestHeader set X-Forwarded-Prefix /\n</pre> </div> <p>The <code>LoadModule</code> lines might already exist. If so, make sure they are uncommented instead of adding them manually.</p> <p>Then <a class=\"reference internal\" href=\"../proxy_fix/index\"><span class=\"doc\">Tell Flask it is Behind a Proxy</span></a> so that your application uses the <code>X-Forwarded</code> headers. <code>X-Forwarded-For</code> and <code>X-Forwarded-Host</code> are automatically set by <code>ProxyPass</code>.</p> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/deploying/apache-httpd/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/deploying/apache-httpd/</a>\n  </p>\n</div>\n","api/index":"<h1 id=\"api\">API</h1> <p>This part of the documentation covers all the interfaces of Flask. For parts where Flask depends on external libraries, we document the most important right here and provide links to the canonical documentation.</p> <section id=\"application-object\"> <h2>Application Object</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.Flask\">\n<code>class flask.Flask(import_name, static_url_path=None, static_folder='static', static_host=None, host_matching=False, subdomain_matching=False, template_folder='templates', instance_path=None, instance_relative_config=False, root_path=None)</code> </dt> <dd>\n<p>The flask object implements a WSGI application and acts as the central object. It is passed the name of the module or package of the application. Once it is created it will act as a central registry for the view functions, the URL rules, template configuration and much more.</p> <p>The name of the package is used to resolve resources from inside the package or the folder the module is contained in depending on if the package parameter resolves to an actual python package (a folder with an <code>__init__.py</code> file inside) or a standard module (just a <code>.py</code> file).</p> <p>For more information about resource loading, see <a class=\"reference internal\" href=\"#flask.Flask.open_resource\" title=\"flask.Flask.open_resource\"><code>open_resource()</code></a>.</p> <p>Usually you create a <a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\"><code>Flask</code></a> instance in your main module or in the <code>__init__.py</code> file of your package like this:</p> <pre data-language=\"python\">from flask import Flask\napp = Flask(__name__)\n</pre> <div class=\"admonition-about-the-first-parameter admonition\"> <p class=\"admonition-title\">About the First Parameter</p> <p>The idea of the first parameter is to give Flask an idea of what belongs to your application. This name is used to find resources on the filesystem, can be used by extensions to improve debugging information and a lot more.</p> <p>So it’s important what you provide there. If you are using a single module, <code>__name__</code> is always the correct value. If you however are using a package, it’s usually recommended to hardcode the name of your package there.</p> <p>For example if your application is defined in <code>yourapplication/app.py</code> you should create it with one of the two versions below:</p> <pre data-language=\"python\">app = Flask('yourapplication')\napp = Flask(__name__.split('.')[0])\n</pre> <p>Why is that? The application will work even with <code>__name__</code>, thanks to how resources are looked up. However it will make debugging more painful. Certain extensions can make assumptions based on the import name of your application. For example the Flask-SQLAlchemy extension will look for the code in your application that triggered an SQL query in debug mode. If the import name is not properly set up, that debugging information is lost. (For example it would only pick up SQL queries in <code>yourapplication.app</code> and not <code>yourapplication.views.frontend</code>)</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 1.0: </span>The <code>host_matching</code> and <code>static_host</code> parameters were added.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 1.0: </span>The <code>subdomain_matching</code> parameter was added. Subdomain matching needs to be enabled manually now. Setting <a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a> does not implicitly enable it.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11: </span>The <code>root_path</code> parameter was added.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8: </span>The <code>instance_path</code> and <code>instance_relative_config</code> parameters were added.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span>The <code>static_url_path</code>, <code>static_folder</code>, and <code>template_folder</code> parameters were added.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>import_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the name of the application package</li> <li>\n<strong>static_url_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – can be used to specify a different path for the static files on the web. Defaults to the name of the <code>static_folder</code> folder.</li> <li>\n<strong>static_folder</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><em>None</em>) – The folder with static files that is served at <code>static_url_path</code>. Relative to the application <code>root_path</code> or an absolute path. Defaults to <code>'static'</code>.</li> <li>\n<strong>static_host</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the host to use when adding the static route. Defaults to None. Required when using <code>host_matching=True</code> with a <code>static_folder</code> configured.</li> <li>\n<strong>host_matching</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – set <code>url_map.host_matching</code> attribute. Defaults to False.</li> <li>\n<strong>subdomain_matching</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – consider the subdomain relative to <a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a> when matching routes. Defaults to False.</li> <li>\n<strong>template_folder</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><em>None</em>) – the folder that contains the templates that should be used by the application. Defaults to <code>'templates'</code> folder in the root path of the application.</li> <li>\n<strong>instance_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – An alternative instance path for the application. By default the folder <code>'instance'</code> next to the package or module is assumed to be the instance path.</li> <li>\n<strong>instance_relative_config</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – if set to <code>True</code> relative filenames for loading the config are assumed to be relative to the instance path instead of the application root.</li> <li>\n<strong>root_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – The path to the root of the application files. This should only be set manually when it can’t be detected automatically, such as for namespace packages.</li> </ul> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.request_class\">\n<code>request_class</code> </dt> <dd>\n<p>alias of <a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.wrappers.Request\"><code>Request</code></a></p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.response_class\">\n<code>response_class</code> </dt> <dd>\n<p>alias of <a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\"><code>Response</code></a></p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.session_interface\">\n<code>session_interface: SessionInterface = &lt;flask.sessions.SecureCookieSessionInterface object&gt;</code> </dt> <dd>\n<p>the session interface to use. By default an instance of <a class=\"reference internal\" href=\"#flask.sessions.SecureCookieSessionInterface\" title=\"flask.sessions.SecureCookieSessionInterface\"><code>SecureCookieSessionInterface</code></a> is used here.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.cli\">\n<code>cli: Group</code> </dt> <dd>\n<p>The Click command group for registering CLI commands for this object. The commands are available from the <code>flask</code> command once the application has been discovered and blueprints have been registered.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.get_send_file_max_age\">\n<code>get_send_file_max_age(filename)</code> </dt> <dd>\n<p>Used by <a class=\"reference internal\" href=\"#flask.send_file\" title=\"flask.send_file\"><code>send_file()</code></a> to determine the <code>max_age</code> cache value for a given file path if it wasn’t passed.</p> <p>By default, this returns <a class=\"reference internal\" href=\"../config/index#SEND_FILE_MAX_AGE_DEFAULT\" title=\"SEND_FILE_MAX_AGE_DEFAULT\"><code>SEND_FILE_MAX_AGE_DEFAULT</code></a> from the configuration of <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>. This defaults to <code>None</code>, which tells the browser to use conditional requests instead of a timed cache, which is usually preferable.</p> <p>Note this is a duplicate of the same method in the Flask class.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The default configuration is <code>None</code> instead of 12 hours.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.send_static_file\">\n<code>send_static_file(filename)</code> </dt> <dd>\n<p>The view function used to serve files from <a class=\"reference internal\" href=\"#flask.Flask.static_folder\" title=\"flask.Flask.static_folder\"><code>static_folder</code></a>. A route is automatically registered for this view at <a class=\"reference internal\" href=\"#flask.Flask.static_url_path\" title=\"flask.Flask.static_url_path\"><code>static_url_path</code></a> if <a class=\"reference internal\" href=\"#flask.Flask.static_folder\" title=\"flask.Flask.static_folder\"><code>static_folder</code></a> is set.</p> <p>Note this is a duplicate of the same method in the Flask class.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.open_resource\">\n<code>open_resource(resource, mode='rb', encoding=None)</code> </dt> <dd>\n<p>Open a resource file relative to <a class=\"reference internal\" href=\"#flask.Flask.root_path\" title=\"flask.Flask.root_path\"><code>root_path</code></a> for reading.</p> <p>For example, if the file <code>schema.sql</code> is next to the file <code>app.py</code> where the <code>Flask</code> app is defined, it can be opened with:</p> <pre data-language=\"python\">with app.open_resource(\"schema.sql\") as f:\n    conn.executescript(f.read())\n</pre> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>resource</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Path to the resource relative to <a class=\"reference internal\" href=\"#flask.Flask.root_path\" title=\"flask.Flask.root_path\"><code>root_path</code></a>.</li> <li>\n<strong>mode</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Open the file in this mode. Only reading is supported, valid values are <code>\"r\"</code> (or <code>\"rt\"</code>) and <code>\"rb\"</code>.</li> <li>\n<strong>encoding</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – Open the file with this encoding when opening in text mode. This is ignored when opening in binary mode.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a></p> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>Added the <code>encoding</code> parameter.</p> </div> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.open_instance_resource\">\n<code>open_instance_resource(resource, mode='rb', encoding='utf-8')</code> </dt> <dd>\n<p>Open a resource file relative to the application’s instance folder <a class=\"reference internal\" href=\"#flask.Flask.instance_path\" title=\"flask.Flask.instance_path\"><code>instance_path</code></a>. Unlike <a class=\"reference internal\" href=\"#flask.Flask.open_resource\" title=\"flask.Flask.open_resource\"><code>open_resource()</code></a>, files in the instance folder can be opened for writing.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>resource</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Path to the resource relative to <a class=\"reference internal\" href=\"#flask.Flask.instance_path\" title=\"flask.Flask.instance_path\"><code>instance_path</code></a>.</li> <li>\n<strong>mode</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Open the file in this mode.</li> <li>\n<strong>encoding</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – Open the file with this encoding when opening in text mode. This is ignored when opening in binary mode.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a></p> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>Added the <code>encoding</code> parameter.</p> </div> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.create_jinja_environment\">\n<code>create_jinja_environment()</code> </dt> <dd>\n<p>Create the Jinja environment based on <a class=\"reference internal\" href=\"#flask.Flask.jinja_options\" title=\"flask.Flask.jinja_options\"><code>jinja_options</code></a> and the various Jinja-related methods of the app. Changing <a class=\"reference internal\" href=\"#flask.Flask.jinja_options\" title=\"flask.Flask.jinja_options\"><code>jinja_options</code></a> after this will have no effect. Also adds Flask-related globals and filters to the environment.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.11: </span><code>Environment.auto_reload</code> set in accordance with <code>TEMPLATES_AUTO_RELOAD</code> configuration option.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><em>Environment</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.create_url_adapter\">\n<code>create_url_adapter(request)</code> </dt> <dd>\n<p>Creates a URL adapter for the given request. The URL adapter is created at a point where the request context is not yet set up so the request is passed explicitly.</p> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>If <a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a> is set, it does not restrict requests to only that domain, for both <code>subdomain_matching</code> and <code>host_matching</code>.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span><a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a> no longer implicitly enables subdomain matching. Use <code>subdomain_matching</code> instead.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>This can be called outside a request when the URL adapter is created for an application context.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>request</strong> (<a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.wrappers.Request\">Request</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.MapAdapter\" title=\"(in Werkzeug v3.1.x)\">MapAdapter</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.update_template_context\">\n<code>update_template_context(context)</code> </dt> <dd>\n<p>Update the template context with some commonly used variables. This injects request, session, config and g into the template context as well as everything template context processors want to inject. Note that the as of Flask 0.6, the original values in the context will not be overridden if a context processor decides to return a value with the same key.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>) – the context as a dictionary that is updated in place to add extra variables.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.make_shell_context\">\n<code>make_shell_context()</code> </dt> <dd>\n<p>Returns the shell context for an interactive shell for this application. This runs all the registered shell context processors.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.run\">\n<code>run(host=None, port=None, debug=None, load_dotenv=True, **options)</code> </dt> <dd>\n<p>Runs the application on a local development server.</p> <p>Do not use <code>run()</code> in a production setting. It is not intended to meet security and performance requirements for a production server. Instead, see <a class=\"reference internal\" href=\"../deploying/index\"><span class=\"doc\">Deploying to Production</span></a> for WSGI server recommendations.</p> <p>If the <a class=\"reference internal\" href=\"#flask.Flask.debug\" title=\"flask.Flask.debug\"><code>debug</code></a> flag is set the server will automatically reload for code changes and show a debugger in case an exception happened.</p> <p>If you want to run the application in debug mode, but disable the code execution on the interactive debugger, you can pass <code>use_evalex=False</code> as parameter. This will keep the debugger’s traceback screen active, but disable code execution.</p> <p>It is not recommended to use this function for development with automatic reloading as this is badly supported. Instead you should be using the <strong class=\"command\">flask</strong> command line script’s <code>run</code> support.</p> <div class=\"admonition-keep-in-mind admonition\"> <p class=\"admonition-title\">Keep in Mind</p> <p>Flask will suppress any server error with a generic error page unless it is in debug mode. As such to enable just the interactive debugger without the code reloading, you have to invoke <a class=\"reference internal\" href=\"#flask.Flask.run\" title=\"flask.Flask.run\"><code>run()</code></a> with <code>debug=True</code> and <code>use_reloader=False</code>. Setting <code>use_debugger</code> to <code>True</code> without being in debug mode won’t catch any exceptions because there won’t be any to catch.</p> </div> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>host</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the hostname to listen on. Set this to <code>'0.0.0.0'</code> to have the server available externally as well. Defaults to <code>'127.0.0.1'</code> or the host in the <code>SERVER_NAME</code> config variable if present.</li> <li>\n<strong>port</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><em>None</em>) – the port of the webserver. Defaults to <code>5000</code> or the port defined in the <code>SERVER_NAME</code> config variable if present.</li> <li>\n<strong>debug</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><em>None</em>) – if given, enable or disable debug mode. See <a class=\"reference internal\" href=\"#flask.Flask.debug\" title=\"flask.Flask.debug\"><code>debug</code></a>.</li> <li>\n<strong>load_dotenv</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Load the nearest <code>.env</code> and <code>.flaskenv</code> files to set environment variables. Will also change the working directory to the directory containing the first file found.</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – the options to be forwarded to the underlying Werkzeug server. See <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/serving/#werkzeug.serving.run_simple\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.serving.run_simple()</code></a> for more information.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>If installed, python-dotenv will be used to load environment variables from <code>.env</code> and <code>.flaskenv</code> files.</p> <p>The <code id=\"index-0\">FLASK_DEBUG</code> environment variable will override <a class=\"reference internal\" href=\"#flask.Flask.debug\" title=\"flask.Flask.debug\"><code>debug</code></a>.</p> <p>Threaded mode is enabled by default.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.10: </span>The default port is now picked from the <code>SERVER_NAME</code> variable.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.test_client\">\n<code>test_client(use_cookies=True, **kwargs)</code> </dt> <dd>\n<p>Creates a test client for this application. For information about unit testing head over to <a class=\"reference internal\" href=\"../testing/index\"><span class=\"doc\">Testing Flask Applications</span></a>.</p> <p>Note that if you are testing for assertions or exceptions in your application code, you must set <code>app.testing = True</code> in order for the exceptions to propagate to the test client. Otherwise, the exception will be handled by the application (not visible to the test client) and the only indication of an AssertionError or other exception will be a 500 status code response to the test client. See the <a class=\"reference internal\" href=\"#flask.Flask.testing\" title=\"flask.Flask.testing\"><code>testing</code></a> attribute. For example:</p> <pre data-language=\"python\">app.testing = True\nclient = app.test_client()\n</pre> <p>The test client can be used in a <code>with</code> block to defer the closing down of the context until the end of the <code>with</code> block. This is useful if you want to access the context locals for testing:</p> <pre data-language=\"python\">with app.test_client() as c:\n    rv = c.get('/?vodka=42')\n    assert request.args['vodka'] == '42'\n</pre> <p>Additionally, you may pass optional keyword arguments that will then be passed to the application’s <a class=\"reference internal\" href=\"#flask.Flask.test_client_class\" title=\"flask.Flask.test_client_class\"><code>test_client_class</code></a> constructor. For example:</p> <pre data-language=\"python\">from flask.testing import FlaskClient\n\nclass CustomClient(FlaskClient):\n    def __init__(self, *args, **kwargs):\n        self._authentication = kwargs.pop(\"authentication\")\n        super(CustomClient,self).__init__( *args, **kwargs)\n\napp.test_client_class = CustomClient\nclient = app.test_client(authentication='Basic ....')\n</pre> <p>See <a class=\"reference internal\" href=\"#flask.testing.FlaskClient\" title=\"flask.testing.FlaskClient\"><code>FlaskClient</code></a> for more information.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.11: </span>Added <code>**kwargs</code> to support passing additional keyword arguments to the constructor of <a class=\"reference internal\" href=\"#flask.Flask.test_client_class\" title=\"flask.Flask.test_client_class\"><code>test_client_class</code></a>.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span>The <code>use_cookies</code> parameter was added as well as the ability to override the client to be used by setting the <a class=\"reference internal\" href=\"#flask.Flask.test_client_class\" title=\"flask.Flask.test_client_class\"><code>test_client_class</code></a> attribute.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.4: </span>added support for <code>with</code> block usage for the client.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>use_cookies</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.testing.FlaskClient\" title=\"flask.testing.FlaskClient\">FlaskClient</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.test_cli_runner\">\n<code>test_cli_runner(**kwargs)</code> </dt> <dd>\n<p>Create a CLI runner for testing CLI commands. See <a class=\"reference internal\" href=\"../testing/index#testing-cli\"><span class=\"std std-ref\">Running Commands with the CLI Runner</span></a>.</p> <p>Returns an instance of <a class=\"reference internal\" href=\"#flask.Flask.test_cli_runner_class\" title=\"flask.Flask.test_cli_runner_class\"><code>test_cli_runner_class</code></a>, by default <a class=\"reference internal\" href=\"#flask.testing.FlaskCliRunner\" title=\"flask.testing.FlaskCliRunner\"><code>FlaskCliRunner</code></a>. The Flask app object is passed as the first argument.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 1.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>kwargs</strong> (<em>t.Any</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.testing.FlaskCliRunner\" title=\"flask.testing.FlaskCliRunner\">FlaskCliRunner</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.handle_http_exception\">\n<code>handle_http_exception(e)</code> </dt> <dd>\n<p>Handles an HTTP exception. By default this will invoke the registered error handlers and fall back to returning the exception as response.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0.3: </span><code>RoutingException</code>, used internally for actions such as slash redirects during routing, is not passed to error handlers.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>Exceptions are looked up by code <em>and</em> by MRO, so <code>HTTPException</code> subclasses can be handled with a catch-all handler for the base <code>HTTPException</code>.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.3.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>e</strong> (<em>HTTPException</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>HTTPException | ft.ResponseReturnValue</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.handle_user_exception\">\n<code>handle_user_exception(e)</code> </dt> <dd>\n<p>This method is called whenever an exception occurs that should be handled. A special case is <code>HTTPException</code> which is forwarded to the <a class=\"reference internal\" href=\"#flask.Flask.handle_http_exception\" title=\"flask.Flask.handle_http_exception\"><code>handle_http_exception()</code></a> method. This function will either return a response value or reraise the exception with the same traceback.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>Key errors raised from request data like <code>form</code> show the bad key in debug mode rather than a generic bad request message.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>e</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>HTTPException | ft.ResponseReturnValue</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.handle_exception\">\n<code>handle_exception(e)</code> </dt> <dd>\n<p>Handle an exception that did not have an error handler associated with it, or that was raised from an error handler. This always causes a 500 <code>InternalServerError</code>.</p> <p>Always sends the <a class=\"reference internal\" href=\"#flask.got_request_exception\" title=\"flask.got_request_exception\"><code>got_request_exception</code></a> signal.</p> <p>If <a class=\"reference internal\" href=\"../config/index#PROPAGATE_EXCEPTIONS\" title=\"PROPAGATE_EXCEPTIONS\"><code>PROPAGATE_EXCEPTIONS</code></a> is <code>True</code>, such as in debug mode, the error will be re-raised so that the debugger can display it. Otherwise, the original exception is logged, and an <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.InternalServerError\" title=\"(in Werkzeug v3.1.x)\"><code>InternalServerError</code></a> is returned.</p> <p>If an error handler is registered for <code>InternalServerError</code> or <code>500</code>, it will be used. For consistency, the handler will always receive the <code>InternalServerError</code>. The original unhandled exception is available as <code>e.original_exception</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1.0: </span>Always passes the <code>InternalServerError</code> instance to the handler, setting <code>original_exception</code> to the unhandled error.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1.0: </span><code>after_request</code> functions and other finalization is done even for the default 500 response when there is no handler.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.3.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>e</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.log_exception\">\n<code>log_exception(exc_info)</code> </dt> <dd>\n<p>Logs an exception. This is called by <a class=\"reference internal\" href=\"#flask.Flask.handle_exception\" title=\"flask.Flask.handle_exception\"><code>handle_exception()</code></a> if debugging is disabled and right before the handler is called. The default implementation logs the exception as error on the <a class=\"reference internal\" href=\"#flask.Flask.logger\" title=\"flask.Flask.logger\"><code>logger</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>exc_info</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#BaseException\" title=\"(in Python v3.13)\">BaseException</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/types.html#types.TracebackType\" title=\"(in Python v3.13)\">TracebackType</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a><em>[</em><em>None</em><em>, </em><em>None</em><em>, </em><em>None</em><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.dispatch_request\">\n<code>dispatch_request()</code> </dt> <dd>\n<p>Does the request dispatching. Matches the URL and returns the return value of the view or error handler. This does not have to be a response object. In order to convert the return value to a proper response object, call <a class=\"reference internal\" href=\"#flask.make_response\" title=\"flask.make_response\"><code>make_response()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.7: </span>This no longer does the exception handling, this code was moved to the new <a class=\"reference internal\" href=\"#flask.Flask.full_dispatch_request\" title=\"flask.Flask.full_dispatch_request\"><code>full_dispatch_request()</code></a>.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>ft.ResponseReturnValue</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.full_dispatch_request\">\n<code>full_dispatch_request()</code> </dt> <dd>\n<p>Dispatches the request and on top of that performs request pre and postprocessing as well as HTTP exception catching and error handling.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.make_default_options_response\">\n<code>make_default_options_response()</code> </dt> <dd>\n<p>This method is called to create the default <code>OPTIONS</code> response. This can be changed through subclassing to change the default behavior of <code>OPTIONS</code> responses.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.ensure_sync\">\n<code>ensure_sync(func)</code> </dt> <dd>\n<p>Ensure that the function is synchronous for WSGI workers. Plain <code>def</code> functions are returned as-is. <code>async def</code> functions are wrapped to run and wait for the response.</p> <p>Override this method to change how the app runs async views.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>func</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[…], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.async_to_sync\">\n<code>async_to_sync(func)</code> </dt> <dd>\n<p>Return a sync function that will run the coroutine function.</p> <pre data-language=\"python\">result = app.async_to_sync(func)(*args, **kwargs)\n</pre> <p>Override this method to change how the app converts async code to be synchronously callable.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>func</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Coroutine\" title=\"(in Python v3.13)\">Coroutine</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[…], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_for\">\n<code>url_for(endpoint, *, _anchor=None, _method=None, _scheme=None, _external=None, **values)</code> </dt> <dd>\n<p>Generate a URL to the given endpoint with the given values.</p> <p>This is called by <a class=\"reference internal\" href=\"#flask.url_for\" title=\"flask.url_for\"><code>flask.url_for()</code></a>, and can be called directly as well.</p> <p>An <em>endpoint</em> is the name of a URL rule, usually added with <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>@app.route()</code></a>, and usually the same name as the view function. A route defined in a <a class=\"reference internal\" href=\"#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> will prepend the blueprint’s name separated by a <code>.</code> to the endpoint.</p> <p>In some cases, such as email messages, you want URLs to include the scheme and domain, like <code>https://example.com/hello</code>. When not in an active request, URLs will be external by default, but this requires setting <a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a> so Flask knows what domain to use. <a class=\"reference internal\" href=\"../config/index#APPLICATION_ROOT\" title=\"APPLICATION_ROOT\"><code>APPLICATION_ROOT</code></a> and <a class=\"reference internal\" href=\"../config/index#PREFERRED_URL_SCHEME\" title=\"PREFERRED_URL_SCHEME\"><code>PREFERRED_URL_SCHEME</code></a> should also be configured as needed. This config is only used when not in an active request.</p> <p>Functions can be decorated with <a class=\"reference internal\" href=\"#flask.Flask.url_defaults\" title=\"flask.Flask.url_defaults\"><code>url_defaults()</code></a> to modify keyword arguments before the URL is built.</p> <p>If building fails for some reason, such as an unknown endpoint or incorrect values, the app’s <a class=\"reference internal\" href=\"#flask.Flask.handle_url_build_error\" title=\"flask.Flask.handle_url_build_error\"><code>handle_url_build_error()</code></a> method is called. If that returns a string, that is returned, otherwise a <code>BuildError</code> is raised.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The endpoint name associated with the URL to generate. If this starts with a <code>.</code>, the current blueprint name (if any) will be used.</li> <li>\n<strong>_anchor</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – If given, append this as <code>#anchor</code> to the URL.</li> <li>\n<strong>_method</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – If given, generate the URL associated with this method for the endpoint.</li> <li>\n<strong>_scheme</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – If given, the URL will have this scheme if it is external.</li> <li>\n<strong>_external</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><em>None</em>) – If given, prefer the URL to be internal (False) or require it to be external (True). External URLs include the scheme and domain. When not in an active request, URLs are external by default.</li> <li>\n<strong>values</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Values to use for the variable parts of the URL rule. Unknown keys are appended as query string arguments, like <code>?a=b&amp;c=d</code>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2: </span>Moved from <code>flask.url_for</code>, which calls this method.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.make_response\">\n<code>make_response(rv)</code> </dt> <dd>\n<p>Convert the return value from a view function to an instance of <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>rv</strong> (<em>ft.ResponseReturnValue</em>) – </p>\n<p>the return value from the view function. The view function must return a response. Returning <code>None</code>, or the view ending without returning, is not allowed. The following types are allowed for <code>view_rv</code>:</p> <dl class=\"simple\"> <dt>\n<code>str</code> </dt>\n<dd>\n<p>A response object is created with the string encoded to UTF-8 as the body.</p> </dd> <dt>\n<code>bytes</code> </dt>\n<dd>\n<p>A response object is created with the bytes as the body.</p> </dd> <dt>\n<code>dict</code> </dt>\n<dd>\n<p>A dictionary that will be jsonify’d before being returned.</p> </dd> <dt>\n<code>list</code> </dt>\n<dd>\n<p>A list that will be jsonify’d before being returned.</p> </dd> <dt>\n<code>generator or iterator</code> </dt>\n<dd>\n<p>A generator that returns <code>str</code> or <code>bytes</code> to be streamed as the response.</p> </dd> <dt>\n<code>tuple</code> </dt>\n<dd>\n<p>Either <code>(body, status, headers)</code>, <code>(body, status)</code>, or <code>(body, headers)</code>, where <code>body</code> is any of the other types allowed here, <code>status</code> is a string or an integer, and <code>headers</code> is a dictionary or a list of <code>(key, value)</code> tuples. If <code>body</code> is a <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a> instance, <code>status</code> overwrites the exiting value and <code>headers</code> are extended.</p> </dd> <dt>\n <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a>\n</dt>\n<dd>\n<p>The object is returned unchanged.</p> </dd> <dt>\n<code>other Response class</code> </dt>\n<dd>\n<p>The object is coerced to <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a>.</p> </dd> <dt>\n <a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#callable\" title=\"(in Python v3.13)\"><code>callable()</code></a>\n</dt>\n<dd>\n<p>The function is called as a WSGI application. The result is used to create a response object.</p> </dd> </dl> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>A generator will be converted to a streaming response. A list will be converted to a JSON response.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1: </span>A dict will be converted to a JSON response.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>Previously a tuple was interpreted as the arguments for the response object.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.preprocess_request\">\n<code>preprocess_request()</code> </dt> <dd>\n<p>Called before the request is dispatched. Calls <a class=\"reference internal\" href=\"#flask.Flask.url_value_preprocessors\" title=\"flask.Flask.url_value_preprocessors\"><code>url_value_preprocessors</code></a> registered with the app and the current blueprint (if any). Then calls <a class=\"reference internal\" href=\"#flask.Flask.before_request_funcs\" title=\"flask.Flask.before_request_funcs\"><code>before_request_funcs</code></a> registered with the app and the blueprint.</p> <p>If any <a class=\"reference internal\" href=\"#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> handler returns a non-None value, the value is handled as if it was the return value from the view, and further request handling is stopped.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>ft.ResponseReturnValue | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.process_response\">\n<code>process_response(response)</code> </dt> <dd>\n<p>Can be overridden in order to modify the response object before it’s sent to the WSGI server. By default this will call all the <a class=\"reference internal\" href=\"#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>after_request()</code></a> decorated functions.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.5: </span>As of Flask 0.5 the functions registered for after request execution are called in reverse order of registration.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>response</strong> (<a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\">Response</a>) – a <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a> object.</p> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>a new response object or the same, has to be an instance of <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a>.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.wrappers.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.do_teardown_request\">\n<code>do_teardown_request(exc=_sentinel)</code> </dt> <dd>\n<p>Called after the request is dispatched and the response is returned, right before the request context is popped.</p> <p>This calls all functions decorated with <a class=\"reference internal\" href=\"#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a>, and <a class=\"reference internal\" href=\"#flask.Blueprint.teardown_request\" title=\"flask.Blueprint.teardown_request\"><code>Blueprint.teardown_request()</code></a> if a blueprint handled the request. Finally, the <a class=\"reference internal\" href=\"#flask.request_tearing_down\" title=\"flask.request_tearing_down\"><code>request_tearing_down</code></a> signal is sent.</p> <p>This is called by <a class=\"reference internal\" href=\"#flask.ctx.RequestContext.pop\" title=\"flask.ctx.RequestContext.pop\"><code>RequestContext.pop()</code></a>, which may be delayed during testing to maintain access to resources.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>exc</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#BaseException\" title=\"(in Python v3.13)\">BaseException</a><em> | </em><em>None</em>) – An unhandled exception raised while dispatching the request. Detected from the current exception information if not passed. Passed to each teardown function.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>Added the <code>exc</code> argument.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.do_teardown_appcontext\">\n<code>do_teardown_appcontext(exc=_sentinel)</code> </dt> <dd>\n<p>Called right before the application context is popped.</p> <p>When handling a request, the application context is popped after the request context. See <a class=\"reference internal\" href=\"#flask.Flask.do_teardown_request\" title=\"flask.Flask.do_teardown_request\"><code>do_teardown_request()</code></a>.</p> <p>This calls all functions decorated with <a class=\"reference internal\" href=\"#flask.Flask.teardown_appcontext\" title=\"flask.Flask.teardown_appcontext\"><code>teardown_appcontext()</code></a>. Then the <a class=\"reference internal\" href=\"#flask.appcontext_tearing_down\" title=\"flask.appcontext_tearing_down\"><code>appcontext_tearing_down</code></a> signal is sent.</p> <p>This is called by <a class=\"reference internal\" href=\"#flask.ctx.AppContext.pop\" title=\"flask.ctx.AppContext.pop\"><code>AppContext.pop()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>exc</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#BaseException\" title=\"(in Python v3.13)\">BaseException</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.app_context\">\n<code>app_context()</code> </dt> <dd>\n<p>Create an <a class=\"reference internal\" href=\"#flask.ctx.AppContext\" title=\"flask.ctx.AppContext\"><code>AppContext</code></a>. Use as a <code>with</code> block to push the context, which will make <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> point at this application.</p> <p>An application context is automatically pushed by <code>RequestContext.push()</code> when handling a request, and when running a CLI command. Use this to manually create a context outside of these situations.</p> <pre data-language=\"python\">with app.app_context():\n    init_db()\n</pre> <p>See <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">The Application Context</span></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.ctx.AppContext\" title=\"flask.ctx.AppContext\">AppContext</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.request_context\">\n<code>request_context(environ)</code> </dt> <dd>\n<p>Create a <a class=\"reference internal\" href=\"#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\"><code>RequestContext</code></a> representing a WSGI environment. Use a <code>with</code> block to push the context, which will make <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a> point at this request.</p> <p>See <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">The Request Context</span></a>.</p> <p>Typically you should not call this from your own code. A request context is automatically pushed by the <a class=\"reference internal\" href=\"#flask.Flask.wsgi_app\" title=\"flask.Flask.wsgi_app\"><code>wsgi_app()</code></a> when handling a request. Use <a class=\"reference internal\" href=\"#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> to create an environment and context instead of this method.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>environ</strong> (<em>WSGIEnvironment</em>) – a WSGI environment</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\">RequestContext</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.test_request_context\">\n<code>test_request_context(*args, **kwargs)</code> </dt> <dd>\n<p>Create a <a class=\"reference internal\" href=\"#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\"><code>RequestContext</code></a> for a WSGI environment created from the given values. This is mostly useful during testing, where you may want to run a function that uses request data without dispatching a full request.</p> <p>See <a class=\"reference internal\" href=\"../reqcontext/index\"><span class=\"doc\">The Request Context</span></a>.</p> <p>Use a <code>with</code> block to push the context, which will make <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a> point at the request for the created environment.</p> <pre data-language=\"python\">with app.test_request_context(...):\n    generate_report()\n</pre> <p>When using the shell, it may be easier to push and pop the context manually to avoid indentation.</p> <pre data-language=\"python\">ctx = app.test_request_context(...)\nctx.push()\n...\nctx.pop()\n</pre> <p>Takes the same arguments as Werkzeug’s <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.EnvironBuilder\" title=\"(in Werkzeug v3.1.x)\"><code>EnvironBuilder</code></a>, with some defaults from the application. See the linked Werkzeug docs for most of the available arguments. Flask-specific behavior is listed here.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>path</strong> – URL path being requested.</li> <li>\n<strong>base_url</strong> – Base URL where the app is being served, which <code>path</code> is relative to. If not given, built from <a class=\"reference internal\" href=\"../config/index#PREFERRED_URL_SCHEME\" title=\"PREFERRED_URL_SCHEME\"><code>PREFERRED_URL_SCHEME</code></a>, <code>subdomain</code>, <a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a>, and <a class=\"reference internal\" href=\"../config/index#APPLICATION_ROOT\" title=\"APPLICATION_ROOT\"><code>APPLICATION_ROOT</code></a>.</li> <li>\n<strong>subdomain</strong> – Subdomain name to append to <a class=\"reference internal\" href=\"../config/index#SERVER_NAME\" title=\"SERVER_NAME\"><code>SERVER_NAME</code></a>.</li> <li>\n<strong>url_scheme</strong> – Scheme to use instead of <a class=\"reference internal\" href=\"../config/index#PREFERRED_URL_SCHEME\" title=\"PREFERRED_URL_SCHEME\"><code>PREFERRED_URL_SCHEME</code></a>.</li> <li>\n<strong>data</strong> – The request body, either as a string or a dict of form keys and values.</li> <li>\n<strong>json</strong> – If given, this is serialized as JSON and passed as <code>data</code>. Also defaults <code>content_type</code> to <code>application/json</code>.</li> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – other positional arguments passed to <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.EnvironBuilder\" title=\"(in Werkzeug v3.1.x)\"><code>EnvironBuilder</code></a>.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – other keyword arguments passed to <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.EnvironBuilder\" title=\"(in Werkzeug v3.1.x)\"><code>EnvironBuilder</code></a>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\">RequestContext</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.wsgi_app\">\n<code>wsgi_app(environ, start_response)</code> </dt> <dd>\n<p>The actual WSGI application. This is not implemented in <code>__call__()</code> so that middlewares can be applied without losing a reference to the app object. Instead of doing this:</p> <pre data-language=\"python\">app = MyMiddleware(app)\n</pre> <p>It’s a better idea to do this instead:</p> <pre data-language=\"python\">app.wsgi_app = MyMiddleware(app.wsgi_app)\n</pre> <p>Then you still have the original application object around and can continue to call methods on it.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.7: </span>Teardown events for the request and app contexts are called even if an unhandled error occurs. Other events may not be called depending on when an error occurs during dispatch. See <a class=\"reference internal\" href=\"../reqcontext/index#callbacks-and-errors\"><span class=\"std std-ref\">Callbacks and Errors</span></a>.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>environ</strong> (<em>WSGIEnvironment</em>) – A WSGI environment.</li> <li>\n<strong>start_response</strong> (<em>StartResponse</em>) – A callable accepting a status code, a list of headers, and an optional exception context to start the response.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>cabc.Iterable[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.aborter_class\">\n<code>aborter_class</code> </dt> <dd>\n<p>alias of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.Aborter\" title=\"(in Werkzeug v3.1.x)\"><code>Aborter</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.add_template_filter\">\n<code>add_template_filter(f, name=None)</code> </dt> <dd>\n<p>Register a custom template filter. Works exactly like the <a class=\"reference internal\" href=\"#flask.Flask.template_filter\" title=\"flask.Flask.template_filter\"><code>template_filter()</code></a> decorator.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the filter, otherwise the function name will be used.</li> <li>\n<strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.add_template_global\">\n<code>add_template_global(f, name=None)</code> </dt> <dd>\n<p>Register a custom template global function. Works exactly like the <a class=\"reference internal\" href=\"#flask.Flask.template_global\" title=\"flask.Flask.template_global\"><code>template_global()</code></a> decorator.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the global function, otherwise the function name will be used.</li> <li>\n<strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.add_template_test\">\n<code>add_template_test(f, name=None)</code> </dt> <dd>\n<p>Register a custom template test. Works exactly like the <a class=\"reference internal\" href=\"#flask.Flask.template_test\" title=\"flask.Flask.template_test\"><code>template_test()</code></a> decorator.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the test, otherwise the function name will be used.</li> <li>\n<strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.add_url_rule\">\n<code>add_url_rule(rule, endpoint=None, view_func=None, provide_automatic_options=None, **options)</code> </dt> <dd>\n<p>Register a rule for routing incoming requests and building URLs. The <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator is a shortcut to call this with the <code>view_func</code> argument. These are equivalent:</p> <pre data-language=\"python\">@app.route(\"/\")\ndef index():\n    ...\n</pre> <pre data-language=\"python\">def index():\n    ...\n\napp.add_url_rule(\"/\", view_func=index)\n</pre> <p>See <a class=\"reference internal\" href=\"#url-route-registrations\"><span class=\"std std-ref\">URL Route Registrations</span></a>.</p> <p>The endpoint name for the route defaults to the name of the view function if the <code>endpoint</code> parameter isn’t passed. An error will be raised if a function has already been registered for the endpoint.</p> <p>The <code>methods</code> parameter defaults to <code>[\"GET\"]</code>. <code>HEAD</code> is always added automatically, and <code>OPTIONS</code> is added automatically by default.</p> <p><code>view_func</code> does not necessarily need to be passed, but if the rule should participate in routing an endpoint name must be associated with a view function at some point with the <a class=\"reference internal\" href=\"#flask.Flask.endpoint\" title=\"flask.Flask.endpoint\"><code>endpoint()</code></a> decorator.</p> <pre data-language=\"python\">app.add_url_rule(\"/\", endpoint=\"index\")\n\n@app.endpoint(\"index\")\ndef index():\n    ...\n</pre> <p>If <code>view_func</code> has a <code>required_methods</code> attribute, those methods are added to the passed and automatic methods. If it has a <code>provide_automatic_methods</code> attribute, it is used as the default if the parameter is not passed.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The URL rule string.</li> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – The endpoint name to associate with the rule and view function. Used when routing and building URLs. Defaults to <code>view_func.__name__</code>.</li> <li>\n<strong>view_func</strong> (<em>ft.RouteCallable</em><em> | </em><em>None</em>) – The view function to associate with the endpoint name.</li> <li>\n<strong>provide_automatic_options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><em>None</em>) – Add the <code>OPTIONS</code> method and respond to <code>OPTIONS</code> requests automatically.</li> <li>\n<strong>options</strong> (<em>t.Any</em>) – Extra options passed to the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Rule\" title=\"(in Werkzeug v3.1.x)\"><code>Rule</code></a> object.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.after_request\">\n<code>after_request(f)</code> </dt> <dd>\n<p>Register a function to run after each request to this object.</p> <p>The function is called with the response object, and must return a response object. This allows the functions to modify or replace the response before it is sent.</p> <p>If a function raises an exception, any remaining <code>after_request</code> functions will not be called. Therefore, this should not be used for actions that must execute, such as to close resources. Use <a class=\"reference internal\" href=\"#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> for that.</p> <p>This is available on both app and blueprint objects. When used on an app, this executes after every request. When used on a blueprint, this executes after every request that the blueprint handles. To register with a blueprint and execute after every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.after_app_request\" title=\"flask.Blueprint.after_app_request\"><code>Blueprint.after_app_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_after_request</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_after_request</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.app_ctx_globals_class\">\n<code>app_ctx_globals_class</code> </dt> <dd>\n<p>alias of <a class=\"reference internal\" href=\"#flask.ctx._AppCtxGlobals\" title=\"flask.ctx._AppCtxGlobals\"><code>_AppCtxGlobals</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.auto_find_instance_path\">\n<code>auto_find_instance_path()</code> </dt> <dd>\n<p>Tries to locate the instance path if it was not provided to the constructor of the application class. It will basically calculate the path to a folder named <code>instance</code> next to your main file or the package.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.before_request\">\n<code>before_request(f)</code> </dt> <dd>\n<p>Register a function to run before each request.</p> <p>For example, this can be used to open a database connection, or to load the logged in user from the session.</p> <pre data-language=\"python\">@app.before_request\ndef load_user():\n    if \"user_id\" in session:\n        g.user = db.session.get(session[\"user_id\"])\n</pre> <p>The function will be called without any arguments. If it returns a non-<code>None</code> value, the value is handled as if it was the return value from the view, and further request handling is stopped.</p> <p>This is available on both app and blueprint objects. When used on an app, this executes before every request. When used on a blueprint, this executes before every request that the blueprint handles. To register with a blueprint and execute before every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.before_app_request\" title=\"flask.Blueprint.before_app_request\"><code>Blueprint.before_app_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_before_request</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_before_request</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.config_class\">\n<code>config_class</code> </dt> <dd>\n<p>alias of <a class=\"reference internal\" href=\"#flask.Config\" title=\"flask.config.Config\"><code>Config</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.context_processor\">\n<code>context_processor(f)</code> </dt> <dd>\n<p>Registers a template context processor function. These functions run before rendering a template. The keys of the returned dict are added as variables available in the template.</p> <p>This is available on both app and blueprint objects. When used on an app, this is called for every rendered template. When used on a blueprint, this is called for templates rendered from the blueprint’s views. To register with a blueprint and affect every template, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_context_processor\" title=\"flask.Blueprint.app_context_processor\"><code>Blueprint.app_context_processor()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_template_context_processor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_template_context_processor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.create_global_jinja_loader\">\n<code>create_global_jinja_loader()</code> </dt> <dd>\n<p>Creates the loader for the Jinja2 environment. Can be used to override just the loader and keeping the rest unchanged. It’s discouraged to override this function. Instead one should override the <a class=\"reference internal\" href=\"#flask.Flask.jinja_loader\" title=\"flask.Flask.jinja_loader\"><code>jinja_loader()</code></a> function instead.</p> <p>The global loader dispatches between the loaders of the application and the individual blueprints.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><em>DispatchingJinjaLoader</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.debug\">\n<code>property debug: bool</code> </dt> <dd>\n<p>Whether debug mode is enabled. When using <code>flask run</code> to start the development server, an interactive debugger will be shown for unhandled exceptions, and the server will be reloaded when code changes. This maps to the <a class=\"reference internal\" href=\"../config/index#DEBUG\" title=\"DEBUG\"><code>DEBUG</code></a> config key. It may not behave as expected if set late.</p> <p><strong>Do not enable debug mode when deploying in production.</strong></p> <p>Default: <code>False</code></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.delete\">\n<code>delete(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> with <code>methods=[\"DELETE\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.endpoint\">\n<code>endpoint(endpoint)</code> </dt> <dd>\n<p>Decorate a view function to register it for the given endpoint. Used if a rule is added without a <code>view_func</code> with <a class=\"reference internal\" href=\"#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a>.</p> <pre data-language=\"python\">app.add_url_rule(\"/ex\", endpoint=\"example\")\n\n@app.endpoint(\"example\")\ndef example():\n    ...\n</pre> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The endpoint name to associate with the view function.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>F</em>], <em>F</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.errorhandler\">\n<code>errorhandler(code_or_exception)</code> </dt> <dd>\n<p>Register a function to handle errors by code or exception class.</p> <p>A decorator that is used to register a function given an error code. Example:</p> <pre data-language=\"python\">@app.errorhandler(404)\ndef page_not_found(error):\n    return 'This page does not exist', 404\n</pre> <p>You can also register handlers for arbitrary exceptions:</p> <pre data-language=\"python\">@app.errorhandler(DatabaseError)\ndef special_exception_handler(error):\n    return 'Database connection failed', 500\n</pre> <p>This is available on both app and blueprint objects. When used on an app, this can handle errors from every request. When used on a blueprint, this can handle errors from requests that the blueprint handles. To register with a blueprint and affect every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_errorhandler\" title=\"flask.Blueprint.app_errorhandler\"><code>Blueprint.app_errorhandler()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span>Use <a class=\"reference internal\" href=\"#flask.Flask.register_error_handler\" title=\"flask.Flask.register_error_handler\"><code>register_error_handler()</code></a> instead of modifying <a class=\"reference internal\" href=\"#flask.Flask.error_handler_spec\" title=\"flask.Flask.error_handler_spec\"><code>error_handler_spec</code></a> directly, for application wide error handlers.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span>One can now additionally also register custom exception types that do not necessarily have to be a subclass of the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> class.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>code_or_exception</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>) – the code as integer for the handler, or an arbitrary exception</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_error_handler</em>], <em>T_error_handler</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.get\">\n<code>get(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> with <code>methods=[\"GET\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.handle_url_build_error\">\n<code>handle_url_build_error(error, endpoint, values)</code> </dt> <dd>\n<p>Called by <a class=\"reference internal\" href=\"#flask.Flask.url_for\" title=\"flask.Flask.url_for\"><code>url_for()</code></a> if a <code>BuildError</code> was raised. If this returns a value, it will be returned by <code>url_for</code>, otherwise the error will be re-raised.</p> <p>Each function in <a class=\"reference internal\" href=\"#flask.Flask.url_build_error_handlers\" title=\"flask.Flask.url_build_error_handlers\"><code>url_build_error_handlers</code></a> is called with <code>error</code>, <code>endpoint</code> and <code>values</code>. If a function returns <code>None</code> or raises a <code>BuildError</code>, it is skipped. Otherwise, its return value is returned by <code>url_for</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>error</strong> (<em>BuildError</em>) – The active <code>BuildError</code> being handled.</li> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The endpoint being built.</li> <li>\n<strong>values</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>) – The keyword arguments passed to <code>url_for</code>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.has_static_folder\">\n<code>property has_static_folder: bool</code> </dt> <dd>\n<p><code>True</code> if <a class=\"reference internal\" href=\"#flask.Flask.static_folder\" title=\"flask.Flask.static_folder\"><code>static_folder</code></a> is set.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.inject_url_defaults\">\n<code>inject_url_defaults(endpoint, values)</code> </dt> <dd>\n<p>Injects the URL defaults for the given endpoint directly into the values dictionary passed. This is used internally and automatically called on URL building.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>values</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.iter_blueprints\">\n<code>iter_blueprints()</code> </dt> <dd>\n<p>Iterates over all blueprints by the order they were registered.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>t.ValuesView[<a class=\"reference internal\" href=\"#flask.Blueprint\" title=\"flask.Blueprint\">Blueprint</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.jinja_env\">\n<code>property jinja_env: Environment</code> </dt> <dd>\n<p>The Jinja environment used to load templates.</p> <p>The environment is created the first time this property is accessed. Changing <a class=\"reference internal\" href=\"#flask.Flask.jinja_options\" title=\"flask.Flask.jinja_options\"><code>jinja_options</code></a> after that will have no effect.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.jinja_environment\">\n<code>jinja_environment</code> </dt> <dd>\n<p>alias of <code>Environment</code></p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.jinja_loader\">\n<code>property jinja_loader: BaseLoader | None</code> </dt> <dd>\n<p>The Jinja loader for this object’s templates. By default this is a class <a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/api/#jinja2.FileSystemLoader\" title=\"(in Jinja v3.1.x)\"><code>jinja2.loaders.FileSystemLoader</code></a> to <a class=\"reference internal\" href=\"#flask.Flask.template_folder\" title=\"flask.Flask.template_folder\"><code>template_folder</code></a> if it is set.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.jinja_options\">\n<code>jinja_options: dict[str, t.Any] = {}</code> </dt> <dd>\n<p>Options that are passed to the Jinja environment in <a class=\"reference internal\" href=\"#flask.Flask.create_jinja_environment\" title=\"flask.Flask.create_jinja_environment\"><code>create_jinja_environment()</code></a>. Changing these options after the environment is created (accessing <a class=\"reference internal\" href=\"#flask.Flask.jinja_env\" title=\"flask.Flask.jinja_env\"><code>jinja_env</code></a>) will have no effect.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1.0: </span>This is a <code>dict</code> instead of an <code>ImmutableDict</code> to allow easier configuration.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.json_provider_class\">\n<code>json_provider_class</code> </dt> <dd>\n<p>alias of <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider\" title=\"flask.json.provider.DefaultJSONProvider\"><code>DefaultJSONProvider</code></a></p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.logger\">\n<code>property logger: Logger</code> </dt> <dd>\n<p>A standard Python <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#logging.Logger\" title=\"(in Python v3.13)\"><code>Logger</code></a> for the app, with the same name as <a class=\"reference internal\" href=\"#flask.Flask.name\" title=\"flask.Flask.name\"><code>name</code></a>.</p> <p>In debug mode, the logger’s <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#logging.Logger.level\" title=\"(in Python v3.13)\"><code>level</code></a> will be set to <a class=\"reference external\" href=\"https://docs.python.org/3/library/logging.html#logging.DEBUG\" title=\"(in Python v3.13)\"><code>DEBUG</code></a>.</p> <p>If there are no handlers configured, a default handler will be added. See <a class=\"reference internal\" href=\"../logging/index\"><span class=\"doc\">Logging</span></a> for more information.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1.0: </span>The logger takes the same name as <a class=\"reference internal\" href=\"#flask.Flask.name\" title=\"flask.Flask.name\"><code>name</code></a> rather than hard-coding <code>\"flask.app\"</code>.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0.0: </span>Behavior was simplified. The logger is always named <code>\"flask.app\"</code>. The level is only set during configuration, it doesn’t check <code>app.debug</code> each time. Only one format is used, not different ones depending on <code>app.debug</code>. No handlers are removed, and a handler is only added if no handlers are already configured.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.3.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.make_aborter\">\n<code>make_aborter()</code> </dt> <dd>\n<p>Create the object to assign to <a class=\"reference internal\" href=\"#flask.Flask.aborter\" title=\"flask.Flask.aborter\"><code>aborter</code></a>. That object is called by <a class=\"reference internal\" href=\"#flask.abort\" title=\"flask.abort\"><code>flask.abort()</code></a> to raise HTTP errors, and can be called directly as well.</p> <p>By default, this creates an instance of <a class=\"reference internal\" href=\"#flask.Flask.aborter_class\" title=\"flask.Flask.aborter_class\"><code>aborter_class</code></a>, which defaults to <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.Aborter\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.exceptions.Aborter</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.Aborter\" title=\"(in Werkzeug v3.1.x)\">Aborter</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.make_config\">\n<code>make_config(instance_relative=False)</code> </dt> <dd>\n<p>Used to create the config attribute by the Flask constructor. The <code>instance_relative</code> parameter is passed in from the constructor of Flask (there named <code>instance_relative_config</code>) and indicates if the config should be relative to the instance path or the root path of the application.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>instance_relative</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Config\" title=\"flask.config.Config\">Config</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.name\">\n<code>property name: str</code> </dt> <dd>\n<p>The name of the application. This is usually the import name with the difference that it’s guessed from the run file if the import name is main. This name is used as a display name when Flask needs the name of the application. It can be set and overridden to change the value.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.patch\">\n<code>patch(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> with <code>methods=[\"PATCH\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.permanent_session_lifetime\">\n<code>permanent_session_lifetime</code> </dt> <dd>\n<p>A <a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.timedelta\" title=\"(in Python v3.13)\"><code>timedelta</code></a> which is used to set the expiration date of a permanent session. The default is 31 days which makes a permanent session survive for roughly one month.</p> <p>This attribute can also be configured from the config with the <code>PERMANENT_SESSION_LIFETIME</code> configuration key. Defaults to <code>timedelta(days=31)</code></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.post\">\n<code>post(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> with <code>methods=[\"POST\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.put\">\n<code>put(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> with <code>methods=[\"PUT\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.redirect\">\n<code>redirect(location, code=302)</code> </dt> <dd>\n<p>Create a redirect response object.</p> <p>This is called by <a class=\"reference internal\" href=\"#flask.redirect\" title=\"flask.redirect\"><code>flask.redirect()</code></a>, and can be called directly as well.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>location</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The URL to redirect to.</li> <li>\n<strong>code</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>) – The status code for the redirect.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>BaseResponse</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2: </span>Moved from <code>flask.redirect</code>, which calls this method.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.register_blueprint\">\n<code>register_blueprint(blueprint, **options)</code> </dt> <dd>\n<p>Register a <a class=\"reference internal\" href=\"#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> on the application. Keyword arguments passed to this method will override the defaults set on the blueprint.</p> <p>Calls the blueprint’s <a class=\"reference internal\" href=\"#flask.Blueprint.register\" title=\"flask.Blueprint.register\"><code>register()</code></a> method after recording the blueprint in the application’s <a class=\"reference internal\" href=\"#flask.Flask.blueprints\" title=\"flask.Flask.blueprints\"><code>blueprints</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>blueprint</strong> (<a class=\"reference internal\" href=\"#flask.Blueprint\" title=\"flask.Blueprint\">Blueprint</a>) – The blueprint to register.</li> <li>\n<strong>url_prefix</strong> – Blueprint routes will be prefixed with this.</li> <li>\n<strong>subdomain</strong> – Blueprint routes will match on this subdomain.</li> <li>\n<strong>url_defaults</strong> – Blueprint routes will use these default values for view arguments.</li> <li>\n<strong>options</strong> (<em>t.Any</em>) – Additional keyword arguments are passed to <a class=\"reference internal\" href=\"#flask.blueprints.BlueprintSetupState\" title=\"flask.blueprints.BlueprintSetupState\"><code>BlueprintSetupState</code></a>. They can be accessed in <a class=\"reference internal\" href=\"#flask.Blueprint.record\" title=\"flask.Blueprint.record\"><code>record()</code></a> callbacks.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0.1: </span>The <code>name</code> option can be used to change the (pre-dotted) name the blueprint is registered with. This allows the same blueprint to be registered multiple times with unique names for <code>url_for</code>.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.register_error_handler\">\n<code>register_error_handler(code_or_exception, f)</code> </dt> <dd>\n<p>Alternative error attach function to the <a class=\"reference internal\" href=\"#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> decorator that is more straightforward to use for non decorator usage.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>code_or_exception</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>)</li> <li>\n<strong>f</strong> (<em>ft.ErrorHandlerCallable</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.route\">\n<code>route(rule, **options)</code> </dt> <dd>\n<p>Decorate a view function to register it with the given URL rule and options. Calls <a class=\"reference internal\" href=\"#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a>, which has more details about the implementation.</p> <pre data-language=\"python\">@app.route(\"/\")\ndef index():\n    return \"Hello, World!\"\n</pre> <p>See <a class=\"reference internal\" href=\"#url-route-registrations\"><span class=\"std std-ref\">URL Route Registrations</span></a>.</p> <p>The endpoint name for the route defaults to the name of the view function if the <code>endpoint</code> parameter isn’t passed.</p> <p>The <code>methods</code> parameter defaults to <code>[\"GET\"]</code>. <code>HEAD</code> and <code>OPTIONS</code> are added automatically.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The URL rule string.</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Extra options passed to the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Rule\" title=\"(in Werkzeug v3.1.x)\"><code>Rule</code></a> object.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.secret_key\">\n<code>secret_key</code> </dt> <dd>\n<p>If a secret key is set, cryptographic components can use this to sign cookies and other things. Set this to a complex random value when you want to use the secure cookie for instance.</p> <p>This attribute can also be configured from the config with the <a class=\"reference internal\" href=\"../config/index#SECRET_KEY\" title=\"SECRET_KEY\"><code>SECRET_KEY</code></a> configuration key. Defaults to <code>None</code>.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.select_jinja_autoescape\">\n<code>select_jinja_autoescape(filename)</code> </dt> <dd>\n<p>Returns <code>True</code> if autoescaping should be active for the given template name. If no template name is given, returns <code>True</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Autoescaping is now enabled by default for <code>.svg</code> files.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.shell_context_processor\">\n<code>shell_context_processor(f)</code> </dt> <dd>\n<p>Registers a shell context processor function.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_shell_context_processor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_shell_context_processor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.should_ignore_error\">\n<code>should_ignore_error(error)</code> </dt> <dd>\n<p>This is called to figure out if an error should be ignored or not as far as the teardown system is concerned. If this function returns <code>True</code> then the teardown handlers will not be passed the error.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>error</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#BaseException\" title=\"(in Python v3.13)\">BaseException</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.static_folder\">\n<code>property static_folder: str | None</code> </dt> <dd>\n<p>The absolute path to the configured static folder. <code>None</code> if no static folder is set.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.static_url_path\">\n<code>property static_url_path: str | None</code> </dt> <dd>\n<p>The URL prefix that the static route will be accessible from.</p> <p>If it was not configured during init, it is derived from <a class=\"reference internal\" href=\"#flask.Flask.static_folder\" title=\"flask.Flask.static_folder\"><code>static_folder</code></a>.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.teardown_appcontext\">\n<code>teardown_appcontext(f)</code> </dt> <dd>\n<p>Registers a function to be called when the application context is popped. The application context is typically popped after the request context for each request, at the end of CLI commands, or after a manually pushed context ends.</p> <pre data-language=\"python\">with app.app_context():\n    ...\n</pre> <p>When the <code>with</code> block exits (or <code>ctx.pop()</code> is called), the teardown functions are called just before the app context is made inactive. Since a request context typically also manages an application context it would also be called when you pop a request context.</p> <p>When a teardown function was called because of an unhandled exception it will be passed an error object. If an <a class=\"reference internal\" href=\"#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> is registered, it will handle the exception and the teardown will not receive it.</p> <p>Teardown functions must avoid raising exceptions. If they execute code that might fail they must surround that code with a <code>try</code>/<code>except</code> block and log any errors.</p> <p>The return values of teardown functions are ignored.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_teardown</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_teardown</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.teardown_request\">\n<code>teardown_request(f)</code> </dt> <dd>\n<p>Register a function to be called when the request context is popped. Typically this happens at the end of each request, but contexts may be pushed manually as well during testing.</p> <pre data-language=\"python\">with app.test_request_context():\n    ...\n</pre> <p>When the <code>with</code> block exits (or <code>ctx.pop()</code> is called), the teardown functions are called just before the request context is made inactive.</p> <p>When a teardown function was called because of an unhandled exception it will be passed an error object. If an <a class=\"reference internal\" href=\"#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> is registered, it will handle the exception and the teardown will not receive it.</p> <p>Teardown functions must avoid raising exceptions. If they execute code that might fail they must surround that code with a <code>try</code>/<code>except</code> block and log any errors.</p> <p>The return values of teardown functions are ignored.</p> <p>This is available on both app and blueprint objects. When used on an app, this executes after every request. When used on a blueprint, this executes after every request that the blueprint handles. To register with a blueprint and execute after every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.teardown_app_request\" title=\"flask.Blueprint.teardown_app_request\"><code>Blueprint.teardown_app_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_teardown</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_teardown</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.template_filter\">\n<code>template_filter(name=None)</code> </dt> <dd>\n<p>A decorator that is used to register custom template filter. You can specify a name for the filter, otherwise the function name will be used. Example:</p> <pre data-language=\"python\">@app.template_filter()\ndef reverse(s):\n    return s[::-1]\n</pre> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the filter, otherwise the function name will be used.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_template_filter</em>], <em>T_template_filter</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.template_global\">\n<code>template_global(name=None)</code> </dt> <dd>\n<p>A decorator that is used to register a custom template global function. You can specify a name for the global function, otherwise the function name will be used. Example:</p> <pre data-language=\"python\">@app.template_global()\ndef double(n):\n    return 2 * n\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the global function, otherwise the function name will be used.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_template_global</em>], <em>T_template_global</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.template_test\">\n<code>template_test(name=None)</code> </dt> <dd>\n<p>A decorator that is used to register custom template test. You can specify a name for the test, otherwise the function name will be used. Example:</p> <pre data-language=\"python\">@app.template_test()\ndef is_prime(n):\n    if n == 2:\n        return True\n    for i in range(2, int(math.ceil(math.sqrt(n))) + 1):\n        if n % i == 0:\n            return False\n    return True\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the test, otherwise the function name will be used.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_template_test</em>], <em>T_template_test</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.test_cli_runner_class\">\n<code>test_cli_runner_class: type[FlaskCliRunner] | None = None</code> </dt> <dd>\n<p>The <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.testing.CliRunner\" title=\"(in Click v8.1.x)\"><code>CliRunner</code></a> subclass, by default <a class=\"reference internal\" href=\"#flask.testing.FlaskCliRunner\" title=\"flask.testing.FlaskCliRunner\"><code>FlaskCliRunner</code></a> that is used by <a class=\"reference internal\" href=\"#flask.Flask.test_cli_runner\" title=\"flask.Flask.test_cli_runner\"><code>test_cli_runner()</code></a>. Its <code>__init__</code> method should take a Flask app object as the first argument.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 1.0.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.test_client_class\">\n<code>test_client_class: type[FlaskClient] | None = None</code> </dt> <dd>\n<p>The <a class=\"reference internal\" href=\"#flask.Flask.test_client\" title=\"flask.Flask.test_client\"><code>test_client()</code></a> method creates an instance of this test client class. Defaults to <a class=\"reference internal\" href=\"#flask.testing.FlaskClient\" title=\"flask.testing.FlaskClient\"><code>FlaskClient</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.testing\">\n<code>testing</code> </dt> <dd>\n<p>The testing flag. Set this to <code>True</code> to enable the test mode of Flask extensions (and in the future probably also Flask itself). For example this might activate test helpers that have an additional runtime cost which should not be enabled by default.</p> <p>If this is enabled and PROPAGATE_EXCEPTIONS is not changed from the default it’s implicitly enabled.</p> <p>This attribute can also be configured from the config with the <code>TESTING</code> configuration key. Defaults to <code>False</code>.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.trap_http_exception\">\n<code>trap_http_exception(e)</code> </dt> <dd>\n<p>Checks if an HTTP exception should be trapped or not. By default this will return <code>False</code> for all exceptions except for a bad request key error if <code>TRAP_BAD_REQUEST_ERRORS</code> is set to <code>True</code>. It also returns <code>True</code> if <code>TRAP_HTTP_EXCEPTIONS</code> is set to <code>True</code>.</p> <p>This is called for all HTTP exceptions raised by a view function. If it returns <code>True</code> for any exception the error handler for this exception is not called and it shows up as regular exception in the traceback. This is helpful for debugging implicitly raised HTTP exceptions.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>Bad request errors are not trapped by default in debug mode.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>e</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_defaults\">\n<code>url_defaults(f)</code> </dt> <dd>\n<p>Callback function for URL defaults for all view functions of the application. It’s called with the endpoint and values and should update the values passed in place.</p> <p>This is available on both app and blueprint objects. When used on an app, this is called for every request. When used on a blueprint, this is called for requests that the blueprint handles. To register with a blueprint and affect every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_url_defaults\" title=\"flask.Blueprint.app_url_defaults\"><code>Blueprint.app_url_defaults()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_url_defaults</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_url_defaults</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_map_class\">\n<code>url_map_class</code> </dt> <dd>\n<p>alias of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Map\" title=\"(in Werkzeug v3.1.x)\"><code>Map</code></a></p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_rule_class\">\n<code>url_rule_class</code> </dt> <dd>\n<p>alias of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Rule\" title=\"(in Werkzeug v3.1.x)\"><code>Rule</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_value_preprocessor\">\n<code>url_value_preprocessor(f)</code> </dt> <dd>\n<p>Register a URL value preprocessor function for all view functions in the application. These functions will be called before the <a class=\"reference internal\" href=\"#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> functions.</p> <p>The function can modify the values captured from the matched url before they are passed to the view. For example, this can be used to pop a common language code value and place it in <code>g</code> rather than pass it to every view.</p> <p>The function is passed the endpoint name and values dict. The return value is ignored.</p> <p>This is available on both app and blueprint objects. When used on an app, this is called for every request. When used on a blueprint, this is called for requests that the blueprint handles. To register with a blueprint and affect every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_url_value_preprocessor\" title=\"flask.Blueprint.app_url_value_preprocessor\"><code>Blueprint.app_url_value_preprocessor()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_url_value_preprocessor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_url_value_preprocessor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.instance_path\">\n<code>instance_path</code> </dt> <dd>\n<p>Holds the path to the instance folder.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.config\">\n<code>config</code> </dt> <dd>\n<p>The configuration dictionary as <a class=\"reference internal\" href=\"#flask.Config\" title=\"flask.Config\"><code>Config</code></a>. This behaves exactly like a regular dictionary but supports additional methods to load a config from files.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.aborter\">\n<code>aborter</code> </dt> <dd>\n<p>An instance of <a class=\"reference internal\" href=\"#flask.Flask.aborter_class\" title=\"flask.Flask.aborter_class\"><code>aborter_class</code></a> created by <a class=\"reference internal\" href=\"#flask.Flask.make_aborter\" title=\"flask.Flask.make_aborter\"><code>make_aborter()</code></a>. This is called by <a class=\"reference internal\" href=\"#flask.abort\" title=\"flask.abort\"><code>flask.abort()</code></a> to raise HTTP errors, and can be called directly as well.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2: </span>Moved from <code>flask.abort</code>, which calls this object.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.json\">\n<code>json: JSONProvider</code> </dt> <dd>\n<p>Provides access to JSON methods. Functions in <code>flask.json</code> will call methods on this provider when the application context is active. Used for handling JSON requests and responses.</p> <p>An instance of <a class=\"reference internal\" href=\"#flask.Flask.json_provider_class\" title=\"flask.Flask.json_provider_class\"><code>json_provider_class</code></a>. Can be customized by changing that attribute on a subclass, or by assigning to this attribute afterwards.</p> <p>The default, <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider\" title=\"flask.json.provider.DefaultJSONProvider\"><code>DefaultJSONProvider</code></a>, uses Python’s built-in <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#module-json\" title=\"(in Python v3.13)\"><code>json</code></a> library. A different provider can use a different JSON library.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_build_error_handlers\">\n<code>url_build_error_handlers: list[t.Callable[[Exception, str, dict[str, t.Any]], str]]</code> </dt> <dd>\n<p>A list of functions that are called by <a class=\"reference internal\" href=\"#flask.Flask.handle_url_build_error\" title=\"flask.Flask.handle_url_build_error\"><code>handle_url_build_error()</code></a> when <a class=\"reference internal\" href=\"#flask.Flask.url_for\" title=\"flask.Flask.url_for\"><code>url_for()</code></a> raises a <code>BuildError</code>. Each function is called with <code>error</code>, <code>endpoint</code> and <code>values</code>. If a function returns <code>None</code> or raises a <code>BuildError</code>, it is skipped. Otherwise, its return value is returned by <code>url_for</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.teardown_appcontext_funcs\">\n<code>teardown_appcontext_funcs: list[ft.TeardownCallable]</code> </dt> <dd>\n<p>A list of functions that are called when the application context is destroyed. Since the application context is also torn down if the request ends this is the place to store code that disconnects from databases.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.shell_context_processors\">\n<code>shell_context_processors: list[ft.ShellContextProcessorCallable]</code> </dt> <dd>\n<p>A list of shell context processor functions that should be run when a shell context is created.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.blueprints\">\n<code>blueprints: dict[str, Blueprint]</code> </dt> <dd>\n<p>Maps registered blueprint names to blueprint objects. The dict retains the order the blueprints were registered in. Blueprints can be registered multiple times, this dict does not track how often they were attached.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.extensions\">\n<code>extensions: dict[str, t.Any]</code> </dt> <dd>\n<p>a place where extensions can store application specific state. For example this is where an extension could store database engines and similar things.</p> <p>The key must match the name of the extension module. For example in case of a “Flask-Foo” extension in <code>flask_foo</code>, the key would be <code>'foo'</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_map\">\n<code>url_map</code> </dt> <dd>\n<p>The <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Map\" title=\"(in Werkzeug v3.1.x)\"><code>Map</code></a> for this instance. You can use this to change the routing converters after the class was created but before any routes are connected. Example:</p> <pre data-language=\"python\">from werkzeug.routing import BaseConverter\n\nclass ListConverter(BaseConverter):\n    def to_python(self, value):\n        return value.split(',')\n    def to_url(self, values):\n        return ','.join(super(ListConverter, self).to_url(value)\n                        for value in values)\n\napp = Flask(__name__)\napp.url_map.converters['list'] = ListConverter\n</pre> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.import_name\">\n<code>import_name</code> </dt> <dd>\n<p>The name of the package or module that this object belongs to. Do not change this once it is set by the constructor.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.template_folder\">\n<code>template_folder</code> </dt> <dd>\n<p>The path to the templates folder, relative to <a class=\"reference internal\" href=\"#flask.Flask.root_path\" title=\"flask.Flask.root_path\"><code>root_path</code></a>, to add to the template loader. <code>None</code> if templates should not be added.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.root_path\">\n<code>root_path</code> </dt> <dd>\n<p>Absolute path to the package on the filesystem. Used to look up resources contained in the package.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.view_functions\">\n<code>view_functions: dict[str, ft.RouteCallable]</code> </dt> <dd>\n<p>A dictionary mapping endpoint names to view functions.</p> <p>To register a view function, use the <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.error_handler_spec\">\n<code>error_handler_spec: dict[ft.AppOrBlueprintKey, dict[int | None, dict[type[Exception], ft.ErrorHandlerCallable]]]</code> </dt> <dd>\n<p>A data structure of registered error handlers, in the format <code>{scope: {code: {class: handler}}}</code>. The <code>scope</code> key is the name of a blueprint the handlers are active for, or <code>None</code> for all requests. The <code>code</code> key is the HTTP status code for <code>HTTPException</code>, or <code>None</code> for other exceptions. The innermost dictionary maps exception classes to handler functions.</p> <p>To register an error handler, use the <a class=\"reference internal\" href=\"#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>errorhandler()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.before_request_funcs\">\n<code>before_request_funcs: dict[ft.AppOrBlueprintKey, list[ft.BeforeRequestCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call at the beginning of each request, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>before_request()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.after_request_funcs\">\n<code>after_request_funcs: dict[ft.AppOrBlueprintKey, list[ft.AfterRequestCallable[t.Any]]]</code> </dt> <dd>\n<p>A data structure of functions to call at the end of each request, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>after_request()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.teardown_request_funcs\">\n<code>teardown_request_funcs: dict[ft.AppOrBlueprintKey, list[ft.TeardownCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call at the end of each request even if an exception is raised, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.template_context_processors\">\n<code>template_context_processors: dict[ft.AppOrBlueprintKey, list[ft.TemplateContextProcessorCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call to pass extra context values when rendering templates, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Flask.context_processor\" title=\"flask.Flask.context_processor\"><code>context_processor()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_value_preprocessors\">\n<code>url_value_preprocessors: dict[ft.AppOrBlueprintKey, list[ft.URLValuePreprocessorCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call to modify the keyword arguments passed to the view function, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Flask.url_value_preprocessor\" title=\"flask.Flask.url_value_preprocessor\"><code>url_value_preprocessor()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Flask.url_default_functions\">\n<code>url_default_functions: dict[ft.AppOrBlueprintKey, list[ft.URLDefaultCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call to modify the keyword arguments when generating URLs, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Flask.url_defaults\" title=\"flask.Flask.url_defaults\"><code>url_defaults()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"blueprint-objects\"> <h2>Blueprint Objects</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint\">\n<code>class flask.Blueprint(name, import_name, static_folder=None, static_url_path=None, template_folder=None, url_prefix=None, subdomain=None, url_defaults=None, root_path=None, cli_group=_sentinel)</code> </dt> <dd>\n<dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>import_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>static_folder</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><em>None</em>)</li> <li>\n<strong>static_url_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>template_folder</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><em>None</em>)</li> <li>\n<strong>url_prefix</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>subdomain</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>url_defaults</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>] </em><em>| </em><em>None</em>)</li> <li>\n<strong>root_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>cli_group</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> </ul> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.cli\">\n<code>cli: Group</code> </dt> <dd>\n<p>The Click command group for registering CLI commands for this object. The commands are available from the <code>flask</code> command once the application has been discovered and blueprints have been registered.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.get_send_file_max_age\">\n<code>get_send_file_max_age(filename)</code> </dt> <dd>\n<p>Used by <a class=\"reference internal\" href=\"#flask.send_file\" title=\"flask.send_file\"><code>send_file()</code></a> to determine the <code>max_age</code> cache value for a given file path if it wasn’t passed.</p> <p>By default, this returns <a class=\"reference internal\" href=\"../config/index#SEND_FILE_MAX_AGE_DEFAULT\" title=\"SEND_FILE_MAX_AGE_DEFAULT\"><code>SEND_FILE_MAX_AGE_DEFAULT</code></a> from the configuration of <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a>. This defaults to <code>None</code>, which tells the browser to use conditional requests instead of a timed cache, which is usually preferable.</p> <p>Note this is a duplicate of the same method in the Flask class.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The default configuration is <code>None</code> instead of 12 hours.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.send_static_file\">\n<code>send_static_file(filename)</code> </dt> <dd>\n<p>The view function used to serve files from <a class=\"reference internal\" href=\"#flask.Blueprint.static_folder\" title=\"flask.Blueprint.static_folder\"><code>static_folder</code></a>. A route is automatically registered for this view at <a class=\"reference internal\" href=\"#flask.Blueprint.static_url_path\" title=\"flask.Blueprint.static_url_path\"><code>static_url_path</code></a> if <a class=\"reference internal\" href=\"#flask.Blueprint.static_folder\" title=\"flask.Blueprint.static_folder\"><code>static_folder</code></a> is set.</p> <p>Note this is a duplicate of the same method in the Flask class.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.open_resource\">\n<code>open_resource(resource, mode='rb', encoding='utf-8')</code> </dt> <dd>\n<p>Open a resource file relative to <a class=\"reference internal\" href=\"#flask.Blueprint.root_path\" title=\"flask.Blueprint.root_path\"><code>root_path</code></a> for reading. The blueprint-relative equivalent of the app’s <a class=\"reference internal\" href=\"#flask.Flask.open_resource\" title=\"flask.Flask.open_resource\"><code>open_resource()</code></a> method.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>resource</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Path to the resource relative to <a class=\"reference internal\" href=\"#flask.Blueprint.root_path\" title=\"flask.Blueprint.root_path\"><code>root_path</code></a>.</li> <li>\n<strong>mode</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Open the file in this mode. Only reading is supported, valid values are <code>\"r\"</code> (or <code>\"rt\"</code>) and <code>\"rb\"</code>.</li> <li>\n<strong>encoding</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – Open the file with this encoding when opening in text mode. This is ignored when opening in binary mode.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a></p> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>Added the <code>encoding</code> parameter.</p> </div> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.add_app_template_filter\">\n<code>add_app_template_filter(f, name=None)</code> </dt> <dd>\n<p>Register a template filter, available in any template rendered by the application. Works like the <a class=\"reference internal\" href=\"#flask.Blueprint.app_template_filter\" title=\"flask.Blueprint.app_template_filter\"><code>app_template_filter()</code></a> decorator. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.add_template_filter\" title=\"flask.Flask.add_template_filter\"><code>Flask.add_template_filter()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the filter, otherwise the function name will be used.</li> <li>\n<strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.add_app_template_global\">\n<code>add_app_template_global(f, name=None)</code> </dt> <dd>\n<p>Register a template global, available in any template rendered by the application. Works like the <a class=\"reference internal\" href=\"#flask.Blueprint.app_template_global\" title=\"flask.Blueprint.app_template_global\"><code>app_template_global()</code></a> decorator. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.add_template_global\" title=\"flask.Flask.add_template_global\"><code>Flask.add_template_global()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the global, otherwise the function name will be used.</li> <li>\n<strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.add_app_template_test\">\n<code>add_app_template_test(f, name=None)</code> </dt> <dd>\n<p>Register a template test, available in any template rendered by the application. Works like the <a class=\"reference internal\" href=\"#flask.Blueprint.app_template_test\" title=\"flask.Blueprint.app_template_test\"><code>app_template_test()</code></a> decorator. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.add_template_test\" title=\"flask.Flask.add_template_test\"><code>Flask.add_template_test()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the test, otherwise the function name will be used.</li> <li>\n<strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.add_url_rule\">\n<code>add_url_rule(rule, endpoint=None, view_func=None, provide_automatic_options=None, **options)</code> </dt> <dd>\n<p>Register a URL rule with the blueprint. See <a class=\"reference internal\" href=\"#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>Flask.add_url_rule()</code></a> for full documentation.</p> <p>The URL rule is prefixed with the blueprint’s URL prefix. The endpoint name, used with <a class=\"reference internal\" href=\"#flask.url_for\" title=\"flask.url_for\"><code>url_for()</code></a>, is prefixed with the blueprint’s name.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>view_func</strong> (<em>ft.RouteCallable</em><em> | </em><em>None</em>)</li> <li>\n<strong>provide_automatic_options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><em>None</em>)</li> <li>\n<strong>options</strong> (<em>t.Any</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.after_app_request\">\n<code>after_app_request(f)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.after_request\" title=\"flask.Blueprint.after_request\"><code>after_request()</code></a>, but after every request, not only those handled by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.after_request\" title=\"flask.Flask.after_request\"><code>Flask.after_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_after_request</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_after_request</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.after_request\">\n<code>after_request(f)</code> </dt> <dd>\n<p>Register a function to run after each request to this object.</p> <p>The function is called with the response object, and must return a response object. This allows the functions to modify or replace the response before it is sent.</p> <p>If a function raises an exception, any remaining <code>after_request</code> functions will not be called. Therefore, this should not be used for actions that must execute, such as to close resources. Use <a class=\"reference internal\" href=\"#flask.Blueprint.teardown_request\" title=\"flask.Blueprint.teardown_request\"><code>teardown_request()</code></a> for that.</p> <p>This is available on both app and blueprint objects. When used on an app, this executes after every request. When used on a blueprint, this executes after every request that the blueprint handles. To register with a blueprint and execute after every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.after_app_request\" title=\"flask.Blueprint.after_app_request\"><code>Blueprint.after_app_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_after_request</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_after_request</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_context_processor\">\n<code>app_context_processor(f)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.context_processor\" title=\"flask.Blueprint.context_processor\"><code>context_processor()</code></a>, but for templates rendered by every view, not only by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.context_processor\" title=\"flask.Flask.context_processor\"><code>Flask.context_processor()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_template_context_processor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_template_context_processor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_errorhandler\">\n<code>app_errorhandler(code)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.errorhandler\" title=\"flask.Blueprint.errorhandler\"><code>errorhandler()</code></a>, but for every request, not only those handled by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.errorhandler\" title=\"flask.Flask.errorhandler\"><code>Flask.errorhandler()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>code</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_error_handler</em>], <em>T_error_handler</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_template_filter\">\n<code>app_template_filter(name=None)</code> </dt> <dd>\n<p>Register a template filter, available in any template rendered by the application. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.template_filter\" title=\"flask.Flask.template_filter\"><code>Flask.template_filter()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the filter, otherwise the function name will be used.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_template_filter</em>], <em>T_template_filter</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_template_global\">\n<code>app_template_global(name=None)</code> </dt> <dd>\n<p>Register a template global, available in any template rendered by the application. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.template_global\" title=\"flask.Flask.template_global\"><code>Flask.template_global()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the global, otherwise the function name will be used.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_template_global</em>], <em>T_template_global</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_template_test\">\n<code>app_template_test(name=None)</code> </dt> <dd>\n<p>Register a template test, available in any template rendered by the application. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.template_test\" title=\"flask.Flask.template_test\"><code>Flask.template_test()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the optional name of the test, otherwise the function name will be used.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_template_test</em>], <em>T_template_test</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_url_defaults\">\n<code>app_url_defaults(f)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.url_defaults\" title=\"flask.Blueprint.url_defaults\"><code>url_defaults()</code></a>, but for every request, not only those handled by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.url_defaults\" title=\"flask.Flask.url_defaults\"><code>Flask.url_defaults()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_url_defaults</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_url_defaults</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.app_url_value_preprocessor\">\n<code>app_url_value_preprocessor(f)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.url_value_preprocessor\" title=\"flask.Blueprint.url_value_preprocessor\"><code>url_value_preprocessor()</code></a>, but for every request, not only those handled by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.url_value_preprocessor\" title=\"flask.Flask.url_value_preprocessor\"><code>Flask.url_value_preprocessor()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_url_value_preprocessor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_url_value_preprocessor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.before_app_request\">\n<code>before_app_request(f)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.before_request\" title=\"flask.Blueprint.before_request\"><code>before_request()</code></a>, but before every request, not only those handled by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.before_request\" title=\"flask.Flask.before_request\"><code>Flask.before_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_before_request</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_before_request</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.before_request\">\n<code>before_request(f)</code> </dt> <dd>\n<p>Register a function to run before each request.</p> <p>For example, this can be used to open a database connection, or to load the logged in user from the session.</p> <pre data-language=\"python\">@app.before_request\ndef load_user():\n    if \"user_id\" in session:\n        g.user = db.session.get(session[\"user_id\"])\n</pre> <p>The function will be called without any arguments. If it returns a non-<code>None</code> value, the value is handled as if it was the return value from the view, and further request handling is stopped.</p> <p>This is available on both app and blueprint objects. When used on an app, this executes before every request. When used on a blueprint, this executes before every request that the blueprint handles. To register with a blueprint and execute before every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.before_app_request\" title=\"flask.Blueprint.before_app_request\"><code>Blueprint.before_app_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_before_request</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_before_request</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.context_processor\">\n<code>context_processor(f)</code> </dt> <dd>\n<p>Registers a template context processor function. These functions run before rendering a template. The keys of the returned dict are added as variables available in the template.</p> <p>This is available on both app and blueprint objects. When used on an app, this is called for every rendered template. When used on a blueprint, this is called for templates rendered from the blueprint’s views. To register with a blueprint and affect every template, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_context_processor\" title=\"flask.Blueprint.app_context_processor\"><code>Blueprint.app_context_processor()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_template_context_processor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_template_context_processor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.delete\">\n<code>delete(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Blueprint.route\" title=\"flask.Blueprint.route\"><code>route()</code></a> with <code>methods=[\"DELETE\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.endpoint\">\n<code>endpoint(endpoint)</code> </dt> <dd>\n<p>Decorate a view function to register it for the given endpoint. Used if a rule is added without a <code>view_func</code> with <a class=\"reference internal\" href=\"#flask.Blueprint.add_url_rule\" title=\"flask.Blueprint.add_url_rule\"><code>add_url_rule()</code></a>.</p> <pre data-language=\"python\">app.add_url_rule(\"/ex\", endpoint=\"example\")\n\n@app.endpoint(\"example\")\ndef example():\n    ...\n</pre> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The endpoint name to associate with the view function.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>F</em>], <em>F</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.errorhandler\">\n<code>errorhandler(code_or_exception)</code> </dt> <dd>\n<p>Register a function to handle errors by code or exception class.</p> <p>A decorator that is used to register a function given an error code. Example:</p> <pre data-language=\"python\">@app.errorhandler(404)\ndef page_not_found(error):\n    return 'This page does not exist', 404\n</pre> <p>You can also register handlers for arbitrary exceptions:</p> <pre data-language=\"python\">@app.errorhandler(DatabaseError)\ndef special_exception_handler(error):\n    return 'Database connection failed', 500\n</pre> <p>This is available on both app and blueprint objects. When used on an app, this can handle errors from every request. When used on a blueprint, this can handle errors from requests that the blueprint handles. To register with a blueprint and affect every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_errorhandler\" title=\"flask.Blueprint.app_errorhandler\"><code>Blueprint.app_errorhandler()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span>Use <a class=\"reference internal\" href=\"#flask.Blueprint.register_error_handler\" title=\"flask.Blueprint.register_error_handler\"><code>register_error_handler()</code></a> instead of modifying <a class=\"reference internal\" href=\"#flask.Blueprint.error_handler_spec\" title=\"flask.Blueprint.error_handler_spec\"><code>error_handler_spec</code></a> directly, for application wide error handlers.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span>One can now additionally also register custom exception types that do not necessarily have to be a subclass of the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> class.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>code_or_exception</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>) – the code as integer for the handler, or an arbitrary exception</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_error_handler</em>], <em>T_error_handler</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.get\">\n<code>get(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Blueprint.route\" title=\"flask.Blueprint.route\"><code>route()</code></a> with <code>methods=[\"GET\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.has_static_folder\">\n<code>property has_static_folder: bool</code> </dt> <dd>\n<p><code>True</code> if <a class=\"reference internal\" href=\"#flask.Blueprint.static_folder\" title=\"flask.Blueprint.static_folder\"><code>static_folder</code></a> is set.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.jinja_loader\">\n<code>property jinja_loader: BaseLoader | None</code> </dt> <dd>\n<p>The Jinja loader for this object’s templates. By default this is a class <a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/api/#jinja2.FileSystemLoader\" title=\"(in Jinja v3.1.x)\"><code>jinja2.loaders.FileSystemLoader</code></a> to <a class=\"reference internal\" href=\"#flask.Blueprint.template_folder\" title=\"flask.Blueprint.template_folder\"><code>template_folder</code></a> if it is set.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.make_setup_state\">\n<code>make_setup_state(app, options, first_registration=False)</code> </dt> <dd>\n<p>Creates an instance of <a class=\"reference internal\" href=\"#flask.blueprints.BlueprintSetupState\" title=\"flask.blueprints.BlueprintSetupState\"><code>BlueprintSetupState()</code></a> object that is later passed to the register callback functions. Subclasses can override this to return a subclass of the setup state.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<em>App</em>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>]</em>)</li> <li>\n<strong>first_registration</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.blueprints.BlueprintSetupState\" title=\"flask.blueprints.BlueprintSetupState\">BlueprintSetupState</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.patch\">\n<code>patch(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Blueprint.route\" title=\"flask.Blueprint.route\"><code>route()</code></a> with <code>methods=[\"PATCH\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.post\">\n<code>post(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Blueprint.route\" title=\"flask.Blueprint.route\"><code>route()</code></a> with <code>methods=[\"POST\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.put\">\n<code>put(rule, **options)</code> </dt> <dd>\n<p>Shortcut for <a class=\"reference internal\" href=\"#flask.Blueprint.route\" title=\"flask.Blueprint.route\"><code>route()</code></a> with <code>methods=[\"PUT\"]</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.record\">\n<code>record(func)</code> </dt> <dd>\n<p>Registers a function that is called when the blueprint is registered on the application. This function is called with the state as argument as returned by the <a class=\"reference internal\" href=\"#flask.Blueprint.make_setup_state\" title=\"flask.Blueprint.make_setup_state\"><code>make_setup_state()</code></a> method.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>func</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><a class=\"reference internal\" href=\"#flask.blueprints.BlueprintSetupState\" title=\"flask.sansio.blueprints.BlueprintSetupState\">BlueprintSetupState</a><em>]</em><em>, </em><em>None</em><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.record_once\">\n<code>record_once(func)</code> </dt> <dd>\n<p>Works like <a class=\"reference internal\" href=\"#flask.Blueprint.record\" title=\"flask.Blueprint.record\"><code>record()</code></a> but wraps the function in another function that will ensure the function is only called once. If the blueprint is registered a second time on the application, the function passed is not called.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>func</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><a class=\"reference internal\" href=\"#flask.blueprints.BlueprintSetupState\" title=\"flask.sansio.blueprints.BlueprintSetupState\">BlueprintSetupState</a><em>]</em><em>, </em><em>None</em><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.register\">\n<code>register(app, options)</code> </dt> <dd>\n<p>Called by <a class=\"reference internal\" href=\"#flask.Flask.register_blueprint\" title=\"flask.Flask.register_blueprint\"><code>Flask.register_blueprint()</code></a> to register all views and callbacks registered on the blueprint with the application. Creates a <a class=\"reference internal\" href=\"#flask.blueprints.BlueprintSetupState\" title=\"flask.blueprints.BlueprintSetupState\"><code>BlueprintSetupState</code></a> and calls each <a class=\"reference internal\" href=\"#flask.Blueprint.record\" title=\"flask.Blueprint.record\"><code>record()</code></a> callback with it.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<em>App</em>) – The application this blueprint is being registered with.</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>]</em>) – Keyword arguments forwarded from <a class=\"reference internal\" href=\"#flask.Flask.register_blueprint\" title=\"flask.Flask.register_blueprint\"><code>register_blueprint()</code></a>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Nested blueprints now correctly apply subdomains.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>Registering the same blueprint with the same name multiple times is an error.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0.1: </span>Nested blueprints are registered with their dotted name. This allows different blueprints with the same name to be nested at different locations.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0.1: </span>The <code>name</code> option can be used to change the (pre-dotted) name the blueprint is registered with. This allows the same blueprint to be registered multiple times with unique names for <code>url_for</code>.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.register_blueprint\">\n<code>register_blueprint(blueprint, **options)</code> </dt> <dd>\n<p>Register a <a class=\"reference internal\" href=\"#flask.Blueprint\" title=\"flask.Blueprint\"><code>Blueprint</code></a> on this blueprint. Keyword arguments passed to this method will override the defaults set on the blueprint.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0.1: </span>The <code>name</code> option can be used to change the (pre-dotted) name the blueprint is registered with. This allows the same blueprint to be registered multiple times with unique names for <code>url_for</code>.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>blueprint</strong> (<em>Blueprint</em>)</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.register_error_handler\">\n<code>register_error_handler(code_or_exception, f)</code> </dt> <dd>\n<p>Alternative error attach function to the <a class=\"reference internal\" href=\"#flask.Blueprint.errorhandler\" title=\"flask.Blueprint.errorhandler\"><code>errorhandler()</code></a> decorator that is more straightforward to use for non decorator usage.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>code_or_exception</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#Exception\" title=\"(in Python v3.13)\">Exception</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>)</li> <li>\n<strong>f</strong> (<em>ft.ErrorHandlerCallable</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.route\">\n<code>route(rule, **options)</code> </dt> <dd>\n<p>Decorate a view function to register it with the given URL rule and options. Calls <a class=\"reference internal\" href=\"#flask.Blueprint.add_url_rule\" title=\"flask.Blueprint.add_url_rule\"><code>add_url_rule()</code></a>, which has more details about the implementation.</p> <pre data-language=\"python\">@app.route(\"/\")\ndef index():\n    return \"Hello, World!\"\n</pre> <p>See <a class=\"reference internal\" href=\"#url-route-registrations\"><span class=\"std std-ref\">URL Route Registrations</span></a>.</p> <p>The endpoint name for the route defaults to the name of the view function if the <code>endpoint</code> parameter isn’t passed.</p> <p>The <code>methods</code> parameter defaults to <code>[\"GET\"]</code>. <code>HEAD</code> and <code>OPTIONS</code> are added automatically.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The URL rule string.</li> <li>\n<strong>options</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Extra options passed to the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Rule\" title=\"(in Werkzeug v3.1.x)\"><code>Rule</code></a> object.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<em>T_route</em>], <em>T_route</em>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.static_folder\">\n<code>property static_folder: str | None</code> </dt> <dd>\n<p>The absolute path to the configured static folder. <code>None</code> if no static folder is set.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.static_url_path\">\n<code>property static_url_path: str | None</code> </dt> <dd>\n<p>The URL prefix that the static route will be accessible from.</p> <p>If it was not configured during init, it is derived from <a class=\"reference internal\" href=\"#flask.Blueprint.static_folder\" title=\"flask.Blueprint.static_folder\"><code>static_folder</code></a>.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.teardown_app_request\">\n<code>teardown_app_request(f)</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Blueprint.teardown_request\" title=\"flask.Blueprint.teardown_request\"><code>teardown_request()</code></a>, but after every request, not only those handled by the blueprint. Equivalent to <a class=\"reference internal\" href=\"#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>Flask.teardown_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_teardown</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_teardown</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.teardown_request\">\n<code>teardown_request(f)</code> </dt> <dd>\n<p>Register a function to be called when the request context is popped. Typically this happens at the end of each request, but contexts may be pushed manually as well during testing.</p> <pre data-language=\"python\">with app.test_request_context():\n    ...\n</pre> <p>When the <code>with</code> block exits (or <code>ctx.pop()</code> is called), the teardown functions are called just before the request context is made inactive.</p> <p>When a teardown function was called because of an unhandled exception it will be passed an error object. If an <a class=\"reference internal\" href=\"#flask.Blueprint.errorhandler\" title=\"flask.Blueprint.errorhandler\"><code>errorhandler()</code></a> is registered, it will handle the exception and the teardown will not receive it.</p> <p>Teardown functions must avoid raising exceptions. If they execute code that might fail they must surround that code with a <code>try</code>/<code>except</code> block and log any errors.</p> <p>The return values of teardown functions are ignored.</p> <p>This is available on both app and blueprint objects. When used on an app, this executes after every request. When used on a blueprint, this executes after every request that the blueprint handles. To register with a blueprint and execute after every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.teardown_app_request\" title=\"flask.Blueprint.teardown_app_request\"><code>Blueprint.teardown_app_request()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_teardown</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_teardown</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.url_defaults\">\n<code>url_defaults(f)</code> </dt> <dd>\n<p>Callback function for URL defaults for all view functions of the application. It’s called with the endpoint and values and should update the values passed in place.</p> <p>This is available on both app and blueprint objects. When used on an app, this is called for every request. When used on a blueprint, this is called for requests that the blueprint handles. To register with a blueprint and affect every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_url_defaults\" title=\"flask.Blueprint.app_url_defaults\"><code>Blueprint.app_url_defaults()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_url_defaults</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_url_defaults</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.url_value_preprocessor\">\n<code>url_value_preprocessor(f)</code> </dt> <dd>\n<p>Register a URL value preprocessor function for all view functions in the application. These functions will be called before the <a class=\"reference internal\" href=\"#flask.Blueprint.before_request\" title=\"flask.Blueprint.before_request\"><code>before_request()</code></a> functions.</p> <p>The function can modify the values captured from the matched url before they are passed to the view. For example, this can be used to pop a common language code value and place it in <code>g</code> rather than pass it to every view.</p> <p>The function is passed the endpoint name and values dict. The return value is ignored.</p> <p>This is available on both app and blueprint objects. When used on an app, this is called for every request. When used on a blueprint, this is called for requests that the blueprint handles. To register with a blueprint and affect every request, use <a class=\"reference internal\" href=\"#flask.Blueprint.app_url_value_preprocessor\" title=\"flask.Blueprint.app_url_value_preprocessor\"><code>Blueprint.app_url_value_preprocessor()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>T_url_value_preprocessor</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>T_url_value_preprocessor</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.import_name\">\n<code>import_name</code> </dt> <dd>\n<p>The name of the package or module that this object belongs to. Do not change this once it is set by the constructor.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.template_folder\">\n<code>template_folder</code> </dt> <dd>\n<p>The path to the templates folder, relative to <a class=\"reference internal\" href=\"#flask.Blueprint.root_path\" title=\"flask.Blueprint.root_path\"><code>root_path</code></a>, to add to the template loader. <code>None</code> if templates should not be added.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.root_path\">\n<code>root_path</code> </dt> <dd>\n<p>Absolute path to the package on the filesystem. Used to look up resources contained in the package.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.view_functions\">\n<code>view_functions: dict[str, ft.RouteCallable]</code> </dt> <dd>\n<p>A dictionary mapping endpoint names to view functions.</p> <p>To register a view function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.route\" title=\"flask.Blueprint.route\"><code>route()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.error_handler_spec\">\n<code>error_handler_spec: dict[ft.AppOrBlueprintKey, dict[int | None, dict[type[Exception], ft.ErrorHandlerCallable]]]</code> </dt> <dd>\n<p>A data structure of registered error handlers, in the format <code>{scope: {code: {class: handler}}}</code>. The <code>scope</code> key is the name of a blueprint the handlers are active for, or <code>None</code> for all requests. The <code>code</code> key is the HTTP status code for <code>HTTPException</code>, or <code>None</code> for other exceptions. The innermost dictionary maps exception classes to handler functions.</p> <p>To register an error handler, use the <a class=\"reference internal\" href=\"#flask.Blueprint.errorhandler\" title=\"flask.Blueprint.errorhandler\"><code>errorhandler()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.before_request_funcs\">\n<code>before_request_funcs: dict[ft.AppOrBlueprintKey, list[ft.BeforeRequestCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call at the beginning of each request, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.before_request\" title=\"flask.Blueprint.before_request\"><code>before_request()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.after_request_funcs\">\n<code>after_request_funcs: dict[ft.AppOrBlueprintKey, list[ft.AfterRequestCallable[t.Any]]]</code> </dt> <dd>\n<p>A data structure of functions to call at the end of each request, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.after_request\" title=\"flask.Blueprint.after_request\"><code>after_request()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.teardown_request_funcs\">\n<code>teardown_request_funcs: dict[ft.AppOrBlueprintKey, list[ft.TeardownCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call at the end of each request even if an exception is raised, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.teardown_request\" title=\"flask.Blueprint.teardown_request\"><code>teardown_request()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.template_context_processors\">\n<code>template_context_processors: dict[ft.AppOrBlueprintKey, list[ft.TemplateContextProcessorCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call to pass extra context values when rendering templates, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.context_processor\" title=\"flask.Blueprint.context_processor\"><code>context_processor()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.url_value_preprocessors\">\n<code>url_value_preprocessors: dict[ft.AppOrBlueprintKey, list[ft.URLValuePreprocessorCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call to modify the keyword arguments passed to the view function, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.url_value_preprocessor\" title=\"flask.Blueprint.url_value_preprocessor\"><code>url_value_preprocessor()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Blueprint.url_default_functions\">\n<code>url_default_functions: dict[ft.AppOrBlueprintKey, list[ft.URLDefaultCallable]]</code> </dt> <dd>\n<p>A data structure of functions to call to modify the keyword arguments when generating URLs, in the format <code>{scope: [functions]}</code>. The <code>scope</code> key is the name of a blueprint the functions are active for, or <code>None</code> for all requests.</p> <p>To register a function, use the <a class=\"reference internal\" href=\"#flask.Blueprint.url_defaults\" title=\"flask.Blueprint.url_defaults\"><code>url_defaults()</code></a> decorator.</p> <p>This data structure is internal. It should not be modified directly and its format may change at any time.</p> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"incoming-request-data\"> <h2>Incoming Request Data</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.Request\">\n<code>class flask.Request(environ, populate_request=True, shallow=False)</code> </dt> <dd>\n<p>The request object used by default in Flask. Remembers the matched endpoint and view arguments.</p> <p>It is what ends up as <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a>. If you want to replace the request object used you can subclass this and set <a class=\"reference internal\" href=\"#flask.Flask.request_class\" title=\"flask.Flask.request_class\"><code>request_class</code></a> to your subclass.</p> <p>The request object is a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/wrappers/#werkzeug.wrappers.Request\" title=\"(in Werkzeug v3.1.x)\"><code>Request</code></a> subclass and provides all of the attributes Werkzeug defines plus a few Flask specific ones.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>environ</strong> (<em>WSGIEnvironment</em>)</li> <li>\n<strong>populate_request</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> <li>\n<strong>shallow</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.url_rule\">\n<code>url_rule: Rule | None = None</code> </dt> <dd>\n<p>The internal URL rule that matched the request. This can be useful to inspect which methods are allowed for the URL from a before/after handler (<code>request.url_rule.methods</code>) etc. Though if the request’s method was invalid for the URL rule, the valid list is available in <code>routing_exception.valid_methods</code> instead (an attribute of the Werkzeug exception <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.MethodNotAllowed\" title=\"(in Werkzeug v3.1.x)\"><code>MethodNotAllowed</code></a>) because the request was never internally bound.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.view_args\">\n<code>view_args: dict[str, t.Any] | None = None</code> </dt> <dd>\n<p>A dict of view arguments that matched the request. If an exception happened when matching, this will be <code>None</code>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.routing_exception\">\n<code>routing_exception: HTTPException | None = None</code> </dt> <dd>\n<p>If matching the URL failed, this is the exception that will be raised / was raised as part of the request handling. This is usually a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.NotFound\" title=\"(in Werkzeug v3.1.x)\"><code>NotFound</code></a> exception or something similar.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.max_content_length\">\n<code>property max_content_length: int | None</code> </dt> <dd>\n<p>The maximum number of bytes that will be read during this request. If this limit is exceeded, a 413 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> error is raised. If it is set to <code>None</code>, no limit is enforced at the Flask application level. However, if it is <code>None</code> and the request has no <code>Content-Length</code> header and the WSGI server does not indicate that it terminates the stream, then no data is read to avoid an infinite stream.</p> <p>Each request defaults to the <a class=\"reference internal\" href=\"../config/index#MAX_CONTENT_LENGTH\" title=\"MAX_CONTENT_LENGTH\"><code>MAX_CONTENT_LENGTH</code></a> config, which defaults to <code>None</code>. It can be set on a specific <code>request</code> to apply the limit to that specific view. This should be set appropriately based on an application’s or view’s specific needs.</p> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>This can be set per-request.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.6: </span>This is configurable through Flask config.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.max_form_memory_size\">\n<code>property max_form_memory_size: int | None</code> </dt> <dd>\n<p>The maximum size in bytes any non-file form field may be in a <code>multipart/form-data</code> body. If this limit is exceeded, a 413 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> error is raised. If it is set to <code>None</code>, no limit is enforced at the Flask application level.</p> <p>Each request defaults to the <a class=\"reference internal\" href=\"../config/index#MAX_FORM_MEMORY_SIZE\" title=\"MAX_FORM_MEMORY_SIZE\"><code>MAX_FORM_MEMORY_SIZE</code></a> config, which defaults to <code>500_000</code>. It can be set on a specific <code>request</code> to apply the limit to that specific view. This should be set appropriately based on an application’s or view’s specific needs.</p> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>This is configurable through Flask config.</p> </div> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.max_form_parts\">\n<code>property max_form_parts: int | None</code> </dt> <dd>\n<p>The maximum number of fields that may be present in a <code>multipart/form-data</code> body. If this limit is exceeded, a 413 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestEntityTooLarge\" title=\"(in Werkzeug v3.1.x)\"><code>RequestEntityTooLarge</code></a> error is raised. If it is set to <code>None</code>, no limit is enforced at the Flask application level.</p> <p>Each request defaults to the <a class=\"reference internal\" href=\"../config/index#MAX_FORM_PARTS\" title=\"MAX_FORM_PARTS\"><code>MAX_FORM_PARTS</code></a> config, which defaults to <code>1_000</code>. It can be set on a specific <code>request</code> to apply the limit to that specific view. This should be set appropriately based on an application’s or view’s specific needs.</p> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>This is configurable through Flask config.</p> </div> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.endpoint\">\n<code>property endpoint: str | None</code> </dt> <dd>\n<p>The endpoint that matched the request URL.</p> <p>This will be <code>None</code> if matching failed or has not been performed yet.</p> <p>This in combination with <a class=\"reference internal\" href=\"#flask.Request.view_args\" title=\"flask.Request.view_args\"><code>view_args</code></a> can be used to reconstruct the same URL or a modified URL.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.blueprint\">\n<code>property blueprint: str | None</code> </dt> <dd>\n<p>The registered name of the current blueprint.</p> <p>This will be <code>None</code> if the endpoint is not part of a blueprint, or if URL matching failed or has not been performed yet.</p> <p>This does not necessarily match the name the blueprint was created with. It may have been nested, or registered with a different name.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.blueprints\">\n<code>property blueprints: list[str]</code> </dt> <dd>\n<p>The registered names of the current blueprint upwards through parent blueprints.</p> <p>This will be an empty list if there is no current blueprint, or if URL matching failed.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.1.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.on_json_loading_failed\">\n<code>on_json_loading_failed(e)</code> </dt> <dd>\n<p>Called if <a class=\"reference internal\" href=\"#flask.Request.get_json\" title=\"flask.Request.get_json\"><code>get_json()</code></a> fails and isn’t silenced.</p> <p>If this method returns a value, it is used as the return value for <a class=\"reference internal\" href=\"#flask.Request.get_json\" title=\"flask.Request.get_json\"><code>get_json()</code></a>. The default implementation raises <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.BadRequest\" title=\"(in Werkzeug v3.1.x)\"><code>BadRequest</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>e</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ValueError\" title=\"(in Python v3.13)\">ValueError</a><em> | </em><em>None</em>) – If parsing failed, this is the exception. It will be <code>None</code> if the content type wasn’t <code>application/json</code>.</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Raise a 415 error instead of 400.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.accept_charsets\">\n<code>property accept_charsets: CharsetAccept</code> </dt> <dd>\n<p>List of charsets this client supports as <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.CharsetAccept\" title=\"(in Werkzeug v3.1.x)\"><code>CharsetAccept</code></a> object.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.accept_encodings\">\n<code>property accept_encodings: Accept</code> </dt> <dd>\n<p>List of encodings this client accepts. Encodings in a HTTP term are compression encodings such as gzip. For charsets have a look at <code>accept_charset</code>.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.accept_languages\">\n<code>property accept_languages: LanguageAccept</code> </dt> <dd>\n<p>List of languages this client accepts as <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.LanguageAccept\" title=\"(in Werkzeug v3.1.x)\"><code>LanguageAccept</code></a> object.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.accept_mimetypes\">\n<code>property accept_mimetypes: MIMEAccept</code> </dt> <dd>\n<p>List of mimetypes this client supports as <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.MIMEAccept\" title=\"(in Werkzeug v3.1.x)\"><code>MIMEAccept</code></a> object.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.access_control_request_headers\">\n<code>access_control_request_headers</code> </dt> <dd>\n<p>Sent with a preflight request to indicate which headers will be sent with the cross origin request. Set <code>access_control_allow_headers</code> on the response to indicate which headers are allowed.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.access_control_request_method\">\n<code>access_control_request_method</code> </dt> <dd>\n<p>Sent with a preflight request to indicate which method will be used for the cross origin request. Set <code>access_control_allow_methods</code> on the response to indicate which methods are allowed.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.access_route\">\n<code>property access_route: list[str]</code> </dt> <dd>\n<p>If a forwarded header exists this is a list of all ip addresses from the client ip to the last proxy server.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.application\">\n<code>classmethod application(f)</code> </dt> <dd>\n<p>Decorate a function as responder that accepts the request as the last argument. This works like the <code>responder()</code> decorator but the function is passed the request object as the last argument and the request object will be closed automatically:</p> <pre data-language=\"python\">@Request.application\ndef my_wsgi_app(request):\n    return Response('Hello World!')\n</pre> <p>As of Werkzeug 0.14 HTTP exceptions are automatically caught and converted to responses instead of failing.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>t.Callable</em><em>[</em><em>[</em><a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.Request\">Request</a><em>]</em><em>, </em><em>WSGIApplication</em><em>]</em>) – the WSGI callable to decorate</p> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>a new WSGI callable</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>WSGIApplication</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.args\">\n<code>property args: MultiDict[str, str]</code> </dt> <dd>\n<p>The parsed URL parameters (the part in the URL after the question mark).</p> <p>By default an <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.ImmutableMultiDict\" title=\"(in Werkzeug v3.1.x)\"><code>ImmutableMultiDict</code></a> is returned from this function. This can be changed by setting <a class=\"reference internal\" href=\"#flask.Request.parameter_storage_class\" title=\"flask.Request.parameter_storage_class\"><code>parameter_storage_class</code></a> to a different type. This might be necessary if the order of the form data is important.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Invalid bytes remain percent encoded.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.authorization\">\n<code>property authorization: Authorization | None</code> </dt> <dd>\n<p>The <code>Authorization</code> header parsed into an <code>Authorization</code> object. <code>None</code> if the header is not present.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span><code>Authorization</code> is no longer a <code>dict</code>. The <code>token</code> attribute was added for auth schemes that use a token instead of parameters.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.base_url\">\n<code>property base_url: str</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Request.url\" title=\"flask.Request.url\"><code>url</code></a> but without the query string.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.cache_control\">\n<code>property cache_control: RequestCacheControl</code> </dt> <dd>\n<p>A <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.RequestCacheControl\" title=\"(in Werkzeug v3.1.x)\"><code>RequestCacheControl</code></a> object for the incoming cache control headers.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.close\">\n<code>close()</code> </dt> <dd>\n<p>Closes associated resources of this request object. This closes all file handles explicitly. You can also use the request object in a with statement which will automatically close it.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.content_encoding\">\n<code>content_encoding</code> </dt> <dd>\n<p>The Content-Encoding entity-header field is used as a modifier to the media-type. When present, its value indicates what additional content codings have been applied to the entity-body, and thus what decoding mechanisms must be applied in order to obtain the media-type referenced by the Content-Type header field.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.content_length\">\n<code>property content_length: int | None</code> </dt> <dd>\n<p>The Content-Length entity-header field indicates the size of the entity-body in bytes or, in the case of the HEAD method, the size of the entity-body that would have been sent had the request been a GET.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.content_md5\">\n<code>content_md5</code> </dt> <dd>\n<p>The Content-MD5 entity-header field, as defined in RFC 1864, is an MD5 digest of the entity-body for the purpose of providing an end-to-end message integrity check (MIC) of the entity-body. (Note: a MIC is good for detecting accidental modification of the entity-body in transit, but is not proof against malicious attacks.)</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.content_type\">\n<code>content_type</code> </dt> <dd>\n<p>The Content-Type entity-header field indicates the media type of the entity-body sent to the recipient or, in the case of the HEAD method, the media type that would have been sent had the request been a GET.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.cookies\">\n<code>property cookies: ImmutableMultiDict[str, str]</code> </dt> <dd>\n<p>A <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\"><code>dict</code></a> with the contents of all cookies transmitted with the request.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.data\">\n<code>property data: bytes</code> </dt> <dd>\n<p>The raw data read from <a class=\"reference internal\" href=\"#flask.Request.stream\" title=\"flask.Request.stream\"><code>stream</code></a>. Will be empty if the request represents form data.</p> <p>To get the raw data even if it represents form data, use <a class=\"reference internal\" href=\"#flask.Request.get_data\" title=\"flask.Request.get_data\"><code>get_data()</code></a>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.date\">\n<code>date</code> </dt> <dd>\n<p>The Date general-header field represents the date and time at which the message was originated, having the same semantics as orig-date in RFC 822.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.dict_storage_class\">\n<code>dict_storage_class</code> </dt> <dd>\n<p>alias of <code>ImmutableMultiDict</code></p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.files\">\n<code>property files: ImmutableMultiDict[str, FileStorage]</code> </dt> <dd>\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.MultiDict\" title=\"(in Werkzeug v3.1.x)\"><code>MultiDict</code></a> object containing all uploaded files. Each key in <a class=\"reference internal\" href=\"#flask.Request.files\" title=\"flask.Request.files\"><code>files</code></a> is the name from the <code>&lt;input type=\"file\" name=\"\"&gt;</code>. Each value in <a class=\"reference internal\" href=\"#flask.Request.files\" title=\"flask.Request.files\"><code>files</code></a> is a Werkzeug <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.FileStorage\" title=\"(in Werkzeug v3.1.x)\"><code>FileStorage</code></a> object.</p> <p>It basically behaves like a standard file object you know from Python, with the difference that it also has a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.FileStorage.save\" title=\"(in Werkzeug v3.1.x)\"><code>save()</code></a> function that can store the file on the filesystem.</p> <p>Note that <a class=\"reference internal\" href=\"#flask.Request.files\" title=\"flask.Request.files\"><code>files</code></a> will only contain data if the request method was POST, PUT or PATCH and the <code>&lt;form&gt;</code> that posted to the request had <code>enctype=\"multipart/form-data\"</code>. It will be empty otherwise.</p> <p>See the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.MultiDict\" title=\"(in Werkzeug v3.1.x)\"><code>MultiDict</code></a> / <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.FileStorage\" title=\"(in Werkzeug v3.1.x)\"><code>FileStorage</code></a> documentation for more details about the used data structure.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.form\">\n<code>property form: ImmutableMultiDict[str, str]</code> </dt> <dd>\n<p>The form parameters. By default an <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.ImmutableMultiDict\" title=\"(in Werkzeug v3.1.x)\"><code>ImmutableMultiDict</code></a> is returned from this function. This can be changed by setting <a class=\"reference internal\" href=\"#flask.Request.parameter_storage_class\" title=\"flask.Request.parameter_storage_class\"><code>parameter_storage_class</code></a> to a different type. This might be necessary if the order of the form data is important.</p> <p>Please keep in mind that file uploads will not end up here, but instead in the <a class=\"reference internal\" href=\"#flask.Request.files\" title=\"flask.Request.files\"><code>files</code></a> attribute.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>Previous to Werkzeug 0.9 this would only contain form data for POST and PUT requests.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.form_data_parser_class\">\n<code>form_data_parser_class</code> </dt> <dd>\n<p>alias of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/http/#werkzeug.formparser.FormDataParser\" title=\"(in Werkzeug v3.1.x)\"><code>FormDataParser</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.from_values\">\n<code>classmethod from_values(*args, **kwargs)</code> </dt> <dd>\n<p>Create a new request object based on the values provided. If environ is given missing values are filled from there. This method is useful for small scripts when you need to simulate a request from an URL. Do not use this method for unittesting, there is a full featured client object (<code>Client</code>) that allows to create multipart requests, support for cookies etc.</p> <p>This accepts the same options as the <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.EnvironBuilder\" title=\"(in Werkzeug v3.1.x)\"><code>EnvironBuilder</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.5: </span>This method now accepts the same arguments as <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.EnvironBuilder\" title=\"(in Werkzeug v3.1.x)\"><code>EnvironBuilder</code></a>. Because of this the <code>environ</code> parameter is now called <code>environ_overrides</code>.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>request object</p> </dd> <dt class=\"field-even\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/wrappers/#werkzeug.wrappers.Request\" title=\"(in Werkzeug v3.1.x)\">Request</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.full_path\">\n<code>property full_path: str</code> </dt> <dd>\n<p>Requested path, including the query string.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.get_data\">\n<code>get_data(cache=True, as_text=False, parse_form_data=False)</code> </dt> <dd>\n<p>This reads the buffered incoming data from the client into one bytes object. By default this is cached but that behavior can be changed by setting <code>cache</code> to <code>False</code>.</p> <p>Usually it’s a bad idea to call this method without checking the content length first as a client could send dozens of megabytes or more to cause memory problems on the server.</p> <p>Note that if the form data was already parsed this method will not return anything as form data parsing does not cache the data like this method does. To implicitly invoke form data parsing function set <code>parse_form_data</code> to <code>True</code>. When this is done the return value of this method will be an empty string if the form parser handles the data. This generally is not necessary as if the whole data is cached (which is the default) the form parser will used the cached data to parse the form data. Please be generally aware of checking the content length first in any case before calling this method to avoid exhausting server memory.</p> <p>If <code>as_text</code> is set to <code>True</code> the return value will be a decoded string.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>cache</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> <li>\n<strong>as_text</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> <li>\n<strong>parse_form_data</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a> | <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.get_json\">\n<code>get_json(force=False, silent=False, cache=True)</code> </dt> <dd>\n<p>Parse <a class=\"reference internal\" href=\"#flask.Request.data\" title=\"flask.Request.data\"><code>data</code></a> as JSON.</p> <p>If the mimetype does not indicate JSON (<em class=\"mimetype\">application/json</em>, see <a class=\"reference internal\" href=\"#flask.Request.is_json\" title=\"flask.Request.is_json\"><code>is_json</code></a>), or parsing fails, <a class=\"reference internal\" href=\"#flask.Request.on_json_loading_failed\" title=\"flask.Request.on_json_loading_failed\"><code>on_json_loading_failed()</code></a> is called and its return value is used as the return value. By default this raises a 415 Unsupported Media Type resp.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>force</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Ignore the mimetype and always try to parse JSON.</li> <li>\n<strong>silent</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Silence mimetype and parsing errors, and return <code>None</code> instead.</li> <li>\n<strong>cache</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Store the parsed JSON to return for subsequent calls.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a> | None</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Raise a 415 error instead of 400.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>Raise a 400 error if the content type is incorrect.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.host\">\n<code>property host: str</code> </dt> <dd>\n<p>The host name the request was made to, including the port if it’s non-standard. Validated with <a class=\"reference internal\" href=\"#flask.Request.trusted_hosts\" title=\"flask.Request.trusted_hosts\"><code>trusted_hosts</code></a>.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.host_url\">\n<code>property host_url: str</code> </dt> <dd>\n<p>The request URL scheme and host only.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.if_match\">\n<code>property if_match: ETags</code> </dt> <dd>\n<p>An object containing all the etags in the <code>If-Match</code> header.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.ETags\" title=\"(in Werkzeug v3.1.x)\"><code>ETags</code></a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.if_modified_since\">\n<code>property if_modified_since: datetime | None</code> </dt> <dd>\n<p>The parsed <code>If-Modified-Since</code> header as a datetime object.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.if_none_match\">\n<code>property if_none_match: ETags</code> </dt> <dd>\n<p>An object containing all the etags in the <code>If-None-Match</code> header.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.ETags\" title=\"(in Werkzeug v3.1.x)\"><code>ETags</code></a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.if_range\">\n<code>property if_range: IfRange</code> </dt> <dd>\n<p>The parsed <code>If-Range</code> header.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>IfRange.date</code> is timezone-aware.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.if_unmodified_since\">\n<code>property if_unmodified_since: datetime | None</code> </dt> <dd>\n<p>The parsed <code>If-Unmodified-Since</code> header as a datetime object.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.input_stream\">\n<code>input_stream</code> </dt> <dd>\n<p>The raw WSGI input stream, without any safety checks.</p> <p>This is dangerous to use. It does not guard against infinite streams or reading past <a class=\"reference internal\" href=\"#flask.Request.content_length\" title=\"flask.Request.content_length\"><code>content_length</code></a> or <a class=\"reference internal\" href=\"#flask.Request.max_content_length\" title=\"flask.Request.max_content_length\"><code>max_content_length</code></a>.</p> <p>Use <a class=\"reference internal\" href=\"#flask.Request.stream\" title=\"flask.Request.stream\"><code>stream</code></a> instead.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.is_json\">\n<code>property is_json: bool</code> </dt> <dd>\n<p>Check if the mimetype indicates JSON data, either <em class=\"mimetype\">application/json</em> or <em class=\"mimetype\">application/*+json</em>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.is_multiprocess\">\n<code>is_multiprocess</code> </dt> <dd>\n<p>boolean that is <code>True</code> if the application is served by a WSGI server that spawns multiple processes.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.is_multithread\">\n<code>is_multithread</code> </dt> <dd>\n<p>boolean that is <code>True</code> if the application is served by a multithreaded WSGI server.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.is_run_once\">\n<code>is_run_once</code> </dt> <dd>\n<p>boolean that is <code>True</code> if the application will be executed only once in a process lifetime. This is the case for CGI for example, but it’s not guaranteed that the execution only happens one time.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.is_secure\">\n<code>property is_secure: bool</code> </dt> <dd>\n<p><code>True</code> if the request was made with a secure protocol (HTTPS or WSS).</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.json\">\n<code>property json: Any | None</code> </dt> <dd>\n<p>The parsed JSON data if <a class=\"reference internal\" href=\"#flask.Request.mimetype\" title=\"flask.Request.mimetype\"><code>mimetype</code></a> indicates JSON (<em class=\"mimetype\">application/json</em>, see <a class=\"reference internal\" href=\"#flask.Request.is_json\" title=\"flask.Request.is_json\"><code>is_json</code></a>).</p> <p>Calls <a class=\"reference internal\" href=\"#flask.Request.get_json\" title=\"flask.Request.get_json\"><code>get_json()</code></a> with default arguments.</p> <p>If the request content type is not <code>application/json</code>, this will raise a 415 Unsupported Media Type error.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Raise a 415 error instead of 400.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>Raise a 400 error if the content type is incorrect.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.list_storage_class\">\n<code>list_storage_class</code> </dt> <dd>\n<p>alias of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.ImmutableList\" title=\"(in Werkzeug v3.1.x)\"><code>ImmutableList</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Request.make_form_data_parser\">\n<code>make_form_data_parser()</code> </dt> <dd>\n<p>Creates the form data parser. Instantiates the <a class=\"reference internal\" href=\"#flask.Request.form_data_parser_class\" title=\"flask.Request.form_data_parser_class\"><code>form_data_parser_class</code></a> with some parameters.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/http/#werkzeug.formparser.FormDataParser\" title=\"(in Werkzeug v3.1.x)\">FormDataParser</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.max_forwards\">\n<code>max_forwards</code> </dt> <dd>\n<p>The Max-Forwards request-header field provides a mechanism with the TRACE and OPTIONS methods to limit the number of proxies or gateways that can forward the request to the next inbound server.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.mimetype\">\n<code>property mimetype: str</code> </dt> <dd>\n<p>Like <a class=\"reference internal\" href=\"#flask.Request.content_type\" title=\"flask.Request.content_type\"><code>content_type</code></a>, but without parameters (eg, without charset, type etc.) and always lowercase. For example if the content type is <code>text/HTML; charset=utf-8</code> the mimetype would be <code>'text/html'</code>.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.mimetype_params\">\n<code>property mimetype_params: dict[str, str]</code> </dt> <dd>\n<p>The mimetype parameters as dict. For example if the content type is <code>text/html; charset=utf-8</code> the params would be <code>{'charset': 'utf-8'}</code>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.origin\">\n<code>origin</code> </dt> <dd>\n<p>The host that the request originated from. Set <code>access_control_allow_origin</code> on the response to indicate which origins are allowed.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.parameter_storage_class\">\n<code>parameter_storage_class</code> </dt> <dd>\n<p>alias of <code>ImmutableMultiDict</code></p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.pragma\">\n<code>property pragma: HeaderSet</code> </dt> <dd>\n<p>The Pragma general-header field is used to include implementation-specific directives that might apply to any recipient along the request/response chain. All pragma directives specify optional behavior from the viewpoint of the protocol; however, some systems MAY require that behavior be consistent with the directives.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.range\">\n<code>property range: Range | None</code> </dt> <dd>\n<p>The parsed <code>Range</code> header.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.Range\" title=\"(in Werkzeug v3.1.x)\"><code>Range</code></a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.referrer\">\n<code>referrer</code> </dt> <dd>\n<p>The Referer[sic] request-header field allows the client to specify, for the server’s benefit, the address (URI) of the resource from which the Request-URI was obtained (the “referrer”, although the header field is misspelled).</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.remote_user\">\n<code>remote_user</code> </dt> <dd>\n<p>If the server supports user authentication, and the script is protected, this attribute contains the username the user has authenticated as.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.root_url\">\n<code>property root_url: str</code> </dt> <dd>\n<p>The request URL scheme, host, and root path. This is the root that the application is accessed from.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.script_root\">\n<code>property script_root: str</code> </dt> <dd>\n<p>Alias for <code>self.root_path</code>. <code>environ[\"SCRIPT_ROOT\"]</code> without a trailing slash.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.stream\">\n<code>property stream: IO[bytes]</code> </dt> <dd>\n<p>The WSGI input stream, with safety checks. This stream can only be consumed once.</p> <p>Use <a class=\"reference internal\" href=\"#flask.Request.get_data\" title=\"flask.Request.get_data\"><code>get_data()</code></a> to get the full data as bytes or text. The <a class=\"reference internal\" href=\"#flask.Request.data\" title=\"flask.Request.data\"><code>data</code></a> attribute will contain the full bytes only if they do not represent form data. The <a class=\"reference internal\" href=\"#flask.Request.form\" title=\"flask.Request.form\"><code>form</code></a> attribute will contain the parsed form data in that case.</p> <p>Unlike <a class=\"reference internal\" href=\"#flask.Request.input_stream\" title=\"flask.Request.input_stream\"><code>input_stream</code></a>, this stream guards against infinite streams or reading past <a class=\"reference internal\" href=\"#flask.Request.content_length\" title=\"flask.Request.content_length\"><code>content_length</code></a> or <a class=\"reference internal\" href=\"#flask.Request.max_content_length\" title=\"flask.Request.max_content_length\"><code>max_content_length</code></a>.</p> <p>If <code>max_content_length</code> is set, it can be enforced on streams if <code>wsgi.input_terminated</code> is set. Otherwise, an empty stream is returned.</p> <p>If the limit is reached before the underlying stream is exhausted (such as a file that is too large, or an infinite stream), the remaining contents of the stream cannot be read safely. Depending on how the server handles this, clients may show a “connection reset” failure instead of seeing the 413 response.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Check <code>max_content_length</code> preemptively and while reading.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>The stream is always set (but may be consumed) even if form parsing was accessed first.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.trusted_hosts\">\n<code>trusted_hosts: list[str] | None = None</code> </dt> <dd>\n<p>Valid host names when handling requests. By default all hosts are trusted, which means that whatever the client says the host is will be accepted.</p> <p>Because <code>Host</code> and <code>X-Forwarded-Host</code> headers can be set to any value by a malicious client, it is recommended to either set this property or implement similar validation in the proxy (if the application is being run behind one).</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.url\">\n<code>property url: str</code> </dt> <dd>\n<p>The full request URL with the scheme, host, root path, path, and query string.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.url_root\">\n<code>property url_root: str</code> </dt> <dd>\n<p>Alias for <a class=\"reference internal\" href=\"#flask.Request.root_url\" title=\"flask.Request.root_url\"><code>root_url</code></a>. The URL with scheme, host, and root path. For example, <code>https://example.com/app/</code>.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.user_agent\">\n<code>property user_agent: UserAgent</code> </dt> <dd>\n<p>The user agent. Use <code>user_agent.string</code> to get the header value. Set <a class=\"reference internal\" href=\"#flask.Request.user_agent_class\" title=\"flask.Request.user_agent_class\"><code>user_agent_class</code></a> to a subclass of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.user_agent.UserAgent\" title=\"(in Werkzeug v3.1.x)\"><code>UserAgent</code></a> to provide parsing for the other properties or other extended data.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>The built-in parser was removed. Set <code>user_agent_class</code> to a <code>UserAgent</code> subclass to parse data from the string.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.user_agent_class\">\n<code>user_agent_class</code> </dt> <dd>\n<p>alias of <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.user_agent.UserAgent\" title=\"(in Werkzeug v3.1.x)\"><code>UserAgent</code></a></p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.values\">\n<code>property values: CombinedMultiDict[str, str]</code> </dt> <dd>\n<p>A <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.CombinedMultiDict\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.datastructures.CombinedMultiDict</code></a> that combines <a class=\"reference internal\" href=\"#flask.Request.args\" title=\"flask.Request.args\"><code>args</code></a> and <a class=\"reference internal\" href=\"#flask.Request.form\" title=\"flask.Request.form\"><code>form</code></a>.</p> <p>For GET requests, only <code>args</code> are present, not <code>form</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>For GET requests, only <code>args</code> are present, not <code>form</code>.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Request.want_form_data_parsed\">\n<code>property want_form_data_parsed: bool</code> </dt> <dd>\n<p><code>True</code> if the request method carries content. By default this is true if a <code>Content-Type</code> is sent.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.environ\">\n<code>environ: WSGIEnvironment</code> </dt> <dd>\n<p>The WSGI environment containing HTTP headers and information from the WSGI server.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.shallow\">\n<code>shallow: bool</code> </dt> <dd>\n<p>Set when creating the request object. If <code>True</code>, reading from the request body will cause a <code>RuntimeException</code>. Useful to prevent modifying the stream from middleware.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.method\">\n<code>method</code> </dt> <dd>\n<p>The method the request was made with, such as <code>GET</code>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.scheme\">\n<code>scheme</code> </dt> <dd>\n<p>The URL scheme of the protocol the request used, such as <code>https</code> or <code>wss</code>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.server\">\n<code>server</code> </dt> <dd>\n<p>The address of the server. <code>(host, port)</code>, <code>(path, None)</code> for unix sockets, or <code>None</code> if not known.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.root_path\">\n<code>root_path</code> </dt> <dd>\n<p>The prefix that the application is mounted under, without a trailing slash. <a class=\"reference internal\" href=\"#flask.Request.path\" title=\"flask.Request.path\"><code>path</code></a> comes after this.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.path\">\n<code>path</code> </dt> <dd>\n<p>The path part of the URL after <a class=\"reference internal\" href=\"#flask.Request.root_path\" title=\"flask.Request.root_path\"><code>root_path</code></a>. This is the path used for routing within the application.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.query_string\">\n<code>query_string</code> </dt> <dd>\n<p>The part of the URL after the “?”. This is the raw value, use <a class=\"reference internal\" href=\"#flask.Request.args\" title=\"flask.Request.args\"><code>args</code></a> for the parsed values.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.headers\">\n<code>headers</code> </dt> <dd>\n<p>The headers received with the request.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Request.remote_addr\">\n<code>remote_addr</code> </dt> <dd>\n<p>The address of the client sending the request.</p> </dd>\n</dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.request\">\n<code>flask.request</code> </dt> <dd>\n<p>To access incoming request data, you can use the global <code>request</code> object. Flask parses incoming request data for you and gives you access to it through that global object. Internally Flask makes sure that you always get the correct data for the active thread if you are in a multithreaded environment.</p> <p>This is a proxy. See <a class=\"reference internal\" href=\"../reqcontext/index#notes-on-proxies\"><span class=\"std std-ref\">Notes On Proxies</span></a> for more information.</p> <p>The request object is an instance of a <a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.Request\"><code>Request</code></a>.</p> </dd>\n</dl> </section> <section id=\"response-objects\"> <h2>Response Objects</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.Response\">\n<code>class flask.Response(response=None, status=None, headers=None, mimetype=None, content_type=None, direct_passthrough=False)</code> </dt> <dd>\n<p>The response object that is used by default in Flask. Works like the response object from Werkzeug but is set to have an HTML mimetype by default. Quite often you don’t have to create this object yourself because <a class=\"reference internal\" href=\"#flask.Flask.make_response\" title=\"flask.Flask.make_response\"><code>make_response()</code></a> will take care of that for you.</p> <p>If you want to replace the response object used you can subclass this and set <a class=\"reference internal\" href=\"#flask.Flask.response_class\" title=\"flask.Flask.response_class\"><code>response_class</code></a> to your subclass.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>JSON support is added to the response, like the request. This is useful when testing to get the test client response data as JSON.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>Added <a class=\"reference internal\" href=\"#flask.Response.max_cookie_size\" title=\"flask.Response.max_cookie_size\"><code>max_cookie_size</code></a>.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>response</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterable\" title=\"(in Python v3.13)\">Iterable</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterable\" title=\"(in Python v3.13)\">Iterable</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a><em>]</em>)</li> <li>\n<strong>status</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>HTTPStatus</em><em> | </em><em>None</em>)</li> <li>\n<strong>headers</strong> (<a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.Headers\" title=\"(in Werkzeug v3.1.x)\">Headers</a>)</li> <li>\n<strong>mimetype</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>content_type</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>direct_passthrough</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.default_mimetype\">\n<code>default_mimetype: str | None = 'text/html'</code> </dt> <dd>\n<p>the default mimetype if none is provided.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.accept_ranges\">\n<code>accept_ranges</code> </dt> <dd>\n<p>The <code>Accept-Ranges</code> header. Even though the name would indicate that multiple values are supported, it must be one string token only.</p> <p>The values <code>'bytes'</code> and <code>'none'</code> are common.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.access_control_allow_credentials\">\n<code>property access_control_allow_credentials: bool</code> </dt> <dd>\n<p>Whether credentials can be shared by the browser to JavaScript code. As part of the preflight request it indicates whether credentials can be used on the cross origin request.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.access_control_allow_headers\">\n<code>access_control_allow_headers</code> </dt> <dd>\n<p>Which headers can be sent with the cross origin request.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.access_control_allow_methods\">\n<code>access_control_allow_methods</code> </dt> <dd>\n<p>Which methods can be used for the cross origin request.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.access_control_allow_origin\">\n<code>access_control_allow_origin</code> </dt> <dd>\n<p>The origin or ‘*’ for any origin that may make cross origin requests.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.access_control_expose_headers\">\n<code>access_control_expose_headers</code> </dt> <dd>\n<p>Which headers can be shared by the browser to JavaScript code.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.access_control_max_age\">\n<code>access_control_max_age</code> </dt> <dd>\n<p>The maximum age in seconds the access control settings can be cached for.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.add_etag\">\n<code>add_etag(overwrite=False, weak=False)</code> </dt> <dd>\n<p>Add an etag for the current response if there is none yet.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>SHA-1 is used to generate the value. MD5 may not be available in some environments.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>overwrite</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> <li>\n<strong>weak</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.age\">\n<code>age</code> </dt> <dd>\n<p>The Age response-header field conveys the sender’s estimate of the amount of time since the response (or its revalidation) was generated at the origin server.</p> <p>Age values are non-negative decimal integers, representing time in seconds.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.allow\">\n<code>property allow: HeaderSet</code> </dt> <dd>\n<p>The Allow entity-header field lists the set of methods supported by the resource identified by the Request-URI. The purpose of this field is strictly to inform the recipient of valid methods associated with the resource. An Allow header field MUST be present in a 405 (Method Not Allowed) response.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.automatically_set_content_length\">\n<code>automatically_set_content_length = True</code> </dt> <dd>\n<p>Should this response object automatically set the content-length header if possible? This is true by default.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.cache_control\">\n<code>property cache_control: ResponseCacheControl</code> </dt> <dd>\n<p>The Cache-Control general-header field is used to specify directives that MUST be obeyed by all caching mechanisms along the request/response chain.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.calculate_content_length\">\n<code>calculate_content_length()</code> </dt> <dd>\n<p>Returns the content length if available or <code>None</code> otherwise.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.call_on_close\">\n<code>call_on_close(func)</code> </dt> <dd>\n<p>Adds a function to the internal list of functions that should be called as part of closing down the response. Since 0.7 this function also returns the function that was passed so that this can be used as a decorator.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>func</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.close\">\n<code>close()</code> </dt> <dd>\n<p>Close the wrapped response if possible. You can also use the object in a with statement which will automatically close it.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9: </span>Can now be used in a with statement.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_encoding\">\n<code>content_encoding</code> </dt> <dd>\n<p>The Content-Encoding entity-header field is used as a modifier to the media-type. When present, its value indicates what additional content codings have been applied to the entity-body, and thus what decoding mechanisms must be applied in order to obtain the media-type referenced by the Content-Type header field.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_language\">\n<code>property content_language: HeaderSet</code> </dt> <dd>\n<p>The Content-Language entity-header field describes the natural language(s) of the intended audience for the enclosed entity. Note that this might not be equivalent to all the languages used within the entity-body.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_length\">\n<code>content_length</code> </dt> <dd>\n<p>The Content-Length entity-header field indicates the size of the entity-body, in decimal number of OCTETs, sent to the recipient or, in the case of the HEAD method, the size of the entity-body that would have been sent had the request been a GET.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_location\">\n<code>content_location</code> </dt> <dd>\n<p>The Content-Location entity-header field MAY be used to supply the resource location for the entity enclosed in the message when that entity is accessible from a location separate from the requested resource’s URI.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_md5\">\n<code>content_md5</code> </dt> <dd>\n<p>The Content-MD5 entity-header field, as defined in RFC 1864, is an MD5 digest of the entity-body for the purpose of providing an end-to-end message integrity check (MIC) of the entity-body. (Note: a MIC is good for detecting accidental modification of the entity-body in transit, but is not proof against malicious attacks.)</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_range\">\n<code>property content_range: ContentRange</code> </dt> <dd>\n<p>The <code>Content-Range</code> header as a <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.ContentRange\" title=\"(in Werkzeug v3.1.x)\"><code>ContentRange</code></a> object. Available even if the header is not set.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_security_policy\">\n<code>property content_security_policy: ContentSecurityPolicy</code> </dt> <dd>\n<p>The <code>Content-Security-Policy</code> header as a <code>ContentSecurityPolicy</code> object. Available even if the header is not set.</p> <p>The Content-Security-Policy header adds an additional layer of security to help detect and mitigate certain types of attacks.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_security_policy_report_only\">\n<code>property content_security_policy_report_only: ContentSecurityPolicy</code> </dt> <dd>\n<p>The <code>Content-Security-policy-report-only</code> header as a <code>ContentSecurityPolicy</code> object. Available even if the header is not set.</p> <p>The Content-Security-Policy-Report-Only header adds a csp policy that is not enforced but is reported thereby helping detect certain types of attacks.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.content_type\">\n<code>content_type</code> </dt> <dd>\n<p>The Content-Type entity-header field indicates the media type of the entity-body sent to the recipient or, in the case of the HEAD method, the media type that would have been sent had the request been a GET.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.cross_origin_embedder_policy\">\n<code>cross_origin_embedder_policy</code> </dt> <dd>\n<p>Prevents a document from loading any cross-origin resources that do not explicitly grant the document permission. Values must be a member of the <code>werkzeug.http.COEP</code> enum.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.cross_origin_opener_policy\">\n<code>cross_origin_opener_policy</code> </dt> <dd>\n<p>Allows control over sharing of browsing context group with cross-origin documents. Values must be a member of the <code>werkzeug.http.COOP</code> enum.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.data\">\n<code>property data: bytes | str</code> </dt> <dd>\n<p>A descriptor that calls <a class=\"reference internal\" href=\"#flask.Response.get_data\" title=\"flask.Response.get_data\"><code>get_data()</code></a> and <a class=\"reference internal\" href=\"#flask.Response.set_data\" title=\"flask.Response.set_data\"><code>set_data()</code></a>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.date\">\n<code>date</code> </dt> <dd>\n<p>The Date general-header field represents the date and time at which the message was originated, having the same semantics as orig-date in RFC 822.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.default_status\">\n<code>default_status = 200</code> </dt> <dd>\n<p>the default status if none is provided.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.delete_cookie\">\n<code>delete_cookie(key, path='/', domain=None, secure=False, httponly=False, samesite=None, partitioned=False)</code> </dt> <dd>\n<p>Delete a cookie. Fails silently if key doesn’t exist.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>key</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the key (name) of the cookie to be deleted.</li> <li>\n<strong>path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – if the cookie that should be deleted was limited to a path, the path has to be defined here.</li> <li>\n<strong>domain</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – if the cookie that should be deleted was limited to a domain, that domain has to be defined here.</li> <li>\n<strong>secure</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – If <code>True</code>, the cookie will only be available via HTTPS.</li> <li>\n<strong>httponly</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Disallow JavaScript access to the cookie.</li> <li>\n<strong>samesite</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – Limit the scope of the cookie to only be attached to requests that are “same-site”.</li> <li>\n<strong>partitioned</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – If <code>True</code>, the cookie will be partitioned.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.expires\">\n<code>expires</code> </dt> <dd>\n<p>The Expires entity-header field gives the date/time after which the response is considered stale. A stale cache entry may not normally be returned by a cache.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.force_type\">\n<code>classmethod force_type(response, environ=None)</code> </dt> <dd>\n<p>Enforce that the WSGI response is a response object of the current type. Werkzeug will use the <a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\"><code>Response</code></a> internally in many situations like the exceptions. If you call <code>get_response()</code> on an exception you will get back a regular <a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\"><code>Response</code></a> object, even if you are using a custom subclass.</p> <p>This method can enforce a given response type, and it will also convert arbitrary WSGI callables into response objects if an environ is provided:</p> <pre data-language=\"python\"># convert a Werkzeug response object into an instance of the\n# MyResponseClass subclass.\nresponse = MyResponseClass.force_type(response)\n\n# convert any WSGI application into a response object\nresponse = MyResponseClass.force_type(response, environ)\n</pre> <p>This is especially useful if you want to post-process responses in the main dispatcher and use functionality provided by your subclass.</p> <p>Keep in mind that this will modify response objects in place if possible!</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>response</strong> (<a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a>) – a response object or wsgi application.</li> <li>\n<strong>environ</strong> (<em>WSGIEnvironment</em><em> | </em><em>None</em>) – a WSGI environment object.</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>a response object.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.freeze\">\n<code>freeze()</code> </dt> <dd>\n<p>Make the response object ready to be pickled. Does the following:</p> <ul class=\"simple\"> <li>Buffer the response into a list, ignoring <code>implicity_sequence_conversion</code> and <a class=\"reference internal\" href=\"#flask.Response.direct_passthrough\" title=\"flask.Response.direct_passthrough\"><code>direct_passthrough</code></a>.</li> <li>Set the <code>Content-Length</code> header.</li> <li>Generate an <code>ETag</code> header if one is not already set.</li> </ul> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>Removed the <code>no_etag</code> parameter.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>An <code>ETag</code> header is always added.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.6: </span>The <code>Content-Length</code> header is set.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.from_app\">\n<code>classmethod from_app(app, environ, buffered=False)</code> </dt> <dd>\n<p>Create a new response object from an application output. This works best if you pass it an application that returns a generator all the time. Sometimes applications may use the <code>write()</code> callable returned by the <code>start_response</code> function. This tries to resolve such edge cases automatically. But if you don’t get the expected output you should set <code>buffered</code> to <code>True</code> which enforces buffering.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<em>WSGIApplication</em>) – the WSGI application to execute.</li> <li>\n<strong>environ</strong> (<em>WSGIEnvironment</em>) – the WSGI environment to execute against.</li> <li>\n<strong>buffered</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – set to <code>True</code> to enforce buffering.</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>a response object.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.get_app_iter\">\n<code>get_app_iter(environ)</code> </dt> <dd>\n<p>Returns the application iterator for the given environ. Depending on the request method and the current status code the return value might be an empty response rather than the one from the response.</p> <p>If the request method is <code>HEAD</code> or the status code is in a range where the HTTP specification requires an empty response, an empty iterable is returned.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>environ</strong> (<em>WSGIEnvironment</em>) – the WSGI environment of the request.</p> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>a response iterable.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>t.Iterable[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.get_data\">\n<code>get_data(as_text=False)</code> </dt> <dd>\n<p>The string representation of the response body. Whenever you call this property the response iterable is encoded and flattened. This can lead to unwanted behavior if you stream big data.</p> <p>This behavior can be disabled by setting <a class=\"reference internal\" href=\"#flask.Response.implicit_sequence_conversion\" title=\"flask.Response.implicit_sequence_conversion\"><code>implicit_sequence_conversion</code></a> to <code>False</code>.</p> <p>If <code>as_text</code> is set to <code>True</code> the return value will be a decoded string.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>as_text</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a> | <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.get_etag\">\n<code>get_etag()</code> </dt> <dd>\n<p>Return a tuple in the form <code>(etag, is_weak)</code>. If there is no ETag the return value is <code>(None, None)</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>] | <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a>[None, None]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.get_json\">\n<code>get_json(force=False, silent=False)</code> </dt> <dd>\n<p>Parse <a class=\"reference internal\" href=\"#flask.Response.data\" title=\"flask.Response.data\"><code>data</code></a> as JSON. Useful during testing.</p> <p>If the mimetype does not indicate JSON (<em class=\"mimetype\">application/json</em>, see <a class=\"reference internal\" href=\"#flask.Response.is_json\" title=\"flask.Response.is_json\"><code>is_json</code></a>), this returns <code>None</code>.</p> <p>Unlike <a class=\"reference internal\" href=\"#flask.Request.get_json\" title=\"flask.Request.get_json\"><code>Request.get_json()</code></a>, the result is not cached.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>force</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Ignore the mimetype and always try to parse JSON.</li> <li>\n<strong>silent</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Silence parsing errors and return <code>None</code> instead.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.get_wsgi_headers\">\n<code>get_wsgi_headers(environ)</code> </dt> <dd>\n<p>This is automatically called right before the response is started and returns headers modified for the given environment. It returns a copy of the headers from the response with some modifications applied if necessary.</p> <p>For example the location header (if present) is joined with the root URL of the environment. Also the content length is automatically set to zero here for certain status codes.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.6: </span>Previously that function was called <code>fix_headers</code> and modified the response object in place. Also since 0.6, IRIs in location and content-location headers are handled properly.</p> <p>Also starting with 0.6, Werkzeug will attempt to set the content length if it is able to figure it out on its own. This is the case if all the strings in the response iterable are already encoded and the iterable is buffered.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>environ</strong> (<em>WSGIEnvironment</em>) – the WSGI environment of the request.</p> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>returns a new <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/datastructures/#werkzeug.datastructures.Headers\" title=\"(in Werkzeug v3.1.x)\"><code>Headers</code></a> object.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>Headers</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.get_wsgi_response\">\n<code>get_wsgi_response(environ)</code> </dt> <dd>\n<p>Returns the final WSGI response as tuple. The first item in the tuple is the application iterator, the second the status and the third the list of headers. The response returned is created specially for the given environment. For example if the request method in the WSGI environment is <code>'HEAD'</code> the response will be empty and only the headers and status code will be present.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>environ</strong> (<em>WSGIEnvironment</em>) – the WSGI environment of the request.</p> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>an <code>(app_iter, status, headers)</code> tuple.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a>[t.Iterable[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>], <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>]]]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.implicit_sequence_conversion\">\n<code>implicit_sequence_conversion = True</code> </dt> <dd>\n<p>if set to <code>False</code> accessing properties on the response object will not try to consume the response iterator and convert it into a list.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.2: </span>That attribute was previously called <code>implicit_seqence_conversion</code>. (Notice the typo). If you did use this feature, you have to adapt your code to the name change.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.is_json\">\n<code>property is_json: bool</code> </dt> <dd>\n<p>Check if the mimetype indicates JSON data, either <em class=\"mimetype\">application/json</em> or <em class=\"mimetype\">application/*+json</em>.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.is_sequence\">\n<code>property is_sequence: bool</code> </dt> <dd>\n<p>If the iterator is buffered, this property will be <code>True</code>. A response object will consider an iterator to be buffered if the response attribute is a list or tuple.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.is_streamed\">\n<code>property is_streamed: bool</code> </dt> <dd>\n<p>If the response is streamed (the response is not an iterable with a length information) this property is <code>True</code>. In this case streamed means that there is no information about the number of iterations. This is usually <code>True</code> if a generator is passed to the response object.</p> <p>This is useful for checking before applying some sort of post filtering that should not take place for streamed responses.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.iter_encoded\">\n<code>iter_encoded()</code> </dt> <dd>\n<p>Iter the response encoded with the encoding of the response. If the response object is invoked as WSGI application the return value of this method is used as application iterator unless <a class=\"reference internal\" href=\"#flask.Response.direct_passthrough\" title=\"flask.Response.direct_passthrough\"><code>direct_passthrough</code></a> was activated.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.json\">\n<code>property json: Any | None</code> </dt> <dd>\n<p>The parsed JSON data if <a class=\"reference internal\" href=\"#flask.Response.mimetype\" title=\"flask.Response.mimetype\"><code>mimetype</code></a> indicates JSON (<em class=\"mimetype\">application/json</em>, see <a class=\"reference internal\" href=\"#flask.Response.is_json\" title=\"flask.Response.is_json\"><code>is_json</code></a>).</p> <p>Calls <a class=\"reference internal\" href=\"#flask.Response.get_json\" title=\"flask.Response.get_json\"><code>get_json()</code></a> with default arguments.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.last_modified\">\n<code>last_modified</code> </dt> <dd>\n<p>The Last-Modified entity-header field indicates the date and time at which the origin server believes the variant was last modified.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.location\">\n<code>location</code> </dt> <dd>\n<p>The Location response-header field is used to redirect the recipient to a location other than the Request-URI for completion of the request or identification of a new resource.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.make_conditional\">\n<code>make_conditional(request_or_environ, accept_ranges=False, complete_length=None)</code> </dt> <dd>\n<p>Make the response conditional to the request. This method works best if an etag was defined for the response already. The <code>add_etag</code> method can be used to do that. If called without etag just the date header is set.</p> <p>This does nothing if the request method in the request or environ is anything but GET or HEAD.</p> <p>For optimal performance when handling range requests, it’s recommended that your response data object implements <code>seekable</code>, <code>seek</code> and <code>tell</code> methods as described by <a class=\"reference external\" href=\"https://docs.python.org/3/library/io.html#io.IOBase\" title=\"(in Python v3.13)\"><code>io.IOBase</code></a>. Objects returned by <code>wrap_file()</code> automatically implement those methods.</p> <p>It does not remove the body of the response because that’s something the <code>__call__()</code> function does for us automatically.</p> <p>Returns self so that you can do <code>return resp.make_conditional(req)</code> but modifies the object in-place.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>request_or_environ</strong> (<em>WSGIEnvironment</em><em> | </em><a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.Request\">Request</a>) – a request object or WSGI environment to be used to make the response conditional against.</li> <li>\n<strong>accept_ranges</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – This parameter dictates the value of <code>Accept-Ranges</code> header. If <code>False</code> (default), the header is not set. If <code>True</code>, it will be set to <code>\"bytes\"</code>. If it’s a string, it will use this value.</li> <li>\n<strong>complete_length</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><em>None</em>) – Will be used only in valid Range Requests. It will set <code>Content-Range</code> complete length value and compute <code>Content-Length</code> real value. This parameter is mandatory for successful Range Requests completion.</li> </ul> </dd> <dt class=\"field-even\">Raises<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.RequestedRangeNotSatisfiable\" title=\"(in Werkzeug v3.1.x)\"><code>RequestedRangeNotSatisfiable</code></a> if <code>Range</code> header could not be parsed or satisfied.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>Range processing is skipped if length is 0 instead of raising a 416 Range Not Satisfiable error.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.make_sequence\">\n<code>make_sequence()</code> </dt> <dd>\n<p>Converts the response iterator in a list. By default this happens automatically if required. If <code>implicit_sequence_conversion</code> is disabled, this method is not automatically called and some properties might raise exceptions. This also encodes all the items.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.mimetype\">\n<code>property mimetype: str | None</code> </dt> <dd>\n<p>The mimetype (content type without charset etc.)</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.mimetype_params\">\n<code>property mimetype_params: dict[str, str]</code> </dt> <dd>\n<p>The mimetype parameters as dict. For example if the content type is <code>text/html; charset=utf-8</code> the params would be <code>{'charset': 'utf-8'}</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.retry_after\">\n<code>property retry_after: datetime | None</code> </dt> <dd>\n<p>The Retry-After response-header field can be used with a 503 (Service Unavailable) response to indicate how long the service is expected to be unavailable to the requesting client.</p> <p>Time in seconds until expiration or date.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The datetime object is timezone-aware.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.set_cookie\">\n<code>set_cookie(key, value='', max_age=None, expires=None, path='/', domain=None, secure=False, httponly=False, samesite=None, partitioned=False)</code> </dt> <dd>\n<p>Sets a cookie.</p> <p>A warning is raised if the size of the cookie header exceeds <a class=\"reference internal\" href=\"#flask.Response.max_cookie_size\" title=\"flask.Response.max_cookie_size\"><code>max_cookie_size</code></a>, but the header will still be set.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>key</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the key (name) of the cookie to be set.</li> <li>\n<strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the value of the cookie.</li> <li>\n<strong>max_age</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.timedelta\" title=\"(in Python v3.13)\">timedelta</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><em>None</em>) – should be a number of seconds, or <code>None</code> (default) if the cookie should last only as long as the client’s browser session.</li> <li>\n<strong>expires</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime\" title=\"(in Python v3.13)\">datetime</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#float\" title=\"(in Python v3.13)\">float</a><em> | </em><em>None</em>) – should be a <code>datetime</code> object or UNIX timestamp.</li> <li>\n<strong>path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – limits the cookie to a given path, per default it will span the whole domain.</li> <li>\n<strong>domain</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – if you want to set a cross-domain cookie. For example, <code>domain=\"example.com\"</code> will set a cookie that is readable by the domain <code>www.example.com</code>, <code>foo.example.com</code> etc. Otherwise, a cookie will only be readable by the domain that set it.</li> <li>\n<strong>secure</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – If <code>True</code>, the cookie will only be available via HTTPS.</li> <li>\n<strong>httponly</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Disallow JavaScript access to the cookie.</li> <li>\n<strong>samesite</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – Limit the scope of the cookie to only be attached to requests that are “same-site”.</li> <li>\n<strong>partitioned</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – If <code>True</code>, the cookie will be partitioned.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>The <code>partitioned</code> parameter was added.</p> </div> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.set_data\">\n<code>set_data(value)</code> </dt> <dd>\n<p>Sets a new string as response. The value must be a string or bytes. If a string is set it’s encoded to the charset of the response (utf-8 by default).</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Response.set_etag\">\n<code>set_etag(etag, weak=False)</code> </dt> <dd>\n<p>Set the etag, and override the old one if there was one.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>etag</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>weak</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.status\">\n<code>property status: str</code> </dt> <dd>\n<p>The HTTP status code as a string.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.status_code\">\n<code>property status_code: int</code> </dt> <dd>\n<p>The HTTP status code as a number.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.stream\">\n<code>property stream: ResponseStream</code> </dt> <dd>\n<p>The response iterable as write-only stream.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.vary\">\n<code>property vary: HeaderSet</code> </dt> <dd>\n<p>The Vary field value indicates the set of request-header fields that fully determines, while the response is fresh, whether a cache is permitted to use the response to reply to a subsequent request without revalidation.</p> </dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.www_authenticate\">\n<code>property www_authenticate: WWWAuthenticate</code> </dt> <dd>\n<p>The <code>WWW-Authenticate</code> header parsed into a <code>WWWAuthenticate</code> object. Modifying the object will modify the header value.</p> <p>This header is not set by default. To set this header, assign an instance of <code>WWWAuthenticate</code> to this attribute.</p> <pre data-language=\"python\">response.www_authenticate = WWWAuthenticate(\n    \"basic\", {\"realm\": \"Authentication Required\"}\n)\n</pre> <p>Multiple values for this header can be sent to give the client multiple options. Assign a list to set multiple headers. However, modifying the items in the list will not automatically update the header values, and accessing this attribute will only ever return the first value.</p> <p>To unset this header, assign <code>None</code> or use <code>del</code>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>This attribute can be assigned to to set the header. A list can be assigned to set multiple header values. Use <code>del</code> to unset the header.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span><code>WWWAuthenticate</code> is no longer a <code>dict</code>. The <code>token</code> attribute was added for auth challenges that use a token instead of parameters.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.response\">\n<code>response: t.Iterable[str] | t.Iterable[bytes]</code> </dt> <dd>\n<p>The response body to send as the WSGI iterable. A list of strings or bytes represents a fixed-length response, any other iterable is a streaming response. Strings are encoded to bytes as UTF-8.</p> <p>Do not set to a plain string or bytes, that will cause sending the response to be very inefficient as it will iterate one byte at a time.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.direct_passthrough\">\n<code>direct_passthrough</code> </dt> <dd>\n<p>Pass the response body directly through as the WSGI iterable. This can be used when the body is a binary file or other iterator of bytes, to skip some unnecessary checks. Use <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.utils.send_file\" title=\"(in Werkzeug v3.1.x)\"><code>send_file()</code></a> instead of setting this manually.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.Response.autocorrect_location_header\">\n<code>autocorrect_location_header = False</code> </dt> <dd>\n<p>If a redirect <code>Location</code> header is a relative URL, make it an absolute URL, including scheme and domain.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>This is disabled by default, so responses will send relative redirects.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.Response.max_cookie_size\">\n<code>property max_cookie_size: int</code> </dt> <dd>\n<p>Read-only view of the <a class=\"reference internal\" href=\"../config/index#MAX_COOKIE_SIZE\" title=\"MAX_COOKIE_SIZE\"><code>MAX_COOKIE_SIZE</code></a> config key.</p> <p>See <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/wrappers/#werkzeug.wrappers.Response.max_cookie_size\" title=\"(in Werkzeug v3.1.x)\"><code>max_cookie_size</code></a> in Werkzeug’s docs.</p> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"sessions\"> <h2>Sessions</h2> <p>If you have set <a class=\"reference internal\" href=\"#flask.Flask.secret_key\" title=\"flask.Flask.secret_key\"><code>Flask.secret_key</code></a> (or configured it from <a class=\"reference internal\" href=\"../config/index#SECRET_KEY\" title=\"SECRET_KEY\"><code>SECRET_KEY</code></a>) you can use sessions in Flask applications. A session makes it possible to remember information from one request to another. The way Flask does this is by using a signed cookie. The user can look at the session contents, but can’t modify it unless they know the secret key, so make sure to set that to something complex and unguessable.</p> <p>To access the current session you can use the <a class=\"reference internal\" href=\"#flask.session\" title=\"flask.session\"><code>session</code></a> object:</p> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.session\">\n<code>class flask.session</code> </dt> <dd>\n<p>The session object works pretty much like an ordinary dict, with the difference that it keeps track of modifications.</p> <p>This is a proxy. See <a class=\"reference internal\" href=\"../reqcontext/index#notes-on-proxies\"><span class=\"std std-ref\">Notes On Proxies</span></a> for more information.</p> <p>The following attributes are interesting:</p> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.session.new\">\n<code>new</code> </dt> <dd>\n<p><code>True</code> if the session is new, <code>False</code> otherwise.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.session.modified\">\n<code>modified</code> </dt> <dd>\n<p><code>True</code> if the session object detected a modification. Be advised that modifications on mutable structures are not picked up automatically, in that situation you have to explicitly set the attribute to <code>True</code> yourself. Here an example:</p> <pre data-language=\"python\"># this change is not picked up because a mutable object (here\n# a list) is changed.\nsession['objects'].append(42)\n# so mark it as modified yourself\nsession.modified = True\n</pre> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.session.permanent\">\n<code>permanent</code> </dt> <dd>\n<p>If set to <code>True</code> the session lives for <a class=\"reference internal\" href=\"#flask.Flask.permanent_session_lifetime\" title=\"flask.Flask.permanent_session_lifetime\"><code>permanent_session_lifetime</code></a> seconds. The default is 31 days. If set to <code>False</code> (which is the default) the session will be deleted when the user closes the browser.</p> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"session-interface\"> <h2>Session Interface</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><p>The session interface provides a simple way to replace the session implementation that Flask is using.</p> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface\">\n<code>class flask.sessions.SessionInterface</code> </dt> <dd>\n<p>The basic interface you have to implement in order to replace the default session interface which uses werkzeug’s securecookie implementation. The only methods you have to implement are <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.open_session\" title=\"flask.sessions.SessionInterface.open_session\"><code>open_session()</code></a> and <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.save_session\" title=\"flask.sessions.SessionInterface.save_session\"><code>save_session()</code></a>, the others have useful defaults which you don’t need to change.</p> <p>The session object returned by the <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.open_session\" title=\"flask.sessions.SessionInterface.open_session\"><code>open_session()</code></a> method has to provide a dictionary like interface plus the properties and methods from the <a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\"><code>SessionMixin</code></a>. We recommend just subclassing a dict and adding that mixin:</p> <pre data-language=\"python\">class Session(dict, SessionMixin):\n    pass\n</pre> <p>If <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.open_session\" title=\"flask.sessions.SessionInterface.open_session\"><code>open_session()</code></a> returns <code>None</code> Flask will call into <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.make_null_session\" title=\"flask.sessions.SessionInterface.make_null_session\"><code>make_null_session()</code></a> to create a session that acts as replacement if the session support cannot work because some requirement is not fulfilled. The default <a class=\"reference internal\" href=\"#flask.sessions.NullSession\" title=\"flask.sessions.NullSession\"><code>NullSession</code></a> class that is created will complain that the secret key was not set.</p> <p>To replace the session interface on an application all you have to do is to assign <a class=\"reference internal\" href=\"#flask.Flask.session_interface\" title=\"flask.Flask.session_interface\"><code>flask.Flask.session_interface</code></a>:</p> <pre data-language=\"python\">app = Flask(__name__)\napp.session_interface = MySessionInterface()\n</pre> <p>Multiple requests with the same session may be sent and handled concurrently. When implementing a new session interface, consider whether reads or writes to the backing store must be synchronized. There is no guarantee on the order in which the session for each request is opened or saved, it will occur in the order that requests begin and end processing.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details><dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.null_session_class\">\n<code>null_session_class</code> </dt> <dd>\n<p><a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.make_null_session\" title=\"flask.sessions.SessionInterface.make_null_session\"><code>make_null_session()</code></a> will look here for the class that should be created when a null session is requested. Likewise the <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.is_null_session\" title=\"flask.sessions.SessionInterface.is_null_session\"><code>is_null_session()</code></a> method will perform a typecheck against this type.</p> <p>alias of <a class=\"reference internal\" href=\"#flask.sessions.NullSession\" title=\"flask.sessions.NullSession\"><code>NullSession</code></a></p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.pickle_based\">\n<code>pickle_based = False</code> </dt> <dd>\n<p>A flag that indicates if the session interface is pickle based. This can be used by Flask extensions to make a decision in regards to how to deal with the session object.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.make_null_session\">\n<code>make_null_session(app)</code> </dt> <dd>\n<p>Creates a null session which acts as a replacement object if the real session support could not be loaded due to a configuration error. This mainly aids the user experience because the job of the null session is to still support lookup without complaining but modifications are answered with a helpful error message of what failed.</p> <p>This creates an instance of <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.null_session_class\" title=\"flask.sessions.SessionInterface.null_session_class\"><code>null_session_class</code></a> by default.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.sessions.NullSession\" title=\"flask.sessions.NullSession\">NullSession</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.is_null_session\">\n<code>is_null_session(obj)</code> </dt> <dd>\n<p>Checks if a given object is a null session. Null sessions are not asked to be saved.</p> <p>This checks if the object is an instance of <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.null_session_class\" title=\"flask.sessions.SessionInterface.null_session_class\"><code>null_session_class</code></a> by default.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#object\" title=\"(in Python v3.13)\">object</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_name\">\n<code>get_cookie_name(app)</code> </dt> <dd>\n<p>The name of the session cookie. Uses``app.config[“SESSION_COOKIE_NAME”]``.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_domain\">\n<code>get_cookie_domain(app)</code> </dt> <dd>\n<p>The value of the <code>Domain</code> parameter on the session cookie. If not set, browsers will only send the cookie to the exact domain it was set from. Otherwise, they will send it to any subdomain of the given value as well.</p> <p>Uses the <a class=\"reference internal\" href=\"../config/index#SESSION_COOKIE_DOMAIN\" title=\"SESSION_COOKIE_DOMAIN\"><code>SESSION_COOKIE_DOMAIN</code></a> config.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>Not set by default, does not fall back to <code>SERVER_NAME</code>.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_path\">\n<code>get_cookie_path(app)</code> </dt> <dd>\n<p>Returns the path for which the cookie should be valid. The default implementation uses the value from the <code>SESSION_COOKIE_PATH</code> config var if it’s set, and falls back to <code>APPLICATION_ROOT</code> or uses <code>/</code> if it’s <code>None</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_httponly\">\n<code>get_cookie_httponly(app)</code> </dt> <dd>\n<p>Returns True if the session cookie should be httponly. This currently just returns the value of the <code>SESSION_COOKIE_HTTPONLY</code> config var.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_secure\">\n<code>get_cookie_secure(app)</code> </dt> <dd>\n<p>Returns True if the cookie should be secure. This currently just returns the value of the <code>SESSION_COOKIE_SECURE</code> setting.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_samesite\">\n<code>get_cookie_samesite(app)</code> </dt> <dd>\n<p>Return <code>'Strict'</code> or <code>'Lax'</code> if the cookie should use the <code>SameSite</code> attribute. This currently just returns the value of the <a class=\"reference internal\" href=\"../config/index#SESSION_COOKIE_SAMESITE\" title=\"SESSION_COOKIE_SAMESITE\"><code>SESSION_COOKIE_SAMESITE</code></a> setting.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_cookie_partitioned\">\n<code>get_cookie_partitioned(app)</code> </dt> <dd>\n<p>Returns True if the cookie should be partitioned. By default, uses the value of <a class=\"reference internal\" href=\"../config/index#SESSION_COOKIE_PARTITIONED\" title=\"SESSION_COOKIE_PARTITIONED\"><code>SESSION_COOKIE_PARTITIONED</code></a>.</p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.get_expiration_time\">\n<code>get_expiration_time(app, session)</code> </dt> <dd>\n<p>A helper method that returns an expiration date for the session or <code>None</code> if the session is linked to the browser session. The default implementation returns now + the permanent session lifetime configured on the application.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>session</strong> (<a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>datetime | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.should_set_cookie\">\n<code>should_set_cookie(app, session)</code> </dt> <dd>\n<p>Used by session backends to determine if a <code>Set-Cookie</code> header should be set for this session cookie for this response. If the session has been modified, the cookie is set. If the session is permanent and the <code>SESSION_REFRESH_EACH_REQUEST</code> config is true, the cookie is always set.</p> <p>This check is usually skipped if the session was deleted.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>session</strong> (<a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.open_session\">\n<code>open_session(app, request)</code> </dt> <dd>\n<p>This is called at the beginning of each request, after pushing the request context, before matching the URL.</p> <p>This must return an object which implements a dictionary-like interface as well as the <a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\"><code>SessionMixin</code></a> interface.</p> <p>This will return <code>None</code> to indicate that loading failed in some way that is not immediately an error. The request context will fall back to using <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.make_null_session\" title=\"flask.sessions.SessionInterface.make_null_session\"><code>make_null_session()</code></a> in this case.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>request</strong> (<a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.Request\">Request</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionInterface.save_session\">\n<code>save_session(app, session, response)</code> </dt> <dd>\n<p>This is called at the end of each request, after generating a response, before removing the request context. It is skipped if <a class=\"reference internal\" href=\"#flask.sessions.SessionInterface.is_null_session\" title=\"flask.sessions.SessionInterface.is_null_session\"><code>is_null_session()</code></a> returns <code>True</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>session</strong> (<a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a>)</li> <li>\n<strong>response</strong> (<a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface\">\n<code>class flask.sessions.SecureCookieSessionInterface</code> </dt> <dd>\n<p>The default session interface that stores sessions in signed cookies through the <code>itsdangerous</code> module.</p> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.salt\">\n<code>salt = 'cookie-session'</code> </dt> <dd>\n<p>the salt that should be applied on top of the secret key for the signing of cookie based sessions.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.digest_method\">\n<code>static digest_method(string=b'')</code> </dt> <dd>\n<p>the hash function to use for the signature. The default is sha1</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>string</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.key_derivation\">\n<code>key_derivation = 'hmac'</code> </dt> <dd>\n<p>the name of the itsdangerous supported key derivation. The default is hmac.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.serializer\">\n<code>serializer = &lt;flask.json.tag.TaggedJSONSerializer object&gt;</code> </dt> <dd>\n<p>A python serializer for the payload. The default is a compact JSON derived serializer with support for some extra Python types such as datetime objects or tuples.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.session_class\">\n<code>session_class</code> </dt> <dd>\n<p>alias of <a class=\"reference internal\" href=\"#flask.sessions.SecureCookieSession\" title=\"flask.sessions.SecureCookieSession\"><code>SecureCookieSession</code></a></p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.open_session\">\n<code>open_session(app, request)</code> </dt> <dd>\n<p>This is called at the beginning of each request, after pushing the request context, before matching the URL.</p> <p>This must return an object which implements a dictionary-like interface as well as the <a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\"><code>SessionMixin</code></a> interface.</p> <p>This will return <code>None</code> to indicate that loading failed in some way that is not immediately an error. The request context will fall back to using <code>make_null_session()</code> in this case.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>request</strong> (<a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.Request\">Request</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.sessions.SecureCookieSession\" title=\"flask.sessions.SecureCookieSession\">SecureCookieSession</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSessionInterface.save_session\">\n<code>save_session(app, session, response)</code> </dt> <dd>\n<p>This is called at the end of each request, after generating a response, before removing the request context. It is skipped if <code>is_null_session()</code> returns <code>True</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>session</strong> (<a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a>)</li> <li>\n<strong>response</strong> (<a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSession\">\n<code>class flask.sessions.SecureCookieSession(initial=None)</code> </dt> <dd>\n<p>Base class for sessions based on signed cookies.</p> <p>This session backend will set the <a class=\"reference internal\" href=\"#flask.sessions.SecureCookieSession.modified\" title=\"flask.sessions.SecureCookieSession.modified\"><code>modified</code></a> and <a class=\"reference internal\" href=\"#flask.sessions.SecureCookieSession.accessed\" title=\"flask.sessions.SecureCookieSession.accessed\"><code>accessed</code></a> attributes. It cannot reliably track whether a session is new (vs. empty), so <code>new</code> remains hard coded to <code>False</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>initial</strong> (<em>c.Mapping</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>] </em><em>| </em><em>c.Iterable</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSession.modified\">\n<code>modified = False</code> </dt> <dd>\n<p>When data is changed, this is set to <code>True</code>. Only the session dictionary itself is tracked; if the session contains mutable data (for example a nested dict) then this must be set to <code>True</code> manually when modifying that data. The session cookie will only be written to the response if this is <code>True</code>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSession.accessed\">\n<code>accessed = False</code> </dt> <dd>\n<p>header, which allows caching proxies to cache different pages for different users.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSession.get\">\n<code>get(key, default=None)</code> </dt> <dd>\n<p>Return the value for key if key is in the dictionary, else default.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>key</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>default</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SecureCookieSession.setdefault\">\n<code>setdefault(key, default=None)</code> </dt> <dd>\n<p>Insert key with a value of default if key is not in the dictionary.</p> <p>Return the value for key if key is in the dictionary, else default.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>key</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>default</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.NullSession\">\n<code>class flask.sessions.NullSession(initial=None)</code> </dt> <dd>\n<p>Class used to generate nicer error messages if sessions are not available. Will still allow read-only access to the empty session but fail on setting.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>initial</strong> (<em>c.Mapping</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>] </em><em>| </em><em>c.Iterable</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.NullSession.clear\">\n<code>clear() → None. Remove all items from D.</code> </dt> <dd>\n<dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.NoReturn\" title=\"(in Python v3.13)\">NoReturn</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.NullSession.pop\">\n<code>pop(k[, d]) → v, remove specified key and return the corresponding value.</code> </dt> <dd>\n<p>If the key is not found, return the default if given; otherwise, raise a KeyError.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.NoReturn\" title=\"(in Python v3.13)\">NoReturn</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.NullSession.popitem\">\n<code>popitem(*args, **kwargs)</code> </dt> <dd>\n<p>Remove and return a (key, value) pair as a 2-tuple.</p> <p>Pairs are returned in LIFO (last-in, first-out) order. Raises KeyError if the dict is empty.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.NoReturn\" title=\"(in Python v3.13)\">NoReturn</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.NullSession.update\">\n<code>update([E, ]**F) → None. Update D from dict/iterable E and F.</code> </dt> <dd>\n<p>If E is present and has a .keys() method, then does: for k in E: D[k] = E[k] If E is present and lacks a .keys() method, then does: for k, v in E: D[k] = v In either case, this is followed by: for k in F: D[k] = F[k]</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.NoReturn\" title=\"(in Python v3.13)\">NoReturn</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.NullSession.setdefault\">\n<code>setdefault(*args, **kwargs)</code> </dt> <dd>\n<p>Insert key with a value of default if key is not in the dictionary.</p> <p>Return the value for key if key is in the dictionary, else default.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.NoReturn\" title=\"(in Python v3.13)\">NoReturn</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionMixin\">\n<code>class flask.sessions.SessionMixin</code> </dt> <dd>\n<p>Expands a basic dictionary with session attributes.</p> <dl class=\"py property\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionMixin.permanent\">\n<code>property permanent: bool</code> </dt> <dd>\n<p>This reflects the <code>'_permanent'</code> key in the dict.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionMixin.modified\">\n<code>modified = True</code> </dt> <dd>\n<p>Some implementations can detect changes to the session and set this when that happens. The mixin default is hard coded to <code>True</code>.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.sessions.SessionMixin.accessed\">\n<code>accessed = True</code> </dt> <dd>\n<p>Some implementations can detect when session data is read or written and set this when that happens. The mixin default is hard coded to <code>True</code>.</p> </dd>\n</dl> </dd>\n</dl> <div class=\"admonition-notice admonition\"> <p class=\"admonition-title\">Notice</p> <p>The <a class=\"reference internal\" href=\"../config/index#PERMANENT_SESSION_LIFETIME\" title=\"PERMANENT_SESSION_LIFETIME\"><code>PERMANENT_SESSION_LIFETIME</code></a> config can be an integer or <code>timedelta</code>. The <a class=\"reference internal\" href=\"#flask.Flask.permanent_session_lifetime\" title=\"flask.Flask.permanent_session_lifetime\"><code>permanent_session_lifetime</code></a> attribute is always a <code>timedelta</code>.</p> </div> </section> <section id=\"test-client\"> <h2>Test Client</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.testing.FlaskClient\">\n<code>class flask.testing.FlaskClient(*args, **kwargs)</code> </dt> <dd>\n<p>Works like a regular Werkzeug test client but has knowledge about Flask’s contexts to defer the cleanup of the request context until the end of a <code>with</code> block. For general information about how to use this class refer to <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/test/#werkzeug.test.Client\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.test.Client</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.12: </span><code>app.test_client()</code> includes preset default environment, which can be set after instantiation of the <code>app.test_client()</code> object in <code>client.environ_base</code>.</p> </div> </details><p>Basic usage is outlined in the <a class=\"reference internal\" href=\"../testing/index\"><span class=\"doc\">Testing Flask Applications</span></a> chapter.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<em>t.Any</em>)</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>)</li> </ul> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.testing.FlaskClient.session_transaction\">\n<code>session_transaction(*args, **kwargs)</code> </dt> <dd>\n<p>When used in combination with a <code>with</code> statement this opens a session transaction. This can be used to modify the session that the test client uses. Once the <code>with</code> block is left the session is stored back.</p> <pre data-language=\"python\">with client.session_transaction() as session:\n    session['value'] = 42\n</pre> <p>Internally this is implemented by going through a temporary test request context and since session handling could depend on request variables this function accepts the same arguments as <a class=\"reference internal\" href=\"#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> which are directly passed through.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a>[<a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.testing.FlaskClient.open\">\n<code>open(*args, buffered=False, follow_redirects=False, **kwargs)</code> </dt> <dd>\n<p>Generate an environ dict from the given arguments, make a request to the application using it, and return the response.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<em>t.Any</em>) – Passed to <code>EnvironBuilder</code> to create the environ for the request. If a single arg is passed, it can be an existing <code>EnvironBuilder</code> or an environ dict.</li> <li>\n<strong>buffered</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Convert the iterator returned by the app into a list. If the iterator has a <code>close()</code> method, it is called automatically.</li> <li>\n<strong>follow_redirects</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Make additional requests to follow HTTP redirects until a non-redirect status is returned. <code>TestResponse.history</code> lists the intermediate responses.</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>TestResponse</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.1: </span>Removed the <code>as_tuple</code> parameter.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The request input stream is closed when calling <code>response.close()</code>. Input streams for redirects are automatically closed.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.5: </span>If a dict is provided as file in the dict for the <code>data</code> parameter the content type has to be called <code>content_type</code> instead of <code>mimetype</code>. This change was made for consistency with <code>werkzeug.FileWrapper</code>.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.5: </span>Added the <code>follow_redirects</code> parameter.</p> </div> </details>\n</dd>\n</dl> </dd>\n</dl> </section> <section id=\"test-cli-runner\"> <h2>Test CLI Runner</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.testing.FlaskCliRunner\">\n<code>class flask.testing.FlaskCliRunner(app, **kwargs)</code> </dt> <dd>\n<p>A <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.testing.CliRunner\" title=\"(in Click v8.1.x)\"><code>CliRunner</code></a> for testing a Flask app’s CLI commands. Typically created using <a class=\"reference internal\" href=\"#flask.Flask.test_cli_runner\" title=\"flask.Flask.test_cli_runner\"><code>test_cli_runner()</code></a>. See <a class=\"reference internal\" href=\"../testing/index#testing-cli\"><span class=\"std std-ref\">Running Commands with the CLI Runner</span></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>)</li> </ul> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.testing.FlaskCliRunner.invoke\">\n<code>invoke(cli=None, args=None, **kwargs)</code> </dt> <dd>\n<p>Invokes a CLI command in an isolated environment. See <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.testing.CliRunner.invoke\" title=\"(in Click v8.1.x)\"><code>CliRunner.invoke</code></a> for full method documentation. See <a class=\"reference internal\" href=\"../testing/index#testing-cli\"><span class=\"std std-ref\">Running Commands with the CLI Runner</span></a> for examples.</p> <p>If the <code>obj</code> argument is not given, passes an instance of <a class=\"reference internal\" href=\"#flask.cli.ScriptInfo\" title=\"flask.cli.ScriptInfo\"><code>ScriptInfo</code></a> that knows how to load the Flask app being tested.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>cli</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Command object to invoke. Default is the app’s <code>cli</code> group.</li> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – List of strings to invoke the command with.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>a <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.testing.Result\" title=\"(in Click v8.1.x)\"><code>Result</code></a> object.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.testing.Result\" title=\"(in Click v8.1.x)\">Result</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"application-globals\"> <h2>Application Globals</h2> <p>To share data that is valid for one request only from one function to another, a global variable is not good enough because it would break in threaded environments. Flask provides you with a special object that ensures it is only valid for the active request and that will return different values for each request. In a nutshell: it does the right thing, like it does for <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a> and <a class=\"reference internal\" href=\"#flask.session\" title=\"flask.session\"><code>session</code></a>.</p> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.g\">\n<code>flask.g</code> </dt> <dd>\n<p>A namespace object that can store data during an <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">application context</span></a>. This is an instance of <a class=\"reference internal\" href=\"#flask.Flask.app_ctx_globals_class\" title=\"flask.Flask.app_ctx_globals_class\"><code>Flask.app_ctx_globals_class</code></a>, which defaults to <a class=\"reference internal\" href=\"#flask.ctx._AppCtxGlobals\" title=\"flask.ctx._AppCtxGlobals\"><code>ctx._AppCtxGlobals</code></a>.</p> <p>This is a good place to store resources during a request. For example, a <code>before_request</code> function could load a user object from a session id, then set <code>g.user</code> to be used in the view function.</p> <p>This is a proxy. See <a class=\"reference internal\" href=\"../reqcontext/index#notes-on-proxies\"><span class=\"std std-ref\">Notes On Proxies</span></a> for more information.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.10: </span>Bound to the application context instead of the request context.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.ctx._AppCtxGlobals\">\n<code>class flask.ctx._AppCtxGlobals</code> </dt> <dd>\n<p>A plain object. Used as a namespace for storing data during an application context.</p> <p>Creating an app context automatically creates this object, which is made available as the <code>g</code> proxy.</p> <dl class=\"describe\"> <dt class=\"sig sig-object\"> <span class=\"sig-name descname\">'key' in g</span>\n</dt> <dd>\n<p>Check whether an attribute is present.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"describe\"> <dt class=\"sig sig-object\"> <span class=\"sig-name descname\">iter(g)</span>\n</dt> <dd>\n<p>Return an iterator over the attribute names.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx._AppCtxGlobals.get\">\n<code>get(name, default=None)</code> </dt> <dd>\n<p>Get an attribute by name, or a default value. Like <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict.get\" title=\"(in Python v3.13)\"><code>dict.get()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Name of attribute to get.</li> <li>\n<strong>default</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em> | </em><em>None</em>) – Value to return if the attribute is not present.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx._AppCtxGlobals.pop\">\n<code>pop(name, default=_sentinel)</code> </dt> <dd>\n<p>Get and remove an attribute by name. Like <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict.pop\" title=\"(in Python v3.13)\"><code>dict.pop()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Name of attribute to pop.</li> <li>\n<strong>default</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Value to return if the attribute is not present, instead of raising a <code>KeyError</code>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx._AppCtxGlobals.setdefault\">\n<code>setdefault(name, default=None)</code> </dt> <dd>\n<p>Get the value of an attribute if it is present, otherwise set and return a default value. Like <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict.setdefault\" title=\"(in Python v3.13)\"><code>dict.setdefault()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Name of attribute to get.</li> <li>\n<strong>default</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Value to set and return if the attribute is not present.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details>\n</dd>\n</dl> </dd>\n</dl> </section> <section id=\"useful-functions-and-classes\"> <h2>Useful Functions and Classes</h2> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.current_app\">\n<code>flask.current_app</code> </dt> <dd>\n<p>A proxy to the application handling the current request. This is useful to access the application without needing to import it, or if it can’t be imported, such as when using the application factory pattern or in blueprints and extensions.</p> <p>This is only available when an <a class=\"reference internal\" href=\"../appcontext/index\"><span class=\"doc\">application context</span></a> is pushed. This happens automatically during requests and CLI commands. It can be controlled manually with <a class=\"reference internal\" href=\"#flask.Flask.app_context\" title=\"flask.Flask.app_context\"><code>app_context()</code></a>.</p> <p>This is a proxy. See <a class=\"reference internal\" href=\"../reqcontext/index#notes-on-proxies\"><span class=\"std std-ref\">Notes On Proxies</span></a> for more information.</p> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.has_request_context\">\n<code>flask.has_request_context()</code> </dt> <dd>\n<p>If you have code that wants to test if a request context is there or not this function can be used. For instance, you may want to take advantage of request information if the request object is available, but fail silently if it is unavailable.</p> <pre data-language=\"python\">class User(db.Model):\n\n    def __init__(self, username, remote_addr=None):\n        self.username = username\n        if remote_addr is None and has_request_context():\n            remote_addr = request.remote_addr\n        self.remote_addr = remote_addr\n</pre> <p>Alternatively you can also just test any of the context bound objects (such as <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a> or <a class=\"reference internal\" href=\"#flask.g\" title=\"flask.g\"><code>g</code></a>) for truthness:</p> <pre data-language=\"python\">class User(db.Model):\n\n    def __init__(self, username, remote_addr=None):\n        self.username = username\n        if remote_addr is None and request:\n            remote_addr = request.remote_addr\n        self.remote_addr = remote_addr\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.copy_current_request_context\">\n<code>flask.copy_current_request_context(f)</code> </dt> <dd>\n<p>A helper function that decorates a function to retain the current request context. This is useful when working with greenlets. The moment the function is decorated a copy of the request context is created and then pushed when the function is called. The current session is also included in the copied request context.</p> <p>Example:</p> <pre data-language=\"python\">import gevent\nfrom flask import copy_current_request_context\n\n@app.route('/')\ndef index():\n    @copy_current_request_context\n    def do_some_work():\n        # do some work here, it can access flask.request or\n        # flask.session like you would otherwise in the view function.\n        ...\n    gevent.spawn(do_some_work)\n    return 'Regular response'\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>F</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>F</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.has_app_context\">\n<code>flask.has_app_context()</code> </dt> <dd>\n<p>Works like <a class=\"reference internal\" href=\"#flask.has_request_context\" title=\"flask.has_request_context\"><code>has_request_context()</code></a> but for the application context. You can also just do a boolean check on the <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> object instead.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.url_for\">\n<code>flask.url_for(endpoint, *, _anchor=None, _method=None, _scheme=None, _external=None, **values)</code> </dt> <dd>\n<p>Generate a URL to the given endpoint with the given values.</p> <p>This requires an active request or application context, and calls <a class=\"reference internal\" href=\"#flask.Flask.url_for\" title=\"flask.Flask.url_for\"><code>current_app.url_for()</code></a>. See that method for full documentation.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The endpoint name associated with the URL to generate. If this starts with a <code>.</code>, the current blueprint name (if any) will be used.</li> <li>\n<strong>_anchor</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – If given, append this as <code>#anchor</code> to the URL.</li> <li>\n<strong>_method</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – If given, generate the URL associated with this method for the endpoint.</li> <li>\n<strong>_scheme</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – If given, the URL will have this scheme if it is external.</li> <li>\n<strong>_external</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><em>None</em>) – If given, prefer the URL to be internal (False) or require it to be external (True). External URLs include the scheme and domain. When not in an active request, URLs are external by default.</li> <li>\n<strong>values</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Values to use for the variable parts of the URL rule. Unknown keys are appended as query string arguments, like <code>?a=b&amp;c=d</code>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Calls <code>current_app.url_for</code>, allowing an app to override the behavior.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.10: </span>The <code>_scheme</code> parameter was added.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>The <code>_anchor</code> and <code>_method</code> parameters were added.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>Calls <code>app.handle_url_build_error</code> on build errors.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.abort\">\n<code>flask.abort(code, *args, **kwargs)</code> </dt> <dd>\n<p>Raise an <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a> for the given status code.</p> <p>If <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is available, it will call its <a class=\"reference internal\" href=\"#flask.Flask.aborter\" title=\"flask.Flask.aborter\"><code>aborter</code></a> object, otherwise it will use <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.abort\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.exceptions.abort()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>code</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/wrappers/#werkzeug.wrappers.Response\" title=\"(in Werkzeug v3.1.x)\">Response</a>) – The status code for the exception, which must be registered in <code>app.aborter</code>.</li> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Passed to the exception.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Passed to the exception.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.NoReturn\" title=\"(in Python v3.13)\">NoReturn</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2: </span>Calls <code>current_app.aborter</code> if available instead of always using Werkzeug’s default <code>abort</code>.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.redirect\">\n<code>flask.redirect(location, code=302, Response=None)</code> </dt> <dd>\n<p>Create a redirect response object.</p> <p>If <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is available, it will use its <a class=\"reference internal\" href=\"#flask.Flask.redirect\" title=\"flask.Flask.redirect\"><code>redirect()</code></a> method, otherwise it will use <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.utils.redirect\" title=\"(in Werkzeug v3.1.x)\"><code>werkzeug.utils.redirect()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>location</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The URL to redirect to.</li> <li>\n<strong>code</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a>) – The status code for the redirect.</li> <li>\n<strong>Response</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/wrappers/#werkzeug.wrappers.Response\" title=\"(in Werkzeug v3.1.x)\">Response</a><em>] </em><em>| </em><em>None</em>) – The response class to use. Not used when <code>current_app</code> is active, which uses <code>app.response_class</code>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/wrappers/#werkzeug.wrappers.Response\" title=\"(in Werkzeug v3.1.x)\">Response</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2: </span>Calls <code>current_app.redirect</code> if available instead of always using Werkzeug’s default <code>redirect</code>.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.make_response\">\n<code>flask.make_response(*args)</code> </dt> <dd>\n<p>Sometimes it is necessary to set additional headers in a view. Because views do not have to return response objects but can return a value that is converted into a response object by Flask itself, it becomes tricky to add headers to it. This function can be called instead of using a return and you will get a response object which you can use to attach headers.</p> <p>If view looked like this and you want to add a new header:</p> <pre data-language=\"python\">def index():\n    return render_template('index.html', foo=42)\n</pre> <p>You can now do something like this:</p> <pre data-language=\"python\">def index():\n    response = make_response(render_template('index.html', foo=42))\n    response.headers['X-Parachutes'] = 'parachutes are cool'\n    return response\n</pre> <p>This function accepts the very same arguments you can return from a view function. This for example creates a response with a 404 error code:</p> <pre data-language=\"python\">response = make_response(render_template('not_found.html'), 404)\n</pre> <p>The other use case of this function is to force the return value of a view function into a response which is helpful with view decorators:</p> <pre data-language=\"python\">response = make_response(view_function())\nresponse.headers['X-Parachutes'] = 'parachutes are cool'\n</pre> <p>Internally this function does the following things:</p> <ul class=\"simple\"> <li>if no arguments are passed, it creates a new response argument</li> <li>if one argument is passed, <a class=\"reference internal\" href=\"#flask.Flask.make_response\" title=\"flask.Flask.make_response\"><code>flask.Flask.make_response()</code></a> is invoked with it.</li> <li>if more than one argument is passed, the arguments are passed to the <a class=\"reference internal\" href=\"#flask.Flask.make_response\" title=\"flask.Flask.make_response\"><code>flask.Flask.make_response()</code></a> function as tuple.</li> </ul> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.6.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>args</strong> (<em>t.Any</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.after_this_request\">\n<code>flask.after_this_request(f)</code> </dt> <dd>\n<p>Executes a function after this request. This is useful to modify response objects. The function is passed the response object and has to return the same or a new one.</p> <p>Example:</p> <pre data-language=\"python\">@app.route('/')\ndef index():\n    @after_this_request\n    def add_header(response):\n        response.headers['X-Foo'] = 'Parachute'\n        return response\n    return 'Hello World!'\n</pre> <p>This is more useful if a function other than the view function wants to modify a response. For instance think of a decorator that wants to add some headers without converting the return value into a response object.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Awaitable\" title=\"(in Python v3.13)\">Awaitable</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>] | <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Awaitable\" title=\"(in Python v3.13)\">Awaitable</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.send_file\">\n<code>flask.send_file(path_or_file, mimetype=None, as_attachment=False, download_name=None, conditional=True, etag=True, last_modified=None, max_age=None)</code> </dt> <dd>\n<p>Send the contents of a file to the client.</p> <p>The first argument can be a file path or a file-like object. Paths are preferred in most cases because Werkzeug can manage the file and get extra information from the path. Passing a file-like object requires that the file is opened in binary mode, and is mostly useful when building a file in memory with <a class=\"reference external\" href=\"https://docs.python.org/3/library/io.html#io.BytesIO\" title=\"(in Python v3.13)\"><code>io.BytesIO</code></a>.</p> <p>Never pass file paths provided by a user. The path is assumed to be trusted, so a user could craft a path to access a file you didn’t intend. Use <a class=\"reference internal\" href=\"#flask.send_from_directory\" title=\"flask.send_from_directory\"><code>send_from_directory()</code></a> to safely serve user-requested paths from within a directory.</p> <p>If the WSGI server sets a <code>file_wrapper</code> in <code>environ</code>, it is used, otherwise Werkzeug’s built-in wrapper is used. Alternatively, if the HTTP server supports <code>X-Sendfile</code>, configuring Flask with <code>USE_X_SENDFILE = True</code> will tell the server to send the given path, which is much more efficient than reading it in Python.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>path_or_file</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><em>t.AnyStr</em><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>t.BinaryIO</em>) – The path to the file to send, relative to the current working directory if a relative path is given. Alternatively, a file-like object opened in binary mode. Make sure the file pointer is seeked to the start of the data.</li> <li>\n<strong>mimetype</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – The MIME type to send for the file. If not provided, it will try to detect it from the file name.</li> <li>\n<strong>as_attachment</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Indicate to a browser that it should offer to save the file instead of displaying it.</li> <li>\n<strong>download_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – The default name browsers will use when saving the file. Defaults to the passed file name.</li> <li>\n<strong>conditional</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Enable conditional and range responses based on request headers. Requires passing a file path and <code>environ</code>.</li> <li>\n<strong>etag</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Calculate an ETag for the file, which requires passing a file path. Can also be a string to use instead.</li> <li>\n<strong>last_modified</strong> (<em>datetime</em><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#float\" title=\"(in Python v3.13)\">float</a><em> | </em><em>None</em>) – The last modified time to send for the file, in seconds. If not provided, it will try to detect it from the file path.</li> <li>\n<strong>max_age</strong> (<em>None</em><em> | </em><em>(</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><em>t.Callable</em><em>[</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><em>None</em><em>]</em><em>)</em>) – How long the client should cache the file, in seconds. If set, <code>Cache-Control</code> will be <code>public</code>, otherwise it will be <code>no-cache</code> to prefer conditional caching.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>download_name</code> replaces the <code>attachment_filename</code> parameter. If <code>as_attachment=False</code>, it is passed with <code>Content-Disposition: inline</code> instead.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>max_age</code> replaces the <code>cache_timeout</code> parameter. <code>conditional</code> is enabled and <code>max_age</code> is not set by default.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>etag</code> replaces the <code>add_etags</code> parameter. It can be a string to use instead of generating one.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>Passing a file-like object that inherits from <a class=\"reference external\" href=\"https://docs.python.org/3/library/io.html#io.TextIOBase\" title=\"(in Python v3.13)\"><code>TextIOBase</code></a> will raise a <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ValueError\" title=\"(in Python v3.13)\"><code>ValueError</code></a> rather than sending an empty file.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0: </span>Moved the implementation to Werkzeug. This is now a wrapper to pass some Flask-specific arguments.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1: </span><code>filename</code> may be a <a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\"><code>PathLike</code></a> object.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1: </span>Passing a <a class=\"reference external\" href=\"https://docs.python.org/3/library/io.html#io.BytesIO\" title=\"(in Python v3.13)\"><code>BytesIO</code></a> object supports range requests.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0.3: </span>Filenames are encoded with ASCII instead of Latin-1 for broader compatibility with WSGI servers.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>UTF-8 filenames as specified in <a class=\"rfc reference external\" href=\"https://datatracker.ietf.org/doc/html/rfc2231.html\" id=\"index-1\"><strong>RFC 2231</strong></a> are supported.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.12: </span>The filename is no longer automatically inferred from file objects. If you want to use automatic MIME and etag support, pass a filename via <code>filename_or_fp</code> or <code>attachment_filename</code>.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.12: </span><code>attachment_filename</code> is preferred over <code>filename</code> for MIME detection.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span><code>cache_timeout</code> defaults to <a class=\"reference internal\" href=\"#flask.Flask.get_send_file_max_age\" title=\"flask.Flask.get_send_file_max_age\"><code>Flask.get_send_file_max_age()</code></a>.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.7: </span>MIME guessing and etag support for file-like objects was removed because it was unreliable. Pass a filename if you are able to, otherwise attach an etag yourself.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.5: </span>The <code>add_etags</code>, <code>cache_timeout</code> and <code>conditional</code> parameters were added. The default behavior is to add etags.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.2.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.send_from_directory\">\n<code>flask.send_from_directory(directory, path, **kwargs)</code> </dt> <dd>\n<p>Send a file from within a directory using <a class=\"reference internal\" href=\"#flask.send_file\" title=\"flask.send_file\"><code>send_file()</code></a>.</p> <pre data-language=\"python\">@app.route(\"/uploads/&lt;path:name&gt;\")\ndef download_file(name):\n    return send_from_directory(\n        app.config['UPLOAD_FOLDER'], name, as_attachment=True\n    )\n</pre> <p>This is a secure way to serve files from a folder, such as static files or uploads. Uses <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/utils/#werkzeug.security.safe_join\" title=\"(in Werkzeug v3.1.x)\"><code>safe_join()</code></a> to ensure the path coming from the client is not maliciously crafted to point outside the specified directory.</p> <p>If the final path does not point to an existing regular file, raises a 404 <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.NotFound\" title=\"(in Werkzeug v3.1.x)\"><code>NotFound</code></a> error.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>directory</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The directory that <code>path</code> must be located under, relative to the current application’s root path. This <em>must not</em> be a value provided by the client, otherwise it becomes insecure.</li> <li>\n<strong>path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The path to the file to send, relative to <code>directory</code>.</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>) – Arguments to pass to <a class=\"reference internal\" href=\"#flask.send_file\" title=\"flask.send_file\"><code>send_file()</code></a>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>path</code> replaces the <code>filename</code> parameter.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0: </span>Moved the implementation to Werkzeug. This is now a wrapper to pass some Flask-specific arguments.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.5.</span></p> </div> </details>\n</dd>\n</dl> </section> <section id=\"message-flashing\"> <h2>Message Flashing</h2> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.flash\">\n<code>flask.flash(message, category='message')</code> </dt> <dd>\n<p>Flashes a message to the next request. In order to remove the flashed message from the session and to display it to the user, the template has to call <a class=\"reference internal\" href=\"#flask.get_flashed_messages\" title=\"flask.get_flashed_messages\"><code>get_flashed_messages()</code></a>.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.3: </span><code>category</code> parameter added.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>message</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the message to be flashed.</li> <li>\n<strong>category</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the category for the message. The following values are recommended: <code>'message'</code> for any kind of message, <code>'error'</code> for errors, <code>'info'</code> for information messages and <code>'warning'</code> for warnings. However any kind of string can be used as category.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.get_flashed_messages\">\n<code>flask.get_flashed_messages(with_categories=False, category_filter=())</code> </dt> <dd>\n<p>Pulls all flashed messages from the session and returns them. Further calls in the same request to the function will return the same messages. By default just the messages are returned, but when <code>with_categories</code> is set to <code>True</code>, the return value will be a list of tuples in the form <code>(category, message)</code> instead.</p> <p>Filter the flashed messages to one or more categories by providing those categories in <code>category_filter</code>. This allows rendering categories in separate html blocks. The <code>with_categories</code> and <code>category_filter</code> arguments are distinct:</p> <ul class=\"simple\"> <li>\n<code>with_categories</code> controls whether categories are returned with message text (<code>True</code> gives a tuple, where <code>False</code> gives just the message text).</li> <li>\n<code>category_filter</code> filters the messages down to only those matching the provided categories.</li> </ul> <p>See <a class=\"reference internal\" href=\"../patterns/flashing/index\"><span class=\"doc\">Message Flashing</span></a> for examples.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span><code>category_filter</code> parameter added.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.3: </span><code>with_categories</code> parameter added.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>with_categories</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – set to <code>True</code> to also receive categories.</li> <li>\n<strong>category_filter</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterable\" title=\"(in Python v3.13)\">Iterable</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – filter of categories to limit return values. Only categories in the list will be returned.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>] | <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\">tuple</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>]]</p> </dd> </dl> </dd>\n</dl> </section> <section id=\"module-flask.json\"> <h2 id=\"json-support\">JSON Support</h2> <p>Flask uses Python’s built-in <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#module-json\" title=\"(in Python v3.13)\"><code>json</code></a> module for handling JSON by default. The JSON implementation can be changed by assigning a different provider to <a class=\"reference internal\" href=\"#flask.Flask.json_provider_class\" title=\"flask.Flask.json_provider_class\"><code>flask.Flask.json_provider_class</code></a> or <a class=\"reference internal\" href=\"#flask.Flask.json\" title=\"flask.Flask.json\"><code>flask.Flask.json</code></a>. The functions provided by <code>flask.json</code> will use methods on <code>app.json</code> if an app context is active.</p> <p>Jinja’s <code>|tojson</code> filter is configured to use the app’s JSON provider. The filter marks the output with <code>|safe</code>. Use it to render data inside HTML <code>&lt;script&gt;</code> tags.</p> <pre data-language=\"html+jinja\">&lt;script&gt;\n    const names = {{ names|tojson }};\n    renderChart(names, {{ axis_data|tojson }});\n&lt;/script&gt;\n</pre> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.json.jsonify\">\n<code>flask.json.jsonify(*args, **kwargs)</code> </dt> <dd>\n<p>Serialize the given arguments as JSON, and return a <a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\"><code>Response</code></a> object with the <code>application/json</code> mimetype. A dict or list returned from a view will be converted to a JSON response automatically without needing to call this.</p> <p>This requires an active request or application context, and calls <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.response\" title=\"flask.json.provider.JSONProvider.response\"><code>app.json.response()</code></a>.</p> <p>In debug mode, the output is formatted with indentation to make it easier to read. This may also be controlled by the provider.</p> <p>Either positional or keyword arguments can be given, not both. If no arguments are given, <code>None</code> is serialized.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<em>t.Any</em>) – A single value to serialize, or multiple values to treat as a list to serialize.</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>) – Treat as a dict to serialize.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Calls <code>current_app.json.response</code>, allowing an app to override the behavior.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0.2: </span><a class=\"reference external\" href=\"https://docs.python.org/3/library/decimal.html#decimal.Decimal\" title=\"(in Python v3.13)\"><code>decimal.Decimal</code></a> is supported by converting to a string.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.11: </span>Added support for serializing top-level arrays. This was a security risk in ancient browsers. See <a class=\"reference internal\" href=\"../web-security/index#security-json\"><span class=\"std std-ref\">JSON Security</span></a>.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.2.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.json.dumps\">\n<code>flask.json.dumps(obj, **kwargs)</code> </dt> <dd>\n<p>Serialize data as JSON.</p> <p>If <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is available, it will use its <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.dumps\" title=\"flask.json.provider.JSONProvider.dumps\"><code>app.json.dumps()</code></a> method, otherwise it will use <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.dumps\" title=\"(in Python v3.13)\"><code>json.dumps()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The data to serialize.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Arguments passed to the <code>dumps</code> implementation.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>The <code>app</code> parameter was removed.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Calls <code>current_app.json.dumps</code>, allowing an app to override the behavior.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0.2: </span><a class=\"reference external\" href=\"https://docs.python.org/3/library/decimal.html#decimal.Decimal\" title=\"(in Python v3.13)\"><code>decimal.Decimal</code></a> is supported by converting to a string.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>encoding</code> will be removed in Flask 2.1.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0.3: </span><code>app</code> can be passed directly, rather than requiring an app context for configuration.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.json.dump\">\n<code>flask.json.dump(obj, fp, **kwargs)</code> </dt> <dd>\n<p>Serialize data as JSON and write to a file.</p> <p>If <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is available, it will use its <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.dump\" title=\"flask.json.provider.JSONProvider.dump\"><code>app.json.dump()</code></a> method, otherwise it will use <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.dump\" title=\"(in Python v3.13)\"><code>json.dump()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The data to serialize.</li> <li>\n<strong>fp</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – A file opened for writing text. Should use the UTF-8 encoding to be valid JSON.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Arguments passed to the <code>dump</code> implementation.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>The <code>app</code> parameter was removed.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Calls <code>current_app.json.dump</code>, allowing an app to override the behavior.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>Writing to a binary file, and the <code>encoding</code> argument, will be removed in Flask 2.1.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.json.loads\">\n<code>flask.json.loads(s, **kwargs)</code> </dt> <dd>\n<p>Deserialize data as JSON.</p> <p>If <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is available, it will use its <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.loads\" title=\"flask.json.provider.JSONProvider.loads\"><code>app.json.loads()</code></a> method, otherwise it will use <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.loads\" title=\"(in Python v3.13)\"><code>json.loads()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>s</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>) – Text or UTF-8 bytes.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Arguments passed to the <code>loads</code> implementation.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>The <code>app</code> parameter was removed.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Calls <code>current_app.json.loads</code>, allowing an app to override the behavior.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>encoding</code> will be removed in Flask 2.1. The data must be a string or UTF-8 bytes.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0.3: </span><code>app</code> can be passed directly, rather than requiring an app context for configuration.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.json.load\">\n<code>flask.json.load(fp, **kwargs)</code> </dt> <dd>\n<p>Deserialize data as JSON read from a file.</p> <p>If <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> is available, it will use its <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.load\" title=\"flask.json.provider.JSONProvider.load\"><code>app.json.load()</code></a> method, otherwise it will use <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.load\" title=\"(in Python v3.13)\"><code>json.load()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>fp</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a>) – A file opened for reading text or UTF-8 bytes.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Arguments passed to the <code>load</code> implementation.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>The <code>app</code> parameter was removed.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Calls <code>current_app.json.load</code>, allowing an app to override the behavior.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>The <code>app</code> parameter will be removed in Flask 2.3.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span><code>encoding</code> will be removed in Flask 2.1. The file must be text mode, or binary mode with UTF-8 bytes.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.JSONProvider\">\n<code>class flask.json.provider.JSONProvider(app)</code> </dt> <dd>\n<p>A standard set of JSON operations for an application. Subclasses of this can be used to customize JSON behavior or use different JSON libraries.</p> <p>To implement a provider for a specific library, subclass this base class and implement at least <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.dumps\" title=\"flask.json.provider.JSONProvider.dumps\"><code>dumps()</code></a> and <a class=\"reference internal\" href=\"#flask.json.provider.JSONProvider.loads\" title=\"flask.json.provider.JSONProvider.loads\"><code>loads()</code></a>. All other methods have default implementations.</p> <p>To use a different provider, either subclass <code>Flask</code> and set <a class=\"reference internal\" href=\"#flask.Flask.json_provider_class\" title=\"flask.Flask.json_provider_class\"><code>json_provider_class</code></a> to a provider class, or set <a class=\"reference internal\" href=\"#flask.Flask.json\" title=\"flask.Flask.json\"><code>app.json</code></a> to an instance of the class.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<em>App</em>) – An application instance. This will be stored as a <code>weakref.proxy</code> on the <code>_app</code> attribute.</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2.</span></p> </div> </details><dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.JSONProvider.dumps\">\n<code>dumps(obj, **kwargs)</code> </dt> <dd>\n<p>Serialize data as JSON.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The data to serialize.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – May be passed to the underlying JSON library.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.JSONProvider.dump\">\n<code>dump(obj, fp, **kwargs)</code> </dt> <dd>\n<p>Serialize data as JSON and write to a file.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The data to serialize.</li> <li>\n<strong>fp</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – A file opened for writing text. Should use the UTF-8 encoding to be valid JSON.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – May be passed to the underlying JSON library.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.JSONProvider.loads\">\n<code>loads(s, **kwargs)</code> </dt> <dd>\n<p>Deserialize data as JSON.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>s</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>) – Text or UTF-8 bytes.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – May be passed to the underlying JSON library.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.JSONProvider.load\">\n<code>load(fp, **kwargs)</code> </dt> <dd>\n<p>Deserialize data as JSON read from a file.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>fp</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.IO\" title=\"(in Python v3.13)\">IO</a>) – A file opened for reading text or UTF-8 bytes.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – May be passed to the underlying JSON library.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.JSONProvider.response\">\n<code>response(*args, **kwargs)</code> </dt> <dd>\n<p>Serialize the given arguments as JSON, and return a <a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\"><code>Response</code></a> object with the <code>application/json</code> mimetype.</p> <p>The <a class=\"reference internal\" href=\"#flask.json.jsonify\" title=\"flask.json.jsonify\"><code>jsonify()</code></a> function calls this method for the current application.</p> <p>Either positional or keyword arguments can be given, not both. If no arguments are given, <code>None</code> is serialized.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<em>t.Any</em>) – A single value to serialize, or multiple values to treat as a list to serialize.</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>) – Treat as a dict to serialize.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider\">\n<code>class flask.json.provider.DefaultJSONProvider(app)</code> </dt> <dd>\n<p>Provide JSON operations using Python’s built-in <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#module-json\" title=\"(in Python v3.13)\"><code>json</code></a> library. Serializes the following additional data types:</p> <ul class=\"simple\"> <li>\n<a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime\" title=\"(in Python v3.13)\"><code>datetime.datetime</code></a> and <a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.date\" title=\"(in Python v3.13)\"><code>datetime.date</code></a> are serialized to <a class=\"rfc reference external\" href=\"https://datatracker.ietf.org/doc/html/rfc822.html\" id=\"index-2\"><strong>RFC 822</strong></a> strings. This is the same as the HTTP date format.</li> <li>\n<a class=\"reference external\" href=\"https://docs.python.org/3/library/uuid.html#uuid.UUID\" title=\"(in Python v3.13)\"><code>uuid.UUID</code></a> is serialized to a string.</li> <li>\n<code>dataclasses.dataclass</code> is passed to <a class=\"reference external\" href=\"https://docs.python.org/3/library/dataclasses.html#dataclasses.asdict\" title=\"(in Python v3.13)\"><code>dataclasses.asdict()</code></a>.</li> <li>\n<code>Markup</code> (or any object with a <code>__html__</code> method) will call the <code>__html__</code> method to get a string.</li> </ul> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<em>App</em>)</p> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.default\">\n<code>static default(o)</code> </dt> <dd>\n<p>Apply this function to any object that <code>json.dumps()</code> does not know how to serialize. It should return a valid JSON type or raise a <code>TypeError</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>o</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.ensure_ascii\">\n<code>ensure_ascii = True</code> </dt> <dd>\n<p>Replace non-ASCII characters with escape sequences. This may be more compatible with some clients, but can be disabled for better performance and size.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.sort_keys\">\n<code>sort_keys = True</code> </dt> <dd>\n<p>Sort the keys in any serialized dicts. This may be useful for some caching situations, but can be disabled for better performance. When enabled, keys must all be strings, they are not converted before sorting.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.compact\">\n<code>compact: bool | None = None</code> </dt> <dd>\n<p>If <code>True</code>, or <code>None</code> out of debug mode, the <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.response\" title=\"flask.json.provider.DefaultJSONProvider.response\"><code>response()</code></a> output will not add indentation, newlines, or spaces. If <code>False</code>, or <code>None</code> in debug mode, it will use a non-compact representation.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.mimetype\">\n<code>mimetype = 'application/json'</code> </dt> <dd>\n<p>The mimetype set in <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.response\" title=\"flask.json.provider.DefaultJSONProvider.response\"><code>response()</code></a>.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.dumps\">\n<code>dumps(obj, **kwargs)</code> </dt> <dd>\n<p>Serialize data as JSON to a string.</p> <p>Keyword arguments are passed to <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.dumps\" title=\"(in Python v3.13)\"><code>json.dumps()</code></a>. Sets some parameter defaults from the <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.default\" title=\"flask.json.provider.DefaultJSONProvider.default\"><code>default</code></a>, <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.ensure_ascii\" title=\"flask.json.provider.DefaultJSONProvider.ensure_ascii\"><code>ensure_ascii</code></a>, and <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.sort_keys\" title=\"flask.json.provider.DefaultJSONProvider.sort_keys\"><code>sort_keys</code></a> attributes.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The data to serialize.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Passed to <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.dumps\" title=\"(in Python v3.13)\"><code>json.dumps()</code></a>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.loads\">\n<code>loads(s, **kwargs)</code> </dt> <dd>\n<p>Deserialize data as JSON from a string or bytes.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>s</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\">bytes</a>) – Text or UTF-8 bytes.</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – Passed to <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.loads\" title=\"(in Python v3.13)\"><code>json.loads()</code></a>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.provider.DefaultJSONProvider.response\">\n<code>response(*args, **kwargs)</code> </dt> <dd>\n<p>Serialize the given arguments as JSON, and return a <a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\"><code>Response</code></a> object with it. The response mimetype will be “application/json” and can be changed with <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.mimetype\" title=\"flask.json.provider.DefaultJSONProvider.mimetype\"><code>mimetype</code></a>.</p> <p>If <a class=\"reference internal\" href=\"#flask.json.provider.DefaultJSONProvider.compact\" title=\"flask.json.provider.DefaultJSONProvider.compact\"><code>compact</code></a> is <code>False</code> or debug mode is enabled, the output will be formatted to be easier to read.</p> <p>Either positional or keyword arguments can be given, not both. If no arguments are given, <code>None</code> is serialized.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<em>t.Any</em>) – A single value to serialize, or multiple values to treat as a list to serialize.</li> <li>\n<strong>kwargs</strong> (<em>t.Any</em>) – Treat as a dict to serialize.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference internal\" href=\"#flask.Response\" title=\"flask.Response\">Response</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <section id=\"tagged-json\"> <h3 id=\"module-flask.json.tag\">Tagged JSON</h3> <p>A compact representation for lossless serialization of non-standard JSON types. <a class=\"reference internal\" href=\"#flask.sessions.SecureCookieSessionInterface\" title=\"flask.sessions.SecureCookieSessionInterface\"><code>SecureCookieSessionInterface</code></a> uses this to serialize the session data, but it may be useful in other places. It can be extended to support other types.</p> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer\">\n<code>class flask.json.tag.TaggedJSONSerializer</code> </dt> <dd>\n<p>Serializer that uses a tag system to compactly represent objects that are not JSON types. Passed as the intermediate serializer to <code>itsdangerous.Serializer</code>.</p> <p>The following extra types are supported:</p> <ul class=\"simple\"> <li><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\"><code>dict</code></a></li> <li><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" title=\"(in Python v3.13)\"><code>tuple</code></a></li> <li><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#bytes\" title=\"(in Python v3.13)\"><code>bytes</code></a></li> <li><code>Markup</code></li> <li><a class=\"reference external\" href=\"https://docs.python.org/3/library/uuid.html#uuid.UUID\" title=\"(in Python v3.13)\"><code>UUID</code></a></li> <li><a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime\" title=\"(in Python v3.13)\"><code>datetime</code></a></li> </ul>  <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer.default_tags\">\n<code>default_tags = [&lt;class 'flask.json.tag.TagDict'&gt;, &lt;class 'flask.json.tag.PassDict'&gt;, &lt;class 'flask.json.tag.TagTuple'&gt;, &lt;class 'flask.json.tag.PassList'&gt;, &lt;class 'flask.json.tag.TagBytes'&gt;, &lt;class 'flask.json.tag.TagMarkup'&gt;, &lt;class 'flask.json.tag.TagUUID'&gt;, &lt;class 'flask.json.tag.TagDateTime'&gt;]</code> </dt> <dd>\n<p>Tag classes to bind when creating the serializer. Other tags can be added later using <a class=\"reference internal\" href=\"#flask.json.tag.TaggedJSONSerializer.register\" title=\"flask.json.tag.TaggedJSONSerializer.register\"><code>register()</code></a>.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer.register\">\n<code>register(tag_class, force=False, index=None)</code> </dt> <dd>\n<p>Register a new tag with this serializer.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>tag_class</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#type\" title=\"(in Python v3.13)\">type</a><em>[</em><a class=\"reference internal\" href=\"#flask.json.tag.JSONTag\" title=\"flask.json.tag.JSONTag\">JSONTag</a><em>]</em>) – tag class to register. Will be instantiated with this serializer instance.</li> <li>\n<strong>force</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – overwrite an existing tag. If false (default), a <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#KeyError\" title=\"(in Python v3.13)\"><code>KeyError</code></a> is raised.</li> <li>\n<strong>index</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#int\" title=\"(in Python v3.13)\">int</a><em> | </em><em>None</em>) – index to insert the new tag in the tag order. Useful when the new tag is a special case of an existing tag. If <code>None</code> (default), the tag is appended to the end of the order.</li> </ul> </dd> <dt class=\"field-even\">Raises<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#KeyError\" title=\"(in Python v3.13)\"><strong>KeyError</strong></a> – if the tag key is already registered and <code>force</code> is not true.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer.tag\">\n<code>tag(value)</code> </dt> <dd>\n<p>Convert a value to a tagged representation if necessary.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer.untag\">\n<code>untag(value)</code> </dt> <dd>\n<p>Convert a tagged representation back to the original type.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer.dumps\">\n<code>dumps(value)</code> </dt> <dd>\n<p>Tag the value and dump it to a compact JSON string.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.TaggedJSONSerializer.loads\">\n<code>loads(value)</code> </dt> <dd>\n<p>Load data from a JSON string and deserialized any tagged objects.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.JSONTag\">\n<code>class flask.json.tag.JSONTag(serializer)</code> </dt> <dd>\n<p>Base class for defining type tags for <a class=\"reference internal\" href=\"#flask.json.tag.TaggedJSONSerializer\" title=\"flask.json.tag.TaggedJSONSerializer\"><code>TaggedJSONSerializer</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>serializer</strong> (<a class=\"reference internal\" href=\"#flask.json.tag.TaggedJSONSerializer\" title=\"flask.json.tag.TaggedJSONSerializer\">TaggedJSONSerializer</a>)</p> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.JSONTag.key\">\n<code>key: str = ''</code> </dt> <dd>\n<p>The tag to mark the serialized object with. If empty, this tag is only used as an intermediate step during tagging.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.JSONTag.check\">\n<code>check(value)</code> </dt> <dd>\n<p>Check if the given value should be tagged by this tag.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.JSONTag.to_json\">\n<code>to_json(value)</code> </dt> <dd>\n<p>Convert the Python object to an object that is a valid JSON type. The tag will be added later.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.JSONTag.to_python\">\n<code>to_python(value)</code> </dt> <dd>\n<p>Convert the JSON representation back to the correct type. The tag will already be removed.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.json.tag.JSONTag.tag\">\n<code>tag(value)</code> </dt> <dd>\n<p>Convert the value to a valid JSON type and add the tag structure around it.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>value</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <p>Let’s see an example that adds support for <a class=\"reference external\" href=\"https://docs.python.org/3/library/collections.html#collections.OrderedDict\" title=\"(in Python v3.13)\"><code>OrderedDict</code></a>. Dicts don’t have an order in JSON, so to handle this we will dump the items as a list of <code>[key, value]</code> pairs. Subclass <a class=\"reference internal\" href=\"#flask.json.tag.JSONTag\" title=\"flask.json.tag.JSONTag\"><code>JSONTag</code></a> and give it the new key <code>' od'</code> to identify the type. The session serializer processes dicts first, so insert the new tag at the front of the order since <code>OrderedDict</code> must be processed before <code>dict</code>.</p> <pre data-language=\"python\">from flask.json.tag import JSONTag\n\nclass TagOrderedDict(JSONTag):\n    __slots__ = ('serializer',)\n    key = ' od'\n\n    def check(self, value):\n        return isinstance(value, OrderedDict)\n\n    def to_json(self, value):\n        return [[k, self.serializer.tag(v)] for k, v in iteritems(value)]\n\n    def to_python(self, value):\n        return OrderedDict(value)\n\napp.session_interface.serializer.register(TagOrderedDict, index=0)\n</pre> </section> </section> <section id=\"template-rendering\"> <h2>Template Rendering</h2> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.render_template\">\n<code>flask.render_template(template_name_or_list, **context)</code> </dt> <dd>\n<p>Render a template by name with the given context.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>template_name_or_list</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/api/#jinja2.Template\" title=\"(in Jinja v3.1.x)\">Template</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/api/#jinja2.Template\" title=\"(in Jinja v3.1.x)\">Template</a><em>]</em>) – The name of the template to render. If a list is given, the first name to exist will be rendered.</li> <li>\n<strong>context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The variables to make available in the template.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.render_template_string\">\n<code>flask.render_template_string(source, **context)</code> </dt> <dd>\n<p>Render a template from the given source string with the given context.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>source</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The source code of the template to render.</li> <li>\n<strong>context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The variables to make available in the template.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.stream_template\">\n<code>flask.stream_template(template_name_or_list, **context)</code> </dt> <dd>\n<p>Render a template by name with the given context as a stream. This returns an iterator of strings, which can be used as a streaming response from a view.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>template_name_or_list</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/api/#jinja2.Template\" title=\"(in Jinja v3.1.x)\">Template</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://jinja.palletsprojects.com/en/stable/api/#jinja2.Template\" title=\"(in Jinja v3.1.x)\">Template</a><em>]</em>) – The name of the template to render. If a list is given, the first name to exist will be rendered.</li> <li>\n<strong>context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The variables to make available in the template.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>]</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.stream_template_string\">\n<code>flask.stream_template_string(source, **context)</code> </dt> <dd>\n<p>Render a template from the given source string with the given context as a stream. This returns an iterator of strings, which can be used as a streaming response from a view.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>source</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – The source code of the template to render.</li> <li>\n<strong>context</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – The variables to make available in the template.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>]</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.get_template_attribute\">\n<code>flask.get_template_attribute(template_name, attribute)</code> </dt> <dd>\n<p>Loads a macro (or variable) a template exports. This can be used to invoke a macro from within Python code. If you for example have a template named <code>_cider.html</code> with the following contents:</p> <pre data-language=\"html+jinja\">{% macro hello(name) %}Hello {{ name }}!{% endmacro %}\n</pre> <p>You can access this from Python code like this:</p> <pre data-language=\"python\">hello = get_template_attribute('_cider.html', 'hello')\nreturn hello('World')\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.2.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>template_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the name of the template</li> <li>\n<strong>attribute</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – the name of the variable of macro to access</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> </section> <section id=\"configuration\"> <h2>Configuration</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.Config\">\n<code>class flask.Config(root_path, defaults=None)</code> </dt> <dd>\n<p>Works exactly like a dict but provides ways to fill it from files or special dictionaries. There are two common patterns to populate the config.</p> <p>Either you can fill the config from a config file:</p> <pre data-language=\"python\">app.config.from_pyfile('yourconfig.cfg')\n</pre> <p>Or alternatively you can define the configuration options in the module that calls <a class=\"reference internal\" href=\"#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a> or provide an import path to a module that should be loaded. It is also possible to tell it to use the same module and with that provide the configuration values just before the call:</p> <pre data-language=\"python\">DEBUG = True\nSECRET_KEY = 'development key'\napp.config.from_object(__name__)\n</pre> <p>In both cases (loading from any Python file or loading from modules), only uppercase keys are added to the config. This makes it possible to use lowercase values in the config file for temporary values that are not added to the config or to define the config keys in the same file that implements the application.</p> <p>Probably the most interesting way to load configurations is from an environment variable pointing to a file:</p> <pre data-language=\"python\">app.config.from_envvar('YOURAPPLICATION_SETTINGS')\n</pre> <p>In this case before launching the application you have to set this environment variable to the file you want to use. On Linux and OS X use the export statement:</p> <pre data-language=\"python\">export YOURAPPLICATION_SETTINGS='/path/to/config/file'\n</pre> <p>On windows use <code>set</code> instead.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>root_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">os.PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – path to which files are read relative from. When the config object is created by the application, this is the application’s <a class=\"reference internal\" href=\"#flask.Flask.root_path\" title=\"flask.Flask.root_path\"><code>root_path</code></a>.</li> <li>\n<strong>defaults</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><em>t.Any</em><em>] </em><em>| </em><em>None</em>) – an optional dictionary of default values</li> </ul> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.from_envvar\">\n<code>from_envvar(variable_name, silent=False)</code> </dt> <dd>\n<p>Loads a configuration from an environment variable pointing to a configuration file. This is basically just a shortcut with nicer error messages for this line of code:</p> <pre data-language=\"python\">app.config.from_pyfile(os.environ['YOURAPPLICATION_SETTINGS'])\n</pre> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>variable_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – name of the environment variable</li> <li>\n<strong>silent</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – set to <code>True</code> if you want silent failure for missing files.</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><code>True</code> if the file was loaded successfully.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.from_prefixed_env\">\n<code>from_prefixed_env(prefix='FLASK', *, loads=json.loads)</code> </dt> <dd>\n<p>Load any environment variables that start with <code>FLASK_</code>, dropping the prefix from the env key for the config key. Values are passed through a loading function to attempt to convert them to more specific types than strings.</p> <p>Keys are loaded in <a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#sorted\" title=\"(in Python v3.13)\"><code>sorted()</code></a> order.</p> <p>The default loading function attempts to parse values as any valid JSON type, including dicts and lists.</p> <p>Specific items in nested dicts can be set by separating the keys with double underscores (<code>__</code>). If an intermediate key doesn’t exist, it will be initialized to an empty dict.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>prefix</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – Load env vars that start with this prefix, separated with an underscore (<code>_</code>).</li> <li>\n<strong>loads</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><em>[</em><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>]</em>) – Pass each string value to this function and use the returned value as the config value. If any error is raised it is ignored and the value remains a string. The default is <a class=\"reference internal\" href=\"#flask.json.loads\" title=\"flask.json.loads\"><code>json.loads()</code></a>.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.1.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.from_pyfile\">\n<code>from_pyfile(filename, silent=False)</code> </dt> <dd>\n<p>Updates the values in the config from a Python file. This function behaves as if the file was imported as module with the <a class=\"reference internal\" href=\"#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a> function.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – the filename of the config. This can either be an absolute filename or a filename relative to the root path.</li> <li>\n<strong>silent</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – set to <code>True</code> if you want silent failure for missing files.</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><code>True</code> if the file was loaded successfully.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7: </span><code>silent</code> parameter.</p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.from_object\">\n<code>from_object(obj)</code> </dt> <dd>\n<p>Updates the values from the given object. An object can be of one of the following two types:</p> <ul class=\"simple\"> <li>a string: in this case the object with that name will be imported</li> <li>an actual object reference: that object is used directly</li> </ul> <p>Objects are usually either modules or classes. <a class=\"reference internal\" href=\"#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a> loads only the uppercase attributes of the module/class. A <code>dict</code> object will not work with <a class=\"reference internal\" href=\"#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a> because the keys of a <code>dict</code> are not attributes of the <code>dict</code> class.</p> <p>Example of module-based configuration:</p> <pre data-language=\"python\">app.config.from_object('yourapplication.default_config')\nfrom yourapplication import default_config\napp.config.from_object(default_config)\n</pre> <p>Nothing is done to the object before loading. If the object is a class and has <code>@property</code> attributes, it needs to be instantiated before being passed to this method.</p> <p>You should not use this function to load the actual configuration but rather configuration defaults. The actual config should be loaded with <a class=\"reference internal\" href=\"#flask.Config.from_pyfile\" title=\"flask.Config.from_pyfile\"><code>from_pyfile()</code></a> and ideally from a location not within the package because the package might be installed system wide.</p> <p>See <a class=\"reference internal\" href=\"../config/index#config-dev-prod\"><span class=\"std std-ref\">Development / Production</span></a> for an example of class-based configuration using <a class=\"reference internal\" href=\"#flask.Config.from_object\" title=\"flask.Config.from_object\"><code>from_object()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>obj</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#object\" title=\"(in Python v3.13)\">object</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – an import name or object</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.from_file\">\n<code>from_file(filename, load, silent=False, text=True)</code> </dt> <dd>\n<p>Update the values in the config from a file that is loaded using the <code>load</code> parameter. The loaded data is passed to the <a class=\"reference internal\" href=\"#flask.Config.from_mapping\" title=\"flask.Config.from_mapping\"><code>from_mapping()</code></a> method.</p> <pre data-language=\"python\">import json\napp.config.from_file(\"config.json\", load=json.load)\n\nimport tomllib\napp.config.from_file(\"config.toml\", load=tomllib.load, text=False)\n</pre> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>filename</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – The path to the data file. This can be an absolute path or relative to the config root path.</li> <li>\n<strong>load</strong> (<code>Callable[[Reader], Mapping]</code> where <code>Reader</code> implements a <code>read</code> method.) – A callable that takes a file handle and returns a mapping of loaded data from the file.</li> <li>\n<strong>silent</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Ignore the file if it doesn’t exist.</li> <li>\n<strong>text</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Open the file in text or binary mode.</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><code>True</code> if the file was loaded successfully.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.3: </span>The <code>text</code> parameter was added.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.0.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.from_mapping\">\n<code>from_mapping(mapping=None, **kwargs)</code> </dt> <dd>\n<p>Updates the config like <code>update()</code> ignoring items with non-upper keys.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>Always returns <code>True</code>.</p> </dd> <dt class=\"field-even\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<ul class=\"simple\"> <li>\n<strong>mapping</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Mapping\" title=\"(in Python v3.13)\">Mapping</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a><em>] </em><em>| </em><em>None</em>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.Config.get_namespace\">\n<code>get_namespace(namespace, lowercase=True, trim_namespace=True)</code> </dt> <dd>\n<p>Returns a dictionary containing a subset of configuration options that match the specified namespace/prefix. Example usage:</p> <pre data-language=\"python\">app.config['IMAGE_STORE_TYPE'] = 'fs'\napp.config['IMAGE_STORE_PATH'] = '/var/app/images'\napp.config['IMAGE_STORE_BASE_URL'] = 'http://img.website.com'\nimage_store_config = app.config.get_namespace('IMAGE_STORE_')\n</pre> <p>The resulting dictionary <code>image_store_config</code> would look like:</p> <pre data-language=\"python\">{\n    'type': 'fs',\n    'path': '/var/app/images',\n    'base_url': 'http://img.website.com'\n}\n</pre> <p>This is often useful when configuration options map directly to keyword arguments in functions or class constructors.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>namespace</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>) – a configuration namespace</li> <li>\n<strong>lowercase</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – a flag indicating if the keys of the resulting dictionary should be lowercase</li> <li>\n<strong>trim_namespace</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – a flag indicating if the keys of the resulting dictionary should not include the namespace</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#dict\" title=\"(in Python v3.13)\">dict</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>, <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]</p> </dd> </dl> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.11.</span></p> </div> </details>\n</dd>\n</dl> </dd>\n</dl> </section> <section id=\"stream-helpers\"> <h2>Stream Helpers</h2> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.stream_with_context\">\n<code>flask.stream_with_context(generator_or_function: Iterator) → Iterator</code> </dt> <dt class=\"sig sig-object py\"> <span class=\"sig-prename descclassname\">flask.</span><span class=\"sig-name descname\">stream_with_context</span><span class=\"sig-paren\">(</span><em class=\"sig-param\"><span class=\"n\">generator_or_function</span><span class=\"p\">:</span><span class=\"n\"><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><span class=\"p\">[</span><span class=\"p\">[</span><span class=\"p\">...</span><span class=\"p\">]</span><span class=\"p\">,</span><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a><span class=\"p\">]</span></span></em><span class=\"sig-paren\">)</span> <span class=\"sig-return\"><span class=\"sig-return-icon\">→</span> <span class=\"sig-return-typehint\"><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a><span class=\"p\">[</span><span class=\"p\">[</span><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a><span class=\"p\">]</span><span class=\"p\">,</span><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Iterator\" title=\"(in Python v3.13)\">Iterator</a><span class=\"p\">]</span></span></span>\n</dt> <dd>\n<p>Request contexts disappear when the response is started on the server. This is done for efficiency reasons and to make it less likely to encounter memory leaks with badly written WSGI middlewares. The downside is that if you are using streamed responses, the generator cannot access request bound information any more.</p> <p>This function however can help you keep the context around for longer:</p> <pre data-language=\"python\">from flask import stream_with_context, request, Response\n\n@app.route('/stream')\ndef streamed_response():\n    @stream_with_context\n    def generate():\n        yield 'Hello '\n        yield request.args['name']\n        yield '!'\n    return Response(generate())\n</pre> <p>Alternatively it can also be used around a specific generator:</p> <pre data-language=\"python\">from flask import stream_with_context, request, Response\n\n@app.route('/stream')\ndef streamed_response():\n    def generate():\n        yield 'Hello '\n        yield request.args['name']\n        yield '!'\n    return Response(stream_with_context(generate()))\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.9.</span></p> </div> </details>\n</dd>\n</dl> </section> <section id=\"useful-internals\"> <h2>Useful Internals</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.RequestContext\">\n<code>class flask.ctx.RequestContext(app, environ, request=None, session=None)</code> </dt> <dd>\n<p>The request context contains per-request information. The Flask app creates and pushes it at the beginning of the request, then pops it at the end of the request. It will create the URL adapter and request object for the WSGI environment provided.</p> <p>Do not attempt to use this class directly, instead use <a class=\"reference internal\" href=\"#flask.Flask.test_request_context\" title=\"flask.Flask.test_request_context\"><code>test_request_context()</code></a> and <a class=\"reference internal\" href=\"#flask.Flask.request_context\" title=\"flask.Flask.request_context\"><code>request_context()</code></a> to create this object.</p> <p>When the request context is popped, it will evaluate all the functions registered on the application for teardown execution (<a class=\"reference internal\" href=\"#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a>).</p> <p>The request context is automatically popped at the end of the request. When using the interactive debugger, the context will be restored so <code>request</code> is still accessible. Similarly, the test client can preserve the context after the request ends. However, teardown functions may already have closed some resources such as database connections.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</li> <li>\n<strong>environ</strong> (<em>WSGIEnvironment</em>)</li> <li>\n<strong>request</strong> (<a class=\"reference internal\" href=\"#flask.Request\" title=\"flask.Request\">Request</a><em> | </em><em>None</em>)</li> <li>\n<strong>session</strong> (<a class=\"reference internal\" href=\"#flask.sessions.SessionMixin\" title=\"flask.sessions.SessionMixin\">SessionMixin</a><em> | </em><em>None</em>)</li> </ul> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.RequestContext.copy\">\n<code>copy()</code> </dt> <dd>\n<p>Creates a copy of this request context with the same request object. This can be used to move a request context to a different greenlet. Because the actual request object is the same this cannot be used to move a request context to a different thread unless access to the request object is locked.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1: </span>The current session object is used instead of reloading the original data. This prevents <code>flask.session</code> pointing to an out-of-date object.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\">RequestContext</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.RequestContext.match_request\">\n<code>match_request()</code> </dt> <dd>\n<p>Can be overridden by a subclass to hook into the matching of the request.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.RequestContext.pop\">\n<code>pop(exc=_sentinel)</code> </dt> <dd>\n<p>Pops the request context and unbinds it by doing that. This will also trigger the execution of functions registered by the <a class=\"reference internal\" href=\"#flask.Flask.teardown_request\" title=\"flask.Flask.teardown_request\"><code>teardown_request()</code></a> decorator.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 0.9: </span>Added the <code>exc</code> argument.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>exc</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#BaseException\" title=\"(in Python v3.13)\">BaseException</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.flask.globals.request_ctx\">\n<code>flask.globals.request_ctx</code> </dt> <dd>\n<p>The current <a class=\"reference internal\" href=\"#flask.ctx.RequestContext\" title=\"flask.ctx.RequestContext\"><code>RequestContext</code></a>. If a request context is not active, accessing attributes on this proxy will raise a <code>RuntimeError</code>.</p> <p>This is an internal object that is essential to how Flask handles requests. Accessing this should not be needed in most cases. Most likely you want <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a> and <a class=\"reference internal\" href=\"#flask.session\" title=\"flask.session\"><code>session</code></a> instead.</p> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.AppContext\">\n<code>class flask.ctx.AppContext(app)</code> </dt> <dd>\n<p>The app context contains application-specific information. An app context is created and pushed at the beginning of each request if one is not already active. An app context is also pushed when running CLI commands.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>app</strong> (<a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a>)</p> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.AppContext.push\">\n<code>push()</code> </dt> <dd>\n<p>Binds the app context to the current context.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.ctx.AppContext.pop\">\n<code>pop(exc=_sentinel)</code> </dt> <dd>\n<p>Pops the app context.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>exc</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#BaseException\" title=\"(in Python v3.13)\">BaseException</a><em> | </em><em>None</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.flask.globals.app_ctx\">\n<code>flask.globals.app_ctx</code> </dt> <dd>\n<p>The current <a class=\"reference internal\" href=\"#flask.ctx.AppContext\" title=\"flask.ctx.AppContext\"><code>AppContext</code></a>. If an app context is not active, accessing attributes on this proxy will raise a <code>RuntimeError</code>.</p> <p>This is an internal object that is essential to how Flask handles requests. Accessing this should not be needed in most cases. Most likely you want <a class=\"reference internal\" href=\"#flask.current_app\" title=\"flask.current_app\"><code>current_app</code></a> and <a class=\"reference internal\" href=\"#flask.g\" title=\"flask.g\"><code>g</code></a> instead.</p> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState\">\n<code>class flask.blueprints.BlueprintSetupState(blueprint, app, options, first_registration)</code> </dt> <dd>\n<p>Temporary holder object for registering a blueprint with the application. An instance of this class is created by the <a class=\"reference internal\" href=\"#flask.Blueprint.make_setup_state\" title=\"flask.Blueprint.make_setup_state\"><code>make_setup_state()</code></a> method and later passed to all register callback functions.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>blueprint</strong> (<a class=\"reference internal\" href=\"#flask.Blueprint\" title=\"flask.blueprints.Blueprint\">Blueprint</a>)</li> <li>\n<strong>app</strong> (<em>App</em>)</li> <li>\n<strong>options</strong> (<em>t.Any</em>)</li> <li>\n<strong>first_registration</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.app\">\n<code>app</code> </dt> <dd>\n<p>a reference to the current application</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.blueprint\">\n<code>blueprint</code> </dt> <dd>\n<p>a reference to the blueprint that created this setup state.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.options\">\n<code>options</code> </dt> <dd>\n<p>a dictionary with all options that were passed to the <a class=\"reference internal\" href=\"#flask.Flask.register_blueprint\" title=\"flask.Flask.register_blueprint\"><code>register_blueprint()</code></a> method.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.first_registration\">\n<code>first_registration</code> </dt> <dd>\n<p>as blueprints can be registered multiple times with the application and not everything wants to be registered multiple times on it, this attribute can be used to figure out if the blueprint was registered in the past already.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.subdomain\">\n<code>subdomain</code> </dt> <dd>\n<p>The subdomain that the blueprint should be active for, <code>None</code> otherwise.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.url_prefix\">\n<code>url_prefix</code> </dt> <dd>\n<p>The prefix that should be used for all URLs defined on the blueprint.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.url_defaults\">\n<code>url_defaults</code> </dt> <dd>\n<p>A dictionary with URL defaults that is added to each and every URL that was defined with the blueprint.</p> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.blueprints.BlueprintSetupState.add_url_rule\">\n<code>add_url_rule(rule, endpoint=None, view_func=None, **options)</code> </dt> <dd>\n<p>A helper method to register a rule (and optionally a view function) to the application. The endpoint is automatically prefixed with the blueprint’s name.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>rule</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>endpoint</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>view_func</strong> (<em>ft.RouteCallable</em><em> | </em><em>None</em>)</li> <li>\n<strong>options</strong> (<em>t.Any</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>None</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"signals\"> <h2 id=\"core-signals-list\">Signals</h2> <p>Signals are provided by the <a class=\"reference external\" href=\"https://blinker.readthedocs.io/\">Blinker</a> library. See <a class=\"reference internal\" href=\"../signals/index\"><span class=\"doc\">Signals</span></a> for an introduction.</p> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.template_rendered\">\n<code>flask.template_rendered</code> </dt> <dd>\n<p>This signal is sent when a template was successfully rendered. The signal is invoked with the instance of the template as <code>template</code> and the context as dictionary (named <code>context</code>).</p> <p>Example subscriber:</p> <pre data-language=\"python\">def log_template_renders(sender, template, context, **extra):\n    sender.logger.debug('Rendering template \"%s\" with context %s',\n                        template.name or 'string template',\n                        context)\n\nfrom flask import template_rendered\ntemplate_rendered.connect(log_template_renders, app)\n</pre> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\"> <span class=\"sig-prename descclassname\">flask.</span><span class=\"sig-name descname\">before_render_template</span>\n</dt> <dd>\n<p>This signal is sent before template rendering process. The signal is invoked with the instance of the template as <code>template</code> and the context as dictionary (named <code>context</code>).</p> <p>Example subscriber:</p> <pre data-language=\"python\">def log_template_renders(sender, template, context, **extra):\n    sender.logger.debug('Rendering template \"%s\" with context %s',\n                        template.name or 'string template',\n                        context)\n\nfrom flask import before_render_template\nbefore_render_template.connect(log_template_renders, app)\n</pre> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.request_started\">\n<code>flask.request_started</code> </dt> <dd>\n<p>This signal is sent when the request context is set up, before any request processing happens. Because the request context is already bound, the subscriber can access the request with the standard global proxies such as <a class=\"reference internal\" href=\"#flask.request\" title=\"flask.request\"><code>request</code></a>.</p> <p>Example subscriber:</p> <pre data-language=\"python\">def log_request(sender, **extra):\n    sender.logger.debug('Request context is set up')\n\nfrom flask import request_started\nrequest_started.connect(log_request, app)\n</pre> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.request_finished\">\n<code>flask.request_finished</code> </dt> <dd>\n<p>This signal is sent right before the response is sent to the client. It is passed the response to be sent named <code>response</code>.</p> <p>Example subscriber:</p> <pre data-language=\"python\">def log_response(sender, response, **extra):\n    sender.logger.debug('Request context is about to close down. '\n                        'Response: %s', response)\n\nfrom flask import request_finished\nrequest_finished.connect(log_response, app)\n</pre> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.got_request_exception\">\n<code>flask.got_request_exception</code> </dt> <dd>\n<p>This signal is sent when an unhandled exception happens during request processing, including when debugging. The exception is passed to the subscriber as <code>exception</code>.</p> <p>This signal is not sent for <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/exceptions/#werkzeug.exceptions.HTTPException\" title=\"(in Werkzeug v3.1.x)\"><code>HTTPException</code></a>, or other exceptions that have error handlers registered, unless the exception was raised from an error handler.</p> <p>This example shows how to do some extra logging if a theoretical <code>SecurityException</code> was raised:</p> <pre data-language=\"python\">from flask import got_request_exception\n\ndef log_security_exception(sender, exception, **extra):\n    if not isinstance(exception, SecurityException):\n        return\n\n    security_logger.exception(\n        f\"SecurityException at {request.url!r}\",\n        exc_info=exception,\n    )\n\ngot_request_exception.connect(log_security_exception, app)\n</pre> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.request_tearing_down\">\n<code>flask.request_tearing_down</code> </dt> <dd>\n<p>This signal is sent when the request is tearing down. This is always called, even if an exception is caused. Currently functions listening to this signal are called after the regular teardown handlers, but this is not something you can rely on.</p> <p>Example subscriber:</p> <pre data-language=\"python\">def close_db_connection(sender, **extra):\n    session.close()\n\nfrom flask import request_tearing_down\nrequest_tearing_down.connect(close_db_connection, app)\n</pre> <p>As of Flask 0.9, this will also be passed an <code>exc</code> keyword argument that has a reference to the exception that caused the teardown if there was one.</p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.appcontext_tearing_down\">\n<code>flask.appcontext_tearing_down</code> </dt> <dd>\n<p>This signal is sent when the app context is tearing down. This is always called, even if an exception is caused. Currently functions listening to this signal are called after the regular teardown handlers, but this is not something you can rely on.</p> <p>Example subscriber:</p> <pre data-language=\"python\">def close_db_connection(sender, **extra):\n    session.close()\n\nfrom flask import appcontext_tearing_down\nappcontext_tearing_down.connect(close_db_connection, app)\n</pre> <p>This will also be passed an <code>exc</code> keyword argument that has a reference to the exception that caused the teardown if there was one.</p> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.appcontext_pushed\">\n<code>flask.appcontext_pushed</code> </dt> <dd>\n<p>This signal is sent when an application context is pushed. The sender is the application. This is usually useful for unittests in order to temporarily hook in information. For instance it can be used to set a resource early onto the <code>g</code> object.</p> <p>Example usage:</p> <pre data-language=\"python\">from contextlib import contextmanager\nfrom flask import appcontext_pushed\n\n@contextmanager\ndef user_set(app, user):\n    def handler(sender, **kwargs):\n        g.user = user\n    with appcontext_pushed.connected_to(handler, app):\n        yield\n</pre> <p>And in the testcode:</p> <pre data-language=\"python\">def test_user_me(self):\n    with user_set(app, 'john'):\n        c = app.test_client()\n        resp = c.get('/users/me')\n        assert resp.data == 'username=john'\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.appcontext_popped\">\n<code>flask.appcontext_popped</code> </dt> <dd>\n<p>This signal is sent when an application context is popped. The sender is the application. This usually falls in line with the <a class=\"reference internal\" href=\"#flask.appcontext_tearing_down\" title=\"flask.appcontext_tearing_down\"><code>appcontext_tearing_down</code></a> signal.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.message_flashed\">\n<code>flask.message_flashed</code> </dt> <dd>\n<p>This signal is sent when the application is flashing a message. The messages is sent as <code>message</code> keyword argument and the category as <code>category</code>.</p> <p>Example subscriber:</p> <pre data-language=\"python\">recorded = []\ndef record(sender, message, category, **extra):\n    recorded.append((message, category))\n\nfrom flask import message_flashed\nmessage_flashed.connect(record, app)\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.10.</span></p> </div> </details>\n</dd>\n</dl> </section> <section id=\"class-based-views\"> <h2>Class-Based Views</h2> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.7.</span></p> </div> </details><dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.views.View\">\n<code>class flask.views.View</code> </dt> <dd>\n<p>Subclass this class and override <a class=\"reference internal\" href=\"#flask.views.View.dispatch_request\" title=\"flask.views.View.dispatch_request\"><code>dispatch_request()</code></a> to create a generic class-based view. Call <a class=\"reference internal\" href=\"#flask.views.View.as_view\" title=\"flask.views.View.as_view\"><code>as_view()</code></a> to create a view function that creates an instance of the class with the given arguments and calls its <code>dispatch_request</code> method with any URL variables.</p> <p>See <a class=\"reference internal\" href=\"../views/index\"><span class=\"doc\">Class-based Views</span></a> for a detailed guide.</p> <pre data-language=\"python\">class Hello(View):\n    init_every_request = False\n\n    def dispatch_request(self, name):\n        return f\"Hello, {name}!\"\n\napp.add_url_rule(\n    \"/hello/&lt;name&gt;\", view_func=Hello.as_view(\"hello\")\n)\n</pre> <p>Set <a class=\"reference internal\" href=\"#flask.views.View.methods\" title=\"flask.views.View.methods\"><code>methods</code></a> on the class to change what methods the view accepts.</p> <p>Set <a class=\"reference internal\" href=\"#flask.views.View.decorators\" title=\"flask.views.View.decorators\"><code>decorators</code></a> on the class to apply a list of decorators to the generated view function. Decorators applied to the class itself will not be applied to the generated view function!</p> <p>Set <a class=\"reference internal\" href=\"#flask.views.View.init_every_request\" title=\"flask.views.View.init_every_request\"><code>init_every_request</code></a> to <code>False</code> for efficiency, unless you need to store request-global data on <code>self</code>.</p> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.views.View.methods\">\n<code>methods: ClassVar[Collection[str] | None] = None</code> </dt> <dd>\n<p>The methods this view is registered for. Uses the same default (<code>[\"GET\", \"HEAD\", \"OPTIONS\"]</code>) as <code>route</code> and <code>add_url_rule</code> by default.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.views.View.provide_automatic_options\">\n<code>provide_automatic_options: ClassVar[bool | None] = None</code> </dt> <dd>\n<p>Control whether the <code>OPTIONS</code> method is handled automatically. Uses the same default (<code>True</code>) as <code>route</code> and <code>add_url_rule</code> by default.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.views.View.decorators\">\n<code>decorators: ClassVar[list[Callable[[...], Any]]] = []</code> </dt> <dd>\n<p>A list of decorators to apply, in order, to the generated view function. Remember that <code>@decorator</code> syntax is applied bottom to top, so the first decorator in the list would be the bottom decorator.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.views.View.init_every_request\">\n<code>init_every_request: ClassVar[bool] = True</code> </dt> <dd>\n<p>Create a new instance of this view class for every request by default. If a view subclass sets this to <code>False</code>, the same instance is used for every request.</p> <p>A single instance is more efficient, especially if complex setup is done during init. However, storing data on <code>self</code> is no longer safe across requests, and <a class=\"reference internal\" href=\"#flask.g\" title=\"flask.g\"><code>g</code></a> should be used instead.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 2.2.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.views.View.dispatch_request\">\n<code>dispatch_request()</code> </dt> <dd>\n<p>The actual view function behavior. Subclasses must override this and return a valid response. Any variables from the URL rule are passed as keyword arguments.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p>ft.ResponseReturnValue</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.views.View.as_view\">\n<code>classmethod as_view(name, *class_args, **class_kwargs)</code> </dt> <dd>\n<p>Convert the class into a view function that can be registered for a route.</p> <p>By default, the generated view will create a new instance of the view class for every request and call its <a class=\"reference internal\" href=\"#flask.views.View.dispatch_request\" title=\"flask.views.View.dispatch_request\"><code>dispatch_request()</code></a> method. If the view class sets <a class=\"reference internal\" href=\"#flask.views.View.init_every_request\" title=\"flask.views.View.init_every_request\"><code>init_every_request</code></a> to <code>False</code>, the same instance will be used for every request.</p> <p>Except for <code>name</code>, all other arguments passed to this method are forwarded to the view class <code>__init__</code> method.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Added the <code>init_every_request</code> class attribute.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> <li>\n<strong>class_args</strong> (<em>t.Any</em>)</li> <li>\n<strong>class_kwargs</strong> (<em>t.Any</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>ft.RouteCallable</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.views.MethodView\">\n<code>class flask.views.MethodView</code> </dt> <dd>\n<p>Dispatches request methods to the corresponding instance methods. For example, if you implement a <code>get</code> method, it will be used to handle <code>GET</code> requests.</p> <p>This can be useful for defining a REST API.</p> <p><code>methods</code> is automatically set based on the methods defined on the class.</p> <p>See <a class=\"reference internal\" href=\"../views/index\"><span class=\"doc\">Class-based Views</span></a> for a detailed guide.</p> <pre data-language=\"python\">class CounterAPI(MethodView):\n    def get(self):\n        return str(session.get(\"counter\", 0))\n\n    def post(self):\n        session[\"counter\"] = session.get(\"counter\", 0) + 1\n        return redirect(url_for(\"counter\"))\n\napp.add_url_rule(\n    \"/counter\", view_func=CounterAPI.as_view(\"counter\")\n)\n</pre> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.views.MethodView.dispatch_request\">\n<code>dispatch_request(**kwargs)</code> </dt> <dd>\n<p>The actual view function behavior. Subclasses must override this and return a valid response. Any variables from the URL rule are passed as keyword arguments.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>kwargs</strong> (<em>t.Any</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>ft.ResponseReturnValue</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> </section> <section id=\"url-route-registrations\"> <h2 id=\"id1\">URL Route Registrations</h2> <p>Generally there are three ways to define rules for the routing system:</p> <ol class=\"arabic simple\"> <li>You can use the <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>flask.Flask.route()</code></a> decorator.</li> <li>You can use the <a class=\"reference internal\" href=\"#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>flask.Flask.add_url_rule()</code></a> function.</li> <li>You can directly access the underlying Werkzeug routing system which is exposed as <a class=\"reference internal\" href=\"#flask.Flask.url_map\" title=\"flask.Flask.url_map\"><code>flask.Flask.url_map</code></a>.</li> </ol> <p>Variable parts in the route can be specified with angular brackets (<code>/user/&lt;username&gt;</code>). By default a variable part in the URL accepts any string without a slash however a different converter can be specified as well by using <code>&lt;converter:name&gt;</code>.</p> <p>Variable parts are passed to the view function as keyword arguments.</p> <p>The following converters are available:</p> <table class=\"docutils align-default\">  <tr>\n<td><p><code>string</code></p></td> <td><p>accepts any text without a slash (the default)</p></td> </tr> <tr>\n<td><p><code>int</code></p></td> <td><p>accepts integers</p></td> </tr> <tr>\n<td><p><code>float</code></p></td> <td><p>like <code>int</code> but for floating point values</p></td> </tr> <tr>\n<td><p><code>path</code></p></td> <td><p>like the default but also accepts slashes</p></td> </tr> <tr>\n<td><p><code>any</code></p></td> <td><p>matches one of the items provided</p></td> </tr> <tr>\n<td><p><code>uuid</code></p></td> <td><p>accepts UUID strings</p></td> </tr>  </table> <p>Custom converters can be defined using <a class=\"reference internal\" href=\"#flask.Flask.url_map\" title=\"flask.Flask.url_map\"><code>flask.Flask.url_map</code></a>.</p> <p>Here are some examples:</p> <pre data-language=\"python\">@app.route('/')\ndef index():\n    pass\n\n@app.route('/&lt;username&gt;')\ndef show_user(username):\n    pass\n\n@app.route('/post/&lt;int:post_id&gt;')\ndef show_post(post_id):\n    pass\n</pre> <p>An important detail to keep in mind is how Flask deals with trailing slashes. The idea is to keep each URL unique so the following rules apply:</p> <ol class=\"arabic simple\"> <li>If a rule ends with a slash and is requested without a slash by the user, the user is automatically redirected to the same page with a trailing slash attached.</li> <li>If a rule does not end with a trailing slash and the user requests the page with a trailing slash, a 404 not found is raised.</li> </ol> <p>This is consistent with how web servers deal with static files. This also makes it possible to use relative link targets safely.</p> <p>You can also define multiple rules for the same function. They have to be unique however. Defaults can also be specified. Here for example is a definition for a URL that accepts an optional page:</p> <pre data-language=\"python\">@app.route('/users/', defaults={'page': 1})\n@app.route('/users/page/&lt;int:page&gt;')\ndef show_users(page):\n    pass\n</pre> <p>This specifies that <code>/users/</code> will be the URL for page one and <code>/users/page/N</code> will be the URL for page <code>N</code>.</p> <p>If a URL contains a default value, it will be redirected to its simpler form with a 301 redirect. In the above example, <code>/users/page/1</code> will be redirected to <code>/users/</code>. If your route handles <code>GET</code> and <code>POST</code> requests, make sure the default route only handles <code>GET</code>, as redirects can’t preserve form data.</p> <pre data-language=\"python\">@app.route('/region/', defaults={'id': 1})\n@app.route('/region/&lt;int:id&gt;', methods=['GET', 'POST'])\ndef region(id):\n   pass\n</pre> <p>Here are the parameters that <a class=\"reference internal\" href=\"#flask.Flask.route\" title=\"flask.Flask.route\"><code>route()</code></a> and <a class=\"reference internal\" href=\"#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a> accept. The only difference is that with the route parameter the view function is defined with the decorator instead of the <code>view_func</code> parameter.</p> <table class=\"docutils align-default\">  <tr>\n<td><p><code>rule</code></p></td> <td><p>the URL rule as string</p></td> </tr> <tr>\n<td><p><code>endpoint</code></p></td> <td><p>the endpoint for the registered URL rule. Flask itself assumes that the name of the view function is the name of the endpoint if not explicitly stated.</p></td> </tr> <tr>\n<td><p><code>view_func</code></p></td> <td><p>the function to call when serving a request to the provided endpoint. If this is not provided one can specify the function later by storing it in the <a class=\"reference internal\" href=\"#flask.Flask.view_functions\" title=\"flask.Flask.view_functions\"><code>view_functions</code></a> dictionary with the endpoint as key.</p></td> </tr> <tr>\n<td><p><code>defaults</code></p></td> <td><p>A dictionary with defaults for this rule. See the example above for how defaults work.</p></td> </tr> <tr>\n<td><p><code>subdomain</code></p></td> <td><p>specifies the rule for the subdomain in case subdomain matching is in use. If not specified the default subdomain is assumed.</p></td> </tr> <tr>\n<td><p><code>**options</code></p></td> <td><p>the options to be forwarded to the underlying <a class=\"reference external\" href=\"https://werkzeug.palletsprojects.com/en/stable/routing/#werkzeug.routing.Rule\" title=\"(in Werkzeug v3.1.x)\"><code>Rule</code></a> object. A change to Werkzeug is handling of method options. methods is a list of methods this rule should be limited to (<code>GET</code>, <code>POST</code> etc.). By default a rule just listens for <code>GET</code> (and implicitly <code>HEAD</code>). Starting with Flask 0.6, <code>OPTIONS</code> is implicitly added and handled by the standard request handling. They have to be specified as keyword arguments.</p></td> </tr>  </table> </section> <section id=\"view-function-options\"> <h2>View Function Options</h2> <p>For internal usage the view functions can have some attributes attached to customize behavior the view function would normally not have control over. The following attributes can be provided optionally to either override some defaults to <a class=\"reference internal\" href=\"#flask.Flask.add_url_rule\" title=\"flask.Flask.add_url_rule\"><code>add_url_rule()</code></a> or general behavior:</p> <ul class=\"simple\"> <li>\n<code>__name__</code>: The name of a function is by default used as endpoint. If endpoint is provided explicitly this value is used. Additionally this will be prefixed with the name of the blueprint by default which cannot be customized from the function itself.</li> <li>\n<code>methods</code>: If methods are not provided when the URL rule is added, Flask will look on the view function object itself if a <code>methods</code> attribute exists. If it does, it will pull the information for the methods from there.</li> <li>\n<code>provide_automatic_options</code>: if this attribute is set Flask will either force enable or disable the automatic implementation of the HTTP <code>OPTIONS</code> response. This can be useful when working with decorators that want to customize the <code>OPTIONS</code> response on a per-view basis.</li> <li>\n<code>required_methods</code>: if this attribute is set, Flask will always add these methods when registering a URL rule even if the methods were explicitly overridden in the <code>route()</code> call.</li> </ul> <p>Full example:</p> <pre data-language=\"python\">def index():\n    if request.method == 'OPTIONS':\n        # custom options handling here\n        ...\n    return 'Hello World!'\nindex.provide_automatic_options = False\nindex.methods = ['GET', 'OPTIONS']\n\napp.add_url_rule('/', index)\n</pre> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 0.8: </span>The <code>provide_automatic_options</code> functionality was added.</p> </div> </details></section> <section id=\"command-line-interface\"> <h2>Command Line Interface</h2> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.cli.FlaskGroup\">\n<code>class flask.cli.FlaskGroup(add_default_commands=True, create_app=None, add_version_option=True, load_dotenv=True, set_debug_flag=True, **extra)</code> </dt> <dd>\n<p>Special subclass of the <a class=\"reference internal\" href=\"#flask.cli.AppGroup\" title=\"flask.cli.AppGroup\"><code>AppGroup</code></a> group that supports loading more commands from the configured Flask app. Normally a developer does not have to interface with this class but there are some very advanced use cases for which it makes sense to create an instance of this. see <a class=\"reference internal\" href=\"../cli/index#custom-scripts\"><span class=\"std std-ref\">Custom Scripts</span></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>add_default_commands</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – if this is True then the default run and shell commands will be added.</li> <li>\n<strong>add_version_option</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – adds the <code>--version</code> option.</li> <li>\n<strong>create_app</strong> (<em>t.Callable</em><em>[</em><em>...</em><em>, </em><a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a><em>] </em><em>| </em><em>None</em>) – an optional callback that is passed the script info and returns the loaded app.</li> <li>\n<strong>load_dotenv</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Load the nearest <code>.env</code> and <code>.flaskenv</code> files to set environment variables. Will also change the working directory to the directory containing the first file found.</li> <li>\n<strong>set_debug_flag</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Set the app’s debug flag.</li> <li>\n<strong>extra</strong> (<em>t.Any</em>)</li> </ul> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span><code>-e path</code> takes precedence over default <code>.env</code> and <code>.flaskenv</code> files.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>Added the <code>-A/--app</code>, <code>--debug/--no-debug</code>, <code>-e/--env-file</code> options.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>An app context is pushed when running <code>app.cli</code> commands, so <code>@with_appcontext</code> is no longer required for those commands.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.0: </span>If installed, python-dotenv will be used to load environment variables from <code>.env</code> and <code>.flaskenv</code> files.</p> </div> </details><dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.FlaskGroup.get_command\">\n<code>get_command(ctx, name)</code> </dt> <dd>\n<p>Given a context and a command name, this returns a <code>Command</code> object if it exists or returns <code>None</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>ctx</strong> (<a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Context\" title=\"(in Click v8.1.x)\">Context</a>)</li> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Command\" title=\"(in Click v8.1.x)\">Command</a> | None</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.FlaskGroup.list_commands\">\n<code>list_commands(ctx)</code> </dt> <dd>\n<p>Returns a list of subcommand names in the order they should appear.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>ctx</strong> (<a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Context\" title=\"(in Click v8.1.x)\">Context</a>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.FlaskGroup.make_context\">\n<code>make_context(info_name, args, parent=None, **extra)</code> </dt> <dd>\n<p>This function when given an info name and arguments will kick off the parsing and create a new <code>Context</code>. It does not invoke the actual command callback though.</p> <p>To quickly customize the context class used without overriding this method, set the <code>context_class</code> attribute.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>info_name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>) – the info name for this invocation. Generally this is the most descriptive name for the script or command. For the toplevel script it’s usually the name of the script, for commands below it’s the name of the command.</li> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>) – the arguments to parse as list of strings.</li> <li>\n<strong>parent</strong> (<a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Context\" title=\"(in Click v8.1.x)\">Context</a><em> | </em><em>None</em>) – the parent context if available.</li> <li>\n<strong>extra</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>) – extra keyword arguments forwarded to the context constructor.</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Context\" title=\"(in Click v8.1.x)\">Context</a></p> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 8.0: </span>Added the <code>context_class</code> attribute.</p> </div> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.FlaskGroup.parse_args\">\n<code>parse_args(ctx, args)</code> </dt> <dd>\n<p>Given a context and a list of arguments this creates the parser and parses the arguments, then modifies the context as necessary. This is automatically invoked by <a class=\"reference internal\" href=\"#flask.cli.FlaskGroup.make_context\" title=\"flask.cli.FlaskGroup.make_context\"><code>make_context()</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>ctx</strong> (<a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Context\" title=\"(in Click v8.1.x)\">Context</a>)</li> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>]</em>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#list\" title=\"(in Python v3.13)\">list</a>[<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a>]</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.cli.AppGroup\">\n<code>class flask.cli.AppGroup(name=None, commands=None, **attrs)</code> </dt> <dd>\n<p>This works similar to a regular click <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Group\" title=\"(in Click v8.1.x)\"><code>Group</code></a> but it changes the behavior of the <a class=\"reference internal\" href=\"#flask.cli.AppGroup.command\" title=\"flask.cli.AppGroup.command\"><code>command()</code></a> decorator so that it automatically wraps the functions in <a class=\"reference internal\" href=\"#flask.cli.with_appcontext\" title=\"flask.cli.with_appcontext\"><code>with_appcontext()</code></a>.</p> <p>Not to be confused with <a class=\"reference internal\" href=\"#flask.cli.FlaskGroup\" title=\"flask.cli.FlaskGroup\"><code>FlaskGroup</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>name</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>commands</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.MutableMapping\" title=\"(in Python v3.13)\">MutableMapping</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>, </em><a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Command\" title=\"(in Click v8.1.x)\">Command</a><em>] </em><em>| </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Sequence\" title=\"(in Python v3.13)\">Sequence</a><em>[</em><a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Command\" title=\"(in Click v8.1.x)\">Command</a><em>] </em><em>| </em><em>None</em>)</li> <li>\n<strong>attrs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> </dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.AppGroup.command\">\n<code>command(*args, **kwargs)</code> </dt> <dd>\n<p>This works exactly like the method of the same name on a regular <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Group\" title=\"(in Click v8.1.x)\"><code>click.Group</code></a> but it wraps callbacks in <a class=\"reference internal\" href=\"#flask.cli.with_appcontext\" title=\"flask.cli.with_appcontext\"><code>with_appcontext()</code></a> unless it’s disabled by passing <code>with_appcontext=False</code>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[…], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]], <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Command\" title=\"(in Click v8.1.x)\">Command</a>]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.AppGroup.group\">\n<code>group(*args, **kwargs)</code> </dt> <dd>\n<p>This works exactly like the method of the same name on a regular <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Group\" title=\"(in Click v8.1.x)\"><code>click.Group</code></a> but it defaults the group class to <a class=\"reference internal\" href=\"#flask.cli.AppGroup\" title=\"flask.cli.AppGroup\"><code>AppGroup</code></a>.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Callable\" title=\"(in Python v3.13)\">Callable</a>[[…], <a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>]], <a class=\"reference external\" href=\"https://click.palletsprojects.com/en/stable/api/#click.Group\" title=\"(in Click v8.1.x)\">Group</a>]</p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py class\"> <dt class=\"sig sig-object py\" id=\"flask.cli.ScriptInfo\">\n<code>class flask.cli.ScriptInfo(app_import_path=None, create_app=None, set_debug_flag=True, load_dotenv_defaults=True)</code> </dt> <dd>\n<p>Helper object to deal with Flask applications. This is usually not necessary to interface with as it’s used internally in the dispatching to click. In future versions of Flask this object will most likely play a bigger role. Typically it’s created automatically by the <a class=\"reference internal\" href=\"#flask.cli.FlaskGroup\" title=\"flask.cli.FlaskGroup\"><code>FlaskGroup</code></a> but you can also manually create it and pass it onwards as click object.</p> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>Added the <code>load_dotenv_defaults</code> parameter and attribute.</p> </div> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>app_import_path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><em>None</em>)</li> <li>\n<strong>create_app</strong> (<em>t.Callable</em><em>[</em><em>...</em><em>, </em><a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a><em>] </em><em>| </em><em>None</em>)</li> <li>\n<strong>set_debug_flag</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> <li>\n<strong>load_dotenv_defaults</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>)</li> </ul> </dd> </dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.cli.ScriptInfo.app_import_path\">\n<code>app_import_path</code> </dt> <dd>\n<p>Optionally the import path for the Flask application.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.cli.ScriptInfo.create_app\">\n<code>create_app</code> </dt> <dd>\n<p>Optionally a function that is passed the script info to create the instance of the application.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.cli.ScriptInfo.data\">\n<code>data: dict[t.Any, t.Any]</code> </dt> <dd>\n<p>A dictionary with arbitrary data that can be associated with this script info.</p> </dd>\n</dl> <dl class=\"py attribute\"> <dt class=\"sig sig-object py\" id=\"flask.cli.ScriptInfo.load_dotenv_defaults\">\n<code>load_dotenv_defaults</code> </dt> <dd>\n<p>Whether default <code>.flaskenv</code> and <code>.env</code> files should be loaded.</p> <p><code>ScriptInfo</code> doesn’t load anything, this is for reference when doing the load elsewhere during processing.</p> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 3.1.</span></p> </div> </dd>\n</dl> <dl class=\"py method\"> <dt class=\"sig sig-object py\" id=\"flask.cli.ScriptInfo.load_app\">\n<code>load_app()</code> </dt> <dd>\n<p>Loads the Flask app (if not yet loaded) and returns it. Calling this multiple times will just result in the already loaded app to be returned.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference internal\" href=\"#flask.Flask\" title=\"flask.Flask\">Flask</a></p> </dd> </dl> </dd>\n</dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.cli.load_dotenv\">\n<code>flask.cli.load_dotenv(path=None, load_defaults=True)</code> </dt> <dd>\n<p>Load “dotenv” files to set environment variables. A given path takes precedence over <code>.env</code>, which takes precedence over <code>.flaskenv</code>. After loading and combining these files, values are only set if the key is not already set in <code>os.environ</code>.</p> <p>This is a no-op if <a class=\"reference external\" href=\"https://github.com/theskumar/python-dotenv#readme\">python-dotenv</a> is not installed.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>path</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em> | </em><a class=\"reference external\" href=\"https://docs.python.org/3/library/os.html#os.PathLike\" title=\"(in Python v3.13)\">PathLike</a><em>[</em><a class=\"reference external\" href=\"https://docs.python.org/3/library/stdtypes.html#str\" title=\"(in Python v3.13)\">str</a><em>] </em><em>| </em><em>None</em>) – Load the file at this location.</li> <li>\n<strong>load_defaults</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a>) – Search for and load the default <code>.flaskenv</code> and <code>.env</code> files.</li> </ul> </dd> <dt class=\"field-even\">Returns<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><code>True</code> if at least one env var was loaded.</p> </dd> <dt class=\"field-odd\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/functions.html#bool\" title=\"(in Python v3.13)\">bool</a></p> </dd> </dl> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 3.1: </span>Added the <code>load_defaults</code> parameter. A given path takes precedence over default files.</p> </div> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>The current directory is not changed to the location of the loaded file.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.0: </span>When loading the env files, set the default encoding to UTF-8.</p> </div> <div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 1.1.0: </span>Returns <code>False</code> when python-dotenv is not installed, or when the given path isn’t a file.</p> </div> <div class=\"versionadded\"> <p><span class=\"versionmodified added\">Added in version 1.0.</span></p> </div> </details>\n</dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.cli.with_appcontext\">\n<code>flask.cli.with_appcontext(f)</code> </dt> <dd>\n<p>Wraps a callback so that it’s guaranteed to be executed with the script’s application context.</p> <p>Custom commands (and their options) registered under <code>app.cli</code> or <code>blueprint.cli</code> will always have an app context available, this decorator is not required in that case.</p> <details class=\"changelog\"> <summary>Changelog</summary><div class=\"versionchanged\"> <p><span class=\"versionmodified changed\">Changed in version 2.2: </span>The app context is active for subcommands as well as the decorated callback. The app context is always available to <code>app.cli</code> command and parameter callbacks.</p> </div> </details><dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>F</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><em>F</em></p> </dd> </dl> </dd>\n</dl> <dl class=\"py function\"> <dt class=\"sig sig-object py\" id=\"flask.cli.pass_script_info\">\n<code>flask.cli.pass_script_info(f)</code> </dt> <dd>\n<p>Marks a function so that an instance of <a class=\"reference internal\" href=\"#flask.cli.ScriptInfo\" title=\"flask.cli.ScriptInfo\"><code>ScriptInfo</code></a> is passed as first argument to the click callback.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<p><strong>f</strong> (<em>t.Callable</em><em>[</em><em>te.Concatenate</em><em>[</em><em>T</em><em>, </em><em>P</em><em>]</em><em>, </em><em>R</em><em>]</em>)</p> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p>t.Callable[P, R]</p> </dd> </dl> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.cli.run_command\">\n<code>flask.cli.run_command = &lt;Command run&gt;</code> </dt> <dd>\n<p>Run a local development server.</p> <p>This server is for development purposes only. It does not provide the stability, security, or performance of production WSGI servers.</p> <p>The reloader and debugger are enabled by default with the ‘–debug’ option.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> <dl class=\"py data\"> <dt class=\"sig sig-object py\" id=\"flask.cli.shell_command\">\n<code>flask.cli.shell_command = &lt;Command shell&gt;</code> </dt> <dd>\n<p>Run an interactive Python shell in the context of a given Flask application. The application will populate the default namespace of this shell according to its configuration.</p> <p>This is useful for executing small snippets of management code without having to manually configure the application.</p> <dl class=\"field-list simple\"> <dt class=\"field-odd\">Parameters<span class=\"colon\">:</span>\n</dt> <dd class=\"field-odd\">\n<ul class=\"simple\"> <li>\n<strong>args</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> <li>\n<strong>kwargs</strong> (<a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a>)</li> </ul> </dd> <dt class=\"field-even\">Return type<span class=\"colon\">:</span>\n</dt> <dd class=\"field-even\">\n<p><a class=\"reference external\" href=\"https://docs.python.org/3/library/typing.html#typing.Any\" title=\"(in Python v3.13)\">Any</a></p> </dd> </dl> </dd>\n</dl> </section><div class=\"_attribution\">\n  <p class=\"_attribution-p\">\n    &copy; 2010 Pallets<br>Licensed under the BSD 3-clause License.<br>\n    <a href=\"https://flask.palletsprojects.com/en/stable/api/\" class=\"_attribution-link\">https://flask.palletsprojects.com/en/stable/api/</a>\n  </p>\n</div>\n"}