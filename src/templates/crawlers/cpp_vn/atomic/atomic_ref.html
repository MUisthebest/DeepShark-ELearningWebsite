 <h1 class="firstHeading" id="firstHeading">STD :: ATOMIC_REF</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../header/atomic" title="cpp/header/atomic">&lt;atomic&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">Mẫu &lt;Class T&gt;</pre>
</td> <td>(1)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">Cấu trúc ATOMIC_REF;</pre>
</td> <td>(2)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td> </tr> </table> <p>Các<code>std::atomic_ref</code>Mẫu &lt;Class T&gt;<code>std::atomic_ref</code>struct ATOMIC_REF &lt;T*&gt;;<a href="../language/memory_model" title="cpp/language/memory model">memory model</a>Mẫu lớp áp dụng các hoạt động nguyên tử cho đối tượng mà nó tham khảo. Suốt đời của<code><a href="memory_order" title="cpp/atomic/memory order">std::memory_order</a></code>.</p>
<p>Đối tượng, đối tượng nó tham chiếu được coi là một đối tượng nguyên tử. Nếu một luồng ghi vào một đối tượng nguyên tử trong khi một chủ đề khác đọc từ nó, thì hành vi được xác định rõ (xem<code>std::atomic_ref</code>Để biết chi tiết về các cuộc đua dữ liệu). Ngoài ra, các quyền truy cập vào các đối tượng nguyên tử có thể thiết lập đồng bộ hóa giữa các luồng và đặt hàng truy cập bộ nhớ không nguyên tử theo quy định của<code>std::atomic_ref</code>Tuổi thọ của một đối tượng phải vượt quá tuổi thọ của tất cả<code>std::atomic_ref</code>s tham chiếu đối tượng. Trong khi bất kỳ<code>std::atomic_ref</code>ví dụ tham chiếu một đối tượng tồn tại, đối tượng phải được truy cập độc quyền thông qua các đối tượng này<code>std::atomic_ref</code>Giống như các tài liệu tham khảo ngôn ngữ, sự ổn định là nông cạn đối với</p>
<p>đối tượng có thể được tham chiếu đồng thời bởi bất kỳ<code>std::atomic_ref</code>sự vật.<code>std::atomic_ref</code>Hoạt động nguyên tử được áp dụng cho một đối tượng thông qua</p>
<p><code>std::atomic_ref</code>khoảng cách<a href="../named_req/copyconstructible" title="cpp/named req/CopyConstructible">CopyConstructible</a>.</p>
<p>nguyên tử liên quan đến các hoạt động nguyên tử được áp dụng thông qua bất kỳ hoạt động nào khác<code>std::atomic_ref</code>tham khảo cùng một đối tượng.<span class="kw4">hằng số</span> <code>std::atomic_ref</code>Giống như các tài liệu tham khảo ngôn ngữ, sự ổn định là nông cạn đối với</p>
<h3 id="Specializations">Tra cứu cho định danh</h3> <h4 id="Primary_template">Trong khi cả hai đều được hình thành tốt.</h4> <p>Nó không được xác định liệu có bất kỳ tuyên bố nào trong không gian tên<code>std::atomic_ref</code>có sẵn khi nào<a href="../named_req/triviallycopyable" title="cpp/named req/TriviallyCopyable">TriviallyCopyable</a>kiểu<code>T</code>- có thể sửa đổi giá trị được tham chiếu thông qua<span class="kw4">bool</span>):</p>
<div class="cpp source-cpp"><pre data-language="cpp">sự vật.</pre></div> <h4 id="Partial_specialization_for_pointer_types">(bao gồm</h4> <p>Bộ đếm cấu trúc {int a; int b; }; // loại có thể sử dụng tầm thường do người dùng xác định<code>std::atomic_ref</code>Bộ đếm cấu trúc {int a; int b; }; // loại có thể sử dụng tầm thường do người dùng xác định<a href="atomic_ref/fetch_add" title="cpp/atomic/atomic ref/fetch add"><code>fetch_add</code></a>Thì<a href="atomic_ref/fetch_sub" title="cpp/atomic/atomic ref/fetch sub"><code>fetch_sub</code></a>.</p>
<h4 id="Specializations_for_integral_types">, các hàm tạo mặc định tầm thường,</h4> <p>và những kẻ phá hủy tầm thường. Bên cạnh các hoạt động được cung cấp cho tất cả các loại nguyên tử, các chuyên ngành này cũng hỗ trợ các hoạt động số học nguyên tử phù hợp với các loại con trỏ, chẳng hạn như<code>std::atomic_ref</code>Chuyên ngành một phần std<a href="atomic_ref/fetch_add" title="cpp/atomic/atomic ref/fetch add"><code>fetch_add</code></a>Thì<a href="atomic_ref/fetch_sub" title="cpp/atomic/atomic ref/fetch sub"><code>fetch_sub</code></a>Thì<a href="atomic_ref/fetch_and" title="cpp/atomic/atomic ref/fetch and"><code>fetch_and</code></a>Thì<a href="atomic_ref/fetch_or" title="cpp/atomic/atomic ref/fetch or"><code>fetch_or</code></a>Thì<a href="atomic_ref/fetch_xor" title="cpp/atomic/atomic ref/fetch xor"><code>fetch_xor</code></a>:</p>
<ul>
<li>và std<span class="kw4">char</span>Alignas (std :: Atomic_Ref &lt;Bounters&gt; :: Yêu cầu_alignment) Bộ đếm bộ đếm;<span class="kw4">char16_t</span>Thì<span class="kw4">char32_t</span>, Và<span class="kw4">wchar_t</span>Số lượng các yếu tố để sao chép</li>
<li>được cung cấp cho<span class="kw4">STD</span> <span class="kw4">char</span>Thì<span class="kw4">STD</span>Thì<span class="kw4">int</span>Thì<span class="kw4">dài</span>, Và<span class="kw4">dài</span> <span class="kw4">dài</span>Số lượng các yếu tố để sao chép</li>
<li>ký<span class="kw4">STD</span> <span class="kw4">char</span>Thì<span class="kw4">STD</span> <span class="kw4">STD</span>Thì<span class="kw4">STD</span> <span class="kw4">int</span>Thì<span class="kw4">STD</span> <span class="kw4">dài</span>, Và<span class="kw4">STD</span> <span class="kw4">dài</span> <span class="kw4">dài</span>Số lượng các yếu tố để sao chép</li>
<li>không dấu<a href="../header/cstdint" title="cpp/header/cstdint"><code>&lt;cstdint&gt;</code></a>.</li>
</ul> <p>STD :: ATOMIC_REF &lt;Bounters&gt; cnt (bộ đếm); // Chuyên môn hóa cho loại do người dùng xác định</p>
<h4 id="Specializations_for_floating-point_types">Ngoài ra, kết quả</h4> <p>Tích hợp<span class="kw4">trôi nổi</span>Thì<span class="kw4">    for (; đầu tiên! = cuối cùng; ++ đầu tiên)</span>Thì<span class="kw4">dài</span> <span class="kw4">    for (; đầu tiên! = cuối cùng; ++ đầu tiên)</span><span class="t-rev-inl t-since-cxx23"><span>, một hàm tạo mặc định tầm thường,<a href="../language/types#Extended_floating-point_types" title="cpp/language/types">extended floating-point types</a></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>và một kẻ phá hủy tầm thường. Số học số nguyên có chữ ký được xác định để sử dụng bổ sung của Two; Không có kết quả không xác định.<code>std::atomic_ref</code>Chuyên môn cho các loại điểm nổi<a href="atomic_ref/fetch_add" title="cpp/atomic/atomic ref/fetch add"><code>fetch_add</code></a>Và<a href="atomic_ref/fetch_sub" title="cpp/atomic/atomic ref/fetch sub"><code>fetch_sub</code></a>.</p>
<p>)<a href="../numeric/fenv" title="cpp/numeric/fenv">floating-point environment</a>cung cấp các hoạt động nguyên tử bổ sung phù hợp với các loại điểm nổi như</p>
<h3 id="Member_types">nhà điều hành ()</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th>ATOMIC_UNSIGNED_LOCK_FREE</th> <th>Sự định nghĩa</th>
</tr> <tr class="t-dsc"> <td> <code>value_type</code> </td> <td> <i>Chuyên môn hóa một phần cho các loại con trỏ</i> </td>
</tr> <tr class="t-dsc"> <td> <code>difference_type</code> </td> <td> <code>value_type</code> <span class="t-mark">(bất kể có chuyên ngành hay không)<code>atomic_ref&lt;<i>được xác định, tương ứng.</i>&gt;</code>Và<code>atomic_ref&lt;<i>là tùy chọn trong việc thực hiện độc lập.</i>&gt;</code>(Chỉ dành cho</span><br/><code><a href="../types/ptrdiff_t" title="cpp/types/ptrdiff t">std::ptrdiff_t</a></code> <span class="t-mark">(bất kể có chuyên ngành hay không)<code>std::atomic_ref&lt;T*&gt;</code>(Chỉ dành cho</span> </td>
</tr> </table> <p>Mẫu cho tất cả các loại con trỏ. Ngoài các hoạt động được cung cấp cho tất cả các loại nguyên tử, các chuyên ngành này cũng hỗ trợ các hoạt động số học nguyên tử phù hợp với các loại con trỏ, chẳng hạn như<code>std::atomic_ref&lt;X&gt;</code>, char8_t,<code>std::atomic_ref&lt;X&gt;::value_type</code>khoảng cách<code>X</code>.</p>
<p><code>difference_type</code>Tích hợp<code>atomic_ref</code>Số học số nguyên có chữ ký được xác định để sử dụng bổ sung của Two; Không có kết quả không xác định.</p>
<h3 id="Member_functions">nếu không thì</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="atomic_ref/atomic_ref" title="cpp/atomic/atomic ref/atomic ref"> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>Xem bên dưới<code>atomic_ref</code>sự vật<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/operator=" title="cpp/atomic/atomic ref/operator="> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>Cho mỗi<code>atomic_ref</code>sự vật<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/is_lock_free" title="cpp/atomic/atomic ref/is lock free"> <span class="t-lines"><span>mẫu hoặc trong các chuyên ngành một phần cho</span></span></a></div> </td> <td>(có hay không chuyên ngành),<code>atomic_ref</code>bản mẫu.<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/store" title="cpp/atomic/atomic ref/store"> <span class="t-lines"><span>xây dựng một đối tượng nguyên tử</span></span></a></div> </td> <td>xây dựng một<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/load" title="cpp/atomic/atomic ref/load"> <span class="t-lines"><span>toán tử =</span></span></a></div> </td> <td>lưu trữ một giá trị vào đối tượng được tham chiếu bởi một<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/operator_t" title="cpp/atomic/atomic ref/operator T"> <span class="t-lines"><span>is_lock_free</span></span></a></div> </td> <td>kiểm tra xem<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/exchange" title="cpp/atomic/atomic ref/exchange"> <span class="t-lines"><span>trao đổi</span></span></a></div> </td> <td>Đối tượng không có khóa<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/compare_exchange" title="cpp/atomic/atomic ref/compare exchange"> <span class="t-lines"><span>trọng tải</span><span>về mặt nguyên tử có được giá trị của đối tượng nguyên tử</span></span></a></div> </td> <td>thay thế nguyên tử giá trị của đối tượng được tham chiếu bằng đối số không nguyên tử<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/wait" title="cpp/atomic/atomic ref/wait"> <span class="t-lines"><span>toán tử t</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">Phạm vi :: Construct_at</span></span></span></div> </td> <td>chặn luồng cho đến khi thông báo và giá trị nguyên tử thay đổi<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/notify_one" title="cpp/atomic/atomic ref/notify one"> <span class="t-lines"><span>tải một giá trị từ một đối tượng nguyên tử</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">Phạm vi :: Construct_at</span></span></span></div> </td> <td>thay thế nguyên tử giá trị của đối tượng nguyên tử và thu được giá trị được giữ trước đó<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/notify_all" title="cpp/atomic/atomic ref/notify all"> <span class="t-lines"><span>compare_exchange_weak</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">Phạm vi :: Construct_at</span></span></span></div> </td> <td>compare_exchange_strong<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h3 id="Constants">Hằng số</h3> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/is_always_lock_free" title="cpp/atomic/atomic ref/is always lock free"> <span class="t-lines"><span>Chờ đợi</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">Kế thừa từ</span></span></span></div> </td> <td>thông báo_one<br/> <span class="t-mark">là loại chính sách thực thi được xác định theo tiêu chuẩn hoặc thực hiện,</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/required_alignment" title="cpp/atomic/atomic ref/required alignment"> <span class="t-lines"><span>có được giá trị nguyên tử của đối tượng được tham chiếu</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">Kế thừa từ</span></span></span></div> </td> <td>tải một giá trị từ đối tượng được tham chiếu<code>atomic_ref</code> <br/> <span class="t-mark">là loại chính sách thực thi được xác định theo tiêu chuẩn hoặc thực hiện,</span> </td>
</tr> </table> <h3 id="Specialized_member_functions">Thông báo ít nhất một luồng đang chờ trên đối tượng nguyên tử</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="atomic_ref/fetch_add" title="cpp/atomic/atomic ref/fetch add"> <span class="t-lines"><span>Thông báo_all</span></span></a></div> </td> <td>thay thế nguyên tử giá trị của đối tượng được tham chiếu và có được giá trị được giữ trước đó<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/fetch_sub" title="cpp/atomic/atomic ref/fetch sub"> <span class="t-lines"><span>is_always_lock_free</span></span></a></div> </td> <td>so sánh về mặt nguyên tử với giá trị của đối tượng được tham chiếu với đối số không nguyên tử và thực hiện trao đổi nguyên tử nếu tải trọng hoặc nguyên tử nếu không<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/fetch_and" title="cpp/atomic/atomic ref/fetch and"> <span class="t-lines"><span>Chức năng thành viên chuyên ngành</span></span></a></div> </td> <td>Yêu cầu_alignment<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/fetch_or" title="cpp/atomic/atomic ref/fetch or"> <span class="t-lines"><span>thêm về mặt nguyên tử cho đối số vào giá trị được lưu trữ trong đối tượng nguyên tử và có được giá trị được giữ trước đó</span></span></a></div> </td> <td>chỉ ra sự liên kết yêu cầu của một đối tượng được tham chiếu bởi<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/fetch_xor" title="cpp/atomic/atomic ref/fetch xor"> <span class="t-lines"><span>trừ về mặt nguyên tử đối số từ giá trị được lưu trữ trong đối tượng nguyên tử và thu được giá trị được giữ trước đó</span></span></a></div> </td> <td>thêm về mặt nguyên tử cho đối số vào giá trị được lưu trữ trong đối tượng được tham chiếu và có được giá trị được giữ trước đó<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/operator_arith" title="cpp/atomic/atomic ref/operator arith"> <span class="t-lines"><span>fetch_or</span><span>fetch_or<span class="t-dsc-small">toán tử ++</span></span><span>thực hiện nguyên tử Bitwise XOR giữa đối số và giá trị của đối tượng nguyên tử và có được giá trị được giữ trước đó</span><span>thực hiện nguyên tử Bitwise XOR giữa đối số và giá trị của đối tượng nguyên tử và có được giá trị được giữ trước đó<span class="t-dsc-small">toán tử ++</span></span></span></a></div> </td> <td>trừ về mặt nguyên tử đối số từ giá trị được lưu trữ trong đối tượng được tham chiếu và có được giá trị được giữ trước đó<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="atomic_ref/operator_arith2" title="cpp/atomic/atomic ref/operator arith2"> <span class="t-lines"><span>(int)</span><span>nhà điều hành--</span><span>nhà điều hành--</span><span>(int)</span><span>tăng hoặc giảm giá trị nguyên tử của một</span></span></a></div> </td> <td>thực hiện nguyên tử bitwise và giữa đối số và giá trị của đối tượng được tham chiếu và có được giá trị được giữ trước đó<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <h3 id="Notes">Ghi chú</h3> <table class="wikitable ftm-begin ftm-has-value"> <tr> <th>
<a href="../utility/feature_test" title="cpp/utility/feature test">Feature-test</a>(Mẫu lớp)</th> <th>vĩ mô</th> <th><span title="Standard in which the feature is introduced">Giá trị</span></th> <th>STD</th>
</tr> <tr> <td><a href="../feature_test#cpp_lib_atomic_ref" title="cpp/feature test"><code>__cpp_lib_atomic_ref</code></a></td> <td><span class="nu0">201806L</span></td> <td><span class="t-mark">Phạm vi :: Construct_at</span></td> <td>
<code>std::atomic_ref</code> </td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="atomic" title="cpp/atomic/atomic"> <span class="t-lines"><span>nguyên tử</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Mẫu lớp nguyên tử và các chuyên ngành cho bool, tích phân,<span class="t-rev-inl t-since-cxx20"><span>điểm nổi,</span><span><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></span></span>và loại con trỏ<br/> <span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/atomic/atomic_ref">https://en.cppreference.com/w/cpp/atomic/atomic_ref</a>
</p>
</div>
