 <h1 class="firstHeading" id="firstHeading">Thuộc tính C ++: Nodiscard<span class="t-mark-rev t-since-cxx17">(C ++ 20)</span>
</h1> <p>Nếu một hàm được khai báo<code>nodiscard</code>hoặc một chức năng trả về một bảng liệt kê hoặc lớp được khai báo<code>nodiscard</code>theo giá trị được gọi từ một<a href="../expressions#Discarded-value_expressions" title="cpp/language/expressions">discarded-value expression</a>khác với một diễn viên cho<code>void</code>, Trình biên dịch được khuyến khích đưa ra cảnh báo.</p>
<h3 id="Syntax">Cú pháp</h3> <table class="t-sdsc-begin"> <tr class="t-sdsc"> <td> <code><span class="br0">              STD :: Dự kiến ​​&lt;phạm vi :: iterator_t &lt;r&gt;, proj &gt;&gt; Pred&gt;</span><span class="br0">              STD :: Dự kiến ​​&lt;phạm vi :: iterator_t &lt;r&gt;, proj &gt;&gt; Pred&gt;</span>nodiscard<span class="br0">Phạm vi constexpr :: mượn_iterator_t &lt;r&gt;</span><span class="br0">Phạm vi constexpr :: mượn_iterator_t &lt;r&gt;</span></code> </td> <td>(1)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <code>[[nodiscard(</code> <span class="t-spar">chuỗi chữ</span> <code>)]]</code> </td> <td>(2)</td> <td> <span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span> </td>
</tr>
</table> <table class="t-par-begin"> <tr class="t-par"> <td> <span class="t-spar">chuỗi chữ</span> </td> <td>-</td> <td>chồng chéo với container.<a href="../string_literal#Unevaluated_strings" title="cpp/language/string literal">unevaluated string literal</a>điều đó có thể được sử dụng để giải thích lý do cho lý do tại sao kết quả không nên bị loại bỏ</td>
</tr>
</table> <h3 id="Explanation">Lưu ý: Đồng bộ hóa giữa các luồng tập trung vào việc ngăn chặn các chủng tộc dữ liệu (bằng cách thiết lập các mối quan hệ xảy ra trước khi) và xác định các tác dụng phụ nào có thể nhìn thấy được trong các điều kiện nào.</h3> <p>Xuất hiện trong một tuyên bố chức năng, khai báo liệt kê hoặc khai báo lớp.</p>
<p>Nếu, từ a<a href="../expressions#Discarded-value_expressions" title="cpp/language/expressions">discarded-value expression</a>khác với một diễn viên cho<code>void</code>Thì</p>
<ul>
<li>một chức năng được tuyên bố<code>nodiscard</code>được gọi, hoặc</li>
<li>một chức năng trả về một bảng liệt kê hoặc lớp được khai báo<code>nodiscard</code>theo giá trị được gọi, hoặc</li>
<li>một nhà xây dựng được tuyên bố<code>nodiscard</code>ảnh hưởng đến trình tự đầu ra<a href="../explicit_cast" title="cpp/language/explicit cast">explicit type conversion</a>hoặc<a href="../static_cast" title="cpp/language/static cast"><code>static_cast</code></a>, hoặc</li>
<li>một đối tượng của một bảng liệt kê hoặc loại loại được khai báo<code>nodiscard</code>được khởi tạo bởi<a href="../explicit_cast" title="cpp/language/explicit cast">explicit type conversion</a>hoặc<a href="../static_cast" title="cpp/language/static cast"><code>static_cast</code></a>Thì</li>
</ul> <p>Trình biên dịch được khuyến khích đưa ra cảnh báo.</p>
<table class="t-rev-begin"> <tr class="t-rev t-since-cxx20">
<td> <p>Các<span class="t-spar">chuỗi chữ</span>, nếu được chỉ định, thường được bao gồm trong các cảnh báo.</p>
</td> <td><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></td>
</tr> </table> <h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">struct [[godiscard]] error_info {/*....*/};</pre></div> <p>#include &lt;Istream&gt;</p>
<div class="text source-text"><pre data-language="c">error_info enable_missile_safety_mode () {/*...*/ return {}; }</pre></div> </div> <h3 id="Standard_library">Mẫu &lt;Class I2&gt;</h3> <p>void Launch_Missiles () {/*...*/}<code>nodiscard</code>void test_missiles ()</p>
<table class="t-dsc-begin"> <tr> <td colspan="2"> <h5 id="Allocation_functions">{</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/new/operator_new" title="cpp/memory/new/operator new"> <span class="t-lines"><span>nhà điều hành mới</span><span>nhà điều hành mới []</span></span></a></div> </td> <td>chức năng phân bổ<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/allocator/allocate" title="cpp/memory/allocator/allocate"> <span class="t-lines"><span>được cung cấp cho Deque để cho phép khấu trừ từ một phạm vi vòng lặp. Quá tải này chỉ tham gia vào độ phân giải quá tải nếu</span></span></a></div> </td> <td>    enable_missile_safety_mode (); // Trình biên dịch có thể cảnh báo về việc loại bỏ giá trị gật đầu<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::allocator&lt;T&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/allocator_traits/allocate" title="cpp/memory/allocator traits/allocate"> <span class="t-lines"><span>được cung cấp cho Deque để cho phép khấu trừ từ một phạm vi vòng lặp. Quá tải này chỉ tham gia vào độ phân giải quá tải nếu</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">Kế thừa từ</span></span></span></div> </td> <td>    Launch_Missiles ();<br/> <span class="t-mark">(Chức năng thành viên tĩnh công khai của<code>std::allocator_traits&lt;Alloc&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/memory_resource/allocate" title="cpp/memory/memory resource/allocate"> <span class="t-lines"><span>được cung cấp cho Deque để cho phép khấu trừ từ một phạm vi vòng lặp. Quá tải này chỉ tham gia vào độ phân giải quá tải nếu</span></span></a></div> </td> <td>phân bổ bộ nhớ<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::pmr::memory_resource</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/polymorphic_allocator/allocate" title="cpp/memory/polymorphic allocator/allocate"> <span class="t-lines"><span>được cung cấp cho Deque để cho phép khấu trừ từ một phạm vi vòng lặp. Quá tải này chỉ tham gia vào độ phân giải quá tải nếu</span></span></a></div> </td> <td>}<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::pmr::polymorphic_allocator&lt;T&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/scoped_allocator_adaptor/allocate" title="cpp/memory/scoped allocator adaptor/allocate"> <span class="t-lines"><span>được cung cấp cho Deque để cho phép khấu trừ từ một phạm vi vòng lặp. Quá tải này chỉ tham gia vào độ phân giải quá tải nếu</span></span></a></div> </td> <td>error_info &amp; foo () {error tĩnh_info e; /*...*/ Trả lại e; }<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::scoped_allocator_adaptor&lt;OuterAlloc,InnerAlloc...&gt;</code>)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Indirect_access">void f1 () {foo (); } // loại gật đầu không được trả lại bởi giá trị, không có cảnh báo</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../utility/launder" title="cpp/utility/launder"> <span class="t-lines"><span>giặt là</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Rào cản tối ưu hóa con trỏ<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../memory/assume_aligned" title="cpp/memory/assume aligned"> <span class="t-lines"><span>Assume_aligned</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">Phạm vi :: Construct_at</span></span></span></div> </td> <td>thông báo cho trình biên dịch rằng một con trỏ được căn chỉnh<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Emptiness-checking_functions">// gật đầu (chuỗi chữ) (kể từ C ++ 20):</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../iterator/empty" title="cpp/iterator/empty"> <span class="t-lines"><span>trống</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/node_handle#empty" title="cpp/container/node handle"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>[[NODISCARD ("Fure Fun")]] int Strategic_value (int x, int y) {return x ^ y; }<br/><span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code><i>là các cấu trúc dữ liệu dựa trên nút và các nút của chúng có thể được trích xuất như một đối tượng thuộc loại không xác định</i></code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/array/empty" title="cpp/container/array/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::array&lt;T,N&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../string/basic_string/empty" title="cpp/string/basic string/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td> <br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::basic_string&lt;CharT,Traits,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../string/basic_string_view/empty" title="cpp/string/basic string view/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>int main ()<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::basic_string_view&lt;CharT,Traits&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/deque/empty" title="cpp/container/deque/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::deque&lt;T,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/forward_list/empty" title="cpp/container/forward list/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::forward_list&lt;T,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/list/empty" title="cpp/container/list/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::list&lt;T,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/map/empty" title="cpp/container/map/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::map&lt;Key,T,Compare,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../regex/match_results/empty" title="cpp/regex/match results/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>{<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::match_results&lt;BidirIt,Alloc&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/multimap/empty" title="cpp/container/multimap/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::multimap&lt;Key,T,Compare,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/multiset/empty" title="cpp/container/multiset/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::multiset&lt;Key,Compare,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/priority_queue/empty" title="cpp/container/priority queue/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Đối tượng thành viên chỉ dành cho người biểu diễn*<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::priority_queue&lt;T,Container,Compare&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/queue/empty" title="cpp/container/queue/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Đối tượng thành viên chỉ dành cho người biểu diễn*<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::queue&lt;T,Container&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/set/empty" title="cpp/container/set/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::set&lt;Key,Compare,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/span/empty" title="cpp/container/span/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>phá hủy a<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::span&lt;T,Extent&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/stack/empty" title="cpp/container/stack/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Đối tượng thành viên chỉ dành cho người biểu diễn*<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::stack&lt;T,Container&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/unordered_map/empty" title="cpp/container/unordered map/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::unordered_map&lt;Key,T,Hash,KeyEqual,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/unordered_multimap/empty" title="cpp/container/unordered multimap/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::unordered_multimap&lt;Key,T,Hash,KeyEqual,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/unordered_multiset/empty" title="cpp/container/unordered multiset/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::unordered_multiset&lt;Key,Hash,KeyEqual,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/unordered_set/empty" title="cpp/container/unordered set/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::unordered_set&lt;Key,Hash,KeyEqual,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../container/vector/empty" title="cpp/container/vector/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem container có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::vector&lt;T,Allocator&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../filesystem/path/empty" title="cpp/filesystem/path/empty"> <span class="t-lines"><span>trống</span></span></a></div> </td> <td>Kiểm tra xem đường dẫn có trống không<br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::filesystem::path</code>)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Miscellaneous">Linh tinh</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../thread/async" title="cpp/thread/async"> <span class="t-lines"><span>không đồng bộ</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>chạy một chức năng không đồng bộ (có khả năng trong một luồng mới) và trả về một<code><a href="../../thread/future" title="cpp/thread/future">std::future</a></code>Điều đó sẽ giữ kết quả<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> </table> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://wg21.link/P1771R1" rel="nofollow">P1771R1</a> </td> <td>C ++ 17</td> <td>
<code>[[nodiscard]]</code>    Strategic_Value (4, 2); // Trình biên dịch có thể cảnh báo về việc loại bỏ giá trị gật đầu</td> <td>    Auto Z = Strategic_Value (0, 0); // ok: giá trị trả về không bị loại bỏ</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../../utility/tuple/ignore" title="cpp/utility/tuple/ignore"> <span class="t-lines"><span>phớt lờ</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>người giữ chỗ để bỏ qua một yếu tố khi giải nén một<code>tuple</code>    Count_if (đầu vào đầu tiên, đầu vào cuối cùng, không được tính p);<a href="../../utility/tuple/tie" title="cpp/utility/tuple/tie"><code>tie</code></a> <br/> <span class="t-mark">Các đối tượng chính sách thực thi toàn cầu</span> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/language/attributes/nodiscard" title="c/language/attributes/nodiscard">C documentation</a></span>vì<code>nodiscard</code> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/language/attributes/nodiscard">https://en.cppreference.com/w/cpp/language/attributes/nodiscard</a>
</p>
</div>
