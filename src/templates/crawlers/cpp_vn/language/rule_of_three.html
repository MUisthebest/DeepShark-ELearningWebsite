 <h1 class="firstHeading" id="firstHeading">Quy tắc của ba/năm/zero</h1> <h3 id="Rule_of_three">Quy tắc của ba</h3> <p>Nếu một lớp yêu cầu người dùng định nghĩa<a href="destructor" title="cpp/language/destructor">destructor</a>, một người dùng định nghĩa<a href="copy_constructor" title="cpp/language/copy constructor">copy constructor</a>, hoặc một người dùng do người dùng định nghĩa<a class="mw-redirect" href="as_operator" title="cpp/language/as operator">copy assignment operator</a>, nó gần như chắc chắn đòi hỏi cả ba.</p>
<p>Bởi vì các bản sao C ++ và các đối tượng được phân loại sao chép các loại do người dùng xác định trong các tình huống khác nhau (chuyển/trả lại theo giá trị, thao tác với một container, v.v.), các chức năng thành viên đặc biệt này sẽ được gọi, nếu có thể truy cập và nếu chúng không được xác định bởi người dùng, chúng được xác định bởi trình biên dịch.</p>
<p>Các chức năng thành viên đặc biệt được xác định ngầm thường không chính xác nếu lớp quản lý một tài nguyên có xử lý là một đối tượng thuộc loại không lớp (con trỏ thô, mô tả tệp POSIX, v.v.), có chất phá hủy không làm gì và sao chép toán tử xây dựng/gán thực hiện một "bản sao nông".</p>
<div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;CstDdef&gt;</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">#include &lt;cstring&gt;</pre></div> </div> <p>#include &lt;Istream&gt;</p>
<h3 id="Rule_of_five"> </h3> <p>lớp quy tắc_of_three<code>= default</code>hoặc<code>= delete</code>{<a href="move_constructor" title="cpp/language/move constructor">move constructor</a>Đối tượng lưu trữ<a class="mw-redirect" href="move_operator" title="cpp/language/move operator">move assignment operator</a>    char* cString; // con trỏ thô được sử dụng làm tay cầm cho một</p>
<div class="cpp source-cpp"><pre data-language="cpp">                   // khối bộ nhớ được phân bổ động</pre></div> <p> </p>
<h3 id="Rule_of_zero">    RIDE_OF_THREE (const char* s, std :: size_t n) // để tránh đếm hai lần</h3> <p>        : cstring (mới char [n]) // phân bổ<a class="extiw" href="https://en.wikipedia.org/wiki/Single_responsibility_principle" title="enwiki:Single responsibility principle">Single Responsibility Principle</a>    {<sup class="reference" id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup>.</p>
<p>        std :: memcpy (cstring, s, n); // dân cư<a class="external text" href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rc-zero" rel="nofollow">C.20: If you can avoid defining default operations, do</a>.</p>
<div class="cpp source-cpp"><pre data-language="cpp">    }</pre></div> <p> <sup class="reference" id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup>.</p>
<div class="cpp source-cpp"><pre data-language="cpp">công cộng:</pre></div> <p>    Quy tắc rõ ràng_of_three (const char* s = "")<a class="external text" href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c67-a-polymorphic-class-should-suppress-public-copymove" rel="nofollow">C.67: A polymorphic class should suppress public copy/move</a>        : RUCE_OF_THREE (S, STD :: Strlen (s) + 1) {}<a class="external text" href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c21-if-you-define-or-delete-any-copy-move-or-destructor-function-define-or-delete-them-all" rel="nofollow">C.21: If you define or =delete any copy, move, or destructor function, define or =delete them all.</a></p>
<h3 id="External_links">Liên kết bên ngoài</h3> <table> <tr> <td>
<ol class="references"> <li id="cite_note-1"> <span class="reference-text"><a class="external text" href="https://web.archive.org/web/20130211035910/http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html" rel="nofollow">"Rule of Zero", R. Martinho Fernandes 08/15/2012</a></span> </li> <li id="cite_note-2"> <span class="reference-text"><a class="external text" href="https://scottmeyers.blogspot.fr/2014/03/a-concern-about-rule-of-zero.html" rel="nofollow">"A Concern about the Rule of Zero", Scott Meyers, 3/13/2014</a>.</span> </li> </ol> </td>
</tr>
</table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/language/rule_of_three">https://en.cppreference.com/w/cpp/language/rule_of_three</a>
</p>
</div>
