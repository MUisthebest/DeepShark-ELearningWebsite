 <h1 class="firstHeading" id="firstHeading">Tuyên bố tài liệu tham khảo</h1> <p>Tuyên bố một biến được đặt tên là một tham chiếu, nghĩa là bí danh đối với một đối tượng hoặc hàm đã tồn tại.</p>
<h3 id="Syntax">Cú pháp</h3> <p>Một tuyên bố biến tham chiếu là bất kỳ tuyên bố đơn giản nào có<a href="declarations" title="cpp/language/declarations">declarator</a>có hình thức</p>
<table class="t-sdsc-begin"> <tr class="t-sdsc"> <td> <code>&amp;</code> <span class="t-spar">attr</span>﻿<span class="t-mark">ATOMIC_INTPTR_T</span> <span class="t-spar">người khai báo</span> </td> <td>(1)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <code>&amp;&amp;</code> <span class="t-spar">attr</span>﻿<span class="t-mark">ATOMIC_INTPTR_T</span> <span class="t-spar">người khai báo</span> </td> <td>(2)</td> <td> <span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span> </td>
</tr>
</table> <div class="t-li1">
<span class="t-li">1)</span> <b>Công cụ khai báo tham chiếu Lvalue</b>: Tuyên bố<code>S&amp; D;</code>tuyên bố<code>D</code>như một<i>Tham khảo lvalue</i>theo loại được xác định bởi<span class="t-spar">DEM-SPECIFIER-SEQ</span> <code>S</code>.</div> <div class="t-li1">
<span class="t-li">2)</span> <b>Trình khai báo tham chiếu RVALUE</b>: Tuyên bố<code>S&amp;&amp; D;</code>tuyên bố<code>D</code>như một<i>Tài liệu tham khảo rvalue</i>theo loại được xác định bởi<span class="t-spar">DEM-SPECIFIER-SEQ</span> <code>S</code>.</div> <table class="t-par-begin"> <tr class="t-par"> <td> <span class="t-spar">người khai báo</span> </td> <td>-</td> <td>bất kì<a href="declarations" title="cpp/language/declarations">declarator</a>Ngoại trừ một trình khai báo tham chiếu khác (không có tài liệu tham khảo đến các tài liệu tham khảo)</td>
</tr> <tr class="t-par"> <td> <span class="t-spar">attr</span> </td> <td>-</td> <td> <span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span>Danh sách của<a href="attributes" title="cpp/language/attributes">attributes</a> </td>
</tr>
</table> <p>Một tham chiếu được yêu cầu được khởi tạo để tham khảo một đối tượng hoặc chức năng hợp lệ: xem<a href="reference_initialization" title="cpp/language/reference initialization">reference initialization</a>.</p>
<p>Loại tham chiếu đến (có thể là CV đủ điều kiện)<span class="kw4">Vô hiệu</span>Không thể hình thành.</p>
<p>Các loại tham chiếu không thể<a href="cv" title="cpp/language/cv">cv-qualified</a>ở cấp cao nhất; Không có cú pháp cho điều đó trong Tuyên bố, và nếu một trình độ được thêm vào một tên typedef<span class="t-rev-inl t-since-cxx11"><span>hoặc<a href="decltype" title="cpp/language/decltype"><code>decltype</code></a>người xác định</span><span><span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span></span></span>hoặc<a href="template_parameters#Type_template_parameter" title="cpp/language/template parameters">type template parameter</a>, nó bị bỏ qua.</p>
<p>Tài liệu tham khảo không phải là đối tượng; Chúng không nhất thiết phải chiếm lưu trữ, mặc dù trình biên dịch có thể phân bổ lưu trữ nếu cần phải thực hiện ngữ nghĩa mong muốn (ví dụ: một thành viên dữ liệu không tĩnh thuộc loại tham chiếu thường tăng kích thước của lớp theo số lượng cần thiết để lưu trữ địa chỉ bộ nhớ).</p>
<p>Bởi vì các tài liệu tham khảo không phải là đối tượng, không có mảng tài liệu tham khảo, không có con trỏ đến tài liệu tham khảo và không có tài liệu tham khảo nào đến các tài liệu tham khảo:</p>
<div class="cpp source-cpp"><pre data-language="cpp">int &amp; a [3]; // lỗi</pre></div> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx11">
<td> <h4 id="Reference_collapsing">int &amp;* p;   // lỗi</h4> <p>int &amp; &amp; r;   // lỗi<i>Tham chiếu sụp đổ</i>Nó được phép hình thành các tham chiếu đến các tài liệu tham khảo thông qua các thao tác loại trong các mẫu hoặc typedefs, trong trường hợp đó</p>
<div class="cpp source-cpp"><pre data-language="cpp">tham chiếu sụp đổ</pre></div> <p>Quy tắc áp dụng: Tham khảo rvalue cho tham chiếu rvalue sụp đổ để tham khảo rvalue, tất cả các kết hợp khác tạo thành tham chiếu lvalue:<a href="template_argument_deduction" title="cpp/language/template argument deduction">template argument deduction</a>Chuyển đổi danh tính:<code>T&amp;&amp;</code>typedef int &amp; lref;<code><a href="../utility/forward" title="cpp/utility/forward">std::forward</a></code>typedef int &amp;&amp; rref;</p>
</td> <td><span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span></td>
</tr> </table> <h4 id="Lvalue_references">int n;</h4> <p> </p>
<div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">lref &amp; r1 = n; // loại r1 là int &amp;</pre></div> </div> <p>lref &amp;&amp; r2 = n; // loại R2 là int &amp;</p>
<div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">rref &amp; r3 = n; // loại R3 là int &amp;</pre></div> </div> <p>rref &amp;&amp; r4 = 1; // loại r4 là int &amp;&amp;<a href="value_category#lvalue" title="cpp/language/value category">lvalue</a>        typedef tuple &lt;cặp &lt;args1, args2&gt; ...&gt; type;</p>
<div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">(Điều này, cùng với các quy tắc đặc biệt cho</pre></div> </div> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx11">
<td> <h4 id="Rvalue_references">được sử dụng trong một mẫu chức năng, tạo thành các quy tắc tạo ra</h4> <p>khả thi.)<a href="reference_initialization#Lifetime_of_a_temporary" title="cpp/language/reference initialization">extend the lifetimes</a>Tài liệu tham khảo Lvalue</p>
<div class="cpp source-cpp"><pre data-language="cpp">Các tài liệu tham khảo Lvalue có thể được sử dụng để bí danh một đối tượng hiện có (tùy chọn có trình độ CV khác nhau):</pre></div> <p>#include &lt;Istream&gt;<a href="overload_resolution" title="cpp/language/overload resolution">overloads</a>#include &lt;chuỗi&gt;</p>
<div class="cpp source-cpp"><pre data-language="cpp"> </pre></div> <p>int main ()<a href="move_constructor" title="cpp/language/move constructor">move constructors</a>Thì<a href="move_assignment" title="cpp/language/move assignment">move assignment</a>{<code><a href="../container/vector/push_back" title="cpp/container/vector/push back">std::vector::push_back()</a></code>    std :: chuỗi s = "ex";</p>
<p>    std :: chuỗi &amp; r1 = s;</p>
<div class="cpp source-cpp"><pre data-language="cpp">    const std :: chuỗi &amp; r2 = s;</pre></div> <p> </p>
<div class="cpp source-cpp"><pre data-language="cpp">    r1 += "phong phú";           // sửa đổi s</pre></div> <h4 id="Forwarding_references">// r2 += "!";               // Lỗi: Không thể sửa đổi thông qua tham chiếu đến Const</h4> <p>    std :: cout &lt;&lt; r2 &lt;&lt; '\ n'; // In S, hiện đang giữ "ví dụ"<i>phía trước</i>}<code><a href="../utility/forward" title="cpp/utility/forward">std::forward</a></code>Chúng cũng có thể được sử dụng để thực hiện các ngữ nghĩa tham chiếu qua các cuộc gọi chức năng:</p>
<span class="t-li">1)</span>#include &lt;Istream&gt;<a href="template_parameters#Type_template_parameter" title="cpp/language/template parameters">type template parameter</a>#include &lt;chuỗi&gt;<div class="cpp source-cpp"><pre data-language="cpp"> </pre></div> <span class="t-li">2)</span> <code>auto&amp;&amp;</code>void Double_String (STD :: String &amp; S)<div class="cpp source-cpp"><pre data-language="cpp">{</pre></div> <p>(chức năng)<a href="template_argument_deduction#Deduction_from_a_function_call" title="cpp/language/template argument deduction">template argument deduction</a>Và<code><a href="../utility/forward" title="cpp/utility/forward">std::forward</a></code>.</p>
</td> <td><span class="t-mark-rev t-since-cxx11">(kể từ C ++ 11)</span></td>
</tr> </table> <h4 id="Dangling_references">};</h4> <p>    s += s; // 'S' là cùng một đối tượng với main () 's' str '<a href="lifetime" title="cpp/language/lifetime">lifetime</a>}<i> </i>int main ()</p>
<div class="cpp source-cpp"><pre data-language="cpp">{</pre></div> <p>    std :: chuỗi str = "test";<a href="reference_initialization#Lifetime_of_a_temporary" title="cpp/language/reference initialization">Reference initialization</a>    double_String (str);</p>
<p>    std :: cout &lt;&lt; str &lt;&lt; '\ n';<a href="lifetime#Access_outside_of_lifetime" title="cpp/language/lifetime">Access outside of lifetime</a>để biết chi tiết).</p>
<h3 id="Notes">Ghi chú</h3> <table class="wikitable ftm-begin ftm-has-value"> <tr> <th>Tính năng Test Macro</th> <th>vĩ mô</th> <th><span title="Standard in which the feature is introduced">Giá trị</span></th> <th>STD</th>
</tr> <tr> <td><a href="../feature_test#cpp_rvalue_references" title="cpp/feature test"><code>__cpp_rvalue_references</code></a></td> <td><span class="nu0">}</span></td> <td><span class="t-mark">unininitialized_copy_n</span></td> <td>
<a href="#Rvalue_references">Rvalue references</a> </td>
</tr>
</table> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/1510.html" rel="nofollow">CWG 1510</a> </td> <td>C ++ 11</td> <td>Khi loại trả về của hàm là tham chiếu lvalue, biểu thức cuộc gọi chức năng trở thành<code>decltype</code> </td> <td>cho phép</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/2550.html" rel="nofollow">CWG 2550</a> </td> <td>C ++ 98</td> <td>#include &lt;Istream&gt;<span class="kw4">Vô hiệu</span>Kiểu hướng đến của một con trỏ đến thành viên có thể là một con trỏ đến thành viên: Con trỏ cho các thành viên có thể là đa cấp và có thể được điều kiện bằng CV khác nhau ở mọi cấp độ. Các kết hợp đa cấp hỗn hợp của con trỏ và con trỏ cũng được cho phép:</td> <td>#include &lt;chuỗi&gt;</td>
</tr>
</table> <h3 id="External_links">Liên kết bên ngoài</h3> <table> <tr style="vertical-align:top;"> <td> </td> <td> <a class="external text" href="http://thbecker.net/articles/rvalue_references/section_01.html" rel="nofollow">C++ Rvalue References Explained</a> </td>
</tr>
</table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/language/reference">https://en.cppreference.com/w/cpp/language/reference</a>
</p>
</div>
