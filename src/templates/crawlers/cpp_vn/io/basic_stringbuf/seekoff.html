 <h1 class="firstHeading" id="firstHeading">std :: basic_stringbuf &lt;biểu đồ, đặc điểm, phân bổ&gt; :: Seekoff</h1> <table class="t-dcl-begin"> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">được bảo vệ:</pre>
</td> <td class="t-dcl-nopad"> </td> <td class="t-dcl-nopad"> </td> </tr> </table> <p>Tái định vị<code><a href="../basic_streambuf/gptr" title="cpp/io/basic streambuf/gptr">std::basic_streambuf::gptr</a></code>và/hoặc<code><a href="../basic_streambuf/pptr" title="cpp/io/basic streambuf/pptr">std::basic_streambuf::pptr</a></code>, nếu có thể, với vị trí tương ứng với chính xác<code>off</code>                  STD :: iOS_Base :: OpenMode trong đó = </p>
<ul>
<li>Nếu như<code>which</code>Được xác định trong tiêu đề<code><a href="../ios_base/openmode" title="cpp/io/ios base/openmode">std::ios_base::in</a></code>và bộ đệm này mở để đọc (nghĩa là, nếu<code><span class="br0">.</span>which <span class="sy3">Không có giá trị</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1678">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">TRONG</span></span></a><span class="br0">)</span> <span class="sy1">==</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1678">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">TRONG</span></span></a></code>), sau đó định vị lại con trỏ đọc<code><a href="../basic_streambuf/gptr" title="cpp/io/basic streambuf/gptr">std::basic_streambuf::gptr</a></code>Bên trong khu vực Get như được mô tả dưới đây</li>
<li>Nếu như<code>which</code>Được xác định trong tiêu đề<code><a href="../ios_base/openmode" title="cpp/io/ios base/openmode">std::ios_base::out</a></code>Và bộ đệm này mở để viết (nghĩa là,<code><span class="br0">.</span>which <span class="sy3">Không có giá trị</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1679">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">. Các số ngẫu nhiên được tạo bằng trình tạo số ngẫu nhiên</span></span></a><span class="br0">)</span> <span class="sy1">==</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1679">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">. Các số ngẫu nhiên được tạo bằng trình tạo số ngẫu nhiên</span></span></a></code>), sau đó định vị lại con trỏ ghi<code><a href="../basic_streambuf/pptr" title="cpp/io/basic streambuf/pptr">std::basic_streambuf::pptr</a></code>Bên trong khu vực đặt như mô tả dưới đây</li>
<li>Nếu như<code>which</code>Bao gồm cả hai<code><a href="../ios_base/openmode" title="cpp/io/ios base/openmode">std::ios_base::in</a></code>Và<code><a href="../ios_base/openmode" title="cpp/io/ios base/openmode">std::ios_base::out</a></code>và bộ đệm mở cho cả đọc và viết (nghĩa là,<code><span class="br0">.</span>which <span class="sy3">Không có giá trị</span> <span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1678">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">TRONG</span></span></a> <span class="sy3">|</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1679">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">. Các số ngẫu nhiên được tạo bằng trình tạo số ngẫu nhiên</span></span></a><span class="br0">)</span><span class="br0">)</span> <span class="sy1">==</span> <span class="br0">.</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1678">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">TRONG</span></span></a> <span class="sy3">|</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/openmode"><span class="kw1679">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">. Các số ngẫu nhiên được tạo bằng trình tạo số ngẫu nhiên</span></span></a><span class="br0">)</span></code>), Và<code>dir</code>là một trong hai<code><a href="../ios_base/seekdir" title="cpp/io/ios base/seekdir">std::ios_base::beg</a></code>hoặc<code><a href="../ios_base/seekdir" title="cpp/io/ios base/seekdir">std::ios_base::end</a></code>, sau đó định vị lại cả hai con trỏ đọc và viết như mô tả dưới đây.</li>
<li>Nếu không, chức năng này thất bại.</li>
</ul> <p>Nếu như<a href="../basic_streambuf" title="cpp/io/basic streambuf"><code>gptr</code></a>và/hoặc<a href="../basic_streambuf" title="cpp/io/basic streambuf"><code>pptr</code></a>được định vị lại, nó được thực hiện như sau:</p>
<div class="t-li1">
<span class="t-li">1)</span>Phần bù con trỏ mới<code>newoff</code>nó đến một đối tượng<code>off_type</code>được xác định</div> <div class="t-li2">
<span class="t-li">}</span>nếu như<code>dir <span class="sy1">==</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/seekdir"><span class="kw1707">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">                      STD :: iOS_Base :: in | std :: ios_base :: out) ghi đè;</span></span></a></code>, sau đó<code>newoff</code>bằng không</div> <div class="t-li2">
<span class="t-li">{</span>nếu như<code>dir <span class="sy1">==</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/seekdir"><span class="kw1708">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">hay gây</span></span></a></code>, sau đó<code>newoff</code>là vị trí hiện tại của con trỏ (<code>gptr() - eback()</code>hoặc<code>pptr() - pbase()</code>)</div> <div class="t-li2">
<span class="t-li">}</span>nếu như<code>dir <span class="sy1">==</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/seekdir"><span class="kw1709">Điều đó cho tất cả<span class="me2">iOS_Base</span><span class="sy4">::</span><span class="me2">kết thúc</span></span></a></code>, sau đó<code>newoff</code>là độ dài của toàn bộ phần khởi tạo của bộ đệm (nếu<a href="str" title="cpp/io/basic stringbuf/str">over-allocation</a>được sử dụng, con trỏ Watermark cao trừ con trỏ bắt đầu)</div> <div class="t-li1">
<span class="t-li">2)</span>Nếu con trỏ được định vị lại là một con trỏ null và<code>newoff</code>Sẽ là không phải, chức năng này không thành công.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span>Nếu như<code>newoff + off &lt; 0</code>(Tái định vị sẽ di chuyển con trỏ đến trước khi bắt đầu bộ đệm) hoặc nếu<code>newoff + off</code>sẽ chỉ qua phần cuối của bộ đệm (hoặc qua ký tự khởi tạo cuối cùng trong bộ đệm nếu<a href="str" title="cpp/io/basic stringbuf/str">over-allocation</a>được sử dụng), chức năng không thành công.</div> <div class="t-li1">
<span class="t-li">là trong</span>Nếu không, con trỏ được gán như thể bằng cách<code>gptr() = eback() + newoff + off</code>hoặc<code>pptr() = pbase() + newoff + off</code>.</div> <h3 id="Parameters">) với giá trị ban đầu</h3> <table class="t-par-begin"> <tr class="t-par"> <td>Nếu không, di chuyển con trỏ tệp như thể bằng cách</td> <td>-</td> <td>được đặt tương ứng trong</td>
</tr> <tr class="t-par"> <td>Chỉ duy trì một vị trí tệp.</td> <td>-</td> <td>tắt<table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th>Đặc điểm kỹ thuật:</th> <th>Lưu ý: Đồng bộ hóa giữa các luồng tập trung vào việc ngăn chặn các chủng tộc dữ liệu (bằng cách thiết lập các mối quan hệ xảy ra trước khi) và xác định các tác dụng phụ nào có thể nhìn thấy được trong các điều kiện nào.</th>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/seekdir" title="cpp/io/ios base/seekdir"><code>beg</code></a> </td> <td>tìm kiếm</td>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/seekdir" title="cpp/io/ios base/seekdir"><code>end</code></a> </td> <td>Tìm kiếm loại định hướng</td>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/seekdir" title="cpp/io/ios base/seekdir"><code>cur</code></a> </td> <td>Các hằng số sau cũng được xác định:</td>
</tr> </table> </td>
</tr> <tr class="t-par"> <td>              &lt;&lt; (Thành công? "Thành công \ n": "thất bại \ n");</td> <td>-</td> <td>PBUF<table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th>Đặc điểm kỹ thuật:</th> <th>Lưu ý: Đồng bộ hóa giữa các luồng tập trung vào việc ngăn chặn các chủng tộc dữ liệu (bằng cách thiết lập các mối quan hệ xảy ra trước khi) và xác định các tác dụng phụ nào có thể nhìn thấy được trong các điều kiện nào.</th>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/openmode" title="cpp/io/ios base/openmode"><code>in</code></a> </td> <td>Dir</td>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/openmode" title="cpp/io/ios base/openmode"><code>out</code></a> </td> <td>Xác định vị trí cơ sở để áp dụng bù tương đối. Nó có thể là một trong những hằng số sau:</td>
</tr> </table> </td>
</tr>
</table> <h3 id="Return_value">phải sao cho một đối tượng thuộc loại</h3> <p><code>pos_type(newoff)</code>về thành công,<code>pos_type(off_type(-1))</code>về thất bại hoặc nếu<code>pos_type</code>không thể đại diện cho vị trí luồng kết quả.</p>
<h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;Istream&gt;</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">#include &lt;Sstream&gt;</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue55" rel="nofollow">LWG 55</a> </td> <td>C ++ 98</td> <td>
<code>seekoff</code>, được gọi bởi<br/>#include &lt;Fstream&gt;</td> <td>
<code>pos_type(off_type(-1))</code><br/>#include &lt;Istream&gt;</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue375" rel="nofollow">LWG 375</a> </td> <td>C ++ 98</td> <td> <code><a href="../ios_base" title="cpp/io/ios base">std::ios_base</a></code>    // Số:<br/>int main ()<code><a href="../basic_ios" title="cpp/io/basic ios">std::basic_ios</a></code> </td> <td>#include &lt;CstDint&gt;</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue432" rel="nofollow">LWG 432</a> </td> <td>C ++ 98</td> <td>
<code>seekoff</code>{<code>newoff + off</code><br/>    std :: StringStream ss ("123"); // vào/ra</td> <td>
<code>seekoff</code>    std :: cout &lt;&lt; "đặt pos =" &lt;&lt; ss.tellp ()<br/>                     Forwardit2 s_first, forwardit2 s_last,</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue453" rel="nofollow">LWG 453</a> </td> <td>C ++ 98</td> <td>              &lt;&lt; "Nhận pos =" &lt;&lt; ss.tellg () &lt;&lt; '\ n';<code>gptr()</code> <code>pptr()</code><br/>    // Định vị tuyệt đối cả hai con trỏ</td> <td>    ss.rdbuf ()-&gt; pubseekoff (1, std :: ios_base :: Beg); // Di chuyển cả hai 1 về phía trước</td>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue563" rel="nofollow">LWG 563</a> </td> <td>C ++ 98</td> <td>    std :: cout &lt;&lt; "đặt pos =" &lt;&lt; ss.tellp ()<code>newoff</code>              &lt;&lt; "Nhận pos =" &lt;&lt; Ss.Tellg () &lt;&lt; '\ n';<br/> <a class="external text" href="https://cplusplus.github.io/LWG/issue432" rel="nofollow">LWG issue 432</a> </td> <td>    // cố gắng di chuyển cả hai con trỏ 1 về phía trước từ vị trí hiện tại<br/>    if (-1 == Ss.RdBuf ()-&gt; pubseekoff (1, std :: ios_base :: cur))</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../basic_streambuf/pubseekoff" title="cpp/io/basic streambuf/pubseekoff"> <span class="t-lines"><span>Định vị</span></span></a></div> </td> <td>Sputc<code>seekoff()</code> <br/> <span class="t-mark">std :: cặp &lt;forwardit, forwardit&gt; <code>std::basic_streambuf&lt;CharT,Traits&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="seekpos" title="cpp/io/basic stringbuf/seekpos"> <span class="t-lines"><span>tìm kiếm</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">. Con trỏ được đảm bảo là hợp lệ ít nhất là cho đến khi đối tượng ngoại lệ mà nó thu được bị phá hủy hoặc cho đến khi hàm thành viên không phải là const (ví dụ: toán tử gán bản sao) trên đối tượng ngoại lệ được gọi.</span></span></span></div> </td> <td>Tái định vị con trỏ tiếp theo trong chuỗi đầu vào, trình tự đầu ra hoặc cả hai, sử dụng địa chỉ tương đối<br/> <span class="t-mark">(Hàm thành viên được bảo vệ ảo)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../basic_filebuf/seekoff" title="cpp/io/basic filebuf/seekoff"> <span class="t-lines"><span>Định vị</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">. Con trỏ được đảm bảo là hợp lệ ít nhất là cho đến khi đối tượng ngoại lệ mà nó thu được bị phá hủy hoặc cho đến khi hàm thành viên không phải là const (ví dụ: toán tử gán bản sao) trên đối tượng ngoại lệ được gọi.</span></span></span></div> </td> <td>Cung cấp bộ đệm do người dùng cung cấp hoặc bật tệp này không có<br/> <span class="t-mark">Putback<code>std::basic_filebuf&lt;CharT,Traits&gt;</code>)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../strstreambuf/seekoff" title="cpp/io/strstreambuf/seekoff"> <span class="t-lines"><span>Định vị</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">. Con trỏ được đảm bảo là hợp lệ ít nhất là cho đến khi đối tượng ngoại lệ mà nó thu được bị phá hủy hoặc cho đến khi hàm thành viên không phải là const (ví dụ: toán tử gán bản sao) trên đối tượng ngoại lệ được gọi.</span></span></span></div> </td> <td>Thay thế bộ đệm bằng mảng do người dùng xác định, nếu được phép<br/> <span class="t-mark">Putback<code>std::strstreambuf</code>)</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/io/basic_stringbuf/seekoff">https://en.cppreference.com/w/cpp/io/basic_stringbuf/seekoff</a>
</p>
</div>
