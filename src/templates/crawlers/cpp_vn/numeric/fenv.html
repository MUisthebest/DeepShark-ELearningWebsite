 <h1 class="firstHeading" id="firstHeading">Môi trường nổi</h1> <p>Môi trường dấu phẩy động là tập hợp các cờ trạng thái dấu phẩy động và các chế độ điều khiển được hỗ trợ bởi việc triển khai. Nó là địa điểm địa lý. Mỗi luồng kế thừa trạng thái ban đầu của môi trường dấu phẩy động của nó từ luồng cha. Các hoạt động dấu phẩy động sửa đổi các cờ trạng thái dấu phẩy động để chỉ ra kết quả bất thường hoặc thông tin phụ trợ. Trạng thái của các chế độ điều khiển điểm nổi ảnh hưởng đến kết quả của một số hoạt động dấu phẩy động.</p>
<p>Việc truy cập và sửa đổi môi trường dấu nổi chỉ có ý nghĩa khi<a href="../preprocessor/impl" title="cpp/preprocessor/impl"><code> #pragma STDC FENV_ACCESS</code></a>được hỗ trợ và được đặt thành<code>ON</code>. Mặt khác, việc triển khai có thể tự do giả định rằng các chế độ điều khiển dấu phẩy động luôn là các chế độ mặc định và các cờ trạng thái điểm nổi không bao giờ được kiểm tra hoặc sửa đổi. Trong thực tế, một vài trình biên dịch hiện tại, chẳng hạn như HP ACC, Oracle Studio hoặc IBM XL, hỗ trợ<code>#pragma</code>Rõ ràng, nhưng hầu hết các trình biên dịch cho phép truy cập có ý nghĩa vào môi trường dấu phẩy động.</p>
<h3 id="Types">Loại</h3> <table class="t-dsc-begin"> <tr class="t-dsc-header"> <th colspan="2">C Thư viện<code><a href="../header/cfenv" title="cpp/header/cfenv">&lt;cfenv&gt;</a></code> </th>
</tr> <tr class="t-dsc"> <td> <code>fenv_t</code> </td> <td>Loại đại diện cho toàn bộ môi trường nổi</td>
</tr> <tr class="t-dsc"> <td> <code>fexcept_t</code> </td> <td>Loại đại diện cho tất cả các cờ trạng thái dấu phẩy động</td>
</tr> </table> <h3 id="Functions">Chức năng</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="fenv/feclearexcept" title="cpp/numeric/fenv/feclearexcept"> <span class="t-lines"><span>feclearexcept</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Xóa các cờ trạng thái dấu phẩy động được chỉ định<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/fetestexcept" title="cpp/numeric/fenv/fetestexcept"> <span class="t-lines"><span>Thuốc phai tim</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Xác định cờ trạng thái dấu phẩy nổi được chỉ định nào được đặt<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/feraiseexcept" title="cpp/numeric/fenv/feraiseexcept"> <span class="t-lines"><span>Feraiseexcept</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>tăng các trường hợp ngoại lệ nổi được chỉ định<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/feexceptflag" title="cpp/numeric/fenv/feexceptflag"> <span class="t-lines"><span>fegetexceptflag</span><span>fesetexceptflag</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>sao chép trạng thái của các cờ trạng thái dấu phẩy động được chỉ định từ hoặc vào môi trường dấu phẩy<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/feround" title="cpp/numeric/fenv/feround"> <span class="t-lines"><span>Fegetround</span><span>Fesetround</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Nhận hoặc đặt hướng làm tròn<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/feenv" title="cpp/numeric/fenv/feenv"> <span class="t-lines"><span>FEGETENV</span><span>Fesetenv</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>tiết kiệm hoặc khôi phục môi trường nổi hiện tại<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/feholdexcept" title="cpp/numeric/fenv/feholdexcept"> <span class="t-lines"><span>FekeepExcept</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Lưu môi trường, xóa tất cả các cờ trạng thái và bỏ qua tất cả các lỗi trong tương lai<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/feupdateenv" title="cpp/numeric/fenv/feupdateenv"> <span class="t-lines"><span>feupdateenv</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Phục hồi môi trường nổi và nâng cao các trường hợp ngoại lệ được nêu ra trước đó<br/> <span class="t-mark">Tìm kiếm một mảng cho một yếu tố thuộc loại không xác định</span> </td>
</tr> </table> <h3 id="Macros">Macro</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="fenv/fe_exceptions" title="cpp/numeric/fenv/FE exceptions"> <span class="t-lines"><span>Fe_all_except</span><span>Fe_Divbyzero</span><span>Fe_inexact</span><span>Fe_invalid</span><span>Fe_Overflow</span><span>Fe_underflow</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Ngoại lệ dấu phẩy động<br/> <span class="t-mark">(Hằng số vĩ mô)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/fe_round" title="cpp/numeric/fenv/FE round"> <span class="t-lines"><span>Fe_Downward</span><span>Fe_tonearest</span><span>Fe_Towardzero</span><span>Fe_upward</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>hướng làm tròn điểm nổi<br/> <span class="t-mark">(Hằng số vĩ mô)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="fenv/fe_dfl_env" title="cpp/numeric/fenv/FE DFL ENV"> <span class="t-lines"><span>FE_DFL_ENV</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">unininitialized_copy_n</span></span></span></div> </td> <td>Môi trường dấu phẩy mặc định<br/> <span class="t-mark">(Hằng số vĩ mô)</span> </td>
</tr> </table> <h3 id="Notes">Ghi chú</h3> <p>Các ngoại lệ dấu phẩy động không liên quan đến các ngoại lệ C ++. Khi một hoạt động dấu phẩy động làm tăng ngoại lệ điểm nổi, trạng thái của môi trường dấu phẩy động thay đổi, có thể được kiểm tra với<code><a href="fenv/fetestexcept" title="cpp/numeric/fenv/fetestexcept">std::fetestexcept</a></code>, nhưng việc thực hiện chương trình C ++ trên hầu hết các triển khai vẫn không bị gián đoạn.</p>
<p>Có các tiện ích mở rộng trình biên dịch có thể được sử dụng để tạo các ngoại lệ C ++ tự động bất cứ khi nào một ngoại lệ dấu phẩy động được nâng lên:</p>
<ul>
<li>Chức năng GNU LIBC<a class="external text" href="https://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Control-Functions.html" rel="nofollow"><code>feenableexcept()</code></a>Cho phép bẫy các ngoại lệ điểm nổi, tạo ra tín hiệu<code>SIGFPE</code>. Nếu tùy chọn trình biên dịch<code>-fnon-call-exceptions</code>Đã được sử dụng, trình xử lý cho tín hiệu đó có thể ném ngoại lệ C ++ do người dùng xác định.</li>
<li>Hàm MSVC<a class="external text" href="https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/control87-controlfp-control87-2" rel="nofollow"><code>_control87()</code></a>Cho phép bẫy các ngoại lệ dấu phẩy động, tạo ra một ngoại lệ phần cứng, có thể được chuyển đổi thành các ngoại lệ C ++ với<a class="external text" href="https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/set-se-translator" rel="nofollow"><code>_set_se_translator</code></a>.</li>
</ul> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/numeric/fenv" title="c/numeric/fenv">C documentation</a></span>vì<code>Floating-point environment</code> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/numeric/fenv">https://en.cppreference.com/w/cpp/numeric/fenv</a>
</p>
</div>
