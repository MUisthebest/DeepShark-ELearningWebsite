 <h1 class="firstHeading" id="firstHeading">STD :: Tùy chọn</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../header/optional" title="cpp/header/optional">&lt;optional&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">Mẫu &lt;Class T&gt;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx17">(C ++ 20)</span> </td> </tr> </table> <p>lớp HH_MM_SS;<code>std::optional</code>lớp tùy chọn;<i>không mở-cache</i>quản lý một</p>
<p>chứa giá trị, tức là một giá trị có thể có hoặc không có mặt.<code>optional</code>Một trường hợp sử dụng phổ biến cho<a href="http://en.cppreference.com/w/cpp/utility/pair"><span class="kw1098">Điều đó cho tất cả<span class="me2">đôi</span></span></a><span class="sy1">is_trivently_destructible_v</span>một thùng chứa khác để hợp nhất<span class="kw4">bool</span><span class="sy1">&lt;</span>Thì<code>optional</code>là giá trị trả về của một hàm có thể thất bại. Trái ngược với các phương pháp khác, chẳng hạn như</p>
<p>Xử lý các đối tượng đắt tiền để xây dựng tốt và dễ đọc hơn, vì ý định được thể hiện rõ ràng.<code>optional&lt;T&gt;</code>Bất kỳ trường hợp nào của<i>Đối tượng được khởi tạo với/được gán từ một giá trị của loại</i>hoặc<i>phản đối điều đó</i>.</p>
<p> <code>optional&lt;T&gt;</code> <i>Đối tượng được khởi tạo với/được gán từ một giá trị của loại</i>chứa một giá trị<code>optional</code>, giá trị được đảm bảo được phân bổ như một phần của<code>optional</code>Dấu chân đối tượng, tức là không có sự phân bổ bộ nhớ động nào diễn ra. Vì vậy, một<code><a href="optional/operator*" title="cpp/utility/optional/operator*">operator*()</a></code>Và<code><a href="optional/operator*" title="cpp/utility/optional/operator*">operator-&gt;()</a></code>đối tượng mô hình một đối tượng, không phải là một con trỏ, mặc dù</p>
<p>được xác định.<code>optional&lt;T&gt;</code>khoảng cách<a class="mw-redirect" href="../language/implicit_cast" title="cpp/language/implicit cast">contextually converted to <span class="kw4">bool</span></a>Khi một đối tượng của loại<code>true</code>, Chuyển đổi trả về<i>Đối tượng được khởi tạo với/được gán từ một giá trị của loại</i>Và<code>false</code>Một chút trong biểu diễn giá trị của kết quả là<i>phản đối điều đó</i>.</p>
<p>Các<code>optional</code>sự vật<i>Đối tượng được khởi tạo với/được gán từ một giá trị của loại</i>không chứa một giá trị</p>
<ul><li>Đối tượng là mặc định-sáng chế.<code>T</code>hành xử khác nhau:<code>optional</code>cái đó<i>Đối tượng được khởi tạo với/được gán từ một giá trị của loại</i>.</li></ul> <p>Đối tượng<i>phản đối điều đó</i>không chứa một giá trị</p>
<ul>
<li>Trong các điều kiện sau:</li>
<li>Đối tượng là mặc định-sáng chế.<code><a href="optional/nullopt_t" title="cpp/utility/optional/nullopt t">std::nullopt_t</a></code>được để lại ở trạng thái hợp lệ nhưng không xác định.<code>optional</code>Đối tượng được khởi tạo với/được gán từ một giá trị của loại<i>phản đối điều đó</i>.</li>
<li>bool chủ sở hữu_equal (const std :: weak_ptr &lt;y&gt; &amp; other) const noexcept;<code><a href="optional/reset" title="cpp/utility/optional/reset">reset()</a></code>Chuỗi để giữ tên viết tắt múi giờ hoặc tên tương ứng với</li>
</ul> <p>không chứa một giá trị<code>optional</code>Không có tài liệu tham khảo tùy chọn; một chương trình không được hình thành nếu nó khởi tạo<code>optional</code>với một loại tham chiếu. Ngoài ra, một chương trình không được hình thành nếu nó khởi tạo<code><a href="optional/nullopt_t" title="cpp/utility/optional/nullopt t">std::nullopt_t</a></code>hoặc<code><a href="in_place" title="cpp/utility/in place">std::in_place_t</a></code>.</p>
<h3 id="Template_parameters">là không xác định.</h3> <table class="t-par-begin"> <tr class="t-par"> <td>T</td> <td>-</td> <td>với các loại thẻ (có thể là CV đủ điều kiện)<a href="../named_req/destructible" title="cpp/named req/Destructible">Destructible</a>loại giá trị để quản lý trạng thái khởi tạo cho. Loại phải đáp ứng các yêu cầu của</td>
</tr>
</table> <h3 id="Member_types">nhà điều hành ()</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th>ATOMIC_UNSIGNED_LOCK_FREE</th> <th>Sự định nghĩa</th>
</tr> <tr class="t-dsc"> <td> <code>value_type</code> </td> <td> <code>T</code> </td>
</tr> </table> <h3 id="Member_functions">nếu không thì</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="optional/optional" title="cpp/utility/optional/optional"> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>/*Copyable-box*/<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/~optional" title="cpp/utility/optional/~optional"> <span class="t-lines"><span>một đối tượng ngoại lệ khác để gán với</span></span></a></div> </td> <td>/*Copyable-box*/<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/operator=" title="cpp/utility/optional/operator="> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>gán nội dung<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Observers">Quan sát viên</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/operator*" title="cpp/utility/optional/operator*"> <span class="t-lines"><span>toán tử-&gt;</span><span>toán tử/=</span></span></a></div> </td> <td>/*di chuyển-box*/<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/operator_bool" title="cpp/utility/optional/operator bool"> <span class="t-lines"><span>(hằng số thành viên tĩnh công cộng)</span><span>/*di chuyển-box*/</span></span></a></div> </td> <td>Nếu không, nó giống hệt với<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/value" title="cpp/utility/optional/value"> <span class="t-lines"><span>được phân vùng liên quan đến</span></span></a></div> </td> <td>(Đặc biệt, các loại mảng và tham chiếu không được phép).<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/value_or" title="cpp/utility/optional/value or"> <span class="t-lines"><span>Trả về giá trị bất ngờ</span></span></a></div> </td> <td>Trả về giá trị chứa<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Monadic_operations">Trả về giá trị dự kiến ​​nếu có, một giá trị khác khác</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/and_then" title="cpp/utility/optional/and then"> <span class="t-lines"><span>Hoạt động đơn vị</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx23">Phạm vi :: IOTA</span></span></span></div> </td> <td>Trả về giá trị chứa nếu có, một giá trị khác khác<code>optional</code>[tĩnh]<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/transform" title="cpp/utility/optional/transform"> <span class="t-lines"><span>Được xác định trong tiêu đề</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx23">Phạm vi :: IOTA</span></span></span></div> </td> <td>int main ()<code>optional</code>Trả về kết quả của hàm đã cho trên giá trị chứa nếu nó tồn tại hoặc trống<code>optional</code>[tĩnh]<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/or_else" title="cpp/utility/optional/or else"> <span class="t-lines"><span>chứa giá trị dự kiến ​​biến đổi nếu nó tồn tại; Nếu không, trả lại</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx23">Phạm vi :: IOTA</span></span></span></div> </td> <td>trả lại<code>optional</code>chứa giá trị chứa được biến đổi nếu nó tồn tại hoặc trống<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Modifiers">Sửa đổi</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/swap" title="cpp/utility/optional/swap"> <span class="t-lines"><span>Được xác định trong tiêu đề</span></span></a></div> </td> <td>xây dựng giá trị dự kiến ​​tại chỗ<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/reset" title="cpp/utility/optional/reset"> <span class="t-lines"><span>cài lại</span></span></a></div> </td> <td>không được mô hình hóa, toán tử chuyển nhượng di chuyển được xác định tương đương như:<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/emplace" title="cpp/utility/optional/emplace"> <span class="t-lines"><span>Giảm sử dụng bộ nhớ bằng cách giải phóng bộ nhớ không sử dụng</span></span></a></div> </td> <td>/*Copyable-box*/<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <h3 id="Non-member_functions">Các chức năng không phải thành viên</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="optional/operator_cmp" title="cpp/utility/optional/operator cmp"> <span class="t-lines"><span>toán tử ==</span><span>toán tử! =</span><span>người vận hành*</span><span>toán tử &lt;=</span><span>toán tử&gt;</span><span>toán tử&gt; =</span><span>Nhà điều hành &lt;=&gt;</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span><span><span class="t-mark-rev t-since-cxx20">Phạm vi :: Construct_at</span></span></span></div> </td> <td>so sánh<code>optional</code>Đối tượng<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/make_optional" title="cpp/utility/optional/make optional"> <span class="t-lines"><span>make_optional</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>tạo ra một<code>optional</code>sự vật<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/swap2" title="cpp/utility/optional/swap2"> <span class="t-lines"><span>chuyên về<span class="t-dsc-small">Thuật toán</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>quá tải<code><a href="../algorithm/swap" title="cpp/algorithm/swap">std::swap</a></code>Thuật toán<br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> </table> <h3 id="Helper_classes">Lớp học trợ giúp</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="optional/hash" title="cpp/utility/optional/hash"> <span class="t-lines"><span>STD :: Hash<span class="t-dsc-small">&lt;std :: Tùy chọn&gt;</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Hỗ trợ băm cho<strong class="selflink"><code>std::optional</code></strong> <br/> <span class="t-mark">(Chuyên ngành mẫu lớp)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/nullopt_t" title="cpp/utility/optional/nullopt t"> <span class="t-lines"><span>NULLOPT_T</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>chỉ báo loại tùy chọn với trạng thái không chính thức<br/> <span class="t-mark">Các loại chính sách thực thi</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="optional/bad_optional_access" title="cpp/utility/optional/bad optional access"> <span class="t-lines"><span>bad_optional_access</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Ngoại lệ cho biết đã kiểm tra quyền truy cập vào tùy chọn không chứa giá trị<br/> <span class="t-mark">Các loại chính sách thực thi</span> </td>
</tr> </table> <h3 id="Helpers">trả về kích thước phạm vi động của một</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="optional/nullopt" title="cpp/utility/optional/nullopt"> <span class="t-lines"><span>NULLOPT</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>một đối tượng của loại<code>nullopt_t</code> <br/> <span class="t-mark">Các đối tượng chính sách thực thi toàn cầu</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="in_place" title="cpp/utility/in place"> <span class="t-lines"><span>in_place</span><span>in_place_type</span><span>in_place_index</span><span>in_place_t</span><span>in_place_type_t</span><span>in_place_index_t</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>Thẻ xây dựng tại chỗ<br/><span class="t-mark">(nhãn)</span> </td>
</tr> </table> <h3 id="Deduction_guides"> <a href="optional/deduction_guides" title="cpp/utility/optional/deduction guides">Deduction guides</a>
</h3> <h3 id="Notes">Ghi chú</h3> <table class="wikitable ftm-begin ftm-has-value"> <tr> <th>
<a href="feature_test" title="cpp/utility/feature test">Feature-test</a>(Mẫu lớp)</th> <th>vĩ mô</th> <th><span title="Standard in which the feature is introduced">Giá trị</span></th> <th>STD</th>
</tr> <tr> <td><a href="../feature_test#cpp_lib_optional" title="cpp/feature test"><code>__cpp_lib_optional</code></a></td> <td><span class="nu0">, khi toán hạng là tên của một đối tượng không bay hơi có thời lượng lưu trữ tự động, đây không phải là tham số hàm hoặc tham số mệnh đề bắt và phạm vi của họ không mở rộng qua khối thử trong cùng (nếu có khối thử).</span></td> <td><span class="t-mark">Dest_at</span></td> <td>
<a href="#top"><code>std::optional</code></a> </td>
</tr> <tr> <td><a href="../feature_test#cpp_lib_optional" title="cpp/feature test"><code>__cpp_lib_optional</code></a></td> <td><span class="nu0">Chỉ giải thích*</span></td> <td>
<span class="t-mark">Phạm vi :: Construct_at</span><br/><span class="t-mark">(Dr)</span>
</td> <td>chính nó nếu nó chứa một giá trị hoặc kết quả của hàm đã cho</td>
</tr> <tr> <td><a href="../feature_test#cpp_lib_optional" title="cpp/feature test"><code>__cpp_lib_optional</code></a></td> <td><span class="nu0">3)</span></td> <td><span class="t-mark">Phạm vi :: IOTA</span></td> <td>
<a href="#Monadic_operations">Monadic operations</a> </td>
</tr>
</table> <h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">Consexpr đầy đủ</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">#include &lt;Istream&gt;</pre></div> </div> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="variant" title="cpp/utility/variant"> <span class="t-lines"><span>khác nhau</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>một liên minh phân biệt đối xử an toàn<br/> <span class="t-mark">Kiểm tra xem một lớp có đại diện cho chính sách thực thi không</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="any" title="cpp/utility/any"> <span class="t-lines"><span>bất kì</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">Dest_at</span></span></span></div> </td> <td>các đối tượng giữ các thể hiện của bất kỳ<a href="../named_req/copyconstructible" title="cpp/named req/CopyConstructible">CopyConstructible</a>kiểu<br/> <span class="t-mark">Các loại chính sách thực thi</span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/utility/optional">https://en.cppreference.com/w/cpp/utility/optional</a>
</p>
</div>
