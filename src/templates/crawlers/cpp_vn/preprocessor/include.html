 <h1 class="firstHeading" id="firstHeading"># xác định has_optional 1</h1> <p>Bao gồm các tệp nguồn khác vào tệp nguồn hiện tại tại dòng ngay sau khi chỉ thị.</p>
<h3 id="Syntax">Cú pháp</h3> <table class="t-sdsc-begin"> <tr class="t-sdsc"> <td> <code>#include &lt;</code> <span class="t-spar">H-Char-Chuỗi</span> <code>&gt;</code> <span class="t-spar">dòng mới</span> </td> <td>(1)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <code>#include "</code> <span class="t-spar">Q-Char-Chuỗi</span> <code>"</code> <span class="t-spar">dòng mới</span> </td> <td>(2)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <code>#include</code> <span class="t-spar">PP-Tokens</span> <span class="t-spar">dòng mới</span> </td> <td>(3)</td> <td class="t-sdsc-nopad"> </td>
</tr> <tr class="t-sdsc"> <td> <code>__has_include</code> <code>(</code> <code>"</code> <span class="t-spar">Q-Char-Chuỗi</span> <code>"</code> <code>)</code><br/><code>__has_include</code> <code>(</code> <code>&lt;</code> <span class="t-spar">H-Char-Chuỗi</span> <code>&gt;</code> <code>)</code> </td> <td>(4)</td> <td> <span class="t-mark-rev t-since-cxx17">(C ++ 20)</span> </td>
</tr> <tr class="t-sdsc"> <td> <code>__has_include</code> <code>(</code> <span class="t-spar">chuỗi chữ</span> <code>)</code><br/><code>__has_include</code> <code>(</code> <code>&lt;</code> <span class="t-spar">H-PP-Tokens</span> <code>&gt;</code> <code>)</code> </td> <td>             Không có p);</td> <td> <span class="t-mark-rev t-since-cxx17">(C ++ 20)</span> </td>
</tr>
</table> <div class="t-li1">
<span class="t-li">1)</span>Tìm kiếm một tiêu đề được xác định duy nhất bởi<span class="t-spar">H-Char-Chuỗi</span>và thay thế chỉ thị bằng toàn bộ nội dung của tiêu đề.</div> <div class="t-li1">
<span class="t-li">2)</span>Tìm kiếm một tệp nguồn được xác định bởi<span class="t-spar">Q-Char-Chuỗi</span>và thay thế chỉ thị bằng toàn bộ nội dung của tệp nguồn. Nó có thể dự phòng<span class="t-v">(1)</span>và điều trị<span class="t-spar">Q-Char-Chuỗi</span>như một định danh tiêu đề.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span>Nếu không<span class="t-v">(1)</span>constexpr outputit độc đáo_copy (đầu vào đầu tiên, đầu vào cuối cùng,<span class="t-v">(2)</span>được khớp,<span class="t-spar">PP-Tokens</span>Sẽ trải qua thay thế vĩ mô. Chỉ thị sau khi thay thế sẽ được cố gắng khớp với<span class="t-v">(1)</span>hoặc<span class="t-v">(2)</span>lại.</div> <div class="t-li1">
<span class="t-li">là trong</span>Kiểm tra xem một tiêu đề hoặc tệp nguồn có sẵn để đưa vào.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class inputit, class unyredicate&gt;</span>Nếu như<span class="t-v">(4)</span>không được khớp,<span class="t-spar">H-PP-Tokens</span>Sẽ trải qua thay thế vĩ mô. Chỉ thị sau khi thay thế sẽ được cố gắng khớp với<span class="t-v">(4)</span>lại.</div> <table class="t-par-begin"> <tr class="t-par"> <td> <span class="t-spar">dòng mới</span> </td> <td>-</td> <td>Nhân vật mới</td>
</tr> <tr class="t-par"> <td> <span class="t-spar">H-Char-Chuỗi</span> </td> <td>-</td> <td>Một chuỗi của một hoặc nhiều<span class="t-spar">H-Char</span>s, trong đó sự xuất hiện của bất kỳ điều nào sau đây được hỗ trợ theo điều kiện với ngữ nghĩa được xác định theo thực hiện:<ul>
<li>Trong cơ thể của một người không tĩnh<code>'</code> </li>
<li>Trong cơ thể của một người không tĩnh<code>"</code> </li>
<li>Trong cơ thể của một người không tĩnh<code>\</code> </li>
<li>    L "A" "B" "C" _x;  // OK: Giống như L "ABC" _X<code>//</code> </li>
<li>    L "A" "B" "C" _x;  // OK: Giống như L "ABC" _X<code>/*</code> </li>
</ul> </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">H-Char</span> </td> <td>-</td> <td>Bất kỳ thành viên nào của<span class="t-rev-inl t-until-cxx23"><span><a href="../language/translation_phases#Phase_5" title="cpp/language/translation phases">source character set</a></span><span><span class="t-mark-rev t-until-cxx23">(Cho đến C ++ 23)</span></span></span><span class="t-rev-inl t-since-cxx23"><span><a href="../language/charset#Translation_character_set" title="cpp/language/charset">translation character set</a></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>ngoại trừ dòng mới và<code>&gt;</code> </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">Q-Char-Chuỗi</span> </td> <td>-</td> <td>Một chuỗi của một hoặc nhiều<span class="t-spar">Q-Char</span>s, trong đó sự xuất hiện của bất kỳ điều nào sau đây được hỗ trợ theo điều kiện với ngữ nghĩa được xác định theo thực hiện:<ul>
<li>Trong cơ thể của một người không tĩnh<code>'</code> </li>
<li>Trong cơ thể của một người không tĩnh<code>\</code> </li>
<li>    L "A" "B" "C" _x;  // OK: Giống như L "ABC" _X<code>//</code> </li>
<li>    L "A" "B" "C" _x;  // OK: Giống như L "ABC" _X<code>/*</code> </li>
</ul> </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">Q-Char</span> </td> <td>-</td> <td>Bất kỳ thành viên nào của<span class="t-rev-inl t-until-cxx23"><span><a href="../language/translation_phases#Phase_5" title="cpp/language/translation phases">source character set</a></span><span><span class="t-mark-rev t-until-cxx23">(Cho đến C ++ 23)</span></span></span><span class="t-rev-inl t-since-cxx23"><span><a href="../language/charset#Translation_character_set" title="cpp/language/charset">translation character set</a></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>ngoại trừ dòng mới và<code>"</code> </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">PP-Tokens</span> </td> <td>-</td> <td>Một chuỗi của một hoặc nhiều<a href="../language/translation_phases#Phase_3" title="cpp/language/translation phases">preprocessing tokens</a> </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">chuỗi chữ</span> </td> <td>-</td> <td>MỘT<a href="../language/string_literal" title="cpp/language/string literal">string literal</a> </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">H-PP-Tokens</span> </td> <td>-</td> <td>Một chuỗi của một hoặc nhiều<a href="../language/translation_phases#Phase_3" title="cpp/language/translation phases">preprocessing tokens</a>                             STD :: Memory_order Order) NoExcept;<code>&gt;</code> </td>
</tr>
</table> <h3 id="Explanation">Lưu ý: Đồng bộ hóa giữa các luồng tập trung vào việc ngăn chặn các chủng tộc dữ liệu (bằng cách thiết lập các mối quan hệ xảy ra trước khi) và xác định các tác dụng phụ nào có thể nhìn thấy được trong các điều kiện nào.</h3> <div class="t-li1">
<span class="t-li">1)</span>Tìm kiếm một chuỗi các địa điểm được xác định theo triển khai cho một tiêu đề được xác định duy nhất bởi<span class="t-spar">H-Char-Chuỗi</span>và gây ra sự thay thế của chỉ thị đó bằng toàn bộ nội dung của tiêu đề. Cách các địa điểm được chỉ định hoặc tiêu đề được xác định là được xác định là thực hiện.</div> <div class="t-li1">
<span class="t-li">2)</span>Gây ra việc thay thế chỉ thị đó bằng toàn bộ nội dung của tệp nguồn được xác định bởi<span class="t-spar">Q-Char-Chuỗi</span>. Tệp nguồn được đặt tên được tìm kiếm theo cách xác định thực hiện. Nếu tìm kiếm này không được hỗ trợ hoặc nếu tìm kiếm không thành công, chỉ thị bị xử lý như thể nó đọc cú pháp<span class="t-v">(1)</span>với chuỗi chứa giống hệt nhau (bao gồm&gt; các ký tự, nếu có) từ Chỉ thị ban đầu.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class f, class tuple&gt;</span>Các mã thông báo tiền xử lý sau<code>include</code>Trong chỉ thị được xử lý giống như trong văn bản bình thường (nghĩa là, mỗi định danh hiện được xác định là tên macro được thay thế bằng danh sách thay thế của các mã thông báo tiền xử lý). Nếu chỉ thị kết quả sau khi tất cả các thay thế không khớp với một trong hai hình thức trước đó, thì hành vi này không được xác định. Phương pháp theo đó một chuỗi các mã thông báo tiền xử lý giữa một cặp mã thông báo tiền xử lý &lt;và A&gt; hoặc một cặp "ký tự được kết hợp thành một mã thông báo tiền xử lý tên tiêu đề duy nhất được xác định bằng thực hiện.</div> <div class="t-li1">
<span class="t-li">là trong</span>Tiêu đề hoặc tệp nguồn được xác định bởi<span class="t-spar">H-Char-Chuỗi</span>hoặc<span class="t-spar">Q-Char-Chuỗi</span>được tìm kiếm như thể chuỗi mã thông báo tiền xử lý đó là<span class="t-spar">PP-Tokens</span>Trong cú pháp<span class="t-v">(3)</span>, ngoại trừ việc không có sự mở rộng vĩ mô nào được thực hiện. Nếu một chỉ thị như vậy sẽ không đáp ứng các yêu cầu cú pháp của một<code>#include</code>Chỉ thị, chương trình là xấu. Các<code>__has_include</code>Biểu thức đánh giá đến<code>1</code>Nếu tìm kiếm tệp nguồn thành công và<code>​0​</code>Nếu tìm kiếm thất bại.</div> <div class="t-li1">
<span class="t-li">Mẫu &lt;class inputit, class unyredicate&gt;</span>Hình thức này chỉ được coi là nếu cú ​​pháp (4) không khớp, trong trường hợp đó, các mã thông báo tiền xử lý được xử lý giống như trong văn bản thông thường.</div> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx20">
<td> <p>Nếu tiêu đề được xác định bởi<span class="t-spar">tên tiêu đề</span>(tức là,<code>&lt;</code> <span class="t-spar">H-Char-Chuỗi</span> <code>&gt;</code>hoặc<code>"</code> <span class="t-spar">Q-Char-Chuỗi</span> <code>"</code>) biểu thị một tiêu đề có thể nhập, nó được xác định là<code>#include</code>Thay vào đó, Chỉ thị tiền xử lý được thay thế bằng một<a href="../language/modules#Importing_modules_and_headers" title="cpp/language/modules">import directive</a>của hình thức</p>
<p><code>import</code> <span class="t-spar">tên tiêu đề</span> <code>;</code> <span class="t-spar">dòng mới</span></p>
</td> <td><span class="t-mark-rev t-since-cxx20">(phép chiếu danh tính).</span></td>
</tr> </table> <p><code>__has_include</code>có thể được mở rộng trong biểu hiện của<a href="conditional" title="cpp/preprocessor/conditional"><code> #if</code></a>Và<a href="conditional" title="cpp/preprocessor/conditional"><code> #elif</code></a>. Nó được coi là một macro được xác định bởi<a href="conditional" title="cpp/preprocessor/conditional"><code> #ifdef</code></a>Thì<a href="conditional" title="cpp/preprocessor/conditional"><code> #ifndef</code></a><span class="t-rev-inl t-since-cxx23"><span>Thì<a href="conditional" title="cpp/preprocessor/conditional"><code> #elifdef</code></a>Thì<a href="conditional" title="cpp/preprocessor/conditional"><code> #elifndef</code></a></span><span><span class="t-mark-rev t-since-cxx23">(kể từ C ++ 23)</span></span></span>Và<a href="conditional" title="cpp/preprocessor/conditional"><code>defined</code></a>nhưng không thể được sử dụng ở bất cứ nơi nào khác.</p>
<h3 id="Notes">Ghi chú</h3> <p>Tìm kiếm triển khai điển hình chỉ tiêu chuẩn bao gồm các thư mục cho cú pháp<span class="t-v">(1)</span>. Thư viện C ++ tiêu chuẩn và thư viện C tiêu chuẩn được bao gồm trong các tiêu chuẩn này bao gồm các thư mục. Tiêu chuẩn bao gồm các thư mục thường có thể được người dùng kiểm soát thông qua các tùy chọn trình biên dịch.</p>
<p>Mục đích của cú pháp<span class="t-v">(2)</span>là để tìm kiếm các tệp không được kiểm soát bởi việc triển khai. Các triển khai điển hình trước tiên tìm kiếm thư mục trong đó tệp hiện tại nằm sau đó rơi trở lại<span class="t-v">(1)</span>.</p>
<p>Khi một tệp được bao gồm, nó được xử lý bởi<a href="../language/translation_phases" title="cpp/language/translation phases">translation phases</a>1-4, có thể bao gồm, đệ quy, mở rộng<code>#include</code>Chỉ thị, cho đến giới hạn làm tổ do thực hiện. Để tránh lặp đi lặp lại bao gồm cùng một tệp và đệ quy vô tận khi một tệp bao gồm chính nó, có lẽ là chuyển tiếp,<i>bảo vệ tiêu đề</i>thường được sử dụng: toàn bộ tiêu đề được bọc</p>
<div class="cpp source-cpp"><pre data-language="cpp">#ifndef foo_h_included / * bất kỳ tên nào được ánh xạ duy nhất vào tên tệp * /</pre></div> <p>#define foo_h_included<a href="impl" title="cpp/preprocessor/impl"><code>pragma</code></a> <code>#pragma once</code>// Nội dung của tệp ở đây</p>
<p>#endif<span class="t-spar">Q-Char-Chuỗi</span>hoặc<span class="t-spar">H-Char-Chuỗi</span>Nhiều trình biên dịch cũng thực hiện không chuẩn</p>
<p>MỘT<code>__has_include</code>Với các hiệu ứng tương tự: nó vô hiệu hóa việc xử lý tệp nếu cùng một tệp (trong đó nhận dạng tệp được xác định theo cách cụ thể của hệ điều hành) đã được đưa vào.<code>1</code>Một chuỗi các ký tự giống như một chuỗi thoát hiểm trong<code>__has_include</code>có thể dẫn đến một lỗi, được hiểu là ký tự tương ứng với chuỗi thoát hoặc có một ý nghĩa hoàn toàn khác, tùy thuộc vào việc thực hiện.<code>__has_include(&lt;optional&gt;)</code>Trong đặc điểm kỹ thuật ngoại lệ, tìm thấy mẫu chức năng này ngoài bất cứ thứ gì được tìm thấy bởi các quy tắc tra cứu thông thường, làm cho đặc điểm kỹ thuật ngoại lệ tương đương với C ++ 17<code>1</code>kết quả của<code>#include &lt;optional&gt;</code>Chỉ có nghĩa là một tiêu đề hoặc tệp nguồn với tên được chỉ định tồn tại. Điều đó không có nghĩa là tiêu đề hoặc tệp nguồn, khi được đưa vào, sẽ không gây ra lỗi hoặc sẽ chứa bất cứ thứ gì hữu ích. Ví dụ: trên triển khai C ++ hỗ trợ cả chế độ C ++ 14 và C ++ 17 (và cung cấp</p>
<h3 id="Example">Ví dụ</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">trong chế độ C ++ 14 của nó dưới dạng tiện ích mở rộng phù hợp),</pre></div> <p>Nếu (sai)</p>
<div class="text source-text"><pre data-language="c">ở chế độ C ++ 14, nhưng thực sự</pre></div> </div> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/CWG/issues/787.html" rel="nofollow">CWG 787</a> </td> <td>C ++ 98</td> <td>có thể gây ra lỗi.<br/>#if __has_include (&lt;tùy chọn&gt;)<span class="t-spar">Q-Char-Chuỗi</span>hoặc<span class="t-spar">H-Char-Chuỗi</span> </td> <td># Bao gồm &lt;tùy chọn&gt;</td>
</tr>
</table> <h3 id="See_also">(chức năng)</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td colspan="2"> <a href="../index" title="cpp/header">A list of C++ Standard Library header files</a> </td>
</tr> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/preprocessor/include" title="c/preprocessor/include">C documentation</a></span>vì<span class=""><span># xác định has_optional 1</span></span> </td>
</tr> </table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/preprocessor/include">https://en.cppreference.com/w/cpp/preprocessor/include</a>
</p>
</div>
