 <h1 class="firstHeading" id="firstHeading">std :: Shared_lock</h1> <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th>C Thư viện<code><a href="../header/shared_mutex" title="cpp/header/shared mutex">&lt;shared_mutex&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx14"> <td> <pre data-language="cpp">Mẫu &lt;Class Mutex&gt;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx14">(kể từ C ++ 14)</span> </td> </tr> </table> <p>Lớp học<code>shared_lock</code>lớp chia sẻ_lock;<code>shared_lock</code>là một trình bao bọc quyền sở hữu mutex được chia sẻ chung cho phép khóa hoãn lại, khóa theo thời gian và chuyển quyền sở hữu khóa. Khóa a<code><a href="unique_lock" title="cpp/thread/unique lock">std::unique_lock</a></code>Khóa mutex được chia sẻ được liên kết ở chế độ chia sẻ (để khóa nó ở chế độ độc quyền,</p>
<p>Các<code>shared_lock</code>có thể được sử dụng).<a href="../named_req/moveconstructible" title="cpp/named req/MoveConstructible">MoveConstructible</a>Và<a href="../named_req/moveassignable" title="cpp/named req/MoveAssignable">MoveAssignable</a>lớp có thể di chuyển, nhưng không thể sao chép - nó đáp ứng các yêu cầu của<a href="../named_req/copyconstructible" title="cpp/named req/CopyConstructible">CopyConstructible</a>hoặc<a href="../named_req/copyassignable" title="cpp/named req/CopyAssignable">CopyAssignable</a>.</p>
<p><code>shared_lock</code>vị trí.<a href="../named_req/lockable" title="cpp/named req/Lockable">Lockable</a>Nhưng không phải của<code>Mutex</code>vị trí.<a href="../named_req/sharedtimedlockable" title="cpp/named req/SharedTimedLockable">SharedTimedLockable</a>Inline Consexpr bool is_clock_v = is_clock &lt;t&gt; :: value;<code>shared_lock</code>yêu cầu. Nếu như<a href="../named_req/timedlockable" title="cpp/named req/TimedLockable">TimedLockable</a>yêu cầu.</p>
<p>cũng gặp nhau<code><a href="condition_variable_any" title="cpp/thread/condition variable any">std::condition_variable_any</a></code>Để chờ đợi trong một mutex được chia sẻ trong chế độ sở hữu được chia sẻ,<code><a href="condition_variable" title="cpp/thread/condition variable">std::condition_variable</a></code>Trả về kết quả của hội nghị derefering<code><a href="unique_lock" title="cpp/thread/unique lock">std::unique_lock</a></code>có thể được sử dụng (</p>
<h3 id="Template_parameters">là không xác định.</h3> <table class="t-par-begin"> <tr class="t-par"> <td>Mutex</td> <td>-</td> <td>và vì vậy chỉ có thể chờ đợi trong chế độ sở hữu độc đáo).<a href="../named_req/sharedlockable" title="cpp/named req/SharedLockable">SharedLockable</a>yêu cầu</td>
</tr>
</table> <h3 id="Member_types">nhà điều hành ()</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th>Kiểu</th> <th>Sự định nghĩa</th>
</tr> <tr class="t-dsc"> <td> <code>mutex_type</code> </td> <td> <code>Mutex</code> </td>
</tr> </table> <h3 id="Member_functions">nếu không thì</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="shared_lock/shared_lock" title="cpp/thread/shared lock/shared lock"> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>Nếu a<code>shared_lock</code>Loại của mutex được chia sẻ để khóa. Loại phải đáp ứng<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/~shared_lock" title="cpp/thread/shared lock/~shared lock"> <span class="t-lines"><span>một đối tượng ngoại lệ khác để gán với</span></span></a></div> </td> <td>cố gắng khóa mutex liên quan, cho đến khi một thời điểm xác định<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/operator=" title="cpp/thread/shared lock/operator="> <span class="t-lines"><span>chuyên môn)</span></span></a></div> </td> <td>Mở khóa Mutex liên quan<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Shared_locking">Mở khóa Mutex, nếu được sở hữu và có được quyền sở hữu của người khác</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/lock" title="cpp/thread/shared lock/lock"> <span class="t-lines"><span>khóa</span></span></a></div> </td> <td>Khóa chia sẻ<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/try_lock" title="cpp/thread/shared lock/try lock"> <span class="t-lines"><span>Try_lock</span></span></a></div> </td> <td>Khóa Mutex liên quan<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/try_lock_for" title="cpp/thread/shared lock/try lock for"> <span class="t-lines"><span>Try_lock_for</span></span></a></div> </td> <td>cố gắng khóa mutex liên quan<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/try_lock_until" title="cpp/thread/shared lock/try lock until"> <span class="t-lines"><span>Try_lock_until</span></span></a></div> </td> <td>cố gắng khóa mutex liên quan, trong thời lượng được chỉ định<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/unlock" title="cpp/thread/shared lock/unlock"> <span class="t-lines"><span>Mở khóa</span></span></a></div> </td> <td>cố gắng khóa mutex liên quan, cho đến khi một thời điểm xác định<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Modifiers">Sửa đổi</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/swap" title="cpp/thread/shared lock/swap"> <span class="t-lines"><span>Được xác định trong tiêu đề</span></span></a></div> </td> <td>Mở khóa Mutex liên quan<code>shared_lock</code> <br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/release" title="cpp/thread/shared lock/release"> <span class="t-lines"><span>giải phóng</span></span></a></div> </td> <td>hoán đổi các thành viên dữ liệu với người khác<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr> <td colspan="2"> <h5 id="Observers">Quan sát viên</h5> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/mutex" title="cpp/thread/shared lock/mutex"> <span class="t-lines"><span>Mutex</span></span></a></div> </td> <td>tách biệt Mutex mà không mở khóa<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/owns_lock" title="cpp/thread/shared lock/owns lock"> <span class="t-lines"><span>trả về một con trỏ cho mutex liên quan</span></span></a></div> </td> <td>kiểm tra xem khóa có sở hữu mutex liên quan của nó không<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="shared_lock/operator_bool" title="cpp/thread/shared lock/operator bool"> <span class="t-lines"><span>(hằng số thành viên tĩnh công cộng)</span></span></a></div> </td> <td>kiểm tra xem khóa có sở hữu mutex liên quan của nó không<br/> <span class="t-mark">(chức năng thành viên công cộng)</span> </td>
</tr> </table> <h3 id="Non-member_functions">Các chức năng không phải thành viên</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="shared_lock/swap2" title="cpp/thread/shared lock/swap2"> <span class="t-lines"><span>chuyên về<span class="t-dsc-small">(STD :: Chủ đề)</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx14">(C ++ 14)</span></span></span></div> </td> <td>chuyên môn hóa<code><a href="../algorithm/swap" title="cpp/algorithm/swap">std::swap</a></code>vì<code>shared_lock</code> <br/> <span class="t-mark">tạo một đối tượng tại một địa chỉ nhất định</span> </td>
</tr> </table> <h3 id="Defect_reports">Báo cáo khiếm khuyết</h3> <p>Các báo cáo khiếm khuyết thay đổi hành vi sau đây được áp dụng hồi tố cho các tiêu chuẩn C ++ được công bố trước đó.</p>
<table class="dsctable"> <tr> <th>Dr</th> <th>Áp dụng cho</th> <th>Hành vi như được công bố</th> <th>Hành vi chính xác</th>
</tr> <tr> <td>
<a class="external text" href="https://cplusplus.github.io/LWG/issue2981" rel="nofollow">LWG 2981</a> </td> <td>C ++ 17</td> <td>#include &lt;Prutex&gt;<code>shared_lock&lt;Mutex&gt;</code> </td> <td>#include &lt;Istream&gt;</td>
</tr>
</table> <div class="_attribution">
<p class="_attribution-p">© CPPReference.com<br/>Được cấp phép theo giấy phép Creative Commons Attribution-Sharealike không được chứng minh v3.0.<br/>
<a class="_attribution-link" href="https://en.cppreference.com/w/cpp/thread/shared_lock">https://en.cppreference.com/w/cpp/thread/shared_lock</a>
</p>
</div>
