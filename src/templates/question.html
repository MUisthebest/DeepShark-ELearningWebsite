<link rel="stylesheet" href="../static/css/question.css">
<a class="title" href="/"><h2>DEEPSHARK</h2></a>

<section class="search-section">
    <div class="search-container">
        <!-- Panel bên trái chứa các tab -->
        <div class="search-tabs-panel">
            <div class="search-tabs">
                <div class="tab active" data-tab="stackoverflow">StackOverflow</div>
                <div class="tab" data-tab="axis">Axis</div>
            </div>
        </div>

        <!-- Panel bên phải chứa các kết quả và ô tìm kiếm -->
        <div class="search-results-panel">
            <!-- Thêm ô tìm kiếm vào đây -->
            <form id="search-form" method="POST" action="/api/ai_models/search">
                <input type="text" id="search-query" name="query" placeholder="Nhập câu hỏi tìm kiếm..." required>
                <button type="submit">Tìm kiếm</button>
            </form>

            <div id="search-results"></div>

        </div>
    </div>
</section>

<script>
// Lắng nghe sự kiện gửi form tìm kiếm
document.getElementById('search-form').addEventListener('submit', function(event) {
    event.preventDefault();  // Ngăn gửi form mặc định

    const query = document.getElementById('search-query').value;

    fetch('/api/ai_models/search', {
        method: 'POST',
        body: new URLSearchParams({ query: query }),
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.papers) {
            const resultsDiv = document.getElementById('search-results');
            resultsDiv.innerHTML = '';  // Xóa kết quả cũ

            data.papers.forEach(paper => {
                const paperElement = document.createElement('div');
                paperElement.innerHTML = `
                    <h3><a href="${paper.link}" target="_blank">${paper.title}</a></h3>
                    <p>${paper.abstract}</p>
                `;
                resultsDiv.appendChild(paperElement);
            });
        } else {
            alert("Không tìm thấy bài báo nào.");
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert("Có lỗi xảy ra, vui lòng thử lại.");
    });
});
</script>

<!-- Chèn tệp JavaScript vào cuối body -->
<script src="../static/js/question.js"></script>

</body>
